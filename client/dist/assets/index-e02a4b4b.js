var MA=Object.defineProperty;var NA=(t,e,r)=>e in t?MA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Oa=(t,e,r)=>(NA(t,typeof e!="symbol"?e+"":e,r),r);function DA(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function IA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var xl={},LA={get exports(){return xl},set exports(t){xl=t}},kf={},ge={},BA={get exports(){return ge},set exports(t){ge=t}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xl=Symbol.for("react.element"),FA=Symbol.for("react.portal"),jA=Symbol.for("react.fragment"),$A=Symbol.for("react.strict_mode"),UA=Symbol.for("react.profiler"),qA=Symbol.for("react.provider"),zA=Symbol.for("react.context"),HA=Symbol.for("react.forward_ref"),VA=Symbol.for("react.suspense"),KA=Symbol.for("react.memo"),WA=Symbol.for("react.lazy"),p0=Symbol.iterator;function GA(t){return t===null||typeof t!="object"?null:(t=p0&&t[p0]||t["@@iterator"],typeof t=="function"?t:null)}var ob={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sb=Object.assign,ab={};function wa(t,e,r){this.props=t,this.context=e,this.refs=ab,this.updater=r||ob}wa.prototype.isReactComponent={};wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lb(){}lb.prototype=wa.prototype;function dg(t,e,r){this.props=t,this.context=e,this.refs=ab,this.updater=r||ob}var hg=dg.prototype=new lb;hg.constructor=dg;sb(hg,wa.prototype);hg.isPureReactComponent=!0;var m0=Array.isArray,cb=Object.prototype.hasOwnProperty,pg={current:null},ub={key:!0,ref:!0,__self:!0,__source:!0};function fb(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)cb.call(e,n)&&!ub.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Xl,type:t,key:o,ref:s,props:i,_owner:pg.current}}function QA(t,e){return{$$typeof:Xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xl}function JA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var g0=/\/+/g;function sh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JA(""+t.key):e.toString(36)}function lu(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Xl:case FA:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+sh(s,0):n,m0(i)?(r="",t!=null&&(r=t.replace(g0,"$&/")+"/"),lu(i,e,r,"",function(l){return l})):i!=null&&(mg(i)&&(i=QA(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(g0,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",m0(t))for(var a=0;a<t.length;a++){o=t[a];var u=n+sh(o,a);s+=lu(o,e,r,u,i)}else if(u=GA(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=n+sh(o,a++),s+=lu(o,e,r,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ec(t,e,r){if(t==null)return t;var n=[],i=0;return lu(t,n,"","",function(o){return e.call(r,o,i++)}),n}function YA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xr={current:null},cu={transition:null},XA={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:cu,ReactCurrentOwner:pg};We.Children={map:Ec,forEach:function(t,e,r){Ec(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ec(t,function(){e++}),e},toArray:function(t){return Ec(t,function(e){return e})||[]},only:function(t){if(!mg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};We.Component=wa;We.Fragment=jA;We.Profiler=UA;We.PureComponent=dg;We.StrictMode=$A;We.Suspense=VA;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XA;We.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=sb({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=pg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)cb.call(e,u)&&!ub.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:Xl,type:t.type,key:i,ref:o,props:n,_owner:s}};We.createContext=function(t){return t={$$typeof:zA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qA,_context:t},t.Consumer=t};We.createElement=fb;We.createFactory=function(t){var e=fb.bind(null,t);return e.type=t,e};We.createRef=function(){return{current:null}};We.forwardRef=function(t){return{$$typeof:HA,render:t}};We.isValidElement=mg;We.lazy=function(t){return{$$typeof:WA,_payload:{_status:-1,_result:t},_init:YA}};We.memo=function(t,e){return{$$typeof:KA,type:t,compare:e===void 0?null:e}};We.startTransition=function(t){var e=cu.transition;cu.transition={};try{t()}finally{cu.transition=e}};We.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};We.useCallback=function(t,e){return xr.current.useCallback(t,e)};We.useContext=function(t){return xr.current.useContext(t)};We.useDebugValue=function(){};We.useDeferredValue=function(t){return xr.current.useDeferredValue(t)};We.useEffect=function(t,e){return xr.current.useEffect(t,e)};We.useId=function(){return xr.current.useId()};We.useImperativeHandle=function(t,e,r){return xr.current.useImperativeHandle(t,e,r)};We.useInsertionEffect=function(t,e){return xr.current.useInsertionEffect(t,e)};We.useLayoutEffect=function(t,e){return xr.current.useLayoutEffect(t,e)};We.useMemo=function(t,e){return xr.current.useMemo(t,e)};We.useReducer=function(t,e,r){return xr.current.useReducer(t,e,r)};We.useRef=function(t){return xr.current.useRef(t)};We.useState=function(t){return xr.current.useState(t)};We.useSyncExternalStore=function(t,e,r){return xr.current.useSyncExternalStore(t,e,r)};We.useTransition=function(){return xr.current.useTransition()};We.version="18.2.0";(function(t){t.exports=We})(BA);const On=Pf(ge),Mp=DA({__proto__:null,default:On},[ge]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA=ge,eP=Symbol.for("react.element"),tP=Symbol.for("react.fragment"),rP=Object.prototype.hasOwnProperty,nP=ZA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iP={key:!0,ref:!0,__self:!0,__source:!0};function db(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)rP.call(e,n)&&!iP.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:eP,type:t,key:o,ref:s,props:i,_owner:nP.current}}kf.Fragment=tP;kf.jsx=db;kf.jsxs=db;(function(t){t.exports=kf})(LA);const hb=xl.Fragment,_e=xl.jsx,vt=xl.jsxs;var Np={},Dp={},oP={get exports(){return Dp},set exports(t){Dp=t}},Kr={},Ip={},sP={get exports(){return Ip},set exports(t){Ip=t}},pb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,M){var I=L.length;L.push(M);e:for(;0<I;){var x=I-1>>>1,w=L[x];if(0<i(w,M))L[x]=M,L[I]=w,I=x;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var M=L[0],I=L.pop();if(I!==M){L[0]=I;e:for(var x=0,w=L.length,T=w>>>1;x<T;){var H=2*(x+1)-1,A=L[H],k=H+1,q=L[k];if(0>i(A,I))k<w&&0>i(q,A)?(L[x]=q,L[k]=I,x=k):(L[x]=A,L[H]=I,x=H);else if(k<w&&0>i(q,I))L[x]=q,L[k]=I,x=k;else break e}}return M}function i(L,M){var I=L.sortIndex-M.sortIndex;return I!==0?I:L.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var M=r(l);M!==null;){if(M.callback===null)n(l);else if(M.startTime<=L)n(l),M.sortIndex=M.expirationTime,e(u,M);else break;M=r(l)}}function b(L){if(g=!1,S(L),!p)if(r(u)!==null)p=!0,C(R);else{var M=r(l);M!==null&&B(b,M.startTime-L)}}function R(L,M){p=!1,g&&(g=!1,m(N),N=-1),h=!0;var I=d;try{for(S(M),f=r(u);f!==null&&(!(f.expirationTime>M)||L&&!O());){var x=f.callback;if(typeof x=="function"){f.callback=null,d=f.priorityLevel;var w=x(f.expirationTime<=M);M=t.unstable_now(),typeof w=="function"?f.callback=w:f===r(u)&&n(u),S(M)}else n(u);f=r(u)}if(f!==null)var T=!0;else{var H=r(l);H!==null&&B(b,H.startTime-M),T=!1}return T}finally{f=null,d=I,h=!1}}var j=!1,D=null,N=-1,U=5,F=-1;function O(){return!(t.unstable_now()-F<U)}function $(){if(D!==null){var L=t.unstable_now();F=L;var M=!0;try{M=D(!0,L)}finally{M?P():(j=!1,D=null)}}else j=!1}var P;if(typeof v=="function")P=function(){v($)};else if(typeof MessageChannel<"u"){var y=new MessageChannel,E=y.port2;y.port1.onmessage=$,P=function(){E.postMessage(null)}}else P=function(){_($,0)};function C(L){D=L,j||(j=!0,P())}function B(L,M){N=_(function(){L(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,C(R))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(L){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var I=d;d=M;try{return L()}finally{d=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,M){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var I=d;d=L;try{return M()}finally{d=I}},t.unstable_scheduleCallback=function(L,M,I){var x=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?x+I:x):I=x,L){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=I+w,L={id:c++,callback:M,priorityLevel:L,startTime:I,expirationTime:w,sortIndex:-1},I>x?(L.sortIndex=I,e(l,L),r(u)===null&&L===r(l)&&(g?(m(N),N=-1):g=!0,B(b,I-x))):(L.sortIndex=w,e(u,L),p||h||(p=!0,C(R))),L},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(L){var M=d;return function(){var I=d;d=M;try{return L.apply(this,arguments)}finally{d=I}}}})(pb);(function(t){t.exports=pb})(sP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=ge,Vr=Ip;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gb=new Set,Al={};function rs(t,e){ta(t,e),ta(t+"Capture",e)}function ta(t,e){for(Al[t]=e,t=0;t<e.length;t++)gb.add(e[t])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=Object.prototype.hasOwnProperty,aP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v0={},y0={};function lP(t){return Lp.call(y0,t)?!0:Lp.call(v0,t)?!1:aP.test(t)?y0[t]=!0:(v0[t]=!0,!1)}function cP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uP(t,e,r,n){if(e===null||typeof e>"u"||cP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ar(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new Ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new Ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new Ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new Ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new Ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new Ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new Ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new Ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new Ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var gg=/[\-:]([a-z])/g;function vg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gg,vg);ur[e]=new Ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gg,vg);ur[e]=new Ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gg,vg);ur[e]=new Ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new Ar(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new Ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function yg(t,e,r,n){var i=ur.hasOwnProperty(e)?ur[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uP(e,r,i,n)&&(r=null),n||i===null?lP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ni=mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),Bp=Symbol.for("react.profiler"),vb=Symbol.for("react.provider"),yb=Symbol.for("react.context"),_g=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),bg=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),wb=Symbol.for("react.offscreen"),w0=Symbol.iterator;function Ma(t){return t===null||typeof t!="object"?null:(t=w0&&t[w0]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,ah;function el(t){if(ah===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ah=e&&e[1]||""}return`
`+ah+t}var lh=!1;function ch(t,e){if(!t||lh)return"";lh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{lh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?el(t):""}function fP(t){switch(t.tag){case 5:return el(t.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return t=ch(t.type,!1),t;case 11:return t=ch(t.type.render,!1),t;case 1:return t=ch(t.type,!0),t;default:return""}}function $p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case Ts:return"Portal";case Bp:return"Profiler";case wg:return"StrictMode";case Fp:return"Suspense";case jp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yb:return(t.displayName||"Context")+".Consumer";case vb:return(t._context.displayName||"Context")+".Provider";case _g:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bg:return e=t.displayName||null,e!==null?e:$p(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return $p(t(e))}catch{}}return null}function dP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $p(e);case 8:return e===wg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _b(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hP(t){var e=_b(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xc(t){t._valueTracker||(t._valueTracker=hP(t))}function bb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=_b(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Up(t,e){var r=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function _0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=wo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sb(t,e){e=e.checked,e!=null&&yg(t,"checked",e,!1)}function qp(t,e){Sb(t,e);var r=wo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zp(t,e.type,r):e.hasOwnProperty("defaultValue")&&zp(t,e.type,wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zp(t,e,r){(e!=="number"||Bu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var tl=Array.isArray;function Hs(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+wo(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(de(92));if(tl(r)){if(1<r.length)throw Error(de(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:wo(r)}}function Eb(t,e){var r=wo(e.value),n=wo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function E0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ac,xb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pP=["Webkit","ms","Moz","O"];Object.keys(ll).forEach(function(t){pP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ll[e]=ll[t]})});function Ab(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ll.hasOwnProperty(t)&&ll[t]?(""+e).trim():e+"px"}function Pb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ab(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var mP=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kp(t,e){if(e){if(mP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function Wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=null;function Sg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qp=null,Vs=null,Ks=null;function R0(t){if(t=tc(t)){if(typeof Qp!="function")throw Error(de(280));var e=t.stateNode;e&&(e=Nf(e),Qp(t.stateNode,t.type,e))}}function kb(t){Vs?Ks?Ks.push(t):Ks=[t]:Vs=t}function Tb(){if(Vs){var t=Vs,e=Ks;if(Ks=Vs=null,R0(t),e)for(t=0;t<e.length;t++)R0(e[t])}}function Cb(t,e){return t(e)}function Ob(){}var uh=!1;function Mb(t,e,r){if(uh)return t(e,r);uh=!0;try{return Cb(t,e,r)}finally{uh=!1,(Vs!==null||Ks!==null)&&(Ob(),Tb())}}function kl(t,e){var r=t.stateNode;if(r===null)return null;var n=Nf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(de(231,e,typeof r));return r}var Jp=!1;if(xi)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){Jp=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{Jp=!1}function gP(t,e,r,n,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(c){this.onError(c)}}var cl=!1,Fu=null,ju=!1,Yp=null,vP={onError:function(t){cl=!0,Fu=t}};function yP(t,e,r,n,i,o,s,a,u){cl=!1,Fu=null,gP.apply(vP,arguments)}function wP(t,e,r,n,i,o,s,a,u){if(yP.apply(this,arguments),cl){if(cl){var l=Fu;cl=!1,Fu=null}else throw Error(de(198));ju||(ju=!0,Yp=l)}}function ns(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Nb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x0(t){if(ns(t)!==t)throw Error(de(188))}function _P(t){var e=t.alternate;if(!e){if(e=ns(t),e===null)throw Error(de(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return x0(i),t;if(o===n)return x0(i),e;o=o.sibling}throw Error(de(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(de(189))}}if(r.alternate!==n)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?t:e}function Db(t){return t=_P(t),t!==null?Ib(t):null}function Ib(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ib(t);if(e!==null)return e;t=t.sibling}return null}var Lb=Vr.unstable_scheduleCallback,A0=Vr.unstable_cancelCallback,bP=Vr.unstable_shouldYield,SP=Vr.unstable_requestPaint,Lt=Vr.unstable_now,EP=Vr.unstable_getCurrentPriorityLevel,Eg=Vr.unstable_ImmediatePriority,Bb=Vr.unstable_UserBlockingPriority,$u=Vr.unstable_NormalPriority,RP=Vr.unstable_LowPriority,Fb=Vr.unstable_IdlePriority,Tf=null,Yn=null;function xP(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Tf,t,void 0,(t.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:kP,AP=Math.log,PP=Math.LN2;function kP(t){return t>>>=0,t===0?32:31-(AP(t)/PP|0)|0}var Pc=64,kc=4194304;function rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uu(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=rl(a):(o&=s,o!==0&&(n=rl(o)))}else s=r&~i,s!==0?n=rl(s):o!==0&&(n=rl(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Tn(e),i=1<<r,n|=t[r],e&=~i;return n}function TP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Tn(o),a=1<<s,u=i[s];u===-1?(!(a&r)||a&n)&&(i[s]=TP(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function Xp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jb(){var t=Pc;return Pc<<=1,!(Pc&4194240)&&(Pc=64),t}function fh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Zl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tn(e),t[e]=r}function OP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Tn(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function Rg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Tn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ct=0;function $b(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ub,xg,qb,zb,Hb,Zp=!1,Tc=[],so=null,ao=null,lo=null,Tl=new Map,Cl=new Map,to=[],MP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P0(t,e){switch(t){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(e.pointerId)}}function Da(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=tc(e),e!==null&&xg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NP(t,e,r,n,i){switch(e){case"focusin":return so=Da(so,t,e,r,n,i),!0;case"dragenter":return ao=Da(ao,t,e,r,n,i),!0;case"mouseover":return lo=Da(lo,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Tl.set(o,Da(Tl.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Cl.set(o,Da(Cl.get(o)||null,t,e,r,n,i)),!0}return!1}function Vb(t){var e=Lo(t.target);if(e!==null){var r=ns(e);if(r!==null){if(e=r.tag,e===13){if(e=Nb(r),e!==null){t.blockedOn=e,Hb(t.priority,function(){qb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Gp=n,r.target.dispatchEvent(n),Gp=null}else return e=tc(r),e!==null&&xg(e),t.blockedOn=r,!1;e.shift()}return!0}function k0(t,e,r){uu(t)&&r.delete(e)}function DP(){Zp=!1,so!==null&&uu(so)&&(so=null),ao!==null&&uu(ao)&&(ao=null),lo!==null&&uu(lo)&&(lo=null),Tl.forEach(k0),Cl.forEach(k0)}function Ia(t,e){t.blockedOn===e&&(t.blockedOn=null,Zp||(Zp=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,DP)))}function Ol(t){function e(i){return Ia(i,t)}if(0<Tc.length){Ia(Tc[0],t);for(var r=1;r<Tc.length;r++){var n=Tc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(so!==null&&Ia(so,t),ao!==null&&Ia(ao,t),lo!==null&&Ia(lo,t),Tl.forEach(e),Cl.forEach(e),r=0;r<to.length;r++)n=to[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<to.length&&(r=to[0],r.blockedOn===null);)Vb(r),r.blockedOn===null&&to.shift()}var Ws=Ni.ReactCurrentBatchConfig,qu=!0;function IP(t,e,r,n){var i=ct,o=Ws.transition;Ws.transition=null;try{ct=1,Ag(t,e,r,n)}finally{ct=i,Ws.transition=o}}function LP(t,e,r,n){var i=ct,o=Ws.transition;Ws.transition=null;try{ct=4,Ag(t,e,r,n)}finally{ct=i,Ws.transition=o}}function Ag(t,e,r,n){if(qu){var i=em(t,e,r,n);if(i===null)bh(t,e,n,zu,r),P0(t,n);else if(NP(i,t,e,r,n))n.stopPropagation();else if(P0(t,n),e&4&&-1<MP.indexOf(t)){for(;i!==null;){var o=tc(i);if(o!==null&&Ub(o),o=em(t,e,r,n),o===null&&bh(t,e,n,zu,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else bh(t,e,n,null,r)}}var zu=null;function em(t,e,r,n){if(zu=null,t=Sg(n),t=Lo(t),t!==null)if(e=ns(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Nb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zu=t,null}function Kb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EP()){case Eg:return 1;case Bb:return 4;case $u:case RP:return 16;case Fb:return 536870912;default:return 16}default:return 16}}var no=null,Pg=null,fu=null;function Wb(){if(fu)return fu;var t,e=Pg,r=e.length,n,i="value"in no?no.value:no.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return fu=i.slice(t,1<n?1-n:void 0)}function du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cc(){return!0}function T0(){return!1}function Wr(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Cc:T0,this.isPropagationStopped=T0,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),e}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kg=Wr(_a),ec=Mt({},_a,{view:0,detail:0}),BP=Wr(ec),dh,hh,La,Cf=Mt({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==La&&(La&&t.type==="mousemove"?(dh=t.screenX-La.screenX,hh=t.screenY-La.screenY):hh=dh=0,La=t),dh)},movementY:function(t){return"movementY"in t?t.movementY:hh}}),C0=Wr(Cf),FP=Mt({},Cf,{dataTransfer:0}),jP=Wr(FP),$P=Mt({},ec,{relatedTarget:0}),ph=Wr($P),UP=Mt({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),qP=Wr(UP),zP=Mt({},_a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HP=Wr(zP),VP=Mt({},_a,{data:0}),O0=Wr(VP),KP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GP[t])?!!e[t]:!1}function Tg(){return QP}var JP=Mt({},ec,{key:function(t){if(t.key){var e=KP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tg,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YP=Wr(JP),XP=Mt({},Cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=Wr(XP),ZP=Mt({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tg}),ek=Wr(ZP),tk=Mt({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),rk=Wr(tk),nk=Mt({},Cf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ik=Wr(nk),ok=[9,13,27,32],Cg=xi&&"CompositionEvent"in window,ul=null;xi&&"documentMode"in document&&(ul=document.documentMode);var sk=xi&&"TextEvent"in window&&!ul,Gb=xi&&(!Cg||ul&&8<ul&&11>=ul),N0=String.fromCharCode(32),D0=!1;function Qb(t,e){switch(t){case"keyup":return ok.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function ak(t,e){switch(t){case"compositionend":return Jb(e);case"keypress":return e.which!==32?null:(D0=!0,N0);case"textInput":return t=e.data,t===N0&&D0?null:t;default:return null}}function lk(t,e){if(Os)return t==="compositionend"||!Cg&&Qb(t,e)?(t=Wb(),fu=Pg=no=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gb&&e.locale!=="ko"?null:e.data;default:return null}}var ck={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ck[t.type]:e==="textarea"}function Yb(t,e,r,n){kb(n),e=Hu(e,"onChange"),0<e.length&&(r=new kg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var fl=null,Ml=null;function uk(t){lS(t,0)}function Of(t){var e=Ds(t);if(bb(e))return t}function fk(t,e){if(t==="change")return e}var Xb=!1;if(xi){var mh;if(xi){var gh="oninput"in document;if(!gh){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),gh=typeof L0.oninput=="function"}mh=gh}else mh=!1;Xb=mh&&(!document.documentMode||9<document.documentMode)}function B0(){fl&&(fl.detachEvent("onpropertychange",Zb),Ml=fl=null)}function Zb(t){if(t.propertyName==="value"&&Of(Ml)){var e=[];Yb(e,Ml,t,Sg(t)),Mb(uk,e)}}function dk(t,e,r){t==="focusin"?(B0(),fl=e,Ml=r,fl.attachEvent("onpropertychange",Zb)):t==="focusout"&&B0()}function hk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Of(Ml)}function pk(t,e){if(t==="click")return Of(e)}function mk(t,e){if(t==="input"||t==="change")return Of(e)}function gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:gk;function Nl(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Lp.call(e,i)||!Mn(t[i],e[i]))return!1}return!0}function F0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j0(t,e){var r=F0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=F0(r)}}function eS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tS(){for(var t=window,e=Bu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Bu(t.document)}return e}function Og(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vk(t){var e=tS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&eS(r.ownerDocument.documentElement,r)){if(n!==null&&Og(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=j0(r,o);var s=j0(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yk=xi&&"documentMode"in document&&11>=document.documentMode,Ms=null,tm=null,dl=null,rm=!1;function $0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rm||Ms==null||Ms!==Bu(n)||(n=Ms,"selectionStart"in n&&Og(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dl&&Nl(dl,n)||(dl=n,n=Hu(tm,"onSelect"),0<n.length&&(e=new kg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ms)))}function Oc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ns={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},vh={},rS={};xi&&(rS=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Mf(t){if(vh[t])return vh[t];if(!Ns[t])return t;var e=Ns[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rS)return vh[t]=e[r];return t}var nS=Mf("animationend"),iS=Mf("animationiteration"),oS=Mf("animationstart"),sS=Mf("transitionend"),aS=new Map,U0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(t,e){aS.set(t,e),rs(e,[t])}for(var yh=0;yh<U0.length;yh++){var wh=U0[yh],wk=wh.toLowerCase(),_k=wh[0].toUpperCase()+wh.slice(1);Eo(wk,"on"+_k)}Eo(nS,"onAnimationEnd");Eo(iS,"onAnimationIteration");Eo(oS,"onAnimationStart");Eo("dblclick","onDoubleClick");Eo("focusin","onFocus");Eo("focusout","onBlur");Eo(sS,"onTransitionEnd");ta("onMouseEnter",["mouseout","mouseover"]);ta("onMouseLeave",["mouseout","mouseover"]);ta("onPointerEnter",["pointerout","pointerover"]);ta("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bk=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function q0(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,wP(n,e,void 0,t),t.currentTarget=null}function lS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;q0(i,a,l),o=u}else for(s=0;s<n.length;s++){if(a=n[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;q0(i,a,l),o=u}}}if(ju)throw t=Yp,ju=!1,Yp=null,t}function xt(t,e){var r=e[am];r===void 0&&(r=e[am]=new Set);var n=t+"__bubble";r.has(n)||(cS(e,t,2,!1),r.add(n))}function _h(t,e,r){var n=0;e&&(n|=4),cS(r,t,n,e)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[Mc]){t[Mc]=!0,gb.forEach(function(r){r!=="selectionchange"&&(bk.has(r)||_h(r,!1,t),_h(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mc]||(e[Mc]=!0,_h("selectionchange",!1,e))}}function cS(t,e,r,n){switch(Kb(e)){case 1:var i=IP;break;case 4:i=LP;break;default:i=Ag}r=i.bind(null,e,r,t),i=void 0,!Jp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function bh(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Lo(a),s===null)return;if(u=s.tag,u===5||u===6){n=o=s;continue e}a=a.parentNode}}n=n.return}Mb(function(){var l=o,c=Sg(r),f=[];e:{var d=aS.get(t);if(d!==void 0){var h=kg,p=t;switch(t){case"keypress":if(du(r)===0)break e;case"keydown":case"keyup":h=YP;break;case"focusin":p="focus",h=ph;break;case"focusout":p="blur",h=ph;break;case"beforeblur":case"afterblur":h=ph;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=C0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=jP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ek;break;case nS:case iS:case oS:h=qP;break;case sS:h=rk;break;case"scroll":h=BP;break;case"wheel":h=ik;break;case"copy":case"cut":case"paste":h=HP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=M0}var g=(e&4)!==0,_=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var v=l,S;v!==null;){S=v;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,m!==null&&(b=kl(v,m),b!=null&&g.push(Il(v,b,S)))),_)break;v=v.return}0<g.length&&(d=new h(d,p,null,r,c),f.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&r!==Gp&&(p=r.relatedTarget||r.fromElement)&&(Lo(p)||p[Ai]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=l,p=p?Lo(p):null,p!==null&&(_=ns(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=C0,b="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=M0,b="onPointerLeave",m="onPointerEnter",v="pointer"),_=h==null?d:Ds(h),S=p==null?d:Ds(p),d=new g(b,v+"leave",h,r,c),d.target=_,d.relatedTarget=S,b=null,Lo(c)===l&&(g=new g(m,v+"enter",p,r,c),g.target=S,g.relatedTarget=_,b=g),_=b,h&&p)t:{for(g=h,m=p,v=0,S=g;S;S=ls(S))v++;for(S=0,b=m;b;b=ls(b))S++;for(;0<v-S;)g=ls(g),v--;for(;0<S-v;)m=ls(m),S--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=ls(g),m=ls(m)}g=null}else g=null;h!==null&&z0(f,d,h,g,!1),p!==null&&_!==null&&z0(f,_,p,g,!0)}}e:{if(d=l?Ds(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var R=fk;else if(I0(d))if(Xb)R=mk;else{R=hk;var j=dk}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(R=pk);if(R&&(R=R(t,l))){Yb(f,R,r,c);break e}j&&j(t,d,l),t==="focusout"&&(j=d._wrapperState)&&j.controlled&&d.type==="number"&&zp(d,"number",d.value)}switch(j=l?Ds(l):window,t){case"focusin":(I0(j)||j.contentEditable==="true")&&(Ms=j,tm=l,dl=null);break;case"focusout":dl=tm=Ms=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,$0(f,r,c);break;case"selectionchange":if(yk)break;case"keydown":case"keyup":$0(f,r,c)}var D;if(Cg)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Os?Qb(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Gb&&r.locale!=="ko"&&(Os||N!=="onCompositionStart"?N==="onCompositionEnd"&&Os&&(D=Wb()):(no=c,Pg="value"in no?no.value:no.textContent,Os=!0)),j=Hu(l,N),0<j.length&&(N=new O0(N,t,null,r,c),f.push({event:N,listeners:j}),D?N.data=D:(D=Jb(r),D!==null&&(N.data=D)))),(D=sk?ak(t,r):lk(t,r))&&(l=Hu(l,"onBeforeInput"),0<l.length&&(c=new O0("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:l}),c.data=D))}lS(f,e)})}function Il(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Hu(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=kl(t,r),o!=null&&n.unshift(Il(t,o,i)),o=kl(t,e),o!=null&&n.push(Il(t,o,i))),t=t.return}return n}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z0(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,u=a.alternate,l=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&l!==null&&(a=l,i?(u=kl(r,o),u!=null&&s.unshift(Il(r,u,a))):i||(u=kl(r,o),u!=null&&s.push(Il(r,u,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var Sk=/\r\n?/g,Ek=/\u0000|\uFFFD/g;function H0(t){return(typeof t=="string"?t:""+t).replace(Sk,`
`).replace(Ek,"")}function Nc(t,e,r){if(e=H0(e),H0(t)!==e&&r)throw Error(de(425))}function Vu(){}var nm=null,im=null;function om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,Rk=typeof clearTimeout=="function"?clearTimeout:void 0,V0=typeof Promise=="function"?Promise:void 0,xk=typeof queueMicrotask=="function"?queueMicrotask:typeof V0<"u"?function(t){return V0.resolve(null).then(t).catch(Ak)}:sm;function Ak(t){setTimeout(function(){throw t})}function Sh(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ol(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ol(e)}function co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function K0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),Qn="__reactFiber$"+ba,Ll="__reactProps$"+ba,Ai="__reactContainer$"+ba,am="__reactEvents$"+ba,Pk="__reactListeners$"+ba,kk="__reactHandles$"+ba;function Lo(t){var e=t[Qn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ai]||r[Qn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=K0(t);t!==null;){if(r=t[Qn])return r;t=K0(t)}return e}t=r,r=t.parentNode}return null}function tc(t){return t=t[Qn]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Nf(t){return t[Ll]||null}var lm=[],Is=-1;function Ro(t){return{current:t}}function At(t){0>Is||(t.current=lm[Is],lm[Is]=null,Is--)}function yt(t,e){Is++,lm[Is]=t.current,t.current=e}var _o={},yr=Ro(_o),Or=Ro(!1),Vo=_o;function ra(t,e){var r=t.type.contextTypes;if(!r)return _o;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mr(t){return t=t.childContextTypes,t!=null}function Ku(){At(Or),At(yr)}function W0(t,e,r){if(yr.current!==_o)throw Error(de(168));yt(yr,e),yt(Or,r)}function uS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(de(108,dP(t)||"Unknown",i));return Mt({},r,n)}function Wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_o,Vo=yr.current,yt(yr,t),yt(Or,Or.current),!0}function G0(t,e,r){var n=t.stateNode;if(!n)throw Error(de(169));r?(t=uS(t,e,Vo),n.__reactInternalMemoizedMergedChildContext=t,At(Or),At(yr),yt(yr,t)):At(Or),yt(Or,r)}var vi=null,Df=!1,Eh=!1;function fS(t){vi===null?vi=[t]:vi.push(t)}function Tk(t){Df=!0,fS(t)}function xo(){if(!Eh&&vi!==null){Eh=!0;var t=0,e=ct;try{var r=vi;for(ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}vi=null,Df=!1}catch(i){throw vi!==null&&(vi=vi.slice(t+1)),Lb(Eg,xo),i}finally{ct=e,Eh=!1}}return null}var Ls=[],Bs=0,Gu=null,Qu=0,Zr=[],en=0,Ko=null,wi=1,_i="";function Mo(t,e){Ls[Bs++]=Qu,Ls[Bs++]=Gu,Gu=t,Qu=e}function dS(t,e,r){Zr[en++]=wi,Zr[en++]=_i,Zr[en++]=Ko,Ko=t;var n=wi;t=_i;var i=32-Tn(n)-1;n&=~(1<<i),r+=1;var o=32-Tn(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,wi=1<<32-Tn(e)+i|r<<i|n,_i=o+t}else wi=1<<o|r<<i|n,_i=t}function Mg(t){t.return!==null&&(Mo(t,1),dS(t,1,0))}function Ng(t){for(;t===Gu;)Gu=Ls[--Bs],Ls[Bs]=null,Qu=Ls[--Bs],Ls[Bs]=null;for(;t===Ko;)Ko=Zr[--en],Zr[en]=null,_i=Zr[--en],Zr[en]=null,wi=Zr[--en],Zr[en]=null}var Hr=null,zr=null,Pt=!1,Pn=null;function hS(t,e){var r=tn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Q0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hr=t,zr=co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hr=t,zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ko!==null?{id:wi,overflow:_i}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=tn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Hr=t,zr=null,!0):!1;default:return!1}}function cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function um(t){if(Pt){var e=zr;if(e){var r=e;if(!Q0(t,e)){if(cm(t))throw Error(de(418));e=co(r.nextSibling);var n=Hr;e&&Q0(t,e)?hS(n,r):(t.flags=t.flags&-4097|2,Pt=!1,Hr=t)}}else{if(cm(t))throw Error(de(418));t.flags=t.flags&-4097|2,Pt=!1,Hr=t}}}function J0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hr=t}function Dc(t){if(t!==Hr)return!1;if(!Pt)return J0(t),Pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!om(t.type,t.memoizedProps)),e&&(e=zr)){if(cm(t))throw pS(),Error(de(418));for(;e;)hS(t,e),e=co(e.nextSibling)}if(J0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){zr=co(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}zr=null}}else zr=Hr?co(t.stateNode.nextSibling):null;return!0}function pS(){for(var t=zr;t;)t=co(t.nextSibling)}function na(){zr=Hr=null,Pt=!1}function Dg(t){Pn===null?Pn=[t]:Pn.push(t)}var Ck=Ni.ReactCurrentBatchConfig;function En(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Ju=Ro(null),Yu=null,Fs=null,Ig=null;function Lg(){Ig=Fs=Yu=null}function Bg(t){var e=Ju.current;At(Ju),t._currentValue=e}function fm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Gs(t,e){Yu=t,Ig=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tr=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Ig!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(Yu===null)throw Error(de(308));Fs=t,Yu.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var Bo=null;function Fg(t){Bo===null?Bo=[t]:Bo.push(t)}function mS(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Fg(e)):(r.next=i.next,i.next=r),e.interleaved=r,Pi(t,n)}function Pi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Zi=!1;function jg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,et&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Pi(t,r)}return i=n.interleaved,i===null?(e.next=e,Fg(n)):(e.next=i.next,i.next=e),n.interleaved=e,Pi(t,r)}function hu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Rg(t,r)}}function Y0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Xu(t,e,r,n){var i=t.updateQueue;Zi=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;s=0,c=l=u=null,a=o;do{var d=a.lane,h=a.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,h=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Mt({},f,d);break e;case 2:Zi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Go|=s,t.lanes=s,t.memoizedState=f}}function X0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(de(191,i));i.call(n)}}}var vS=new mb.Component().refs;function dm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Mt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var If={isMounted:function(t){return(t=t._reactInternals)?ns(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Er(),i=ho(t),o=Si(n,i);o.payload=e,r!=null&&(o.callback=r),e=uo(t,o,i),e!==null&&(Cn(e,t,i,n),hu(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Er(),i=ho(t),o=Si(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=uo(t,o,i),e!==null&&(Cn(e,t,i,n),hu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Er(),n=ho(t),i=Si(r,n);i.tag=2,e!=null&&(i.callback=e),e=uo(t,i,n),e!==null&&(Cn(e,t,n,r),hu(e,t,n))}};function Z0(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!Nl(r,n)||!Nl(i,o):!0}function yS(t,e,r){var n=!1,i=_o,o=e.contextType;return typeof o=="object"&&o!==null?o=nn(o):(i=Mr(e)?Vo:yr.current,n=e.contextTypes,o=(n=n!=null)?ra(t,i):_o),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=If,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ey(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&If.enqueueReplaceState(e,e.state,null)}function hm(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=vS,jg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=nn(o):(o=Mr(e)?Vo:yr.current,i.context=ra(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(dm(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&If.enqueueReplaceState(i,i.state,null),Xu(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ba(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var n=r.stateNode}if(!n)throw Error(de(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===vS&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,t))}return t}function Ic(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ty(t){var e=t._init;return e(t._payload)}function wS(t){function e(m,v){if(t){var S=m.deletions;S===null?(m.deletions=[v],m.flags|=16):S.push(v)}}function r(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function n(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=po(m,v),m.index=0,m.sibling=null,m}function o(m,v,S){return m.index=S,t?(S=m.alternate,S!==null?(S=S.index,S<v?(m.flags|=2,v):S):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,S,b){return v===null||v.tag!==6?(v=Ch(S,m.mode,b),v.return=m,v):(v=i(v,S),v.return=m,v)}function u(m,v,S,b){var R=S.type;return R===Cs?c(m,v,S.props.children,b,S.key):v!==null&&(v.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Xi&&ty(R)===v.type)?(b=i(v,S.props),b.ref=Ba(m,v,S),b.return=m,b):(b=wu(S.type,S.key,S.props,null,m.mode,b),b.ref=Ba(m,v,S),b.return=m,b)}function l(m,v,S,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Oh(S,m.mode,b),v.return=m,v):(v=i(v,S.children||[]),v.return=m,v)}function c(m,v,S,b,R){return v===null||v.tag!==7?(v=Ho(S,m.mode,b,R),v.return=m,v):(v=i(v,S),v.return=m,v)}function f(m,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ch(""+v,m.mode,S),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Rc:return S=wu(v.type,v.key,v.props,null,m.mode,S),S.ref=Ba(m,null,v),S.return=m,S;case Ts:return v=Oh(v,m.mode,S),v.return=m,v;case Xi:var b=v._init;return f(m,b(v._payload),S)}if(tl(v)||Ma(v))return v=Ho(v,m.mode,S,null),v.return=m,v;Ic(m,v)}return null}function d(m,v,S,b){var R=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(m,v,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rc:return S.key===R?u(m,v,S,b):null;case Ts:return S.key===R?l(m,v,S,b):null;case Xi:return R=S._init,d(m,v,R(S._payload),b)}if(tl(S)||Ma(S))return R!==null?null:c(m,v,S,b,null);Ic(m,S)}return null}function h(m,v,S,b,R){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(S)||null,a(v,m,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rc:return m=m.get(b.key===null?S:b.key)||null,u(v,m,b,R);case Ts:return m=m.get(b.key===null?S:b.key)||null,l(v,m,b,R);case Xi:var j=b._init;return h(m,v,S,j(b._payload),R)}if(tl(b)||Ma(b))return m=m.get(S)||null,c(v,m,b,R,null);Ic(v,b)}return null}function p(m,v,S,b){for(var R=null,j=null,D=v,N=v=0,U=null;D!==null&&N<S.length;N++){D.index>N?(U=D,D=null):U=D.sibling;var F=d(m,D,S[N],b);if(F===null){D===null&&(D=U);break}t&&D&&F.alternate===null&&e(m,D),v=o(F,v,N),j===null?R=F:j.sibling=F,j=F,D=U}if(N===S.length)return r(m,D),Pt&&Mo(m,N),R;if(D===null){for(;N<S.length;N++)D=f(m,S[N],b),D!==null&&(v=o(D,v,N),j===null?R=D:j.sibling=D,j=D);return Pt&&Mo(m,N),R}for(D=n(m,D);N<S.length;N++)U=h(D,m,N,S[N],b),U!==null&&(t&&U.alternate!==null&&D.delete(U.key===null?N:U.key),v=o(U,v,N),j===null?R=U:j.sibling=U,j=U);return t&&D.forEach(function(O){return e(m,O)}),Pt&&Mo(m,N),R}function g(m,v,S,b){var R=Ma(S);if(typeof R!="function")throw Error(de(150));if(S=R.call(S),S==null)throw Error(de(151));for(var j=R=null,D=v,N=v=0,U=null,F=S.next();D!==null&&!F.done;N++,F=S.next()){D.index>N?(U=D,D=null):U=D.sibling;var O=d(m,D,F.value,b);if(O===null){D===null&&(D=U);break}t&&D&&O.alternate===null&&e(m,D),v=o(O,v,N),j===null?R=O:j.sibling=O,j=O,D=U}if(F.done)return r(m,D),Pt&&Mo(m,N),R;if(D===null){for(;!F.done;N++,F=S.next())F=f(m,F.value,b),F!==null&&(v=o(F,v,N),j===null?R=F:j.sibling=F,j=F);return Pt&&Mo(m,N),R}for(D=n(m,D);!F.done;N++,F=S.next())F=h(D,m,N,F.value,b),F!==null&&(t&&F.alternate!==null&&D.delete(F.key===null?N:F.key),v=o(F,v,N),j===null?R=F:j.sibling=F,j=F);return t&&D.forEach(function($){return e(m,$)}),Pt&&Mo(m,N),R}function _(m,v,S,b){if(typeof S=="object"&&S!==null&&S.type===Cs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Rc:e:{for(var R=S.key,j=v;j!==null;){if(j.key===R){if(R=S.type,R===Cs){if(j.tag===7){r(m,j.sibling),v=i(j,S.props.children),v.return=m,m=v;break e}}else if(j.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Xi&&ty(R)===j.type){r(m,j.sibling),v=i(j,S.props),v.ref=Ba(m,j,S),v.return=m,m=v;break e}r(m,j);break}else e(m,j);j=j.sibling}S.type===Cs?(v=Ho(S.props.children,m.mode,b,S.key),v.return=m,m=v):(b=wu(S.type,S.key,S.props,null,m.mode,b),b.ref=Ba(m,v,S),b.return=m,m=b)}return s(m);case Ts:e:{for(j=S.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){r(m,v.sibling),v=i(v,S.children||[]),v.return=m,m=v;break e}else{r(m,v);break}else e(m,v);v=v.sibling}v=Oh(S,m.mode,b),v.return=m,m=v}return s(m);case Xi:return j=S._init,_(m,v,j(S._payload),b)}if(tl(S))return p(m,v,S,b);if(Ma(S))return g(m,v,S,b);Ic(m,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(r(m,v.sibling),v=i(v,S),v.return=m,m=v):(r(m,v),v=Ch(S,m.mode,b),v.return=m,m=v),s(m)):r(m,v)}return _}var ia=wS(!0),_S=wS(!1),rc={},Xn=Ro(rc),Bl=Ro(rc),Fl=Ro(rc);function Fo(t){if(t===rc)throw Error(de(174));return t}function $g(t,e){switch(yt(Fl,e),yt(Bl,t),yt(Xn,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vp(e,t)}At(Xn),yt(Xn,e)}function oa(){At(Xn),At(Bl),At(Fl)}function bS(t){Fo(Fl.current);var e=Fo(Xn.current),r=Vp(e,t.type);e!==r&&(yt(Bl,t),yt(Xn,r))}function Ug(t){Bl.current===t&&(At(Xn),At(Bl))}var Ct=Ro(0);function Zu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rh=[];function qg(){for(var t=0;t<Rh.length;t++)Rh[t]._workInProgressVersionPrimary=null;Rh.length=0}var pu=Ni.ReactCurrentDispatcher,xh=Ni.ReactCurrentBatchConfig,Wo=0,Ot=null,Kt=null,Yt=null,ef=!1,hl=!1,jl=0,Ok=0;function hr(){throw Error(de(321))}function zg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Mn(t[r],e[r]))return!1;return!0}function Hg(t,e,r,n,i,o){if(Wo=o,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pu.current=t===null||t.memoizedState===null?Ik:Lk,t=r(n,i),hl){o=0;do{if(hl=!1,jl=0,25<=o)throw Error(de(301));o+=1,Yt=Kt=null,e.updateQueue=null,pu.current=Bk,t=r(n,i)}while(hl)}if(pu.current=tf,e=Kt!==null&&Kt.next!==null,Wo=0,Yt=Kt=Ot=null,ef=!1,e)throw Error(de(300));return t}function Vg(){var t=jl!==0;return jl=0,t}function Vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Ot.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function on(){if(Kt===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var e=Yt===null?Ot.memoizedState:Yt.next;if(e!==null)Yt=e,Kt=t;else{if(t===null)throw Error(de(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Yt===null?Ot.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function $l(t,e){return typeof e=="function"?e(t):e}function Ah(t){var e=on(),r=e.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=Kt,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((Wo&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,s=n):u=u.next=f,Ot.lanes|=c,Go|=c}l=l.next}while(l!==null&&l!==o);u===null?s=n:u.next=a,Mn(n,e.memoizedState)||(Tr=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Ot.lanes|=o,Go|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ph(t){var e=on(),r=e.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Mn(o,e.memoizedState)||(Tr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function SS(){}function ES(t,e){var r=Ot,n=on(),i=e(),o=!Mn(n.memoizedState,i);if(o&&(n.memoizedState=i,Tr=!0),n=n.queue,Kg(AS.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Yt!==null&&Yt.memoizedState.tag&1){if(r.flags|=2048,Ul(9,xS.bind(null,r,n,i,e),void 0,null),Zt===null)throw Error(de(349));Wo&30||RS(r,e,i)}return i}function RS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function xS(t,e,r,n){e.value=r,e.getSnapshot=n,PS(e)&&kS(t)}function AS(t,e,r){return r(function(){PS(e)&&kS(t)})}function PS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Mn(t,r)}catch{return!0}}function kS(t){var e=Pi(t,1);e!==null&&Cn(e,t,1,-1)}function ry(t){var e=Vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:t},e.queue=t,t=t.dispatch=Dk.bind(null,Ot,t),[e.memoizedState,t]}function Ul(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function TS(){return on().memoizedState}function mu(t,e,r,n){var i=Vn();Ot.flags|=t,i.memoizedState=Ul(1|e,r,void 0,n===void 0?null:n)}function Lf(t,e,r,n){var i=on();n=n===void 0?null:n;var o=void 0;if(Kt!==null){var s=Kt.memoizedState;if(o=s.destroy,n!==null&&zg(n,s.deps)){i.memoizedState=Ul(e,r,o,n);return}}Ot.flags|=t,i.memoizedState=Ul(1|e,r,o,n)}function ny(t,e){return mu(8390656,8,t,e)}function Kg(t,e){return Lf(2048,8,t,e)}function CS(t,e){return Lf(4,2,t,e)}function OS(t,e){return Lf(4,4,t,e)}function MS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NS(t,e,r){return r=r!=null?r.concat([t]):null,Lf(4,4,MS.bind(null,e,t),r)}function Wg(){}function DS(t,e){var r=on();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function IS(t,e){var r=on();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function LS(t,e,r){return Wo&21?(Mn(r,e)||(r=jb(),Ot.lanes|=r,Go|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tr=!0),t.memoizedState=r)}function Mk(t,e){var r=ct;ct=r!==0&&4>r?r:4,t(!0);var n=xh.transition;xh.transition={};try{t(!1),e()}finally{ct=r,xh.transition=n}}function BS(){return on().memoizedState}function Nk(t,e,r){var n=ho(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},FS(t))jS(e,r);else if(r=mS(t,e,r,n),r!==null){var i=Er();Cn(r,t,n,i),$S(r,e,n)}}function Dk(t,e,r){var n=ho(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(FS(t))jS(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,Mn(a,s)){var u=e.interleaved;u===null?(i.next=i,Fg(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=mS(t,e,i,n),r!==null&&(i=Er(),Cn(r,t,n,i),$S(r,e,n))}}function FS(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function jS(t,e){hl=ef=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function $S(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Rg(t,r)}}var tf={readContext:nn,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useInsertionEffect:hr,useLayoutEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useMutableSource:hr,useSyncExternalStore:hr,useId:hr,unstable_isNewReconciler:!1},Ik={readContext:nn,useCallback:function(t,e){return Vn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:ny,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,mu(4194308,4,MS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return mu(4194308,4,t,e)},useInsertionEffect:function(t,e){return mu(4,2,t,e)},useMemo:function(t,e){var r=Vn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Vn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Nk.bind(null,Ot,t),[n.memoizedState,t]},useRef:function(t){var e=Vn();return t={current:t},e.memoizedState=t},useState:ry,useDebugValue:Wg,useDeferredValue:function(t){return Vn().memoizedState=t},useTransition:function(){var t=ry(!1),e=t[0];return t=Mk.bind(null,t[1]),Vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ot,i=Vn();if(Pt){if(r===void 0)throw Error(de(407));r=r()}else{if(r=e(),Zt===null)throw Error(de(349));Wo&30||RS(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,ny(AS.bind(null,n,o,t),[t]),n.flags|=2048,Ul(9,xS.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Vn(),e=Zt.identifierPrefix;if(Pt){var r=_i,n=wi;r=(n&~(1<<32-Tn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=jl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ok++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lk={readContext:nn,useCallback:DS,useContext:nn,useEffect:Kg,useImperativeHandle:NS,useInsertionEffect:CS,useLayoutEffect:OS,useMemo:IS,useReducer:Ah,useRef:TS,useState:function(){return Ah($l)},useDebugValue:Wg,useDeferredValue:function(t){var e=on();return LS(e,Kt.memoizedState,t)},useTransition:function(){var t=Ah($l)[0],e=on().memoizedState;return[t,e]},useMutableSource:SS,useSyncExternalStore:ES,useId:BS,unstable_isNewReconciler:!1},Bk={readContext:nn,useCallback:DS,useContext:nn,useEffect:Kg,useImperativeHandle:NS,useInsertionEffect:CS,useLayoutEffect:OS,useMemo:IS,useReducer:Ph,useRef:TS,useState:function(){return Ph($l)},useDebugValue:Wg,useDeferredValue:function(t){var e=on();return Kt===null?e.memoizedState=t:LS(e,Kt.memoizedState,t)},useTransition:function(){var t=Ph($l)[0],e=on().memoizedState;return[t,e]},useMutableSource:SS,useSyncExternalStore:ES,useId:BS,unstable_isNewReconciler:!1};function sa(t,e){try{var r="",n=e;do r+=fP(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function kh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Fk=typeof WeakMap=="function"?WeakMap:Map;function US(t,e,r){r=Si(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){nf||(nf=!0,Rm=n),pm(t,e)},r}function qS(t,e,r){r=Si(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){pm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){pm(t,e),typeof n!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function iy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Fk;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Xk.bind(null,t,e,r),e.then(t,t))}function oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sy(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Si(-1,1),e.tag=2,uo(r,e,1))),r.lanes|=1),t)}var jk=Ni.ReactCurrentOwner,Tr=!1;function _r(t,e,r,n){e.child=t===null?_S(e,null,r,n):ia(e,t.child,r,n)}function ay(t,e,r,n,i){r=r.render;var o=e.ref;return Gs(e,i),n=Hg(t,e,r,n,o,i),r=Vg(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(Pt&&r&&Mg(e),e.flags|=1,_r(t,e,n,i),e.child)}function ly(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!tv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,zS(t,e,o,n,i)):(t=wu(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:Nl,r(s,n)&&t.ref===e.ref)return ki(t,e,i)}return e.flags|=1,t=po(o,n),t.ref=e.ref,t.return=e,e.child=t}function zS(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Nl(o,n)&&t.ref===e.ref)if(Tr=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Tr=!0);else return e.lanes=t.lanes,ki(t,e,i)}return mm(t,e,r,n,i)}function HS(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt($s,jr),jr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt($s,jr),jr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,yt($s,jr),jr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,yt($s,jr),jr|=n;return _r(t,e,i,r),e.child}function VS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mm(t,e,r,n,i){var o=Mr(r)?Vo:yr.current;return o=ra(e,o),Gs(e,i),r=Hg(t,e,r,n,o,i),n=Vg(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(Pt&&n&&Mg(e),e.flags|=1,_r(t,e,r,i),e.child)}function cy(t,e,r,n,i){if(Mr(r)){var o=!0;Wu(e)}else o=!1;if(Gs(e,i),e.stateNode===null)gu(t,e),yS(e,r,n),hm(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=r.contextType;typeof l=="object"&&l!==null?l=nn(l):(l=Mr(r)?Vo:yr.current,l=ra(e,l));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||u!==l)&&ey(e,s,n,l),Zi=!1;var d=e.memoizedState;s.state=d,Xu(e,n,s,i),u=e.memoizedState,a!==n||d!==u||Or.current||Zi?(typeof c=="function"&&(dm(e,r,c,n),u=e.memoizedState),(a=Zi||Z0(e,r,a,n,d,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=l,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,gS(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:En(e.type,a),s.props=l,f=e.pendingProps,d=s.context,u=r.contextType,typeof u=="object"&&u!==null?u=nn(u):(u=Mr(r)?Vo:yr.current,u=ra(e,u));var h=r.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==u)&&ey(e,s,n,u),Zi=!1,d=e.memoizedState,s.state=d,Xu(e,n,s,i);var p=e.memoizedState;a!==f||d!==p||Or.current||Zi?(typeof h=="function"&&(dm(e,r,h,n),p=e.memoizedState),(l=Zi||Z0(e,r,l,n,d,p,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,p,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,p,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=u,n=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return gm(t,e,r,n,o,i)}function gm(t,e,r,n,i,o){VS(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&G0(e,r,!1),ki(t,e,o);n=e.stateNode,jk.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=ia(e,t.child,null,o),e.child=ia(e,null,a,o)):_r(t,e,a,o),e.memoizedState=n.state,i&&G0(e,r,!0),e.child}function KS(t){var e=t.stateNode;e.pendingContext?W0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W0(t,e.context,!1),$g(t,e.containerInfo)}function uy(t,e,r,n,i){return na(),Dg(i),e.flags|=256,_r(t,e,r,n),e.child}var vm={dehydrated:null,treeContext:null,retryLane:0};function ym(t){return{baseLanes:t,cachePool:null,transitions:null}}function WS(t,e,r){var n=e.pendingProps,i=Ct.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),yt(Ct,i&1),t===null)return um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=jf(s,n,0,null),t=Ho(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ym(r),e.memoizedState=vm,t):Gg(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $k(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=po(i,u),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=po(a,o):(o=Ho(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?ym(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=vm,n}return o=t.child,t=o.sibling,n=po(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Gg(t,e){return e=jf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lc(t,e,r,n){return n!==null&&Dg(n),ia(e,t.child,null,r),t=Gg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $k(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=kh(Error(de(422))),Lc(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=jf({mode:"visible",children:n.children},i,0,null),o=Ho(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&ia(e,t.child,null,s),e.child.memoizedState=ym(s),e.memoizedState=vm,o);if(!(e.mode&1))return Lc(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(de(419)),n=kh(o,n,void 0),Lc(t,e,s,n)}if(a=(s&t.childLanes)!==0,Tr||a){if(n=Zt,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Pi(t,i),Cn(n,t,i,-1))}return ev(),n=kh(Error(de(421))),Lc(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Zk.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,zr=co(i.nextSibling),Hr=e,Pt=!0,Pn=null,t!==null&&(Zr[en++]=wi,Zr[en++]=_i,Zr[en++]=Ko,wi=t.id,_i=t.overflow,Ko=e),e=Gg(e,n.children),e.flags|=4096,e)}function fy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),fm(t.return,e,r)}function Th(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function GS(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(_r(t,e,n.children,r),n=Ct.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,r,e);else if(t.tag===19)fy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(yt(Ct,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Zu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Th(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Th(e,!0,r,null,o);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ki(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Go|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,r=po(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=po(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Uk(t,e,r){switch(e.tag){case 3:KS(e),na();break;case 5:bS(e);break;case 1:Mr(e.type)&&Wu(e);break;case 4:$g(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;yt(Ju,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(yt(Ct,Ct.current&1),e.flags|=128,null):r&e.child.childLanes?WS(t,e,r):(yt(Ct,Ct.current&1),t=ki(t,e,r),t!==null?t.sibling:null);yt(Ct,Ct.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return GS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(Ct,Ct.current),n)break;return null;case 22:case 23:return e.lanes=0,HS(t,e,r)}return ki(t,e,r)}var QS,wm,JS,YS;QS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wm=function(){};JS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Fo(Xn.current);var o=null;switch(r){case"input":i=Up(t,i),n=Up(t,n),o=[];break;case"select":i=Mt({},i,{value:void 0}),n=Mt({},n,{value:void 0}),o=[];break;case"textarea":i=Hp(t,i),n=Hp(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Vu)}Kp(r,n);var s;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Al.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var u=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(o||(o=[]),o.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Al.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&xt("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}r&&(o=o||[]).push("style",r);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};YS=function(t,e,r,n){r!==n&&(e.flags|=4)};function Fa(t,e){if(!Pt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function qk(t,e,r){var n=e.pendingProps;switch(Ng(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(e),null;case 1:return Mr(e.type)&&Ku(),pr(e),null;case 3:return n=e.stateNode,oa(),At(Or),At(yr),qg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(Pm(Pn),Pn=null))),wm(t,e),pr(e),null;case 5:Ug(e);var i=Fo(Fl.current);if(r=e.type,t!==null&&e.stateNode!=null)JS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(de(166));return pr(e),null}if(t=Fo(Xn.current),Dc(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Qn]=e,n[Ll]=o,t=(e.mode&1)!==0,r){case"dialog":xt("cancel",n),xt("close",n);break;case"iframe":case"object":case"embed":xt("load",n);break;case"video":case"audio":for(i=0;i<nl.length;i++)xt(nl[i],n);break;case"source":xt("error",n);break;case"img":case"image":case"link":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"input":_0(n,o),xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},xt("invalid",n);break;case"textarea":S0(n,o),xt("invalid",n)}Kp(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Nc(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Nc(n.textContent,a,t),i=["children",""+a]):Al.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&xt("scroll",n)}switch(r){case"input":xc(n),b0(n,o,!0);break;case"textarea":xc(n),E0(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Vu)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Qn]=e,t[Ll]=n,QS(t,e,!1,!1),e.stateNode=t;e:{switch(s=Wp(r,n),r){case"dialog":xt("cancel",t),xt("close",t),i=n;break;case"iframe":case"object":case"embed":xt("load",t),i=n;break;case"video":case"audio":for(i=0;i<nl.length;i++)xt(nl[i],t);i=n;break;case"source":xt("error",t),i=n;break;case"img":case"image":case"link":xt("error",t),xt("load",t),i=n;break;case"details":xt("toggle",t),i=n;break;case"input":_0(t,n),i=Up(t,n),xt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Mt({},n,{value:void 0}),xt("invalid",t);break;case"textarea":S0(t,n),i=Hp(t,n),xt("invalid",t);break;default:i=n}Kp(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?Pb(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xb(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Pl(t,u):typeof u=="number"&&Pl(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Al.hasOwnProperty(o)?u!=null&&o==="onScroll"&&xt("scroll",t):u!=null&&yg(t,o,u,s))}switch(r){case"input":xc(t),b0(t,n,!1);break;case"textarea":xc(t),E0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+wo(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Hs(t,!!n.multiple,o,!1):n.defaultValue!=null&&Hs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pr(e),null;case 6:if(t&&e.stateNode!=null)YS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(de(166));if(r=Fo(Fl.current),Fo(Xn.current),Dc(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qn]=e,(o=n.nodeValue!==r)&&(t=Hr,t!==null))switch(t.tag){case 3:Nc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nc(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qn]=e,e.stateNode=n}return pr(e),null;case 13:if(At(Ct),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pt&&zr!==null&&e.mode&1&&!(e.flags&128))pS(),na(),e.flags|=98560,o=!1;else if(o=Dc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(de(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(de(317));o[Qn]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pr(e),o=!1}else Pn!==null&&(Pm(Pn),Pn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ct.current&1?Wt===0&&(Wt=3):ev())),e.updateQueue!==null&&(e.flags|=4),pr(e),null);case 4:return oa(),wm(t,e),t===null&&Dl(e.stateNode.containerInfo),pr(e),null;case 10:return Bg(e.type._context),pr(e),null;case 17:return Mr(e.type)&&Ku(),pr(e),null;case 19:if(At(Ct),o=e.memoizedState,o===null)return pr(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)Fa(o,!1);else{if(Wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Zu(t),s!==null){for(e.flags|=128,Fa(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return yt(Ct,Ct.current&1|2),e.child}t=t.sibling}o.tail!==null&&Lt()>aa&&(e.flags|=128,n=!0,Fa(o,!1),e.lanes=4194304)}else{if(!n)if(t=Zu(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Pt)return pr(e),null}else 2*Lt()-o.renderingStartTime>aa&&r!==1073741824&&(e.flags|=128,n=!0,Fa(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Lt(),e.sibling=null,r=Ct.current,yt(Ct,n?r&1|2:r&1),e):(pr(e),null);case 22:case 23:return Zg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?jr&1073741824&&(pr(e),e.subtreeFlags&6&&(e.flags|=8192)):pr(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function zk(t,e){switch(Ng(e),e.tag){case 1:return Mr(e.type)&&Ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oa(),At(Or),At(yr),qg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ug(e),null;case 13:if(At(Ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(Ct),null;case 4:return oa(),null;case 10:return Bg(e.type._context),null;case 22:case 23:return Zg(),null;case 24:return null;default:return null}}var Bc=!1,mr=!1,Hk=typeof WeakSet=="function"?WeakSet:Set,Se=null;function js(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Dt(t,e,n)}else r.current=null}function _m(t,e,r){try{r()}catch(n){Dt(t,e,n)}}var dy=!1;function Vk(t,e){if(nm=qu,t=tS(),Og(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,u=-1,l=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==r||i!==0&&f.nodeType!==3||(a=s+i),f!==o||n!==0&&f.nodeType!==3||(u=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===r&&++l===i&&(a=s),d===o&&++c===n&&(u=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}r=a===-1||u===-1?null:{start:a,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(im={focusedElem:t,selectionRange:r},qu=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,_=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:En(e.type,g),_);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(b){Dt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return p=dy,dy=!1,p}function pl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&_m(e,r,o)}i=i.next}while(i!==n)}}function Bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function bm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function XS(t){var e=t.alternate;e!==null&&(t.alternate=null,XS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[Ll],delete e[am],delete e[Pk],delete e[kk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZS(t){return t.tag===5||t.tag===3||t.tag===4}function hy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Vu));else if(n!==4&&(t=t.child,t!==null))for(Sm(t,e,r),t=t.sibling;t!==null;)Sm(t,e,r),t=t.sibling}function Em(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Em(t,e,r),t=t.sibling;t!==null;)Em(t,e,r),t=t.sibling}var ir=null,xn=!1;function qi(t,e,r){for(r=r.child;r!==null;)eE(t,e,r),r=r.sibling}function eE(t,e,r){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Tf,r)}catch{}switch(r.tag){case 5:mr||js(r,e);case 6:var n=ir,i=xn;ir=null,qi(t,e,r),ir=n,xn=i,ir!==null&&(xn?(t=ir,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ir.removeChild(r.stateNode));break;case 18:ir!==null&&(xn?(t=ir,r=r.stateNode,t.nodeType===8?Sh(t.parentNode,r):t.nodeType===1&&Sh(t,r),Ol(t)):Sh(ir,r.stateNode));break;case 4:n=ir,i=xn,ir=r.stateNode.containerInfo,xn=!0,qi(t,e,r),ir=n,xn=i;break;case 0:case 11:case 14:case 15:if(!mr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&_m(r,e,s),i=i.next}while(i!==n)}qi(t,e,r);break;case 1:if(!mr&&(js(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Dt(r,e,a)}qi(t,e,r);break;case 21:qi(t,e,r);break;case 22:r.mode&1?(mr=(n=mr)||r.memoizedState!==null,qi(t,e,r),mr=n):qi(t,e,r);break;default:qi(t,e,r)}}function py(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Hk),e.forEach(function(n){var i=e2.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function pn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ir=a.stateNode,xn=!1;break e;case 3:ir=a.stateNode.containerInfo,xn=!0;break e;case 4:ir=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(ir===null)throw Error(de(160));eE(o,s,i),ir=null,xn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Dt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tE(e,t),e=e.sibling}function tE(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),In(t),n&4){try{pl(3,t,t.return),Bf(3,t)}catch(g){Dt(t,t.return,g)}try{pl(5,t,t.return)}catch(g){Dt(t,t.return,g)}}break;case 1:pn(e,t),In(t),n&512&&r!==null&&js(r,r.return);break;case 5:if(pn(e,t),In(t),n&512&&r!==null&&js(r,r.return),t.flags&32){var i=t.stateNode;try{Pl(i,"")}catch(g){Dt(t,t.return,g)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Sb(i,o),Wp(a,s);var l=Wp(a,o);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?Pb(i,f):c==="dangerouslySetInnerHTML"?xb(i,f):c==="children"?Pl(i,f):yg(i,c,f,l)}switch(a){case"input":qp(i,o);break;case"textarea":Eb(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Hs(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Hs(i,!!o.multiple,o.defaultValue,!0):Hs(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ll]=o}catch(g){Dt(t,t.return,g)}}break;case 6:if(pn(e,t),In(t),n&4){if(t.stateNode===null)throw Error(de(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Dt(t,t.return,g)}}break;case 3:if(pn(e,t),In(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(g){Dt(t,t.return,g)}break;case 4:pn(e,t),In(t);break;case 13:pn(e,t),In(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Yg=Lt())),n&4&&py(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(mr=(l=mr)||c,pn(e,t),mr=l):pn(e,t),In(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Se=t,c=t.child;c!==null;){for(f=Se=c;Se!==null;){switch(d=Se,h=d.child,d.tag){case 0:case 11:case 14:case 15:pl(4,d,d.return);break;case 1:js(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Dt(n,r,g)}}break;case 5:js(d,d.return);break;case 22:if(d.memoizedState!==null){gy(f);continue}}h!==null?(h.return=d,Se=h):gy(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Ab("display",s))}catch(g){Dt(t,t.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(g){Dt(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pn(e,t),In(t),n&4&&py(t);break;case 21:break;default:pn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ZS(r)){var n=r;break e}r=r.return}throw Error(de(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Pl(i,""),n.flags&=-33);var o=hy(t);Em(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=hy(t);Sm(t,a,s);break;default:throw Error(de(161))}}catch(u){Dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kk(t,e,r){Se=t,rE(t)}function rE(t,e,r){for(var n=(t.mode&1)!==0;Se!==null;){var i=Se,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Bc;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||mr;a=Bc;var l=mr;if(Bc=s,(mr=u)&&!l)for(Se=i;Se!==null;)s=Se,u=s.child,s.tag===22&&s.memoizedState!==null?vy(i):u!==null?(u.return=s,Se=u):vy(i);for(;o!==null;)Se=o,rE(o),o=o.sibling;Se=i,Bc=a,mr=l}my(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Se=o):my(t)}}function my(t){for(;Se!==null;){var e=Se;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mr||Bf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!mr)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:En(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&X0(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}X0(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}mr||e.flags&512&&bm(e)}catch(d){Dt(e,e.return,d)}}if(e===t){Se=null;break}if(r=e.sibling,r!==null){r.return=e.return,Se=r;break}Se=e.return}}function gy(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Se=r;break}Se=e.return}}function vy(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Bf(4,e)}catch(u){Dt(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){Dt(e,i,u)}}var o=e.return;try{bm(e)}catch(u){Dt(e,o,u)}break;case 5:var s=e.return;try{bm(e)}catch(u){Dt(e,s,u)}}}catch(u){Dt(e,e.return,u)}if(e===t){Se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Se=a;break}Se=e.return}}var Wk=Math.ceil,rf=Ni.ReactCurrentDispatcher,Qg=Ni.ReactCurrentOwner,rn=Ni.ReactCurrentBatchConfig,et=0,Zt=null,$t=null,cr=0,jr=0,$s=Ro(0),Wt=0,ql=null,Go=0,Ff=0,Jg=0,ml=null,kr=null,Yg=0,aa=1/0,hi=null,nf=!1,Rm=null,fo=null,Fc=!1,io=null,of=0,gl=0,xm=null,vu=-1,yu=0;function Er(){return et&6?Lt():vu!==-1?vu:vu=Lt()}function ho(t){return t.mode&1?et&2&&cr!==0?cr&-cr:Ck.transition!==null?(yu===0&&(yu=jb()),yu):(t=ct,t!==0||(t=window.event,t=t===void 0?16:Kb(t.type)),t):1}function Cn(t,e,r,n){if(50<gl)throw gl=0,xm=null,Error(de(185));Zl(t,r,n),(!(et&2)||t!==Zt)&&(t===Zt&&(!(et&2)&&(Ff|=r),Wt===4&&ro(t,cr)),Nr(t,n),r===1&&et===0&&!(e.mode&1)&&(aa=Lt()+500,Df&&xo()))}function Nr(t,e){var r=t.callbackNode;CP(t,e);var n=Uu(t,t===Zt?cr:0);if(n===0)r!==null&&A0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&A0(r),e===1)t.tag===0?Tk(yy.bind(null,t)):fS(yy.bind(null,t)),xk(function(){!(et&6)&&xo()}),r=null;else{switch($b(n)){case 1:r=Eg;break;case 4:r=Bb;break;case 16:r=$u;break;case 536870912:r=Fb;break;default:r=$u}r=uE(r,nE.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function nE(t,e){if(vu=-1,yu=0,et&6)throw Error(de(327));var r=t.callbackNode;if(Qs()&&t.callbackNode!==r)return null;var n=Uu(t,t===Zt?cr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sf(t,n);else{e=n;var i=et;et|=2;var o=oE();(Zt!==t||cr!==e)&&(hi=null,aa=Lt()+500,zo(t,e));do try{Jk();break}catch(a){iE(t,a)}while(1);Lg(),rf.current=o,et=i,$t!==null?e=0:(Zt=null,cr=0,e=Wt)}if(e!==0){if(e===2&&(i=Xp(t),i!==0&&(n=i,e=Am(t,i))),e===1)throw r=ql,zo(t,0),ro(t,n),Nr(t,Lt()),r;if(e===6)ro(t,n);else{if(i=t.current.alternate,!(n&30)&&!Gk(i)&&(e=sf(t,n),e===2&&(o=Xp(t),o!==0&&(n=o,e=Am(t,o))),e===1))throw r=ql,zo(t,0),ro(t,n),Nr(t,Lt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(de(345));case 2:No(t,kr,hi);break;case 3:if(ro(t,n),(n&130023424)===n&&(e=Yg+500-Lt(),10<e)){if(Uu(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Er(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sm(No.bind(null,t,kr,hi),e);break}No(t,kr,hi);break;case 4:if(ro(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-Tn(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Wk(n/1960))-n,10<n){t.timeoutHandle=sm(No.bind(null,t,kr,hi),n);break}No(t,kr,hi);break;case 5:No(t,kr,hi);break;default:throw Error(de(329))}}}return Nr(t,Lt()),t.callbackNode===r?nE.bind(null,t):null}function Am(t,e){var r=ml;return t.current.memoizedState.isDehydrated&&(zo(t,e).flags|=256),t=sf(t,e),t!==2&&(e=kr,kr=r,e!==null&&Pm(e)),t}function Pm(t){kr===null?kr=t:kr.push.apply(kr,t)}function Gk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Mn(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ro(t,e){for(e&=~Jg,e&=~Ff,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Tn(e),n=1<<r;t[r]=-1,e&=~n}}function yy(t){if(et&6)throw Error(de(327));Qs();var e=Uu(t,0);if(!(e&1))return Nr(t,Lt()),null;var r=sf(t,e);if(t.tag!==0&&r===2){var n=Xp(t);n!==0&&(e=n,r=Am(t,n))}if(r===1)throw r=ql,zo(t,0),ro(t,e),Nr(t,Lt()),r;if(r===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,No(t,kr,hi),Nr(t,Lt()),null}function Xg(t,e){var r=et;et|=1;try{return t(e)}finally{et=r,et===0&&(aa=Lt()+500,Df&&xo())}}function Qo(t){io!==null&&io.tag===0&&!(et&6)&&Qs();var e=et;et|=1;var r=rn.transition,n=ct;try{if(rn.transition=null,ct=1,t)return t()}finally{ct=n,rn.transition=r,et=e,!(et&6)&&xo()}}function Zg(){jr=$s.current,At($s)}function zo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Rk(r)),$t!==null)for(r=$t.return;r!==null;){var n=r;switch(Ng(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ku();break;case 3:oa(),At(Or),At(yr),qg();break;case 5:Ug(n);break;case 4:oa();break;case 13:At(Ct);break;case 19:At(Ct);break;case 10:Bg(n.type._context);break;case 22:case 23:Zg()}r=r.return}if(Zt=t,$t=t=po(t.current,null),cr=jr=e,Wt=0,ql=null,Jg=Ff=Go=0,kr=ml=null,Bo!==null){for(e=0;e<Bo.length;e++)if(r=Bo[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Bo=null}return t}function iE(t,e){do{var r=$t;try{if(Lg(),pu.current=tf,ef){for(var n=Ot.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ef=!1}if(Wo=0,Yt=Kt=Ot=null,hl=!1,jl=0,Qg.current=null,r===null||r.return===null){Wt=1,ql=e,$t=null;break}e:{var o=t,s=r.return,a=r,u=e;if(e=cr,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=oy(s);if(h!==null){h.flags&=-257,sy(h,s,a,o,e),h.mode&1&&iy(o,l,e),e=h,u=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(u),e.updateQueue=g}else p.add(u);break e}else{if(!(e&1)){iy(o,l,e),ev();break e}u=Error(de(426))}}else if(Pt&&a.mode&1){var _=oy(s);if(_!==null){!(_.flags&65536)&&(_.flags|=256),sy(_,s,a,o,e),Dg(sa(u,a));break e}}o=u=sa(u,a),Wt!==4&&(Wt=2),ml===null?ml=[o]:ml.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=US(o,u,e);Y0(o,m);break e;case 1:a=u;var v=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(fo===null||!fo.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=qS(o,a,e);Y0(o,b);break e}}o=o.return}while(o!==null)}aE(r)}catch(R){e=R,$t===r&&r!==null&&($t=r=r.return);continue}break}while(1)}function oE(){var t=rf.current;return rf.current=tf,t===null?tf:t}function ev(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Zt===null||!(Go&268435455)&&!(Ff&268435455)||ro(Zt,cr)}function sf(t,e){var r=et;et|=2;var n=oE();(Zt!==t||cr!==e)&&(hi=null,zo(t,e));do try{Qk();break}catch(i){iE(t,i)}while(1);if(Lg(),et=r,rf.current=n,$t!==null)throw Error(de(261));return Zt=null,cr=0,Wt}function Qk(){for(;$t!==null;)sE($t)}function Jk(){for(;$t!==null&&!bP();)sE($t)}function sE(t){var e=cE(t.alternate,t,jr);t.memoizedProps=t.pendingProps,e===null?aE(t):$t=e,Qg.current=null}function aE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zk(r,e),r!==null){r.flags&=32767,$t=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Wt=6,$t=null;return}}else if(r=qk(r,e,jr),r!==null){$t=r;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Wt===0&&(Wt=5)}function No(t,e,r){var n=ct,i=rn.transition;try{rn.transition=null,ct=1,Yk(t,e,r,n)}finally{rn.transition=i,ct=n}return null}function Yk(t,e,r,n){do Qs();while(io!==null);if(et&6)throw Error(de(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(OP(t,o),t===Zt&&($t=Zt=null,cr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fc||(Fc=!0,uE($u,function(){return Qs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=rn.transition,rn.transition=null;var s=ct;ct=1;var a=et;et|=4,Qg.current=null,Vk(t,r),tE(r,t),vk(im),qu=!!nm,im=nm=null,t.current=r,Kk(r),SP(),et=a,ct=s,rn.transition=o}else t.current=r;if(Fc&&(Fc=!1,io=t,of=i),o=t.pendingLanes,o===0&&(fo=null),xP(r.stateNode),Nr(t,Lt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(nf)throw nf=!1,t=Rm,Rm=null,t;return of&1&&t.tag!==0&&Qs(),o=t.pendingLanes,o&1?t===xm?gl++:(gl=0,xm=t):gl=0,xo(),null}function Qs(){if(io!==null){var t=$b(of),e=rn.transition,r=ct;try{if(rn.transition=null,ct=16>t?16:t,io===null)var n=!1;else{if(t=io,io=null,of=0,et&6)throw Error(de(331));var i=et;for(et|=4,Se=t.current;Se!==null;){var o=Se,s=o.child;if(Se.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Se=l;Se!==null;){var c=Se;switch(c.tag){case 0:case 11:case 15:pl(8,c,o)}var f=c.child;if(f!==null)f.return=c,Se=f;else for(;Se!==null;){c=Se;var d=c.sibling,h=c.return;if(XS(c),c===l){Se=null;break}if(d!==null){d.return=h,Se=d;break}Se=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}Se=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Se=s;else e:for(;Se!==null;){if(o=Se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pl(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Se=m;break e}Se=o.return}}var v=t.current;for(Se=v;Se!==null;){s=Se;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Se=S;else e:for(s=v;Se!==null;){if(a=Se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bf(9,a)}}catch(R){Dt(a,a.return,R)}if(a===s){Se=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Se=b;break e}Se=a.return}}if(et=i,xo(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Tf,t)}catch{}n=!0}return n}finally{ct=r,rn.transition=e}}return!1}function wy(t,e,r){e=sa(r,e),e=US(t,e,1),t=uo(t,e,1),e=Er(),t!==null&&(Zl(t,1,e),Nr(t,e))}function Dt(t,e,r){if(t.tag===3)wy(t,t,r);else for(;e!==null;){if(e.tag===3){wy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(fo===null||!fo.has(n))){t=sa(r,t),t=qS(e,t,1),e=uo(e,t,1),t=Er(),e!==null&&(Zl(e,1,t),Nr(e,t));break}}e=e.return}}function Xk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&r,Zt===t&&(cr&r)===r&&(Wt===4||Wt===3&&(cr&130023424)===cr&&500>Lt()-Yg?zo(t,0):Jg|=r),Nr(t,e)}function lE(t,e){e===0&&(t.mode&1?(e=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):e=1);var r=Er();t=Pi(t,e),t!==null&&(Zl(t,e,r),Nr(t,r))}function Zk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lE(t,r)}function e2(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(e),lE(t,r)}var cE;cE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Or.current)Tr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Tr=!1,Uk(t,e,r);Tr=!!(t.flags&131072)}else Tr=!1,Pt&&e.flags&1048576&&dS(e,Qu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;gu(t,e),t=e.pendingProps;var i=ra(e,yr.current);Gs(e,r),i=Hg(null,e,n,t,i,r);var o=Vg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(n)?(o=!0,Wu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jg(e),i.updater=If,e.stateNode=i,i._reactInternals=e,hm(e,n,t,r),e=gm(null,e,n,!0,o,r)):(e.tag=0,Pt&&o&&Mg(e),_r(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(gu(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=r2(n),t=En(n,t),i){case 0:e=mm(null,e,n,t,r);break e;case 1:e=cy(null,e,n,t,r);break e;case 11:e=ay(null,e,n,t,r);break e;case 14:e=ly(null,e,n,En(n.type,t),r);break e}throw Error(de(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:En(n,i),mm(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:En(n,i),cy(t,e,n,i,r);case 3:e:{if(KS(e),t===null)throw Error(de(387));n=e.pendingProps,o=e.memoizedState,i=o.element,gS(t,e),Xu(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=sa(Error(de(423)),e),e=uy(t,e,n,r,i);break e}else if(n!==i){i=sa(Error(de(424)),e),e=uy(t,e,n,r,i);break e}else for(zr=co(e.stateNode.containerInfo.firstChild),Hr=e,Pt=!0,Pn=null,r=_S(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(na(),n===i){e=ki(t,e,r);break e}_r(t,e,n,r)}e=e.child}return e;case 5:return bS(e),t===null&&um(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,om(n,i)?s=null:o!==null&&om(n,o)&&(e.flags|=32),VS(t,e),_r(t,e,s,r),e.child;case 6:return t===null&&um(e),null;case 13:return WS(t,e,r);case 4:return $g(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ia(e,null,n,r):_r(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:En(n,i),ay(t,e,n,i,r);case 7:return _r(t,e,e.pendingProps,r),e.child;case 8:return _r(t,e,e.pendingProps.children,r),e.child;case 12:return _r(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,yt(Ju,n._currentValue),n._currentValue=s,o!==null)if(Mn(o.value,s)){if(o.children===i.children&&!Or.current){e=ki(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=Si(-1,r&-r),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),fm(o.return,r,e),a.lanes|=r;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(de(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),fm(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}_r(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Gs(e,r),i=nn(i),n=n(i),e.flags|=1,_r(t,e,n,r),e.child;case 14:return n=e.type,i=En(n,e.pendingProps),i=En(n.type,i),ly(t,e,n,i,r);case 15:return zS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:En(n,i),gu(t,e),e.tag=1,Mr(n)?(t=!0,Wu(e)):t=!1,Gs(e,r),yS(e,n,i),hm(e,n,i,r),gm(null,e,n,!0,t,r);case 19:return GS(t,e,r);case 22:return HS(t,e,r)}throw Error(de(156,e.tag))};function uE(t,e){return Lb(t,e)}function t2(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,r,n){return new t2(t,e,r,n)}function tv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r2(t){if(typeof t=="function")return tv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_g)return 11;if(t===bg)return 14}return 2}function po(t,e){var r=t.alternate;return r===null?(r=tn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function wu(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")tv(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Cs:return Ho(r.children,i,o,e);case wg:s=8,i|=8;break;case Bp:return t=tn(12,r,e,i|2),t.elementType=Bp,t.lanes=o,t;case Fp:return t=tn(13,r,e,i),t.elementType=Fp,t.lanes=o,t;case jp:return t=tn(19,r,e,i),t.elementType=jp,t.lanes=o,t;case wb:return jf(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vb:s=10;break e;case yb:s=9;break e;case _g:s=11;break e;case bg:s=14;break e;case Xi:s=16,n=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=tn(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Ho(t,e,r,n){return t=tn(7,t,n,e),t.lanes=r,t}function jf(t,e,r,n){return t=tn(22,t,n,e),t.elementType=wb,t.lanes=r,t.stateNode={isHidden:!1},t}function Ch(t,e,r){return t=tn(6,t,null,e),t.lanes=r,t}function Oh(t,e,r){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n2(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fh(0),this.expirationTimes=fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rv(t,e,r,n,i,o,s,a,u){return t=new n2(t,e,r,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},jg(o),t}function i2(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function fE(t){if(!t)return _o;t=t._reactInternals;e:{if(ns(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var r=t.type;if(Mr(r))return uS(t,r,e)}return e}function dE(t,e,r,n,i,o,s,a,u){return t=rv(r,n,!0,t,i,o,s,a,u),t.context=fE(null),r=t.current,n=Er(),i=ho(r),o=Si(n,i),o.callback=e??null,uo(r,o,i),t.current.lanes=i,Zl(t,i,n),Nr(t,n),t}function $f(t,e,r,n){var i=e.current,o=Er(),s=ho(i);return r=fE(r),e.context===null?e.context=r:e.pendingContext=r,e=Si(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=uo(i,e,s),t!==null&&(Cn(t,i,s,o),hu(t,i,s)),s}function af(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _y(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function nv(t,e){_y(t,e),(t=t.alternate)&&_y(t,e)}function o2(){return null}var hE=typeof reportError=="function"?reportError:function(t){console.error(t)};function iv(t){this._internalRoot=t}Uf.prototype.render=iv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));$f(t,e,null,null)};Uf.prototype.unmount=iv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qo(function(){$f(null,t,null,null)}),e[Ai]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=zb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<to.length&&e!==0&&e<to[r].priority;r++);to.splice(r,0,t),r===0&&Vb(t)}};function ov(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function by(){}function s2(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=af(s);o.call(l)}}var s=dE(e,n,t,0,null,!1,!1,"",by);return t._reactRootContainer=s,t[Ai]=s.current,Dl(t.nodeType===8?t.parentNode:t),Qo(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=af(u);a.call(l)}}var u=rv(t,0,!1,null,null,!1,!1,"",by);return t._reactRootContainer=u,t[Ai]=u.current,Dl(t.nodeType===8?t.parentNode:t),Qo(function(){$f(e,u,r,n)}),u}function zf(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=af(s);a.call(u)}}$f(e,s,t,i)}else s=s2(r,e,t,i,n);return af(s)}Ub=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=rl(e.pendingLanes);r!==0&&(Rg(e,r|1),Nr(e,Lt()),!(et&6)&&(aa=Lt()+500,xo()))}break;case 13:Qo(function(){var n=Pi(t,1);if(n!==null){var i=Er();Cn(n,t,1,i)}}),nv(t,1)}};xg=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var r=Er();Cn(e,t,134217728,r)}nv(t,134217728)}};qb=function(t){if(t.tag===13){var e=ho(t),r=Pi(t,e);if(r!==null){var n=Er();Cn(r,t,e,n)}nv(t,e)}};zb=function(){return ct};Hb=function(t,e){var r=ct;try{return ct=t,e()}finally{ct=r}};Qp=function(t,e,r){switch(e){case"input":if(qp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Nf(n);if(!i)throw Error(de(90));bb(n),qp(n,i)}}}break;case"textarea":Eb(t,r);break;case"select":e=r.value,e!=null&&Hs(t,!!r.multiple,e,!1)}};Cb=Xg;Ob=Qo;var a2={usingClientEntryPoint:!1,Events:[tc,Ds,Nf,kb,Tb,Xg]},ja={findFiberByHostInstance:Lo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},l2={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Db(t),t===null?null:t.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||o2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Tf=jc.inject(l2),Yn=jc}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a2;Kr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ov(e))throw Error(de(200));return i2(t,e,null,r)};Kr.createRoot=function(t,e){if(!ov(t))throw Error(de(299));var r=!1,n="",i=hE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rv(t,1,!1,null,null,r,!1,n,i),t[Ai]=e.current,Dl(t.nodeType===8?t.parentNode:t),new iv(e)};Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Db(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t){return Qo(t)};Kr.hydrate=function(t,e,r){if(!qf(e))throw Error(de(200));return zf(null,t,e,!0,r)};Kr.hydrateRoot=function(t,e,r){if(!ov(t))throw Error(de(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=hE;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=dE(e,null,t,1,r??null,i,!1,o,s),t[Ai]=e.current,Dl(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Uf(e)};Kr.render=function(t,e,r){if(!qf(e))throw Error(de(200));return zf(null,t,e,!1,r)};Kr.unmountComponentAtNode=function(t){if(!qf(t))throw Error(de(40));return t._reactRootContainer?(Qo(function(){zf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};Kr.unstable_batchedUpdates=Xg;Kr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!qf(r))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return zf(t,e,r,!1,n)};Kr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}e(),t.exports=Kr})(oP);var Sy=Dp;Np.createRoot=Sy.createRoot,Np.hydrateRoot=Sy.hydrateRoot;/**
 * @remix-run/router v1.3.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function it(){return it=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},it.apply(this,arguments)}var Ft;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ft||(Ft={}));const Ey="popstate";function c2(t){t===void 0&&(t={});function e(n,i){let{pathname:o,search:s,hash:a}=n.location;return zl("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Jo(i)}return f2(e,r,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function u2(){return Math.random().toString(36).substr(2,8)}function Ry(t,e){return{usr:t.state,key:t.key,idx:e}}function zl(t,e,r,n){return r===void 0&&(r=null),it({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Di(e):e,{state:r,key:e&&e.key||n||u2()})}function Jo(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Di(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function f2(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,s=i.history,a=Ft.Pop,u=null,l=c();l==null&&(l=0,s.replaceState(it({},s.state,{idx:l}),""));function c(){return(s.state||{idx:null}).idx}function f(){a=Ft.Pop;let _=c(),m=_==null?null:_-l;l=_,u&&u({action:a,location:g.location,delta:m})}function d(_,m){a=Ft.Push;let v=zl(g.location,_,m);r&&r(v,_),l=c()+1;let S=Ry(v,l),b=g.createHref(v);try{s.pushState(S,"",b)}catch{i.location.assign(b)}o&&u&&u({action:a,location:g.location,delta:1})}function h(_,m){a=Ft.Replace;let v=zl(g.location,_,m);r&&r(v,_),l=c();let S=Ry(v,l),b=g.createHref(v);s.replaceState(S,"",b),o&&u&&u({action:a,location:g.location,delta:0})}function p(_){let m=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof _=="string"?_:Jo(_);return je(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let g={get action(){return a},get location(){return t(i,s)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ey,f),u=_,()=>{i.removeEventListener(Ey,f),u=null}},createHref(_){return e(i,_)},createURL:p,encodeLocation(_){let m=p(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:h,go(_){return s.go(_)}};return g}var ar;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ar||(ar={}));function d2(t){return t.index===!0}function pE(t,e,r){return e===void 0&&(e=[]),r===void 0&&(r=new Set),t.map((n,i)=>{let o=[...e,i],s=typeof n.id=="string"?n.id:o.join("-");return je(n.index!==!0||!n.children,"Cannot specify children on an index route"),je(!r.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),r.add(s),d2(n)?it({},n,{id:s}):it({},n,{id:s,children:n.children?pE(n.children,o,r):void 0})})}function il(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Di(e):e,i=vE(n.pathname||"/",r);if(i==null)return null;let o=mE(t);h2(o);let s=null;for(let a=0;s==null&&a<o.length;++a)s=S2(o[a],x2(i));return s}function mE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=mo([n,u.relativePath]),c=r.concat(u);o.children&&o.children.length>0&&(je(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),mE(o.children,e,c,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:_2(l,o.index),routesMeta:c})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of gE(o.path))i(o,s,u)}),e}function gE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let s=gE(n.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function h2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:b2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const p2=/^:\w+$/,m2=3,g2=2,v2=1,y2=10,w2=-2,xy=t=>t==="*";function _2(t,e){let r=t.split("/"),n=r.length;return r.some(xy)&&(n+=w2),e&&(n+=g2),r.filter(i=>!xy(i)).reduce((i,o)=>i+(p2.test(o)?m2:o===""?v2:y2),n)}function b2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function S2(t,e){let{routesMeta:r}=t,n={},i="/",o=[];for(let s=0;s<r.length;++s){let a=r[s],u=s===r.length-1,l=i==="/"?e:e.slice(i.length)||"/",c=E2({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(n,c.params);let f=a.route;o.push({params:n,pathname:mo([i,c.pathname]),pathnameBase:T2(mo([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=mo([i,c.pathnameBase]))}return o}function E2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=R2(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";s=o.slice(0,o.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=A2(a[f]||"",c),l},{}),pathname:o,pathnameBase:s,pattern:t}}function R2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Hl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,a)=>(n.push(a),"/([^\\/]+)"));return t.endsWith("*")?(n.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function x2(t){try{return decodeURI(t)}catch(e){return Hl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function A2(t,e){try{return decodeURIComponent(t)}catch(r){return Hl(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),t}}function vE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Hl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function P2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Di(t):t;return{pathname:r?r.startsWith("/")?r:k2(r,e):e,search:C2(n),hash:O2(i)}}function k2(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Mh(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sv(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function yE(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Di(t):(i=it({},t),je(!i.pathname||!i.pathname.includes("?"),Mh("?","pathname","search",i)),je(!i.pathname||!i.pathname.includes("#"),Mh("#","pathname","hash",i)),je(!i.search||!i.search.includes("#"),Mh("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(n||s==null)a=r;else{let f=e.length-1;if(s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?e[f]:"/"}let u=P2(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const mo=t=>t.join("/").replace(/\/\/+/g,"/"),T2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ay extends Error{}class M2{constructor(e,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],je(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((o,s)=>n=s),this.controller=new AbortController;let i=()=>n(new Ay("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((o,s)=>{let[a,u]=s;return Object.assign(o,{[a]:this.trackPromise(a,u)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(e,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let n=Promise.race([r,this.abortPromise]).then(i=>this.onSettle(n,e,null,i),i=>this.onSettle(n,e,i));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(e,r,n,i){return this.controller.signal.aborted&&n instanceof Ay?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>n}),Promise.reject(n)):(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n?(Object.defineProperty(e,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(e,"_data",{get:()=>i}),this.emit(!1,r),i))}emit(e,r){this.subscribers.forEach(n=>n(e,r))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(e){let r=!1;if(!this.done){let n=()=>this.cancel();e.addEventListener("abort",n),r=await new Promise(i=>{this.subscribe(o=>{e.removeEventListener("abort",n),(o||this.done)&&i(o)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return je(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,r)=>{let[n,i]=r;return Object.assign(e,{[n]:D2(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function N2(t){return t instanceof Promise&&t._tracked===!0}function D2(t){if(!N2(t))return t;if(t._error)throw t._error;return t._data}class av{constructor(e,r,n,i){i===void 0&&(i=!1),this.status=e,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function wE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _E=["post","put","patch","delete"],I2=new Set(_E),L2=["get",..._E],B2=new Set(L2),F2=new Set([301,302,303,307,308]),j2=new Set([307,308]),Nh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},$2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Py={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U2=!bE;function q2(t){je(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=pE(t.routes),r=null,n=new Set,i=null,o=null,s=null,a=t.hydrationData!=null,u=il(e,t.history.location,t.basename),l=null;if(u==null){let K=Ji(404,{pathname:t.history.location.pathname}),{matches:X,route:Z}=Ny(e);u=X,l={[Z.id]:K}}let c=!u.some(K=>K.route.loader)||t.hydrationData!=null,f,d={historyAction:t.history.action,location:t.history.location,matches:u,initialized:c,navigation:Nh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||l,fetchers:new Map,blockers:new Map},h=Ft.Pop,p=!1,g,_=!1,m=!1,v=[],S=[],b=new Map,R=0,j=-1,D=new Map,N=new Set,U=new Map,F=new Map,O=null,$=new Map,P=!1;function y(){return r=t.history.listen(K=>{let{action:X,location:Z,delta:ue}=K;if(P){P=!1;return}Hl(O!=null&&ue===null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=ne({currentLocation:d.location,nextLocation:Z,historyAction:X});if(fe&&ue!=null){P=!0,t.history.go(ue*-1),ee(fe,{state:"blocked",location:Z,proceed(){ee(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),t.history.go(ue)},reset(){Q(fe),B({blockers:new Map(f.state.blockers)})}});return}return x(X,Z)}),d.initialized||x(Ft.Pop,d.location),f}function E(){r&&r(),n.clear(),g&&g.abort(),d.fetchers.forEach((K,X)=>Y(X)),d.blockers.forEach((K,X)=>Q(X))}function C(K){return n.add(K),()=>n.delete(K)}function B(K){d=it({},d,K),n.forEach(X=>X(d))}function L(K,X){var Z,ue;let fe=d.actionData!=null&&d.navigation.formMethod!=null&&pi(d.navigation.formMethod)&&d.navigation.state==="loading"&&((Z=K.state)==null?void 0:Z._isRedirect)!==!0,he;X.actionData?Object.keys(X.actionData).length>0?he=X.actionData:he=null:fe?he=d.actionData:he=null;let Re=X.loaderData?My(d.loaderData,X.loaderData,X.matches||[],X.errors):d.loaderData;for(let[we]of $)Q(we);let Ae=p===!0||d.navigation.formMethod!=null&&pi(d.navigation.formMethod)&&((ue=K.state)==null?void 0:ue._isRedirect)!==!0;B(it({},X,{actionData:he,loaderData:Re,historyAction:h,location:K,initialized:!0,navigation:Nh,revalidation:"idle",restoreScrollPosition:ae(K,X.matches||d.matches),preventScrollReset:Ae,blockers:new Map(d.blockers)})),_||h===Ft.Pop||(h===Ft.Push?t.history.push(K,K.state):h===Ft.Replace&&t.history.replace(K,K.state)),h=Ft.Pop,p=!1,_=!1,m=!1,v=[],S=[]}async function M(K,X){if(typeof K=="number"){t.history.go(K);return}let{path:Z,submission:ue,error:fe}=ky(K,X),he=d.location,Re=zl(d.location,Z,X&&X.state);Re=it({},Re,t.history.encodeLocation(Re));let Ae=X&&X.replace!=null?X.replace:void 0,we=Ft.Push;Ae===!0?we=Ft.Replace:Ae===!1||ue!=null&&pi(ue.formMethod)&&ue.formAction===d.location.pathname+d.location.search&&(we=Ft.Replace);let kt=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,xe=ne({currentLocation:he,nextLocation:Re,historyAction:we});if(xe){ee(xe,{state:"blocked",location:Re,proceed(){ee(xe,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),M(K,X)},reset(){Q(xe),B({blockers:new Map(d.blockers)})}});return}return await x(we,Re,{submission:ue,pendingError:fe,preventScrollReset:kt,replace:X&&X.replace})}function I(){if(W(),B({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){x(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}x(h||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function x(K,X,Z){g&&g.abort(),g=null,h=K,_=(Z&&Z.startUninterruptedRevalidation)===!0,ye(d.location,d.matches),p=(Z&&Z.preventScrollReset)===!0;let ue=Z&&Z.overrideNavigation,fe=il(e,X,t.basename);if(!fe){let ke=Ji(404,{pathname:X.pathname}),{matches:zt,route:Ue}=Ny(e);ce(),L(X,{matches:zt,loaderData:{},errors:{[Ue.id]:ke}});return}if(W2(d.location,X)&&!(Z&&Z.submission&&pi(Z.submission.formMethod))){L(X,{matches:fe});return}g=new AbortController;let he=Ua(t.history,X,g.signal,Z&&Z.submission),Re,Ae;if(Z&&Z.pendingError)Ae={[Us(fe).route.id]:Z.pendingError};else if(Z&&Z.submission&&pi(Z.submission.formMethod)){let ke=await w(he,X,Z.submission,fe,{replace:Z.replace});if(ke.shortCircuited)return;Re=ke.pendingActionData,Ae=ke.pendingActionError,ue=it({state:"loading",location:X},Z.submission),he=new Request(he.url,{signal:he.signal})}let{shortCircuited:we,loaderData:kt,errors:xe}=await T(he,X,fe,ue,Z&&Z.submission,Z&&Z.replace,Re,Ae);we||(g=null,L(X,it({matches:fe},Re?{actionData:Re}:{},{loaderData:kt,errors:xe})))}async function w(K,X,Z,ue,fe){W();let he=it({state:"submitting",location:X},Z);B({navigation:he});let Re,Ae=By(ue,X);if(!Ae.route.action)Re={type:ar.error,error:Ji(405,{method:K.method,pathname:X.pathname,routeId:Ae.route.id})};else if(Re=await $a("action",K,Ae,ue,f.basename),K.signal.aborted)return{shortCircuited:!0};if(Js(Re)){let we;return fe&&fe.replace!=null?we=fe.replace:we=Re.location===d.location.pathname+d.location.search,await z(d,Re,{submission:Z,replace:we}),{shortCircuited:!0}}if(vl(Re)){let we=Us(ue,Ae.route.id);return(fe&&fe.replace)!==!0&&(h=Ft.Push),{pendingActionData:{},pendingActionError:{[we.route.id]:Re.error}}}if(jo(Re))throw Ji(400,{type:"defer-action"});return{pendingActionData:{[Ae.route.id]:Re.data}}}async function T(K,X,Z,ue,fe,he,Re,Ae){let we=ue;we||(we=it({state:"loading",location:X,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fe));let kt=fe||(we.formMethod&&we.formAction&&we.formData&&we.formEncType?{formMethod:we.formMethod,formAction:we.formAction,formData:we.formData,formEncType:we.formEncType}:void 0),[xe,ke]=Ty(t.history,d,Z,kt,X,m,v,S,Re,Ae,U);if(ce(Le=>!(Z&&Z.some(qe=>qe.route.id===Le))||xe&&xe.some(qe=>qe.route.id===Le)),xe.length===0&&ke.length===0)return L(X,it({matches:Z,loaderData:{},errors:Ae||null},Re?{actionData:Re}:{})),{shortCircuited:!0};if(!_){ke.forEach(qe=>{let wr=d.fetchers.get(qe.key),st={state:"loading",data:wr&&wr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};d.fetchers.set(qe.key,st)});let Le=Re||d.actionData;B(it({navigation:we},Le?Object.keys(Le).length===0?{actionData:null}:{actionData:Le}:{},ke.length>0?{fetchers:new Map(d.fetchers)}:{}))}j=++R,ke.forEach(Le=>b.set(Le.key,g));let{results:zt,loaderResults:Ue,fetcherResults:nt}=await V(d.matches,Z,xe,ke,K);if(K.signal.aborted)return{shortCircuited:!0};ke.forEach(Le=>b.delete(Le.key));let Jr=Dy(zt);if(Jr)return await z(d,Jr,{replace:he}),{shortCircuited:!0};let{loaderData:ot,errors:tt}=Oy(d,Z,xe,Ue,Ae,ke,nt,F);F.forEach((Le,qe)=>{Le.subscribe(wr=>{(wr||Le.done)&&F.delete(qe)})}),le();let dn=Ie(j);return it({loaderData:ot,errors:tt},dn||ke.length>0?{fetchers:new Map(d.fetchers)}:{})}function H(K){return d.fetchers.get(K)||$2}function A(K,X,Z,ue){if(U2)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");b.has(K)&&pe(K);let fe=il(e,Z,t.basename);if(!fe){J(K,X,Ji(404,{pathname:Z}));return}let{path:he,submission:Re}=ky(Z,ue,!0),Ae=By(fe,he);if(p=(ue&&ue.preventScrollReset)===!0,Re&&pi(Re.formMethod)){k(K,X,he,Ae,fe,Re);return}U.set(K,{routeId:X,path:he,match:Ae,matches:fe}),q(K,X,he,Ae,fe,Re)}async function k(K,X,Z,ue,fe,he){if(W(),U.delete(K),!ue.route.action){let Qe=Ji(405,{method:he.formMethod,pathname:Z,routeId:X});J(K,X,Qe);return}let Re=d.fetchers.get(K),Ae=it({state:"submitting"},he,{data:Re&&Re.data," _hasFetcherDoneAnything ":!0});d.fetchers.set(K,Ae),B({fetchers:new Map(d.fetchers)});let we=new AbortController,kt=Ua(t.history,Z,we.signal,he);b.set(K,we);let xe=await $a("action",kt,ue,fe,f.basename);if(kt.signal.aborted){b.get(K)===we&&b.delete(K);return}if(Js(xe)){b.delete(K),N.add(K);let Qe=it({state:"loading"},he,{data:void 0," _hasFetcherDoneAnything ":!0});return d.fetchers.set(K,Qe),B({fetchers:new Map(d.fetchers)}),z(d,xe,{isFetchActionRedirect:!0})}if(vl(xe)){J(K,X,xe.error);return}if(jo(xe))throw Ji(400,{type:"defer-action"});let ke=d.navigation.location||d.location,zt=Ua(t.history,ke,we.signal),Ue=d.navigation.state!=="idle"?il(e,d.navigation.location,t.basename):d.matches;je(Ue,"Didn't find any matches after fetcher action");let nt=++R;D.set(K,nt);let Jr=it({state:"loading",data:xe.data},he,{" _hasFetcherDoneAnything ":!0});d.fetchers.set(K,Jr);let[ot,tt]=Ty(t.history,d,Ue,he,ke,m,v,S,{[ue.route.id]:xe.data},void 0,U);tt.filter(Qe=>Qe.key!==K).forEach(Qe=>{let hn=Qe.key,dt=d.fetchers.get(hn),mt={state:"loading",data:dt&&dt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};d.fetchers.set(hn,mt),b.set(hn,we)}),B({fetchers:new Map(d.fetchers)});let{results:dn,loaderResults:Le,fetcherResults:qe}=await V(d.matches,Ue,ot,tt,zt);if(we.signal.aborted)return;D.delete(K),b.delete(K),tt.forEach(Qe=>b.delete(Qe.key));let wr=Dy(dn);if(wr)return z(d,wr);let{loaderData:st,errors:lt}=Oy(d,d.matches,ot,Le,void 0,tt,qe,F),ci={state:"idle",data:xe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};d.fetchers.set(K,ci);let pt=Ie(nt);d.navigation.state==="loading"&&nt>j?(je(h,"Expected pending action"),g&&g.abort(),L(d.navigation.location,{matches:Ue,loaderData:st,errors:lt,fetchers:new Map(d.fetchers)})):(B(it({errors:lt,loaderData:My(d.loaderData,st,Ue,lt)},pt?{fetchers:new Map(d.fetchers)}:{})),m=!1)}async function q(K,X,Z,ue,fe,he){let Re=d.fetchers.get(K),Ae=it({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},he,{data:Re&&Re.data," _hasFetcherDoneAnything ":!0});d.fetchers.set(K,Ae),B({fetchers:new Map(d.fetchers)});let we=new AbortController,kt=Ua(t.history,Z,we.signal);b.set(K,we);let xe=await $a("loader",kt,ue,fe,f.basename);if(jo(xe)&&(xe=await xE(xe,kt.signal,!0)||xe),b.get(K)===we&&b.delete(K),kt.signal.aborted)return;if(Js(xe)){await z(d,xe);return}if(vl(xe)){let zt=Us(d.matches,X);d.fetchers.delete(K),B({fetchers:new Map(d.fetchers),errors:{[zt.route.id]:xe.error}});return}je(!jo(xe),"Unhandled fetcher deferred data");let ke={state:"idle",data:xe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};d.fetchers.set(K,ke),B({fetchers:new Map(d.fetchers)})}async function z(K,X,Z){var ue;let{submission:fe,replace:he,isFetchActionRedirect:Re}=Z===void 0?{}:Z;X.revalidate&&(m=!0);let Ae=zl(K.location,X.location,it({_isRedirect:!0},Re?{_isFetchActionRedirect:!0}:{}));if(je(Ae,"Expected a location on the redirect navigation"),bE&&typeof((ue=window)==null?void 0:ue.location)<"u"){let Ue=t.history.createURL(X.location).origin;if(window.location.origin!==Ue){he?window.location.replace(X.location):window.location.assign(X.location);return}}g=null;let we=he===!0?Ft.Replace:Ft.Push,{formMethod:kt,formAction:xe,formEncType:ke,formData:zt}=K.navigation;!fe&&kt&&xe&&zt&&ke&&(fe={formMethod:kt,formAction:xe,formEncType:ke,formData:zt}),j2.has(X.status)&&fe&&pi(fe.formMethod)?await x(we,Ae,{submission:it({},fe,{formAction:X.location}),preventScrollReset:p}):await x(we,Ae,{overrideNavigation:{state:"loading",location:Ae,formMethod:fe?fe.formMethod:void 0,formAction:fe?fe.formAction:void 0,formEncType:fe?fe.formEncType:void 0,formData:fe?fe.formData:void 0},preventScrollReset:p})}async function V(K,X,Z,ue,fe){let he=await Promise.all([...Z.map(we=>$a("loader",fe,we,X,f.basename)),...ue.map(we=>$a("loader",Ua(t.history,we.path,fe.signal),we.match,we.matches,f.basename))]),Re=he.slice(0,Z.length),Ae=he.slice(Z.length);return await Promise.all([Iy(K,Z,Re,fe.signal,!1,d.loaderData),Iy(K,ue.map(we=>we.match),Ae,fe.signal,!0)]),{results:he,loaderResults:Re,fetcherResults:Ae}}function W(){m=!0,v.push(...ce()),U.forEach((K,X)=>{b.has(X)&&(S.push(X),pe(X))})}function J(K,X,Z){let ue=Us(d.matches,X);Y(K),B({errors:{[ue.route.id]:Z},fetchers:new Map(d.fetchers)})}function Y(K){b.has(K)&&pe(K),U.delete(K),D.delete(K),N.delete(K),d.fetchers.delete(K)}function pe(K){let X=b.get(K);je(X,"Expected fetch controller: "+K),X.abort(),b.delete(K)}function ie(K){for(let X of K){let ue={state:"idle",data:H(X).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};d.fetchers.set(X,ue)}}function le(){let K=[];for(let X of N){let Z=d.fetchers.get(X);je(Z,"Expected fetcher: "+X),Z.state==="loading"&&(N.delete(X),K.push(X))}ie(K)}function Ie(K){let X=[];for(let[Z,ue]of D)if(ue<K){let fe=d.fetchers.get(Z);je(fe,"Expected fetcher: "+Z),fe.state==="loading"&&(pe(Z),D.delete(Z),X.push(Z))}return ie(X),X.length>0}function ve(K,X){let Z=d.blockers.get(K)||Py;return $.get(K)!==X&&($.set(K,X),O==null?O=K:K!==O&&Hl(!1,"A router only supports one blocker at a time")),Z}function Q(K){d.blockers.delete(K),$.delete(K),O===K&&(O=null)}function ee(K,X){let Z=d.blockers.get(K)||Py;je(Z.state==="unblocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="blocked"||Z.state==="blocked"&&X.state==="proceeding"||Z.state==="blocked"&&X.state==="unblocked"||Z.state==="proceeding"&&X.state==="unblocked","Invalid blocker state transition: "+Z.state+" -> "+X.state),d.blockers.set(K,X),B({blockers:new Map(d.blockers)})}function ne(K){let{currentLocation:X,nextLocation:Z,historyAction:ue}=K;if(O==null)return;let fe=$.get(O);je(fe,"Could not find a function for the active blocker");let he=d.blockers.get(O);if(!(he&&he.state==="proceeding")&&fe({currentLocation:X,nextLocation:Z,historyAction:ue}))return O}function ce(K){let X=[];return F.forEach((Z,ue)=>{(!K||K(ue))&&(Z.cancel(),X.push(ue),F.delete(ue))}),X}function se(K,X,Z){if(i=K,s=X,o=Z||(ue=>ue.key),!a&&d.navigation===Nh){a=!0;let ue=ae(d.location,d.matches);ue!=null&&B({restoreScrollPosition:ue})}return()=>{i=null,s=null,o=null}}function ye(K,X){if(i&&o&&s){let Z=X.map(fe=>Ly(fe,d.loaderData)),ue=o(K,Z)||K.key;i[ue]=s()}}function ae(K,X){if(i&&o&&s){let Z=X.map(he=>Ly(he,d.loaderData)),ue=o(K,Z)||K.key,fe=i[ue];if(typeof fe=="number")return fe}return null}return f={get basename(){return t.basename},get state(){return d},get routes(){return e},initialize:y,subscribe:C,enableScrollRestoration:se,navigate:M,fetch:A,revalidate:I,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:H,deleteFetcher:Y,dispose:E,getBlocker:ve,deleteBlocker:Q,_internalFetchControllers:b,_internalActiveDeferreds:F},f}function z2(t){return t!=null&&"formData"in t}function ky(t,e,r){r===void 0&&(r=!1);let n=typeof t=="string"?t:Jo(t);if(!e||!z2(e))return{path:n};if(e.formMethod&&!Q2(e.formMethod))return{path:n,error:Ji(405,{method:e.formMethod})};let i;if(e.formData&&(i={formMethod:e.formMethod||"get",formAction:RE(n),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData},pi(i.formMethod)))return{path:n,submission:i};let o=Di(n),s=EE(e.formData);return r&&o.search&&AE(o.search)&&s.append("index",""),o.search="?"+s,{path:Jo(o),submission:i}}function H2(t,e){let r=t;if(e){let n=t.findIndex(i=>i.route.id===e);n>=0&&(r=t.slice(0,n))}return r}function Ty(t,e,r,n,i,o,s,a,u,l,c){let f=l?Object.values(l)[0]:u?Object.values(u)[0]:void 0,d=t.createURL(e.location),h=t.createURL(i),p=o||d.toString()===h.toString()||d.search!==h.search,g=l?Object.keys(l)[0]:void 0,m=H2(r,g).filter((S,b)=>{if(S.route.loader==null)return!1;if(V2(e.loaderData,e.matches[b],S)||s.some(D=>D===S.route.id))return!0;let R=e.matches[b],j=S;return Cy(S,it({currentUrl:d,currentParams:R.params,nextUrl:h,nextParams:j.params},n,{actionResult:f,defaultShouldRevalidate:p||SE(R,j)}))}),v=[];return c&&c.forEach((S,b)=>{if(r.some(R=>R.route.id===S.routeId))a.includes(b)?v.push(it({key:b},S)):Cy(S.match,it({currentUrl:d,currentParams:e.matches[e.matches.length-1].params,nextUrl:h,nextParams:r[r.length-1].params},n,{actionResult:f,defaultShouldRevalidate:p}))&&v.push(it({key:b},S));else return}),[m,v]}function V2(t,e,r){let n=!e||r.route.id!==e.route.id,i=t[r.route.id]===void 0;return n||i}function SE(t,e){let r=t.route.path;return t.pathname!==e.pathname||r!=null&&r.endsWith("*")&&t.params["*"]!==e.params["*"]}function Cy(t,e){if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}async function $a(t,e,r,n,i,o,s,a){i===void 0&&(i="/"),o===void 0&&(o=!1),s===void 0&&(s=!1);let u,l,c,f=new Promise((h,p)=>c=p),d=()=>c();e.signal.addEventListener("abort",d);try{let h=r.route[t];je(h,"Could not find the "+t+' to run on the "'+r.route.id+'" route'),l=await Promise.race([h({request:e,params:r.params,context:a}),f]),je(l!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){u=ar.error,l=h}finally{e.signal.removeEventListener("abort",d)}if(G2(l)){let h=l.status;if(F2.has(h)){let _=l.headers.get("Location");if(je(_,"Redirects returned/thrown from loaders/actions must have a Location header"),/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(_)){if(!o){let v=new URL(e.url),S=_.startsWith("//")?new URL(v.protocol+_):new URL(_);S.origin===v.origin&&(_=S.pathname+S.search+S.hash)}}else{let v=n.slice(0,n.indexOf(r)+1),S=sv(v).map(R=>R.pathnameBase),b=yE(_,S,new URL(e.url).pathname);if(je(Jo(b),"Unable to resolve redirect location: "+_),i){let R=b.pathname;b.pathname=R==="/"?i:mo([i,R])}_=Jo(b)}if(o)throw l.headers.set("Location",_),l;return{type:ar.redirect,status:h,location:_,revalidate:l.headers.get("X-Remix-Revalidate")!==null}}if(s)throw{type:u||ar.data,response:l};let p,g=l.headers.get("Content-Type");return g&&/\bapplication\/json\b/.test(g)?p=await l.json():p=await l.text(),u===ar.error?{type:u,error:new av(h,l.statusText,p),headers:l.headers}:{type:ar.data,data:p,statusCode:l.status,headers:l.headers}}return u===ar.error?{type:u,error:l}:l instanceof M2?{type:ar.deferred,deferredData:l}:{type:ar.data,data:l}}function Ua(t,e,r,n){let i=t.createURL(RE(e)).toString(),o={signal:r};if(n&&pi(n.formMethod)){let{formMethod:s,formEncType:a,formData:u}=n;o.method=s.toUpperCase(),o.body=a==="application/x-www-form-urlencoded"?EE(u):u}return new Request(i,o)}function EE(t){let e=new URLSearchParams;for(let[r,n]of t.entries())e.append(r,n instanceof File?n.name:n);return e}function K2(t,e,r,n,i){let o={},s=null,a,u=!1,l={};return r.forEach((c,f)=>{let d=e[f].route.id;if(je(!Js(c),"Cannot handle redirect results in processLoaderData"),vl(c)){let h=Us(t,d),p=c.error;n&&(p=Object.values(n)[0],n=void 0),s=s||{},s[h.route.id]==null&&(s[h.route.id]=p),o[d]=void 0,u||(u=!0,a=wE(c.error)?c.error.status:500),c.headers&&(l[d]=c.headers)}else jo(c)?(i.set(d,c.deferredData),o[d]=c.deferredData.data):o[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!u&&(a=c.statusCode),c.headers&&(l[d]=c.headers)}),n&&(s=n,o[Object.keys(n)[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:l}}function Oy(t,e,r,n,i,o,s,a){let{loaderData:u,errors:l}=K2(e,r,n,i,a);for(let c=0;c<o.length;c++){let{key:f,match:d}=o[c];je(s!==void 0&&s[c]!==void 0,"Did not find corresponding fetcher result");let h=s[c];if(vl(h)){let p=Us(t.matches,d.route.id);l&&l[p.route.id]||(l=it({},l,{[p.route.id]:h.error})),t.fetchers.delete(f)}else if(Js(h))je(!1,"Unhandled fetcher revalidation redirect");else if(jo(h))je(!1,"Unhandled fetcher deferred data");else{let p={state:"idle",data:h.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};t.fetchers.set(f,p)}}return{loaderData:u,errors:l}}function My(t,e,r,n){let i=it({},e);for(let o of r){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&(i[s]=t[s]),n&&n.hasOwnProperty(s))break}return i}function Us(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function Ny(t){let e=t.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ji(t,e){let{pathname:r,routeId:n,method:i,type:o}=e===void 0?{}:e,s="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(s="Bad Request",i&&r&&n?a="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":o==="defer-action"&&(a="defer() is not supported in actions")):t===403?(s="Forbidden",a='Route "'+n+'" does not match URL "'+r+'"'):t===404?(s="Not Found",a='No route matches URL "'+r+'"'):t===405&&(s="Method Not Allowed",i&&r&&n?a="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new av(t||500,s,new Error(a),!0)}function Dy(t){for(let e=t.length-1;e>=0;e--){let r=t[e];if(Js(r))return r}}function RE(t){let e=typeof t=="string"?Di(t):t;return Jo(it({},e,{hash:""}))}function W2(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash!==e.hash}function jo(t){return t.type===ar.deferred}function vl(t){return t.type===ar.error}function Js(t){return(t&&t.type)===ar.redirect}function G2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Q2(t){return B2.has(t)}function pi(t){return I2.has(t)}async function Iy(t,e,r,n,i,o){for(let s=0;s<r.length;s++){let a=r[s],u=e[s],l=t.find(f=>f.route.id===u.route.id),c=l!=null&&!SE(l,u)&&(o&&o[u.route.id])!==void 0;jo(a)&&(i||c)&&await xE(a,n,i).then(f=>{f&&(r[s]=f||r[s])})}}async function xE(t,e,r){if(r===void 0&&(r=!1),!await t.deferredData.resolveData(e)){if(r)try{return{type:ar.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ar.error,error:i}}return{type:ar.data,data:t.deferredData.data}}}function AE(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ly(t,e){let{route:r,pathname:n,params:i}=t;return{id:r.id,pathname:n,params:i,data:e[r.id],handle:r.handle}}function By(t,e){let r=typeof e=="string"?Di(e).search:e.search;if(t[t.length-1].route.index&&AE(r||""))return t[t.length-1];let n=sv(t);return n[n.length-1]}/**
 * React Router v6.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lf.apply(this,arguments)}function J2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const Y2=typeof Object.is=="function"?Object.is:J2,{useState:X2,useEffect:Z2,useLayoutEffect:eT,useDebugValue:tT}=Mp;function rT(t,e,r){const n=e(),[{inst:i},o]=X2({inst:{value:n,getSnapshot:e}});return eT(()=>{i.value=n,i.getSnapshot=e,Dh(i)&&o({inst:i})},[t,n,e]),Z2(()=>(Dh(i)&&o({inst:i}),t(()=>{Dh(i)&&o({inst:i})})),[t]),tT(n),n}function Dh(t){const e=t.getSnapshot,r=t.value;try{const n=e();return!Y2(r,n)}catch{return!0}}function nT(t,e,r){return e()}const iT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oT=!iT,sT=oT?nT:rT,aT="useSyncExternalStore"in Mp?(t=>t.useSyncExternalStore)(Mp):sT,lv=ge.createContext(null),cv=ge.createContext(null),uv=ge.createContext(null),Hf=ge.createContext(null),Sa=ge.createContext({outlet:null,matches:[]}),PE=ge.createContext(null);function Vf(){return ge.useContext(Hf)!=null}function kE(){return Vf()||je(!1),ge.useContext(Hf).location}function fv(){Vf()||je(!1);let{basename:t,navigator:e}=ge.useContext(uv),{matches:r}=ge.useContext(Sa),{pathname:n}=kE(),i=JSON.stringify(sv(r).map(a=>a.pathnameBase)),o=ge.useRef(!1);return ge.useEffect(()=>{o.current=!0}),ge.useCallback(function(a,u){if(u===void 0&&(u={}),!o.current)return;if(typeof a=="number"){e.go(a);return}let l=yE(a,JSON.parse(i),n,u.relative==="path");t!=="/"&&(l.pathname=l.pathname==="/"?t:mo([t,l.pathname])),(u.replace?e.replace:e.push)(l,u.state,u)},[t,e,i,n])}function lT(){let{matches:t}=ge.useContext(Sa),e=t[t.length-1];return e?e.params:{}}function cT(t,e){Vf()||je(!1);let{navigator:r}=ge.useContext(uv),n=ge.useContext(cv),{matches:i}=ge.useContext(Sa),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=kE(),l;if(e){var c;let g=typeof e=="string"?Di(e):e;a==="/"||(c=g.pathname)!=null&&c.startsWith(a)||je(!1),l=g}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=il(t,{pathname:d}),p=hT(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:mo([a,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:mo([a,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n||void 0);return e&&p?ge.createElement(Hf.Provider,{value:{location:lf({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Ft.Pop}},p):p}function uT(){let t=vT(),e=wE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),r?ge.createElement("pre",{style:i},r):null,o)}class fT extends ge.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location?{error:e.error,location:e.location}:{error:e.error||r.error,location:r.location}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error?ge.createElement(Sa.Provider,{value:this.props.routeContext},ge.createElement(PE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dT(t){let{routeContext:e,match:r,children:n}=t,i=ge.useContext(lv);return i&&i.static&&i.staticContext&&r.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),ge.createElement(Sa.Provider,{value:e},n)}function hT(t,e,r){if(e===void 0&&(e=[]),t==null)if(r!=null&&r.errors)t=r.matches;else return null;let n=t,i=r==null?void 0:r.errors;if(i!=null){let o=n.findIndex(s=>s.route.id&&(i==null?void 0:i[s.route.id]));o>=0||je(!1),n=n.slice(0,Math.min(n.length,o+1))}return n.reduceRight((o,s,a)=>{let u=s.route.id?i==null?void 0:i[s.route.id]:null,l=r?s.route.errorElement||ge.createElement(uT,null):null,c=e.concat(n.slice(0,a+1)),f=()=>ge.createElement(dT,{match:s,routeContext:{outlet:o,matches:c}},u?l:s.route.element!==void 0?s.route.element:o);return r&&(s.route.errorElement||a===0)?ge.createElement(fT,{location:r.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var Fy;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(Fy||(Fy={}));var cf;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(cf||(cf={}));function pT(t){let e=ge.useContext(cv);return e||je(!1),e}function mT(t){let e=ge.useContext(Sa);return e||je(!1),e}function gT(t){let e=mT(),r=e.matches[e.matches.length-1];return r.route.id||je(!1),r.route.id}function vT(){var t;let e=ge.useContext(PE),r=pT(cf.UseRouteError),n=gT(cf.UseRouteError);return e||((t=r.errors)==null?void 0:t[n])}function yT(t){let{fallbackElement:e,router:r}=t,n=aT(r.subscribe,()=>r.state,()=>r.state),i=ge.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:s=>r.navigate(s),push:(s,a,u)=>r.navigate(s,{state:a,preventScrollReset:u==null?void 0:u.preventScrollReset}),replace:(s,a,u)=>r.navigate(s,{replace:!0,state:a,preventScrollReset:u==null?void 0:u.preventScrollReset})}),[r]),o=r.basename||"/";return ge.createElement(ge.Fragment,null,ge.createElement(lv.Provider,{value:{router:r,navigator:i,static:!1,basename:o}},ge.createElement(cv.Provider,{value:n},ge.createElement(wT,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:i},r.state.initialized?ge.createElement(_T,null):e))),null)}function Yi(t){je(!1)}function wT(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Ft.Pop,navigator:o,static:s=!1}=t;Vf()&&je(!1);let a=e.replace(/^\/*/,"/"),u=ge.useMemo(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof n=="string"&&(n=Di(n));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=n,p=ge.useMemo(()=>{let g=vE(l,a);return g==null?null:{pathname:g,search:c,hash:f,state:d,key:h}},[a,l,c,f,d,h]);return p==null?null:ge.createElement(uv.Provider,{value:u},ge.createElement(Hf.Provider,{children:r,value:{location:p,navigationType:i}}))}function _T(t){let{children:e,location:r}=t,n=ge.useContext(lv),i=n&&!e?n.router.routes:uf(e);return cT(i,r)}var jy;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(jy||(jy={}));new Promise(()=>{});function uf(t,e){e===void 0&&(e=[]);let r=[];return ge.Children.forEach(t,(n,i)=>{if(!ge.isValidElement(n))return;if(n.type===ge.Fragment){r.push.apply(r,uf(n.props.children,e));return}n.type!==Yi&&je(!1),!n.props.index||!n.props.children||je(!1);let o=[...e,i],s={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,hasErrorBoundary:n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle};n.props.children&&(s.children=uf(n.props.children,o)),r.push(s)}),r}function TE(t){return t.map(e=>{let r=lf({},e);return r.hasErrorBoundary==null&&(r.hasErrorBoundary=r.errorElement!=null),r.children&&(r.children=TE(r.children)),r})}/**
 * React Router DOM v6.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},km.apply(this,arguments)}function bT(t,e){return q2({basename:e==null?void 0:e.basename,history:c2({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||ST(),routes:TE(t)}).initialize()}function ST(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=km({},e,{errors:ET(e.errors)})),e}function ET(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")r[n]=new av(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let o=new Error(i.message);o.stack="",r[n]=o}else r[n]=i;return r}var $y;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})($y||($y={}));var Uy;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uy||(Uy={}));const RT="/assets/demo-aa800e5b.gif",CE=()=>{const[t,e]=ge.useState(!1);return vt("div",{className:"w-11/12 md:mr-10 md:ml-10 ml-5 mt-5 rounded-xl navbar bg-purple-600",children:[_e("div",{className:"flex-1",children:_e("a",{className:"btn btn-ghost normal-case text-xl",children:"deCollab"})}),vt("div",{className:"flex-none",children:[_e("div",{className:"dropdown dropdown-end"}),t&&vt("div",{className:"dropdown dropdown-end",children:[_e("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar",children:_e("div",{className:"w-10 rounded-full",children:_e("img",{src:"/images/stock/photo-1534528741775-53994a69daeb.jpg"})})}),vt("ul",{tabIndex:0,className:"menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52",children:[_e("li",{children:vt("a",{className:"justify-between",children:["Profile",_e("span",{className:"badge",children:"New"})]})}),_e("li",{children:_e("a",{children:"Settings"})}),_e("li",{children:_e("a",{children:"Logout"})})]})]})]})]})},qy=()=>vt(hb,{children:[_e(CE,{}),vt("div",{className:"lg:h-full grid grid-cols-1 lg:grid-cols-2",children:[vt("div",{className:"slogan ml-5 lg:mt-24",children:[_e("h1",{className:"text-3xl",children:"Code without worrying about privacy"}),_e("h1",{className:"text-3xl",children:"Meet without worrying about privacy"}),_e("h1",{className:"text-3xl",children:"Collaborate without worrying about privacy"}),vt("h2",{className:"mt-4 subtitle",children:[_e("hr",{}),_e("p",{className:"",children:"Say hello to One click decentralised Live Code Collaboration"})]}),vt("div",{className:"lg:mt-12",children:[_e("a",{href:"/create",className:"text-xl bg-purple-600 inline-block text-center rounded m-1 p-5 ml-10",children:"Create A Meeting"}),_e("a",{href:"/join",className:"text-xl bg-purple-600 inline-block text-center rounded m-1 p-5 ml-10",children:"Join a Meeting"})]})]}),_e("div",{className:"lg:mt-44 gif border-4 border-sky-500 w-full h-fit",children:_e("img",{src:RT,alt:"gif"})})]})]});var Tm={},xT={get exports(){return Tm},set exports(t){Tm=t}};const AT={},PT=Object.freeze(Object.defineProperty({__proto__:null,default:AT},Symbol.toStringTag,{value:"Module"})),kT=IA(PT);(function(t){(function(e,r){function n(P,y){if(!P)throw new Error(y||"Assertion failed")}function i(P,y){P.super_=y;var E=function(){};E.prototype=y.prototype,P.prototype=new E,P.prototype.constructor=P}function o(P,y,E){if(o.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((y==="le"||y==="be")&&(E=y,y=10),this._init(P||0,y||10,E||"be"))}typeof e=="object"?e.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=kT.Buffer}catch{}o.isBN=function(y){return y instanceof o?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===o.wordSize&&Array.isArray(y.words)},o.max=function(y,E){return y.cmp(E)>0?y:E},o.min=function(y,E){return y.cmp(E)<0?y:E},o.prototype._init=function(y,E,C){if(typeof y=="number")return this._initNumber(y,E,C);if(typeof y=="object")return this._initArray(y,E,C);E==="hex"&&(E=16),n(E===(E|0)&&E>=2&&E<=36),y=y.toString().replace(/\s+/g,"");var B=0;y[0]==="-"&&(B++,this.negative=1),B<y.length&&(E===16?this._parseHex(y,B,C):(this._parseBase(y,E,B),C==="le"&&this._initArray(this.toArray(),E,C)))},o.prototype._initNumber=function(y,E,C){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(n(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),E,C)},o.prototype._initArray=function(y,E,C){if(n(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var L,M,I=0;if(C==="be")for(B=y.length-1,L=0;B>=0;B-=3)M=y[B]|y[B-1]<<8|y[B-2]<<16,this.words[L]|=M<<I&67108863,this.words[L+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,L++);else if(C==="le")for(B=0,L=0;B<y.length;B+=3)M=y[B]|y[B+1]<<8|y[B+2]<<16,this.words[L]|=M<<I&67108863,this.words[L+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,L++);return this._strip()};function a(P,y){var E=P.charCodeAt(y);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;n(!1,"Invalid character in "+P)}function u(P,y,E){var C=a(P,E);return E-1>=y&&(C|=a(P,E-1)<<4),C}o.prototype._parseHex=function(y,E,C){this.length=Math.ceil((y.length-E)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var L=0,M=0,I;if(C==="be")for(B=y.length-1;B>=E;B-=2)I=u(y,E,B)<<L,this.words[M]|=I&67108863,L>=18?(L-=18,M+=1,this.words[M]|=I>>>26):L+=8;else{var x=y.length-E;for(B=x%2===0?E+1:E;B<y.length;B+=2)I=u(y,E,B)<<L,this.words[M]|=I&67108863,L>=18?(L-=18,M+=1,this.words[M]|=I>>>26):L+=8}this._strip()};function l(P,y,E,C){for(var B=0,L=0,M=Math.min(P.length,E),I=y;I<M;I++){var x=P.charCodeAt(I)-48;B*=C,x>=49?L=x-49+10:x>=17?L=x-17+10:L=x,n(x>=0&&L<C,"Invalid character"),B+=L}return B}o.prototype._parseBase=function(y,E,C){this.words=[0],this.length=1;for(var B=0,L=1;L<=67108863;L*=E)B++;B--,L=L/E|0;for(var M=y.length-C,I=M%B,x=Math.min(M,M-I)+C,w=0,T=C;T<x;T+=B)w=l(y,T,T+B,E),this.imuln(L),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(I!==0){var H=1;for(w=l(y,T,y.length,E),T=0;T<I;T++)H*=E;this.imuln(H),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},o.prototype.copy=function(y){y.words=new Array(this.length);for(var E=0;E<this.length;E++)y.words[E]=this.words[E];y.length=this.length,y.negative=this.negative,y.red=this.red};function c(P,y){P.words=y.words,P.length=y.length,P.negative=y.negative,P.red=y.red}if(o.prototype._move=function(y){c(y,this)},o.prototype.clone=function(){var y=new o(null);return this.copy(y),y},o.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(y,E){y=y||10,E=E|0||1;var C;if(y===16||y==="hex"){C="";for(var B=0,L=0,M=0;M<this.length;M++){var I=this.words[M],x=((I<<B|L)&16777215).toString(16);L=I>>>24-B&16777215,B+=2,B>=26&&(B-=26,M--),L!==0||M!==this.length-1?C=d[6-x.length]+x+C:C=x+C}for(L!==0&&(C=L.toString(16)+C);C.length%E!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(y===(y|0)&&y>=2&&y<=36){var w=h[y],T=p[y];C="";var H=this.clone();for(H.negative=0;!H.isZero();){var A=H.modrn(T).toString(y);H=H.idivn(T),H.isZero()?C=A+C:C=d[w-A.length]+A+C}for(this.isZero()&&(C="0"+C);C.length%E!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(y,E){return this.toArrayLike(s,y,E)}),o.prototype.toArray=function(y,E){return this.toArrayLike(Array,y,E)};var g=function(y,E){return y.allocUnsafe?y.allocUnsafe(E):new y(E)};o.prototype.toArrayLike=function(y,E,C){this._strip();var B=this.byteLength(),L=C||Math.max(1,B);n(B<=L,"byte array longer than desired length"),n(L>0,"Requested array length <= 0");var M=g(y,L),I=E==="le"?"LE":"BE";return this["_toArrayLike"+I](M,B),M},o.prototype._toArrayLikeLE=function(y,E){for(var C=0,B=0,L=0,M=0;L<this.length;L++){var I=this.words[L]<<M|B;y[C++]=I&255,C<y.length&&(y[C++]=I>>8&255),C<y.length&&(y[C++]=I>>16&255),M===6?(C<y.length&&(y[C++]=I>>24&255),B=0,M=0):(B=I>>>24,M+=2)}if(C<y.length)for(y[C++]=B;C<y.length;)y[C++]=0},o.prototype._toArrayLikeBE=function(y,E){for(var C=y.length-1,B=0,L=0,M=0;L<this.length;L++){var I=this.words[L]<<M|B;y[C--]=I&255,C>=0&&(y[C--]=I>>8&255),C>=0&&(y[C--]=I>>16&255),M===6?(C>=0&&(y[C--]=I>>24&255),B=0,M=0):(B=I>>>24,M+=2)}if(C>=0)for(y[C--]=B;C>=0;)y[C--]=0},Math.clz32?o.prototype._countBits=function(y){return 32-Math.clz32(y)}:o.prototype._countBits=function(y){var E=y,C=0;return E>=4096&&(C+=13,E>>>=13),E>=64&&(C+=7,E>>>=7),E>=8&&(C+=4,E>>>=4),E>=2&&(C+=2,E>>>=2),C+E},o.prototype._zeroBits=function(y){if(y===0)return 26;var E=y,C=0;return E&8191||(C+=13,E>>>=13),E&127||(C+=7,E>>>=7),E&15||(C+=4,E>>>=4),E&3||(C+=2,E>>>=2),E&1||C++,C},o.prototype.bitLength=function(){var y=this.words[this.length-1],E=this._countBits(y);return(this.length-1)*26+E};function _(P){for(var y=new Array(P.bitLength()),E=0;E<y.length;E++){var C=E/26|0,B=E%26;y[E]=P.words[C]>>>B&1}return y}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,E=0;E<this.length;E++){var C=this._zeroBits(this.words[E]);if(y+=C,C!==26)break}return y},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},o.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var E=0;E<y.length;E++)this.words[E]=this.words[E]|y.words[E];return this._strip()},o.prototype.ior=function(y){return n((this.negative|y.negative)===0),this.iuor(y)},o.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},o.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},o.prototype.iuand=function(y){var E;this.length>y.length?E=y:E=this;for(var C=0;C<E.length;C++)this.words[C]=this.words[C]&y.words[C];return this.length=E.length,this._strip()},o.prototype.iand=function(y){return n((this.negative|y.negative)===0),this.iuand(y)},o.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},o.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},o.prototype.iuxor=function(y){var E,C;this.length>y.length?(E=this,C=y):(E=y,C=this);for(var B=0;B<C.length;B++)this.words[B]=E.words[B]^C.words[B];if(this!==E)for(;B<E.length;B++)this.words[B]=E.words[B];return this.length=E.length,this._strip()},o.prototype.ixor=function(y){return n((this.negative|y.negative)===0),this.iuxor(y)},o.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},o.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},o.prototype.inotn=function(y){n(typeof y=="number"&&y>=0);var E=Math.ceil(y/26)|0,C=y%26;this._expand(E),C>0&&E--;for(var B=0;B<E;B++)this.words[B]=~this.words[B]&67108863;return C>0&&(this.words[B]=~this.words[B]&67108863>>26-C),this._strip()},o.prototype.notn=function(y){return this.clone().inotn(y)},o.prototype.setn=function(y,E){n(typeof y=="number"&&y>=0);var C=y/26|0,B=y%26;return this._expand(C+1),E?this.words[C]=this.words[C]|1<<B:this.words[C]=this.words[C]&~(1<<B),this._strip()},o.prototype.iadd=function(y){var E;if(this.negative!==0&&y.negative===0)return this.negative=0,E=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,E=this.isub(y),y.negative=1,E._normSign();var C,B;this.length>y.length?(C=this,B=y):(C=y,B=this);for(var L=0,M=0;M<B.length;M++)E=(C.words[M]|0)+(B.words[M]|0)+L,this.words[M]=E&67108863,L=E>>>26;for(;L!==0&&M<C.length;M++)E=(C.words[M]|0)+L,this.words[M]=E&67108863,L=E>>>26;if(this.length=C.length,L!==0)this.words[this.length]=L,this.length++;else if(C!==this)for(;M<C.length;M++)this.words[M]=C.words[M];return this},o.prototype.add=function(y){var E;return y.negative!==0&&this.negative===0?(y.negative=0,E=this.sub(y),y.negative^=1,E):y.negative===0&&this.negative!==0?(this.negative=0,E=y.sub(this),this.negative=1,E):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},o.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var E=this.iadd(y);return y.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var C=this.cmp(y);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,L;C>0?(B=this,L=y):(B=y,L=this);for(var M=0,I=0;I<L.length;I++)E=(B.words[I]|0)-(L.words[I]|0)+M,M=E>>26,this.words[I]=E&67108863;for(;M!==0&&I<B.length;I++)E=(B.words[I]|0)+M,M=E>>26,this.words[I]=E&67108863;if(M===0&&I<B.length&&B!==this)for(;I<B.length;I++)this.words[I]=B.words[I];return this.length=Math.max(this.length,I),B!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(y){return this.clone().isub(y)};function m(P,y,E){E.negative=y.negative^P.negative;var C=P.length+y.length|0;E.length=C,C=C-1|0;var B=P.words[0]|0,L=y.words[0]|0,M=B*L,I=M&67108863,x=M/67108864|0;E.words[0]=I;for(var w=1;w<C;w++){for(var T=x>>>26,H=x&67108863,A=Math.min(w,y.length-1),k=Math.max(0,w-P.length+1);k<=A;k++){var q=w-k|0;B=P.words[q]|0,L=y.words[k]|0,M=B*L+H,T+=M/67108864|0,H=M&67108863}E.words[w]=H|0,x=T|0}return x!==0?E.words[w]=x|0:E.length--,E._strip()}var v=function(y,E,C){var B=y.words,L=E.words,M=C.words,I=0,x,w,T,H=B[0]|0,A=H&8191,k=H>>>13,q=B[1]|0,z=q&8191,V=q>>>13,W=B[2]|0,J=W&8191,Y=W>>>13,pe=B[3]|0,ie=pe&8191,le=pe>>>13,Ie=B[4]|0,ve=Ie&8191,Q=Ie>>>13,ee=B[5]|0,ne=ee&8191,ce=ee>>>13,se=B[6]|0,ye=se&8191,ae=se>>>13,K=B[7]|0,X=K&8191,Z=K>>>13,ue=B[8]|0,fe=ue&8191,he=ue>>>13,Re=B[9]|0,Ae=Re&8191,we=Re>>>13,kt=L[0]|0,xe=kt&8191,ke=kt>>>13,zt=L[1]|0,Ue=zt&8191,nt=zt>>>13,Jr=L[2]|0,ot=Jr&8191,tt=Jr>>>13,dn=L[3]|0,Le=dn&8191,qe=dn>>>13,wr=L[4]|0,st=wr&8191,lt=wr>>>13,ci=L[5]|0,pt=ci&8191,Qe=ci>>>13,hn=L[6]|0,dt=hn&8191,mt=hn>>>13,Po=L[7]|0,wt=Po&8191,_t=Po>>>13,ko=L[8]|0,bt=ko&8191,St=ko>>>13,To=L[9]|0,Et=To&8191,Rt=To>>>13;C.negative=y.negative^E.negative,C.length=19,x=Math.imul(A,xe),w=Math.imul(A,ke),w=w+Math.imul(k,xe)|0,T=Math.imul(k,ke);var Bi=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,x=Math.imul(z,xe),w=Math.imul(z,ke),w=w+Math.imul(V,xe)|0,T=Math.imul(V,ke),x=x+Math.imul(A,Ue)|0,w=w+Math.imul(A,nt)|0,w=w+Math.imul(k,Ue)|0,T=T+Math.imul(k,nt)|0;var Fi=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,x=Math.imul(J,xe),w=Math.imul(J,ke),w=w+Math.imul(Y,xe)|0,T=Math.imul(Y,ke),x=x+Math.imul(z,Ue)|0,w=w+Math.imul(z,nt)|0,w=w+Math.imul(V,Ue)|0,T=T+Math.imul(V,nt)|0,x=x+Math.imul(A,ot)|0,w=w+Math.imul(A,tt)|0,w=w+Math.imul(k,ot)|0,T=T+Math.imul(k,tt)|0;var ji=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(ji>>>26)|0,ji&=67108863,x=Math.imul(ie,xe),w=Math.imul(ie,ke),w=w+Math.imul(le,xe)|0,T=Math.imul(le,ke),x=x+Math.imul(J,Ue)|0,w=w+Math.imul(J,nt)|0,w=w+Math.imul(Y,Ue)|0,T=T+Math.imul(Y,nt)|0,x=x+Math.imul(z,ot)|0,w=w+Math.imul(z,tt)|0,w=w+Math.imul(V,ot)|0,T=T+Math.imul(V,tt)|0,x=x+Math.imul(A,Le)|0,w=w+Math.imul(A,qe)|0,w=w+Math.imul(k,Le)|0,T=T+Math.imul(k,qe)|0;var $i=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+($i>>>26)|0,$i&=67108863,x=Math.imul(ve,xe),w=Math.imul(ve,ke),w=w+Math.imul(Q,xe)|0,T=Math.imul(Q,ke),x=x+Math.imul(ie,Ue)|0,w=w+Math.imul(ie,nt)|0,w=w+Math.imul(le,Ue)|0,T=T+Math.imul(le,nt)|0,x=x+Math.imul(J,ot)|0,w=w+Math.imul(J,tt)|0,w=w+Math.imul(Y,ot)|0,T=T+Math.imul(Y,tt)|0,x=x+Math.imul(z,Le)|0,w=w+Math.imul(z,qe)|0,w=w+Math.imul(V,Le)|0,T=T+Math.imul(V,qe)|0,x=x+Math.imul(A,st)|0,w=w+Math.imul(A,lt)|0,w=w+Math.imul(k,st)|0,T=T+Math.imul(k,lt)|0;var Ui=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,x=Math.imul(ne,xe),w=Math.imul(ne,ke),w=w+Math.imul(ce,xe)|0,T=Math.imul(ce,ke),x=x+Math.imul(ve,Ue)|0,w=w+Math.imul(ve,nt)|0,w=w+Math.imul(Q,Ue)|0,T=T+Math.imul(Q,nt)|0,x=x+Math.imul(ie,ot)|0,w=w+Math.imul(ie,tt)|0,w=w+Math.imul(le,ot)|0,T=T+Math.imul(le,tt)|0,x=x+Math.imul(J,Le)|0,w=w+Math.imul(J,qe)|0,w=w+Math.imul(Y,Le)|0,T=T+Math.imul(Y,qe)|0,x=x+Math.imul(z,st)|0,w=w+Math.imul(z,lt)|0,w=w+Math.imul(V,st)|0,T=T+Math.imul(V,lt)|0,x=x+Math.imul(A,pt)|0,w=w+Math.imul(A,Qe)|0,w=w+Math.imul(k,pt)|0,T=T+Math.imul(k,Qe)|0;var Kd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Kd>>>26)|0,Kd&=67108863,x=Math.imul(ye,xe),w=Math.imul(ye,ke),w=w+Math.imul(ae,xe)|0,T=Math.imul(ae,ke),x=x+Math.imul(ne,Ue)|0,w=w+Math.imul(ne,nt)|0,w=w+Math.imul(ce,Ue)|0,T=T+Math.imul(ce,nt)|0,x=x+Math.imul(ve,ot)|0,w=w+Math.imul(ve,tt)|0,w=w+Math.imul(Q,ot)|0,T=T+Math.imul(Q,tt)|0,x=x+Math.imul(ie,Le)|0,w=w+Math.imul(ie,qe)|0,w=w+Math.imul(le,Le)|0,T=T+Math.imul(le,qe)|0,x=x+Math.imul(J,st)|0,w=w+Math.imul(J,lt)|0,w=w+Math.imul(Y,st)|0,T=T+Math.imul(Y,lt)|0,x=x+Math.imul(z,pt)|0,w=w+Math.imul(z,Qe)|0,w=w+Math.imul(V,pt)|0,T=T+Math.imul(V,Qe)|0,x=x+Math.imul(A,dt)|0,w=w+Math.imul(A,mt)|0,w=w+Math.imul(k,dt)|0,T=T+Math.imul(k,mt)|0;var Wd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Wd>>>26)|0,Wd&=67108863,x=Math.imul(X,xe),w=Math.imul(X,ke),w=w+Math.imul(Z,xe)|0,T=Math.imul(Z,ke),x=x+Math.imul(ye,Ue)|0,w=w+Math.imul(ye,nt)|0,w=w+Math.imul(ae,Ue)|0,T=T+Math.imul(ae,nt)|0,x=x+Math.imul(ne,ot)|0,w=w+Math.imul(ne,tt)|0,w=w+Math.imul(ce,ot)|0,T=T+Math.imul(ce,tt)|0,x=x+Math.imul(ve,Le)|0,w=w+Math.imul(ve,qe)|0,w=w+Math.imul(Q,Le)|0,T=T+Math.imul(Q,qe)|0,x=x+Math.imul(ie,st)|0,w=w+Math.imul(ie,lt)|0,w=w+Math.imul(le,st)|0,T=T+Math.imul(le,lt)|0,x=x+Math.imul(J,pt)|0,w=w+Math.imul(J,Qe)|0,w=w+Math.imul(Y,pt)|0,T=T+Math.imul(Y,Qe)|0,x=x+Math.imul(z,dt)|0,w=w+Math.imul(z,mt)|0,w=w+Math.imul(V,dt)|0,T=T+Math.imul(V,mt)|0,x=x+Math.imul(A,wt)|0,w=w+Math.imul(A,_t)|0,w=w+Math.imul(k,wt)|0,T=T+Math.imul(k,_t)|0;var Gd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Gd>>>26)|0,Gd&=67108863,x=Math.imul(fe,xe),w=Math.imul(fe,ke),w=w+Math.imul(he,xe)|0,T=Math.imul(he,ke),x=x+Math.imul(X,Ue)|0,w=w+Math.imul(X,nt)|0,w=w+Math.imul(Z,Ue)|0,T=T+Math.imul(Z,nt)|0,x=x+Math.imul(ye,ot)|0,w=w+Math.imul(ye,tt)|0,w=w+Math.imul(ae,ot)|0,T=T+Math.imul(ae,tt)|0,x=x+Math.imul(ne,Le)|0,w=w+Math.imul(ne,qe)|0,w=w+Math.imul(ce,Le)|0,T=T+Math.imul(ce,qe)|0,x=x+Math.imul(ve,st)|0,w=w+Math.imul(ve,lt)|0,w=w+Math.imul(Q,st)|0,T=T+Math.imul(Q,lt)|0,x=x+Math.imul(ie,pt)|0,w=w+Math.imul(ie,Qe)|0,w=w+Math.imul(le,pt)|0,T=T+Math.imul(le,Qe)|0,x=x+Math.imul(J,dt)|0,w=w+Math.imul(J,mt)|0,w=w+Math.imul(Y,dt)|0,T=T+Math.imul(Y,mt)|0,x=x+Math.imul(z,wt)|0,w=w+Math.imul(z,_t)|0,w=w+Math.imul(V,wt)|0,T=T+Math.imul(V,_t)|0,x=x+Math.imul(A,bt)|0,w=w+Math.imul(A,St)|0,w=w+Math.imul(k,bt)|0,T=T+Math.imul(k,St)|0;var Qd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Qd>>>26)|0,Qd&=67108863,x=Math.imul(Ae,xe),w=Math.imul(Ae,ke),w=w+Math.imul(we,xe)|0,T=Math.imul(we,ke),x=x+Math.imul(fe,Ue)|0,w=w+Math.imul(fe,nt)|0,w=w+Math.imul(he,Ue)|0,T=T+Math.imul(he,nt)|0,x=x+Math.imul(X,ot)|0,w=w+Math.imul(X,tt)|0,w=w+Math.imul(Z,ot)|0,T=T+Math.imul(Z,tt)|0,x=x+Math.imul(ye,Le)|0,w=w+Math.imul(ye,qe)|0,w=w+Math.imul(ae,Le)|0,T=T+Math.imul(ae,qe)|0,x=x+Math.imul(ne,st)|0,w=w+Math.imul(ne,lt)|0,w=w+Math.imul(ce,st)|0,T=T+Math.imul(ce,lt)|0,x=x+Math.imul(ve,pt)|0,w=w+Math.imul(ve,Qe)|0,w=w+Math.imul(Q,pt)|0,T=T+Math.imul(Q,Qe)|0,x=x+Math.imul(ie,dt)|0,w=w+Math.imul(ie,mt)|0,w=w+Math.imul(le,dt)|0,T=T+Math.imul(le,mt)|0,x=x+Math.imul(J,wt)|0,w=w+Math.imul(J,_t)|0,w=w+Math.imul(Y,wt)|0,T=T+Math.imul(Y,_t)|0,x=x+Math.imul(z,bt)|0,w=w+Math.imul(z,St)|0,w=w+Math.imul(V,bt)|0,T=T+Math.imul(V,St)|0,x=x+Math.imul(A,Et)|0,w=w+Math.imul(A,Rt)|0,w=w+Math.imul(k,Et)|0,T=T+Math.imul(k,Rt)|0;var Jd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Jd>>>26)|0,Jd&=67108863,x=Math.imul(Ae,Ue),w=Math.imul(Ae,nt),w=w+Math.imul(we,Ue)|0,T=Math.imul(we,nt),x=x+Math.imul(fe,ot)|0,w=w+Math.imul(fe,tt)|0,w=w+Math.imul(he,ot)|0,T=T+Math.imul(he,tt)|0,x=x+Math.imul(X,Le)|0,w=w+Math.imul(X,qe)|0,w=w+Math.imul(Z,Le)|0,T=T+Math.imul(Z,qe)|0,x=x+Math.imul(ye,st)|0,w=w+Math.imul(ye,lt)|0,w=w+Math.imul(ae,st)|0,T=T+Math.imul(ae,lt)|0,x=x+Math.imul(ne,pt)|0,w=w+Math.imul(ne,Qe)|0,w=w+Math.imul(ce,pt)|0,T=T+Math.imul(ce,Qe)|0,x=x+Math.imul(ve,dt)|0,w=w+Math.imul(ve,mt)|0,w=w+Math.imul(Q,dt)|0,T=T+Math.imul(Q,mt)|0,x=x+Math.imul(ie,wt)|0,w=w+Math.imul(ie,_t)|0,w=w+Math.imul(le,wt)|0,T=T+Math.imul(le,_t)|0,x=x+Math.imul(J,bt)|0,w=w+Math.imul(J,St)|0,w=w+Math.imul(Y,bt)|0,T=T+Math.imul(Y,St)|0,x=x+Math.imul(z,Et)|0,w=w+Math.imul(z,Rt)|0,w=w+Math.imul(V,Et)|0,T=T+Math.imul(V,Rt)|0;var Yd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Yd>>>26)|0,Yd&=67108863,x=Math.imul(Ae,ot),w=Math.imul(Ae,tt),w=w+Math.imul(we,ot)|0,T=Math.imul(we,tt),x=x+Math.imul(fe,Le)|0,w=w+Math.imul(fe,qe)|0,w=w+Math.imul(he,Le)|0,T=T+Math.imul(he,qe)|0,x=x+Math.imul(X,st)|0,w=w+Math.imul(X,lt)|0,w=w+Math.imul(Z,st)|0,T=T+Math.imul(Z,lt)|0,x=x+Math.imul(ye,pt)|0,w=w+Math.imul(ye,Qe)|0,w=w+Math.imul(ae,pt)|0,T=T+Math.imul(ae,Qe)|0,x=x+Math.imul(ne,dt)|0,w=w+Math.imul(ne,mt)|0,w=w+Math.imul(ce,dt)|0,T=T+Math.imul(ce,mt)|0,x=x+Math.imul(ve,wt)|0,w=w+Math.imul(ve,_t)|0,w=w+Math.imul(Q,wt)|0,T=T+Math.imul(Q,_t)|0,x=x+Math.imul(ie,bt)|0,w=w+Math.imul(ie,St)|0,w=w+Math.imul(le,bt)|0,T=T+Math.imul(le,St)|0,x=x+Math.imul(J,Et)|0,w=w+Math.imul(J,Rt)|0,w=w+Math.imul(Y,Et)|0,T=T+Math.imul(Y,Rt)|0;var Xd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Xd>>>26)|0,Xd&=67108863,x=Math.imul(Ae,Le),w=Math.imul(Ae,qe),w=w+Math.imul(we,Le)|0,T=Math.imul(we,qe),x=x+Math.imul(fe,st)|0,w=w+Math.imul(fe,lt)|0,w=w+Math.imul(he,st)|0,T=T+Math.imul(he,lt)|0,x=x+Math.imul(X,pt)|0,w=w+Math.imul(X,Qe)|0,w=w+Math.imul(Z,pt)|0,T=T+Math.imul(Z,Qe)|0,x=x+Math.imul(ye,dt)|0,w=w+Math.imul(ye,mt)|0,w=w+Math.imul(ae,dt)|0,T=T+Math.imul(ae,mt)|0,x=x+Math.imul(ne,wt)|0,w=w+Math.imul(ne,_t)|0,w=w+Math.imul(ce,wt)|0,T=T+Math.imul(ce,_t)|0,x=x+Math.imul(ve,bt)|0,w=w+Math.imul(ve,St)|0,w=w+Math.imul(Q,bt)|0,T=T+Math.imul(Q,St)|0,x=x+Math.imul(ie,Et)|0,w=w+Math.imul(ie,Rt)|0,w=w+Math.imul(le,Et)|0,T=T+Math.imul(le,Rt)|0;var Zd=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(Zd>>>26)|0,Zd&=67108863,x=Math.imul(Ae,st),w=Math.imul(Ae,lt),w=w+Math.imul(we,st)|0,T=Math.imul(we,lt),x=x+Math.imul(fe,pt)|0,w=w+Math.imul(fe,Qe)|0,w=w+Math.imul(he,pt)|0,T=T+Math.imul(he,Qe)|0,x=x+Math.imul(X,dt)|0,w=w+Math.imul(X,mt)|0,w=w+Math.imul(Z,dt)|0,T=T+Math.imul(Z,mt)|0,x=x+Math.imul(ye,wt)|0,w=w+Math.imul(ye,_t)|0,w=w+Math.imul(ae,wt)|0,T=T+Math.imul(ae,_t)|0,x=x+Math.imul(ne,bt)|0,w=w+Math.imul(ne,St)|0,w=w+Math.imul(ce,bt)|0,T=T+Math.imul(ce,St)|0,x=x+Math.imul(ve,Et)|0,w=w+Math.imul(ve,Rt)|0,w=w+Math.imul(Q,Et)|0,T=T+Math.imul(Q,Rt)|0;var eh=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(eh>>>26)|0,eh&=67108863,x=Math.imul(Ae,pt),w=Math.imul(Ae,Qe),w=w+Math.imul(we,pt)|0,T=Math.imul(we,Qe),x=x+Math.imul(fe,dt)|0,w=w+Math.imul(fe,mt)|0,w=w+Math.imul(he,dt)|0,T=T+Math.imul(he,mt)|0,x=x+Math.imul(X,wt)|0,w=w+Math.imul(X,_t)|0,w=w+Math.imul(Z,wt)|0,T=T+Math.imul(Z,_t)|0,x=x+Math.imul(ye,bt)|0,w=w+Math.imul(ye,St)|0,w=w+Math.imul(ae,bt)|0,T=T+Math.imul(ae,St)|0,x=x+Math.imul(ne,Et)|0,w=w+Math.imul(ne,Rt)|0,w=w+Math.imul(ce,Et)|0,T=T+Math.imul(ce,Rt)|0;var th=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(th>>>26)|0,th&=67108863,x=Math.imul(Ae,dt),w=Math.imul(Ae,mt),w=w+Math.imul(we,dt)|0,T=Math.imul(we,mt),x=x+Math.imul(fe,wt)|0,w=w+Math.imul(fe,_t)|0,w=w+Math.imul(he,wt)|0,T=T+Math.imul(he,_t)|0,x=x+Math.imul(X,bt)|0,w=w+Math.imul(X,St)|0,w=w+Math.imul(Z,bt)|0,T=T+Math.imul(Z,St)|0,x=x+Math.imul(ye,Et)|0,w=w+Math.imul(ye,Rt)|0,w=w+Math.imul(ae,Et)|0,T=T+Math.imul(ae,Rt)|0;var rh=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(rh>>>26)|0,rh&=67108863,x=Math.imul(Ae,wt),w=Math.imul(Ae,_t),w=w+Math.imul(we,wt)|0,T=Math.imul(we,_t),x=x+Math.imul(fe,bt)|0,w=w+Math.imul(fe,St)|0,w=w+Math.imul(he,bt)|0,T=T+Math.imul(he,St)|0,x=x+Math.imul(X,Et)|0,w=w+Math.imul(X,Rt)|0,w=w+Math.imul(Z,Et)|0,T=T+Math.imul(Z,Rt)|0;var nh=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(nh>>>26)|0,nh&=67108863,x=Math.imul(Ae,bt),w=Math.imul(Ae,St),w=w+Math.imul(we,bt)|0,T=Math.imul(we,St),x=x+Math.imul(fe,Et)|0,w=w+Math.imul(fe,Rt)|0,w=w+Math.imul(he,Et)|0,T=T+Math.imul(he,Rt)|0;var ih=(I+x|0)+((w&8191)<<13)|0;I=(T+(w>>>13)|0)+(ih>>>26)|0,ih&=67108863,x=Math.imul(Ae,Et),w=Math.imul(Ae,Rt),w=w+Math.imul(we,Et)|0,T=Math.imul(we,Rt);var oh=(I+x|0)+((w&8191)<<13)|0;return I=(T+(w>>>13)|0)+(oh>>>26)|0,oh&=67108863,M[0]=Bi,M[1]=Fi,M[2]=ji,M[3]=$i,M[4]=Ui,M[5]=Kd,M[6]=Wd,M[7]=Gd,M[8]=Qd,M[9]=Jd,M[10]=Yd,M[11]=Xd,M[12]=Zd,M[13]=eh,M[14]=th,M[15]=rh,M[16]=nh,M[17]=ih,M[18]=oh,I!==0&&(M[19]=I,C.length++),C};Math.imul||(v=m);function S(P,y,E){E.negative=y.negative^P.negative,E.length=P.length+y.length;for(var C=0,B=0,L=0;L<E.length-1;L++){var M=B;B=0;for(var I=C&67108863,x=Math.min(L,y.length-1),w=Math.max(0,L-P.length+1);w<=x;w++){var T=L-w,H=P.words[T]|0,A=y.words[w]|0,k=H*A,q=k&67108863;M=M+(k/67108864|0)|0,q=q+I|0,I=q&67108863,M=M+(q>>>26)|0,B+=M>>>26,M&=67108863}E.words[L]=I,C=M,M=B}return C!==0?E.words[L]=C:E.length--,E._strip()}function b(P,y,E){return S(P,y,E)}o.prototype.mulTo=function(y,E){var C,B=this.length+y.length;return this.length===10&&y.length===10?C=v(this,y,E):B<63?C=m(this,y,E):B<1024?C=S(this,y,E):C=b(this,y,E),C},o.prototype.mul=function(y){var E=new o(null);return E.words=new Array(this.length+y.length),this.mulTo(y,E)},o.prototype.mulf=function(y){var E=new o(null);return E.words=new Array(this.length+y.length),b(this,y,E)},o.prototype.imul=function(y){return this.clone().mulTo(y,this)},o.prototype.imuln=function(y){var E=y<0;E&&(y=-y),n(typeof y=="number"),n(y<67108864);for(var C=0,B=0;B<this.length;B++){var L=(this.words[B]|0)*y,M=(L&67108863)+(C&67108863);C>>=26,C+=L/67108864|0,C+=M>>>26,this.words[B]=M&67108863}return C!==0&&(this.words[B]=C,this.length++),E?this.ineg():this},o.prototype.muln=function(y){return this.clone().imuln(y)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(y){var E=_(y);if(E.length===0)return new o(1);for(var C=this,B=0;B<E.length&&E[B]===0;B++,C=C.sqr());if(++B<E.length)for(var L=C.sqr();B<E.length;B++,L=L.sqr())E[B]!==0&&(C=C.mul(L));return C},o.prototype.iushln=function(y){n(typeof y=="number"&&y>=0);var E=y%26,C=(y-E)/26,B=67108863>>>26-E<<26-E,L;if(E!==0){var M=0;for(L=0;L<this.length;L++){var I=this.words[L]&B,x=(this.words[L]|0)-I<<E;this.words[L]=x|M,M=I>>>26-E}M&&(this.words[L]=M,this.length++)}if(C!==0){for(L=this.length-1;L>=0;L--)this.words[L+C]=this.words[L];for(L=0;L<C;L++)this.words[L]=0;this.length+=C}return this._strip()},o.prototype.ishln=function(y){return n(this.negative===0),this.iushln(y)},o.prototype.iushrn=function(y,E,C){n(typeof y=="number"&&y>=0);var B;E?B=(E-E%26)/26:B=0;var L=y%26,M=Math.min((y-L)/26,this.length),I=67108863^67108863>>>L<<L,x=C;if(B-=M,B=Math.max(0,B),x){for(var w=0;w<M;w++)x.words[w]=this.words[w];x.length=M}if(M!==0)if(this.length>M)for(this.length-=M,w=0;w<this.length;w++)this.words[w]=this.words[w+M];else this.words[0]=0,this.length=1;var T=0;for(w=this.length-1;w>=0&&(T!==0||w>=B);w--){var H=this.words[w]|0;this.words[w]=T<<26-L|H>>>L,T=H&I}return x&&T!==0&&(x.words[x.length++]=T),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(y,E,C){return n(this.negative===0),this.iushrn(y,E,C)},o.prototype.shln=function(y){return this.clone().ishln(y)},o.prototype.ushln=function(y){return this.clone().iushln(y)},o.prototype.shrn=function(y){return this.clone().ishrn(y)},o.prototype.ushrn=function(y){return this.clone().iushrn(y)},o.prototype.testn=function(y){n(typeof y=="number"&&y>=0);var E=y%26,C=(y-E)/26,B=1<<E;if(this.length<=C)return!1;var L=this.words[C];return!!(L&B)},o.prototype.imaskn=function(y){n(typeof y=="number"&&y>=0);var E=y%26,C=(y-E)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(E!==0&&C++,this.length=Math.min(C,this.length),E!==0){var B=67108863^67108863>>>E<<E;this.words[this.length-1]&=B}return this._strip()},o.prototype.maskn=function(y){return this.clone().imaskn(y)},o.prototype.iaddn=function(y){return n(typeof y=="number"),n(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},o.prototype._iaddn=function(y){this.words[0]+=y;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},o.prototype.isubn=function(y){if(n(typeof y=="number"),n(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},o.prototype.addn=function(y){return this.clone().iaddn(y)},o.prototype.subn=function(y){return this.clone().isubn(y)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(y,E,C){var B=y.length+C,L;this._expand(B);var M,I=0;for(L=0;L<y.length;L++){M=(this.words[L+C]|0)+I;var x=(y.words[L]|0)*E;M-=x&67108863,I=(M>>26)-(x/67108864|0),this.words[L+C]=M&67108863}for(;L<this.length-C;L++)M=(this.words[L+C]|0)+I,I=M>>26,this.words[L+C]=M&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,L=0;L<this.length;L++)M=-(this.words[L]|0)+I,I=M>>26,this.words[L]=M&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(y,E){var C=this.length-y.length,B=this.clone(),L=y,M=L.words[L.length-1]|0,I=this._countBits(M);C=26-I,C!==0&&(L=L.ushln(C),B.iushln(C),M=L.words[L.length-1]|0);var x=B.length-L.length,w;if(E!=="mod"){w=new o(null),w.length=x+1,w.words=new Array(w.length);for(var T=0;T<w.length;T++)w.words[T]=0}var H=B.clone()._ishlnsubmul(L,1,x);H.negative===0&&(B=H,w&&(w.words[x]=1));for(var A=x-1;A>=0;A--){var k=(B.words[L.length+A]|0)*67108864+(B.words[L.length+A-1]|0);for(k=Math.min(k/M|0,67108863),B._ishlnsubmul(L,k,A);B.negative!==0;)k--,B.negative=0,B._ishlnsubmul(L,1,A),B.isZero()||(B.negative^=1);w&&(w.words[A]=k)}return w&&w._strip(),B._strip(),E!=="div"&&C!==0&&B.iushrn(C),{div:w||null,mod:B}},o.prototype.divmod=function(y,E,C){if(n(!y.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var B,L,M;return this.negative!==0&&y.negative===0?(M=this.neg().divmod(y,E),E!=="mod"&&(B=M.div.neg()),E!=="div"&&(L=M.mod.neg(),C&&L.negative!==0&&L.iadd(y)),{div:B,mod:L}):this.negative===0&&y.negative!==0?(M=this.divmod(y.neg(),E),E!=="mod"&&(B=M.div.neg()),{div:B,mod:M.mod}):this.negative&y.negative?(M=this.neg().divmod(y.neg(),E),E!=="div"&&(L=M.mod.neg(),C&&L.negative!==0&&L.isub(y)),{div:M.div,mod:L}):y.length>this.length||this.cmp(y)<0?{div:new o(0),mod:this}:y.length===1?E==="div"?{div:this.divn(y.words[0]),mod:null}:E==="mod"?{div:null,mod:new o(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new o(this.modrn(y.words[0]))}:this._wordDiv(y,E)},o.prototype.div=function(y){return this.divmod(y,"div",!1).div},o.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},o.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},o.prototype.divRound=function(y){var E=this.divmod(y);if(E.mod.isZero())return E.div;var C=E.div.negative!==0?E.mod.isub(y):E.mod,B=y.ushrn(1),L=y.andln(1),M=C.cmp(B);return M<0||L===1&&M===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},o.prototype.modrn=function(y){var E=y<0;E&&(y=-y),n(y<=67108863);for(var C=(1<<26)%y,B=0,L=this.length-1;L>=0;L--)B=(C*B+(this.words[L]|0))%y;return E?-B:B},o.prototype.modn=function(y){return this.modrn(y)},o.prototype.idivn=function(y){var E=y<0;E&&(y=-y),n(y<=67108863);for(var C=0,B=this.length-1;B>=0;B--){var L=(this.words[B]|0)+C*67108864;this.words[B]=L/y|0,C=L%y}return this._strip(),E?this.ineg():this},o.prototype.divn=function(y){return this.clone().idivn(y)},o.prototype.egcd=function(y){n(y.negative===0),n(!y.isZero());var E=this,C=y.clone();E.negative!==0?E=E.umod(y):E=E.clone();for(var B=new o(1),L=new o(0),M=new o(0),I=new o(1),x=0;E.isEven()&&C.isEven();)E.iushrn(1),C.iushrn(1),++x;for(var w=C.clone(),T=E.clone();!E.isZero();){for(var H=0,A=1;!(E.words[0]&A)&&H<26;++H,A<<=1);if(H>0)for(E.iushrn(H);H-- >0;)(B.isOdd()||L.isOdd())&&(B.iadd(w),L.isub(T)),B.iushrn(1),L.iushrn(1);for(var k=0,q=1;!(C.words[0]&q)&&k<26;++k,q<<=1);if(k>0)for(C.iushrn(k);k-- >0;)(M.isOdd()||I.isOdd())&&(M.iadd(w),I.isub(T)),M.iushrn(1),I.iushrn(1);E.cmp(C)>=0?(E.isub(C),B.isub(M),L.isub(I)):(C.isub(E),M.isub(B),I.isub(L))}return{a:M,b:I,gcd:C.iushln(x)}},o.prototype._invmp=function(y){n(y.negative===0),n(!y.isZero());var E=this,C=y.clone();E.negative!==0?E=E.umod(y):E=E.clone();for(var B=new o(1),L=new o(0),M=C.clone();E.cmpn(1)>0&&C.cmpn(1)>0;){for(var I=0,x=1;!(E.words[0]&x)&&I<26;++I,x<<=1);if(I>0)for(E.iushrn(I);I-- >0;)B.isOdd()&&B.iadd(M),B.iushrn(1);for(var w=0,T=1;!(C.words[0]&T)&&w<26;++w,T<<=1);if(w>0)for(C.iushrn(w);w-- >0;)L.isOdd()&&L.iadd(M),L.iushrn(1);E.cmp(C)>=0?(E.isub(C),B.isub(L)):(C.isub(E),L.isub(B))}var H;return E.cmpn(1)===0?H=B:H=L,H.cmpn(0)<0&&H.iadd(y),H},o.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var E=this.clone(),C=y.clone();E.negative=0,C.negative=0;for(var B=0;E.isEven()&&C.isEven();B++)E.iushrn(1),C.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;C.isEven();)C.iushrn(1);var L=E.cmp(C);if(L<0){var M=E;E=C,C=M}else if(L===0||C.cmpn(1)===0)break;E.isub(C)}while(!0);return C.iushln(B)},o.prototype.invm=function(y){return this.egcd(y).a.umod(y)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(y){return this.words[0]&y},o.prototype.bincn=function(y){n(typeof y=="number");var E=y%26,C=(y-E)/26,B=1<<E;if(this.length<=C)return this._expand(C+1),this.words[C]|=B,this;for(var L=B,M=C;L!==0&&M<this.length;M++){var I=this.words[M]|0;I+=L,L=I>>>26,I&=67108863,this.words[M]=I}return L!==0&&(this.words[M]=L,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(y){var E=y<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var C;if(this.length>1)C=1;else{E&&(y=-y),n(y<=67108863,"Number is too big");var B=this.words[0]|0;C=B===y?0:B<y?-1:1}return this.negative!==0?-C|0:C},o.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var E=this.ucmp(y);return this.negative!==0?-E|0:E},o.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var E=0,C=this.length-1;C>=0;C--){var B=this.words[C]|0,L=y.words[C]|0;if(B!==L){B<L?E=-1:B>L&&(E=1);break}}return E},o.prototype.gtn=function(y){return this.cmpn(y)===1},o.prototype.gt=function(y){return this.cmp(y)===1},o.prototype.gten=function(y){return this.cmpn(y)>=0},o.prototype.gte=function(y){return this.cmp(y)>=0},o.prototype.ltn=function(y){return this.cmpn(y)===-1},o.prototype.lt=function(y){return this.cmp(y)===-1},o.prototype.lten=function(y){return this.cmpn(y)<=0},o.prototype.lte=function(y){return this.cmp(y)<=0},o.prototype.eqn=function(y){return this.cmpn(y)===0},o.prototype.eq=function(y){return this.cmp(y)===0},o.red=function(y){return new O(y)},o.prototype.toRed=function(y){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(y){return this.red=y,this},o.prototype.forceRed=function(y){return n(!this.red,"Already a number in reduction context"),this._forceRed(y)},o.prototype.redAdd=function(y){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},o.prototype.redIAdd=function(y){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},o.prototype.redSub=function(y){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},o.prototype.redISub=function(y){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},o.prototype.redShl=function(y){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},o.prototype.redMul=function(y){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},o.prototype.redIMul=function(y){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(y){return n(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var R={k256:null,p224:null,p192:null,p25519:null};function j(P,y){this.name=P,this.p=new o(y,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var y=new o(null);return y.words=new Array(Math.ceil(this.n/13)),y},j.prototype.ireduce=function(y){var E=y,C;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),C=E.bitLength();while(C>this.n);var B=C<this.n?-1:E.ucmp(this.p);return B===0?(E.words[0]=0,E.length=1):B>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},j.prototype.split=function(y,E){y.iushrn(this.n,0,E)},j.prototype.imulK=function(y){return y.imul(this.k)};function D(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(D,j),D.prototype.split=function(y,E){for(var C=4194303,B=Math.min(y.length,9),L=0;L<B;L++)E.words[L]=y.words[L];if(E.length=B,y.length<=9){y.words[0]=0,y.length=1;return}var M=y.words[9];for(E.words[E.length++]=M&C,L=10;L<y.length;L++){var I=y.words[L]|0;y.words[L-10]=(I&C)<<4|M>>>22,M=I}M>>>=22,y.words[L-10]=M,M===0&&y.length>10?y.length-=10:y.length-=9},D.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var E=0,C=0;C<y.length;C++){var B=y.words[C]|0;E+=B*977,y.words[C]=E&67108863,E=B*64+(E/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function N(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,j);function U(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(U,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(F,j),F.prototype.imulK=function(y){for(var E=0,C=0;C<y.length;C++){var B=(y.words[C]|0)*19+E,L=B&67108863;B>>>=26,y.words[C]=L,E=B}return E!==0&&(y.words[y.length++]=E),y},o._prime=function(y){if(R[y])return R[y];var E;if(y==="k256")E=new D;else if(y==="p224")E=new N;else if(y==="p192")E=new U;else if(y==="p25519")E=new F;else throw new Error("Unknown prime "+y);return R[y]=E,E};function O(P){if(typeof P=="string"){var y=o._prime(P);this.m=y.p,this.prime=y}else n(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}O.prototype._verify1=function(y){n(y.negative===0,"red works only with positives"),n(y.red,"red works only with red numbers")},O.prototype._verify2=function(y,E){n((y.negative|E.negative)===0,"red works only with positives"),n(y.red&&y.red===E.red,"red works only with red numbers")},O.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(c(y,y.umod(this.m)._forceRed(this)),y)},O.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},O.prototype.add=function(y,E){this._verify2(y,E);var C=y.add(E);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},O.prototype.iadd=function(y,E){this._verify2(y,E);var C=y.iadd(E);return C.cmp(this.m)>=0&&C.isub(this.m),C},O.prototype.sub=function(y,E){this._verify2(y,E);var C=y.sub(E);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},O.prototype.isub=function(y,E){this._verify2(y,E);var C=y.isub(E);return C.cmpn(0)<0&&C.iadd(this.m),C},O.prototype.shl=function(y,E){return this._verify1(y),this.imod(y.ushln(E))},O.prototype.imul=function(y,E){return this._verify2(y,E),this.imod(y.imul(E))},O.prototype.mul=function(y,E){return this._verify2(y,E),this.imod(y.mul(E))},O.prototype.isqr=function(y){return this.imul(y,y.clone())},O.prototype.sqr=function(y){return this.mul(y,y)},O.prototype.sqrt=function(y){if(y.isZero())return y.clone();var E=this.m.andln(3);if(n(E%2===1),E===3){var C=this.m.add(new o(1)).iushrn(2);return this.pow(y,C)}for(var B=this.m.subn(1),L=0;!B.isZero()&&B.andln(1)===0;)L++,B.iushrn(1);n(!B.isZero());var M=new o(1).toRed(this),I=M.redNeg(),x=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new o(2*w*w).toRed(this);this.pow(w,x).cmp(I)!==0;)w.redIAdd(I);for(var T=this.pow(w,B),H=this.pow(y,B.addn(1).iushrn(1)),A=this.pow(y,B),k=L;A.cmp(M)!==0;){for(var q=A,z=0;q.cmp(M)!==0;z++)q=q.redSqr();n(z<k);var V=this.pow(T,new o(1).iushln(k-z-1));H=H.redMul(V),T=V.redSqr(),A=A.redMul(T),k=z}return H},O.prototype.invm=function(y){var E=y._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},O.prototype.pow=function(y,E){if(E.isZero())return new o(1).toRed(this);if(E.cmpn(1)===0)return y.clone();var C=4,B=new Array(1<<C);B[0]=new o(1).toRed(this),B[1]=y;for(var L=2;L<B.length;L++)B[L]=this.mul(B[L-1],y);var M=B[0],I=0,x=0,w=E.bitLength()%26;for(w===0&&(w=26),L=E.length-1;L>=0;L--){for(var T=E.words[L],H=w-1;H>=0;H--){var A=T>>H&1;if(M!==B[0]&&(M=this.sqr(M)),A===0&&I===0){x=0;continue}I<<=1,I|=A,x++,!(x!==C&&(L!==0||H!==0))&&(M=this.mul(M,B[I]),x=0,I=0)}w=26}return M},O.prototype.convertTo=function(y){var E=y.umod(this.m);return E===y?E.clone():E},O.prototype.convertFrom=function(y){var E=y.clone();return E.red=null,E},o.mont=function(y){return new $(y)};function $(P){O.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i($,O),$.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},$.prototype.convertFrom=function(y){var E=this.imod(y.mul(this.rinv));return E.red=null,E},$.prototype.imul=function(y,E){if(y.isZero()||E.isZero())return y.words[0]=0,y.length=1,y;var C=y.imul(E),B=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=C.isub(B).iushrn(this.shift),M=L;return L.cmp(this.m)>=0?M=L.isub(this.m):L.cmpn(0)<0&&(M=L.iadd(this.m)),M._forceRed(this)},$.prototype.mul=function(y,E){if(y.isZero()||E.isZero())return new o(0)._forceRed(this);var C=y.mul(E),B=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=C.isub(B).iushrn(this.shift),M=L;return L.cmp(this.m)>=0?M=L.isub(this.m):L.cmpn(0)<0&&(M=L.iadd(this.m)),M._forceRed(this)},$.prototype.invm=function(y){var E=this.imod(y._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(t,re)})(xT);const De=Tm,TT="logger/5.7.0";let zy=!1,Hy=!1;const _u={debug:1,default:2,info:2,warning:3,error:4,off:5};let Vy=_u.default,Ih=null;function CT(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const Ky=CT();var Cm;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Cm||(Cm={}));var Rn;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Rn||(Rn={}));const Wy="0123456789abcdef";let te=class{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();_u[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Vy>_u[n])&&console.log.apply(console,r)}debug(...e){this._log(te.levels.DEBUG,e)}info(...e){this._log(te.levels.INFO,e)}warn(...e){this._log(te.levels.WARNING,e)}makeError(e,r,n){if(Hy)return this.makeError("censored error",r,{});r||(r=te.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(u=>{const l=n[u];try{if(l instanceof Uint8Array){let c="";for(let f=0;f<l.length;f++)c+=Wy[l[f]>>4],c+=Wy[l[f]&15];i.push(u+"=Uint8Array(0x"+c+")")}else i.push(u+"="+JSON.stringify(l))}catch{i.push(u+"="+JSON.stringify(n[u].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const o=e;let s="";switch(r){case Rn.NUMERIC_FAULT:{s="NUMERIC_FAULT";const u=e;switch(u){case"overflow":case"underflow":case"division-by-zero":s+="-"+u;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case Rn.CALL_EXCEPTION:case Rn.INSUFFICIENT_FUNDS:case Rn.MISSING_NEW:case Rn.NONCE_EXPIRED:case Rn.REPLACEMENT_UNDERPRICED:case Rn.TRANSACTION_REPLACED:case Rn.UNPREDICTABLE_GAS_LIMIT:s=r;break}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=o,a.code=r,Object.keys(n).forEach(function(u){a[u]=n[u]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,te.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){Ky&&this.throwError("platform missing String.prototype.normalize",te.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ky})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,te.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,te.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,te.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,te.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",te.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",te.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",te.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Ih||(Ih=new te(TT)),Ih}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",te.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),zy){if(!e)return;this.globalLogger().throwError("error censorship permanent",te.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Hy=!!e,zy=!!r}static setLogLevel(e){const r=_u[e.toLowerCase()];if(r==null){te.globalLogger().warn("invalid log level - "+e);return}Vy=r}static from(e){return new te(e)}};te.errors=Rn;te.levels=Cm;const OT="bytes/5.7.0",Nt=new te(OT);function OE(t){return!!t.toHexString}function Ys(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Ys(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function dv(t){return gt(t)&&!(t.length%2)||Ea(t)}function Gy(t){return typeof t=="number"&&t==t&&t%1===0}function Ea(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Gy(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Gy(r)||r<0||r>=256)return!1}return!0}function Fe(t,e){if(e||(e={}),typeof t=="number"){Nt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Ys(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),OE(t)&&(t=t.toHexString()),gt(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Nt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Ys(new Uint8Array(n))}return Ea(t)?Ys(new Uint8Array(t)):Nt.throwArgumentError("invalid arrayify value","value",t)}function $o(t){const e=t.map(i=>Fe(i)),r=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(r);return e.reduce((i,o)=>(n.set(o,i),i+o.length),0),Ys(n)}function la(t){let e=Fe(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function MT(t,e){t=Fe(t),t.length>e&&Nt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Ys(r)}function gt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Lh="0123456789abcdef";function Be(t,e){if(e||(e={}),typeof t=="number"){Nt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Lh[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),OE(t))return t.toHexString();if(gt(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Nt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Ea(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=Lh[(i&240)>>4]+Lh[i&15]}return r}return Nt.throwArgumentError("invalid hexlify value","value",t)}function Yo(t){if(typeof t!="string")t=Be(t);else if(!gt(t)||t.length%2)return null;return(t.length-2)/2}function br(t,e,r){return typeof t!="string"?t=Be(t):(!gt(t)||t.length%2)&&Nt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function qr(t){let e="0x";return t.forEach(r=>{e+=Be(r).substring(2)}),e}function hv(t){const e=NT(Be(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function NT(t){typeof t!="string"&&(t=Be(t)),gt(t)||Nt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function It(t,e){for(typeof t!="string"?t=Be(t):gt(t)||Nt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Nt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Kf(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(dv(t)){let r=Fe(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Be(r.slice(0,32)),e.s=Be(r.slice(32,64))):r.length===65?(e.r=Be(r.slice(0,32)),e.s=Be(r.slice(32,64)),e.v=r[64]):Nt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Nt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Be(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=MT(Fe(e._vs),32);e._vs=Be(i);const o=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=o:e.recoveryParam!==o&&Nt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const s=Be(i);e.s==null?e.s=s:e.s!==s&&Nt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Nt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Nt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!gt(e.r)?Nt.throwArgumentError("signature missing or invalid r","signature",t):e.r=It(e.r,32),e.s==null||!gt(e.s)?Nt.throwArgumentError("signature missing or invalid s","signature",t):e.s=It(e.s,32);const r=Fe(e.s);r[0]>=128&&Nt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=Be(r);e._vs&&(gt(e._vs)||Nt.throwArgumentError("signature invalid _vs","signature",t),e._vs=It(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Nt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const ME="bignumber/5.7.0";var ff=De.BN;const mi=new te(ME),Bh={},Qy=9007199254740991;function DT(t){return t!=null&&(be.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||gt(t)||typeof t=="bigint"||Ea(t))}let Jy=!1;class be{constructor(e,r){e!==Bh&&mi.throwError("cannot call constructor directly; use BigNumber.from",te.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Pr(ze(this).fromTwos(e))}toTwos(e){return Pr(ze(this).toTwos(e))}abs(){return this._hex[0]==="-"?be.from(this._hex.substring(1)):this}add(e){return Pr(ze(this).add(ze(e)))}sub(e){return Pr(ze(this).sub(ze(e)))}div(e){return be.from(e).isZero()&&Yr("division-by-zero","div"),Pr(ze(this).div(ze(e)))}mul(e){return Pr(ze(this).mul(ze(e)))}mod(e){const r=ze(e);return r.isNeg()&&Yr("division-by-zero","mod"),Pr(ze(this).umod(r))}pow(e){const r=ze(e);return r.isNeg()&&Yr("negative-power","pow"),Pr(ze(this).pow(r))}and(e){const r=ze(e);return(this.isNegative()||r.isNeg())&&Yr("unbound-bitwise-result","and"),Pr(ze(this).and(r))}or(e){const r=ze(e);return(this.isNegative()||r.isNeg())&&Yr("unbound-bitwise-result","or"),Pr(ze(this).or(r))}xor(e){const r=ze(e);return(this.isNegative()||r.isNeg())&&Yr("unbound-bitwise-result","xor"),Pr(ze(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Yr("negative-width","mask"),Pr(ze(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Yr("negative-width","shl"),Pr(ze(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Yr("negative-width","shr"),Pr(ze(this).shrn(e))}eq(e){return ze(this).eq(ze(e))}lt(e){return ze(this).lt(ze(e))}lte(e){return ze(this).lte(ze(e))}gt(e){return ze(this).gt(ze(e))}gte(e){return ze(this).gte(ze(e))}isNegative(){return this._hex[0]==="-"}isZero(){return ze(this).isZero()}toNumber(){try{return ze(this).toNumber()}catch{Yr("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return mi.throwError("this platform does not support BigInt",te.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Jy||(Jy=!0,mi.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?mi.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",te.errors.UNEXPECTED_ARGUMENT,{}):mi.throwError("BigNumber.toString does not accept parameters",te.errors.UNEXPECTED_ARGUMENT,{})),ze(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof be)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new be(Bh,Vl(e)):e.match(/^-?[0-9]+$/)?new be(Bh,Vl(new ff(e))):mi.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Yr("underflow","BigNumber.from",e),(e>=Qy||e<=-Qy)&&Yr("overflow","BigNumber.from",e),be.from(String(e));const r=e;if(typeof r=="bigint")return be.from(r.toString());if(Ea(r))return be.from(Be(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return be.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(gt(n)||n[0]==="-"&&gt(n.substring(1))))return be.from(n)}return mi.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Vl(t){if(typeof t!="string")return Vl(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&mi.throwArgumentError("invalid hex","value",t),t=Vl(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Pr(t){return be.from(Vl(t))}function ze(t){const e=be.from(t).toHexString();return e[0]==="-"?new ff("-"+e.substring(3),16):new ff(e.substring(2),16)}function Yr(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),mi.throwError(t,te.errors.NUMERIC_FAULT,n)}function IT(t){return new ff(t,36).toString(16)}const Sr=new te(ME),yl={},NE=be.from(0),DE=be.from(-1);function IE(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Sr.throwError(t,te.errors.NUMERIC_FAULT,i)}let wl="0";for(;wl.length<256;)wl+=wl;function pv(t){if(typeof t!="number")try{t=be.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+wl.substring(0,t):Sr.throwArgumentError("invalid decimal size","decimals",t)}function bu(t,e){e==null&&(e=0);const r=pv(e);t=be.from(t);const n=t.lt(NE);n&&(t=t.mul(DE));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=t.div(r).toString();return r.length===1?t=o:t=o+"."+i,n&&(t="-"+t),t}function ui(t,e){e==null&&(e=0);const r=pv(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Sr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Sr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Sr.throwArgumentError("too many decimal points","value",t);let o=i[0],s=i[1];for(o||(o="0"),s||(s="0");s[s.length-1]==="0";)s=s.substring(0,s.length-1);for(s.length>r.length-1&&IE("fractional component exceeds decimals","underflow","parseFixed"),s===""&&(s="0");s.length<r.length-1;)s+="0";const a=be.from(o),u=be.from(s);let l=a.mul(r).add(u);return n&&(l=l.mul(DE)),l}class Xs{constructor(e,r,n,i){e!==yl&&Sr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",te.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=pv(i),Object.freeze(this)}static from(e){if(e instanceof Xs)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Sr.throwArgumentError("invalid fixed format","format",e),r=o[1]!=="u",n=parseInt(o[2]),i=parseInt(o[3])}}else if(e){const o=(s,a,u)=>e[s]==null?u:(typeof e[s]!==a&&Sr.throwArgumentError("invalid fixed format ("+s+" not "+a+")","format."+s,e[s]),e[s]);r=o("signed","boolean",r),n=o("width","number",n),i=o("decimals","number",i)}return n%8&&Sr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Sr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Xs(yl,r,n,i)}}class nr{constructor(e,r,n,i){e!==yl&&Sr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",te.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Sr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=ui(this._value,this.format.decimals),n=ui(e._value,e.format.decimals);return nr.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=ui(this._value,this.format.decimals),n=ui(e._value,e.format.decimals);return nr.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=ui(this._value,this.format.decimals),n=ui(e._value,e.format.decimals);return nr.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=ui(this._value,this.format.decimals),n=ui(e._value,e.format.decimals);return nr.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=nr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(Yy.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=nr.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(Yy.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Sr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=nr.from("1"+wl.substring(0,e),this.format),i=LT.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Sr.throwArgumentError("invalid byte width","width",e);const r=be.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return It(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return nr.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!DT(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),nr.fromString(bu(e,r),Xs.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=Xs.from(r),i=ui(e,n.decimals);!n.signed&&i.lt(NE)&&IE("unsigned value cannot be negative","overflow","value",e);let o=null;n.signed?o=i.toTwos(n.width).toHexString():(o=i.toHexString(),o=It(o,n.width/8));const s=bu(i,n.decimals);return new nr(yl,o,s,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=Xs.from(r);if(Fe(e).length>n.width/8)throw new Error("overflow");let i=be.from(e);n.signed&&(i=i.fromTwos(n.width));const o=i.toTwos((n.signed?0:1)+n.width).toHexString(),s=bu(i,n.decimals);return new nr(yl,o,s,n)}static from(e,r){if(typeof e=="string")return nr.fromString(e,r);if(Ea(e))return nr.fromBytes(e,r);try{return nr.fromValue(e,0,r)}catch(n){if(n.code!==te.errors.INVALID_ARGUMENT)throw n}return Sr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const Yy=nr.from(1),LT=nr.from("0.5"),BT="properties/5.7.0";var FT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const df=new te(BT);function Ye(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function ol(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function sr(t){return FT(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(o=>({key:n,value:o}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function jT(t,e){(!t||typeof t!="object")&&df.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||df.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Cr(t){const e={};for(const r in t)e[r]=t[r];return e}const $T={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function LE(t){if(t==null||$T[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!LE(n))return!1}return!0}return df.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function UT(t){if(LE(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Xo(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&Ye(e,r,Xo(n))}return e}return df.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Xo(t){return UT(t)}class qT{constructor(e){for(const r in e)this[r]=Xo(e[r])}}var Om={},zT={get exports(){return Om},set exports(t){Om=t}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var o=!n&&typeof self=="object",s=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?i=re:o&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,u=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],d=[1,256,65536,16777216],h=[6,1536,393216,100663296],p=[0,8,16,24],g=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],_=[224,256,384,512],m=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],S={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),u&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var b=function(A,k,q){return function(z){return new w(A,k,A).update(z)[q]()}},R=function(A,k,q){return function(z,V){return new w(A,k,V).update(z)[q]()}},j=function(A,k,q){return function(z,V,W,J){return y["cshake"+A].update(z,V,W,J)[q]()}},D=function(A,k,q){return function(z,V,W,J){return y["kmac"+A].update(z,V,W,J)[q]()}},N=function(A,k,q,z){for(var V=0;V<v.length;++V){var W=v[V];A[W]=k(q,z,W)}return A},U=function(A,k){var q=b(A,k,"hex");return q.create=function(){return new w(A,k,A)},q.update=function(z){return q.create().update(z)},N(q,b,A,k)},F=function(A,k){var q=R(A,k,"hex");return q.create=function(z){return new w(A,k,z)},q.update=function(z,V){return q.create(V).update(z)},N(q,R,A,k)},O=function(A,k){var q=S[A],z=j(A,k,"hex");return z.create=function(V,W,J){return!W&&!J?y["shake"+A].create(V):new w(A,k,V).bytepad([W,J],q)},z.update=function(V,W,J,Y){return z.create(W,J,Y).update(V)},N(z,j,A,k)},$=function(A,k){var q=S[A],z=D(A,k,"hex");return z.create=function(V,W,J){return new T(A,k,W).bytepad(["KMAC",J],q).bytepad([V],q)},z.update=function(V,W,J,Y){return z.create(V,J,Y).update(W)},N(z,D,A,k)},P=[{name:"keccak",padding:d,bits:_,createMethod:U},{name:"sha3",padding:h,bits:_,createMethod:U},{name:"shake",padding:c,bits:m,createMethod:F},{name:"cshake",padding:f,bits:m,createMethod:O},{name:"kmac",padding:f,bits:m,createMethod:$}],y={},E=[],C=0;C<P.length;++C)for(var B=P[C],L=B.bits,M=0;M<L.length;++M){var I=B.name+"_"+L[M];if(E.push(I),y[I]=B.createMethod(L[M],B.padding),B.name!=="sha3"){var x=B.name+L[M];E.push(x),y[x]=y[I]}}function w(A,k,q){this.blocks=[],this.s=[],this.padding=k,this.outputBits=q,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=q>>5,this.extraBytes=(q&31)>>3;for(var z=0;z<50;++z)this.s[z]=0}w.prototype.update=function(A){if(this.finalized)throw new Error(r);var k,q=typeof A;if(q!=="string"){if(q==="object"){if(A===null)throw new Error(e);if(u&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!u||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);k=!0}for(var z=this.blocks,V=this.byteCount,W=A.length,J=this.blockCount,Y=0,pe=this.s,ie,le;Y<W;){if(this.reset)for(this.reset=!1,z[0]=this.block,ie=1;ie<J+1;++ie)z[ie]=0;if(k)for(ie=this.start;Y<W&&ie<V;++Y)z[ie>>2]|=A[Y]<<p[ie++&3];else for(ie=this.start;Y<W&&ie<V;++Y)le=A.charCodeAt(Y),le<128?z[ie>>2]|=le<<p[ie++&3]:le<2048?(z[ie>>2]|=(192|le>>6)<<p[ie++&3],z[ie>>2]|=(128|le&63)<<p[ie++&3]):le<55296||le>=57344?(z[ie>>2]|=(224|le>>12)<<p[ie++&3],z[ie>>2]|=(128|le>>6&63)<<p[ie++&3],z[ie>>2]|=(128|le&63)<<p[ie++&3]):(le=65536+((le&1023)<<10|A.charCodeAt(++Y)&1023),z[ie>>2]|=(240|le>>18)<<p[ie++&3],z[ie>>2]|=(128|le>>12&63)<<p[ie++&3],z[ie>>2]|=(128|le>>6&63)<<p[ie++&3],z[ie>>2]|=(128|le&63)<<p[ie++&3]);if(this.lastByteIndex=ie,ie>=V){for(this.start=ie-V,this.block=z[J],ie=0;ie<J;++ie)pe[ie]^=z[ie];H(pe),this.reset=!0}else this.start=ie}return this},w.prototype.encode=function(A,k){var q=A&255,z=1,V=[q];for(A=A>>8,q=A&255;q>0;)V.unshift(q),A=A>>8,q=A&255,++z;return k?V.push(z):V.unshift(z),this.update(V),V.length},w.prototype.encodeString=function(A){var k,q=typeof A;if(q!=="string"){if(q==="object"){if(A===null)throw new Error(e);if(u&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!u||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);k=!0}var z=0,V=A.length;if(k)z=V;else for(var W=0;W<A.length;++W){var J=A.charCodeAt(W);J<128?z+=1:J<2048?z+=2:J<55296||J>=57344?z+=3:(J=65536+((J&1023)<<10|A.charCodeAt(++W)&1023),z+=4)}return z+=this.encode(z*8),this.update(A),z},w.prototype.bytepad=function(A,k){for(var q=this.encode(k),z=0;z<A.length;++z)q+=this.encodeString(A[z]);var V=k-q%k,W=[];return W.length=V,this.update(W),this},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,k=this.lastByteIndex,q=this.blockCount,z=this.s;if(A[k>>2]|=this.padding[k&3],this.lastByteIndex===this.byteCount)for(A[0]=A[q],k=1;k<q+1;++k)A[k]=0;for(A[q-1]|=2147483648,k=0;k<q;++k)z[k]^=A[k];H(z)}},w.prototype.toString=w.prototype.hex=function(){this.finalize();for(var A=this.blockCount,k=this.s,q=this.outputBlocks,z=this.extraBytes,V=0,W=0,J="",Y;W<q;){for(V=0;V<A&&W<q;++V,++W)Y=k[V],J+=l[Y>>4&15]+l[Y&15]+l[Y>>12&15]+l[Y>>8&15]+l[Y>>20&15]+l[Y>>16&15]+l[Y>>28&15]+l[Y>>24&15];W%A===0&&(H(k),V=0)}return z&&(Y=k[V],J+=l[Y>>4&15]+l[Y&15],z>1&&(J+=l[Y>>12&15]+l[Y>>8&15]),z>2&&(J+=l[Y>>20&15]+l[Y>>16&15])),J},w.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,k=this.s,q=this.outputBlocks,z=this.extraBytes,V=0,W=0,J=this.outputBits>>3,Y;z?Y=new ArrayBuffer(q+1<<2):Y=new ArrayBuffer(J);for(var pe=new Uint32Array(Y);W<q;){for(V=0;V<A&&W<q;++V,++W)pe[W]=k[V];W%A===0&&H(k)}return z&&(pe[V]=k[V],Y=Y.slice(0,J)),Y},w.prototype.buffer=w.prototype.arrayBuffer,w.prototype.digest=w.prototype.array=function(){this.finalize();for(var A=this.blockCount,k=this.s,q=this.outputBlocks,z=this.extraBytes,V=0,W=0,J=[],Y,pe;W<q;){for(V=0;V<A&&W<q;++V,++W)Y=W<<2,pe=k[V],J[Y]=pe&255,J[Y+1]=pe>>8&255,J[Y+2]=pe>>16&255,J[Y+3]=pe>>24&255;W%A===0&&H(k)}return z&&(Y=W<<2,pe=k[V],J[Y]=pe&255,z>1&&(J[Y+1]=pe>>8&255),z>2&&(J[Y+2]=pe>>16&255)),J};function T(A,k,q){w.call(this,A,k,q)}T.prototype=new w,T.prototype.finalize=function(){return this.encode(this.outputBits,!0),w.prototype.finalize.call(this)};var H=function(A){var k,q,z,V,W,J,Y,pe,ie,le,Ie,ve,Q,ee,ne,ce,se,ye,ae,K,X,Z,ue,fe,he,Re,Ae,we,kt,xe,ke,zt,Ue,nt,Jr,ot,tt,dn,Le,qe,wr,st,lt,ci,pt,Qe,hn,dt,mt,Po,wt,_t,ko,bt,St,To,Et,Rt,Bi,Fi,ji,$i,Ui;for(z=0;z<48;z+=2)V=A[0]^A[10]^A[20]^A[30]^A[40],W=A[1]^A[11]^A[21]^A[31]^A[41],J=A[2]^A[12]^A[22]^A[32]^A[42],Y=A[3]^A[13]^A[23]^A[33]^A[43],pe=A[4]^A[14]^A[24]^A[34]^A[44],ie=A[5]^A[15]^A[25]^A[35]^A[45],le=A[6]^A[16]^A[26]^A[36]^A[46],Ie=A[7]^A[17]^A[27]^A[37]^A[47],ve=A[8]^A[18]^A[28]^A[38]^A[48],Q=A[9]^A[19]^A[29]^A[39]^A[49],k=ve^(J<<1|Y>>>31),q=Q^(Y<<1|J>>>31),A[0]^=k,A[1]^=q,A[10]^=k,A[11]^=q,A[20]^=k,A[21]^=q,A[30]^=k,A[31]^=q,A[40]^=k,A[41]^=q,k=V^(pe<<1|ie>>>31),q=W^(ie<<1|pe>>>31),A[2]^=k,A[3]^=q,A[12]^=k,A[13]^=q,A[22]^=k,A[23]^=q,A[32]^=k,A[33]^=q,A[42]^=k,A[43]^=q,k=J^(le<<1|Ie>>>31),q=Y^(Ie<<1|le>>>31),A[4]^=k,A[5]^=q,A[14]^=k,A[15]^=q,A[24]^=k,A[25]^=q,A[34]^=k,A[35]^=q,A[44]^=k,A[45]^=q,k=pe^(ve<<1|Q>>>31),q=ie^(Q<<1|ve>>>31),A[6]^=k,A[7]^=q,A[16]^=k,A[17]^=q,A[26]^=k,A[27]^=q,A[36]^=k,A[37]^=q,A[46]^=k,A[47]^=q,k=le^(V<<1|W>>>31),q=Ie^(W<<1|V>>>31),A[8]^=k,A[9]^=q,A[18]^=k,A[19]^=q,A[28]^=k,A[29]^=q,A[38]^=k,A[39]^=q,A[48]^=k,A[49]^=q,ee=A[0],ne=A[1],Qe=A[11]<<4|A[10]>>>28,hn=A[10]<<4|A[11]>>>28,we=A[20]<<3|A[21]>>>29,kt=A[21]<<3|A[20]>>>29,Fi=A[31]<<9|A[30]>>>23,ji=A[30]<<9|A[31]>>>23,st=A[40]<<18|A[41]>>>14,lt=A[41]<<18|A[40]>>>14,nt=A[2]<<1|A[3]>>>31,Jr=A[3]<<1|A[2]>>>31,ce=A[13]<<12|A[12]>>>20,se=A[12]<<12|A[13]>>>20,dt=A[22]<<10|A[23]>>>22,mt=A[23]<<10|A[22]>>>22,xe=A[33]<<13|A[32]>>>19,ke=A[32]<<13|A[33]>>>19,$i=A[42]<<2|A[43]>>>30,Ui=A[43]<<2|A[42]>>>30,bt=A[5]<<30|A[4]>>>2,St=A[4]<<30|A[5]>>>2,ot=A[14]<<6|A[15]>>>26,tt=A[15]<<6|A[14]>>>26,ye=A[25]<<11|A[24]>>>21,ae=A[24]<<11|A[25]>>>21,Po=A[34]<<15|A[35]>>>17,wt=A[35]<<15|A[34]>>>17,zt=A[45]<<29|A[44]>>>3,Ue=A[44]<<29|A[45]>>>3,fe=A[6]<<28|A[7]>>>4,he=A[7]<<28|A[6]>>>4,To=A[17]<<23|A[16]>>>9,Et=A[16]<<23|A[17]>>>9,dn=A[26]<<25|A[27]>>>7,Le=A[27]<<25|A[26]>>>7,K=A[36]<<21|A[37]>>>11,X=A[37]<<21|A[36]>>>11,_t=A[47]<<24|A[46]>>>8,ko=A[46]<<24|A[47]>>>8,ci=A[8]<<27|A[9]>>>5,pt=A[9]<<27|A[8]>>>5,Re=A[18]<<20|A[19]>>>12,Ae=A[19]<<20|A[18]>>>12,Rt=A[29]<<7|A[28]>>>25,Bi=A[28]<<7|A[29]>>>25,qe=A[38]<<8|A[39]>>>24,wr=A[39]<<8|A[38]>>>24,Z=A[48]<<14|A[49]>>>18,ue=A[49]<<14|A[48]>>>18,A[0]=ee^~ce&ye,A[1]=ne^~se&ae,A[10]=fe^~Re&we,A[11]=he^~Ae&kt,A[20]=nt^~ot&dn,A[21]=Jr^~tt&Le,A[30]=ci^~Qe&dt,A[31]=pt^~hn&mt,A[40]=bt^~To&Rt,A[41]=St^~Et&Bi,A[2]=ce^~ye&K,A[3]=se^~ae&X,A[12]=Re^~we&xe,A[13]=Ae^~kt&ke,A[22]=ot^~dn&qe,A[23]=tt^~Le&wr,A[32]=Qe^~dt&Po,A[33]=hn^~mt&wt,A[42]=To^~Rt&Fi,A[43]=Et^~Bi&ji,A[4]=ye^~K&Z,A[5]=ae^~X&ue,A[14]=we^~xe&zt,A[15]=kt^~ke&Ue,A[24]=dn^~qe&st,A[25]=Le^~wr&lt,A[34]=dt^~Po&_t,A[35]=mt^~wt&ko,A[44]=Rt^~Fi&$i,A[45]=Bi^~ji&Ui,A[6]=K^~Z&ee,A[7]=X^~ue&ne,A[16]=xe^~zt&fe,A[17]=ke^~Ue&he,A[26]=qe^~st&nt,A[27]=wr^~lt&Jr,A[36]=Po^~_t&ci,A[37]=wt^~ko&pt,A[46]=Fi^~$i&bt,A[47]=ji^~Ui&St,A[8]=Z^~ee&ce,A[9]=ue^~ne&se,A[18]=zt^~fe&Re,A[19]=Ue^~he&Ae,A[28]=st^~nt&ot,A[29]=lt^~Jr&tt,A[38]=_t^~ci&Qe,A[39]=ko^~pt&hn,A[48]=$i^~bt&To,A[49]=Ui^~St&Et,A[0]^=g[z],A[1]^=g[z+1]};if(a)t.exports=y;else for(C=0;C<E.length;++C)i[E[C]]=y[E[C]]})()})(zT);const HT=Om;function lr(t){return"0x"+HT.keccak_256(Fe(t))}const VT="rlp/5.7.0",Wn=new te(VT);function Xy(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Zy(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function BE(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(o){n=n.concat(BE(o))}),n.length<=55)return n.unshift(192+n.length),n;const i=Xy(n.length);return i.unshift(247+i.length),i.concat(n)}dv(t)||Wn.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Fe(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Xy(e.length);return r.unshift(183+r.length),r.concat(e)}function Wf(t){return Be(BE(t))}function e1(t,e,r,n){const i=[];for(;r<e+1+n;){const o=FE(t,r);i.push(o.result),r+=o.consumed,r>e+1+n&&Wn.throwError("child data too short",te.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function FE(t,e){if(t.length===0&&Wn.throwError("data too short",te.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Wn.throwError("data short segment too short",te.errors.BUFFER_OVERRUN,{});const n=Zy(t,e+1,r);return e+1+r+n>t.length&&Wn.throwError("data long segment too short",te.errors.BUFFER_OVERRUN,{}),e1(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Wn.throwError("data array too short",te.errors.BUFFER_OVERRUN,{}),e1(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Wn.throwError("data array too short",te.errors.BUFFER_OVERRUN,{});const n=Zy(t,e+1,r);e+1+r+n>t.length&&Wn.throwError("data array too short",te.errors.BUFFER_OVERRUN,{});const i=Be(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Wn.throwError("data too short",te.errors.BUFFER_OVERRUN,{});const n=Be(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:Be(t[e])}}function mv(t){const e=Fe(t),r=FE(e,0);return r.consumed!==e.length&&Wn.throwArgumentError("invalid rlp data","data",t),r.result}const KT="address/5.7.0",qs=new te(KT);function t1(t){gt(t,20)||qs.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=Fe(lr(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const WT=9007199254740991;function GT(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const gv={};for(let t=0;t<10;t++)gv[String(t)]=String(t);for(let t=0;t<26;t++)gv[String.fromCharCode(65+t)]=String(10+t);const r1=Math.floor(GT(WT));function QT(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>gv[n]).join("");for(;e.length>=r1;){let n=e.substring(0,r1);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Nn(t){let e=null;if(typeof t!="string"&&qs.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=t1(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&qs.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==QT(t)&&qs.throwArgumentError("bad icap checksum","address",t),e=IT(t.substring(4));e.length<40;)e="0"+e;e=t1("0x"+e)}else qs.throwArgumentError("invalid address","address",t);return e}function JT(t){let e=null;try{e=Nn(t.from)}catch{qs.throwArgumentError("missing from address","transaction",t)}const r=la(Fe(be.from(t.nonce).toHexString()));return Nn(br(lr(Wf([e,r])),12))}const YT="0x0000000000000000000000000000000000000000",XT=be.from(0),ZT="0x0000000000000000000000000000000000000000000000000000000000000000",eC="strings/5.7.0",jE=new te(eC);var Kl;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Kl||(Kl={}));var $r;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})($r||($r={}));function tC(t,e,r,n,i){return jE.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function $E(t,e,r,n,i){if(t===$r.BAD_PREFIX||t===$r.UNEXPECTED_CONTINUE){let o=0;for(let s=e+1;s<r.length&&r[s]>>6===2;s++)o++;return o}return t===$r.OVERRUN?r.length-e-1:0}function rC(t,e,r,n,i){return t===$r.OVERLONG?(n.push(i),0):(n.push(65533),$E(t,e,r))}const nC=Object.freeze({error:tC,ignore:$E,replace:rC});function UE(t,e){e==null&&(e=nC.error),t=Fe(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if((i&224)===192)o=1,s=127;else if((i&240)===224)o=2,s=2047;else if((i&248)===240)o=3,s=65535;else{(i&192)===128?n+=e($r.UNEXPECTED_CONTINUE,n-1,t,r):n+=e($r.BAD_PREFIX,n-1,t,r);continue}if(n-1+o>=t.length){n+=e($r.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let l=t[n];if((l&192)!=128){n+=e($r.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|l&63,n++}if(a!==null){if(a>1114111){n+=e($r.OUT_OF_RANGE,n-1-o,t,r,a);continue}if(a>=55296&&a<=57343){n+=e($r.UTF16_SURROGATE,n-1-o,t,r,a);continue}if(a<=s){n+=e($r.OVERLONG,n-1-o,t,r,a);continue}r.push(a)}}return r}function Ti(t,e=Kl.current){e!=Kl.current&&(jE.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const o=t.charCodeAt(n);if(n>=t.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");const s=65536+((i&1023)<<10)+(o&1023);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return Fe(r)}function iC(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Gf(t,e){return iC(UE(t,e))}function oC(t,e=Kl.current){return UE(Ti(t,e))}function qE(t){return lr(Ti(t))}const zE="hash/5.7.0";function HE(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Fe(e)}function VE(t){t=Fe(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function KE(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(o,s){n.call(o,function(a){s>0&&Array.isArray(a)?i(a,s-1):r.push(a)})};return i(t,e),r}function sC(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function aC(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,o=[0,1];for(let R=1;R<n;R++)o.push(i+=r());let s=r(),a=e;e+=s;let u=0,l=0;function c(){return u==0&&(l=l<<8|t[e++],u=8),l>>--u&1}const f=31,d=Math.pow(2,f),h=d>>>1,p=h>>1,g=d-1;let _=0;for(let R=0;R<f;R++)_=_<<1|c();let m=[],v=0,S=d;for(;;){let R=Math.floor(((_-v+1)*i-1)/S),j=0,D=n;for(;D-j>1;){let F=j+D>>>1;R<o[F]?D=F:j=F}if(j==0)break;m.push(j);let N=v+Math.floor(S*o[j]/i),U=v+Math.floor(S*o[j+1]/i)-1;for(;!((N^U)&h);)_=_<<1&g|c(),N=N<<1&g,U=U<<1&g|1;for(;N&~U&p;)_=_&h|_<<1&g>>>1|c(),N=N<<1^h,U=(U^h)<<1|h|1;v=N,S=1+U-N}let b=n-4;return m.map(R=>{switch(R-b){case 3:return b+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return b+256+(t[a++]<<8|t[a++]);case 1:return b+t[a++];default:return R-1}})}function lC(t){let e=0;return()=>t[e++]}function cC(t){return lC(aC(t))}function uC(t){return t&1?~t>>1:t>>1}function fC(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function n1(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function dC(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=uC(e());return r}function hf(t,e){let r=n1(t(),t),n=t(),i=n1(n,t),o=fC(n,t);for(let s=0;s<n;s++)for(let a=0;a<o[s];a++)r.push(i[s]+a);return e?r.map(s=>e[s]):r}function hC(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(mC(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(gC(r,t))}return sC(KE(e))}function pC(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function WE(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)dC(t,r).forEach((o,s)=>n[s].push(o));return n}function mC(t,e){let r=1+e(),n=e(),i=pC(e),o=WE(i.length,1+t,e);return KE(o.map((s,a)=>{const u=s[0],l=s.slice(1);return Array(i[a]).fill(void 0).map((c,f)=>{let d=f*n;return[u+f*r,l.map(h=>h+d)]})}))}function gC(t,e){let r=1+e();return WE(r,1+t,e).map(i=>[i[0],i.slice(1)])}function vC(t){let e=hf(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let l=hf(t,e);if(l.length==0)break;n.push({set:new Set(l),node:r()})}n.sort((l,c)=>c.set.size-l.set.size);let i=t(),o=i%3;i=i/3|0;let s=!!(i&1);i>>=1;let a=i==1,u=i==2;return{branches:n,valid:o,fe0f:s,save:a,check:u}}}function yC(){return cC(HE("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Qf=yC(),wC=new Set(hf(Qf)),_C=new Set(hf(Qf)),bC=hC(Qf),SC=vC(Qf),i1=45,o1=95;function GE(t){return oC(t)}function EC(t){return t.filter(e=>e!=65039)}function QE(t){for(let e of t.split(".")){let r=GE(e);try{for(let n=r.lastIndexOf(o1)-1;n>=0;n--)if(r[n]!==o1)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===i1&&r[3]===i1)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function RC(t){return QE(xC(t,EC))}function xC(t,e){let r=GE(t).reverse(),n=[];for(;r.length;){let i=PC(r);if(i){n.push(...e(i));continue}let o=r.pop();if(wC.has(o)){n.push(o);continue}if(_C.has(o))continue;let s=bC[o];if(s){n.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${o.toString(16).toUpperCase()}`)}return QE(AC(String.fromCodePoint(...n)))}function AC(t){return t.normalize("NFC")}function PC(t,e){var r;let n=SC,i,o,s=[],a=t.length;for(e&&(e.length=0);a;){let u=t[--a];if(n=(r=n.branches.find(l=>l.set.has(u)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)o=u;else if(n.check&&u===o)break;s.push(u),n.fe0f&&(s.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=s.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(a).reverse()),t.length=a)}return i}const kC=new te(zE),JE=new Uint8Array(32);JE.fill(0);function s1(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function YE(t){const e=Ti(RC(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(s1(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(s1(e.slice(n))),r}function Su(t){typeof t!="string"&&kC.throwArgumentError("invalid ENS name; not a string","name",t);let e=JE;const r=YE(t);for(;r.length;)e=lr($o([e,lr(r.pop())]));return Be(e)}function TC(t){return Be($o(YE(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}var CC=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const Tt=new te(zE),XE=new Uint8Array(32);XE.fill(0);const OC=be.from(-1),ZE=be.from(0),eR=be.from(1),MC=be.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function NC(t){const e=Fe(t),r=e.length%32;return r?qr([e,XE.slice(r)]):Be(e)}const DC=It(eR.toHexString(),32),IC=It(ZE.toHexString(),32),a1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Fh=["name","version","chainId","verifyingContract","salt"];function l1(t){return function(e){return typeof e!="string"&&Tt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const LC={name:l1("name"),version:l1("version"),chainId:function(t){try{return be.from(t).toString()}catch{}return Tt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Nn(t).toLowerCase()}catch{}return Tt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Fe(t);if(e.length!==32)throw new Error("bad length");return Be(e)}catch{}return Tt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function jh(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Tt.throwArgumentError("invalid numeric width","type",t);const i=MC.mask(r?n-1:n),o=r?i.add(eR).mul(OC):ZE;return function(s){const a=be.from(s);return(a.lt(o)||a.gt(i))&&Tt.throwArgumentError(`value out-of-bounds for ${t}`,"value",s),It(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Tt.throwArgumentError("invalid bytes width","type",t),function(n){return Fe(n).length!==r&&Tt.throwArgumentError(`invalid length for ${t}`,"value",n),NC(n)}}}switch(t){case"address":return function(e){return It(Nn(e),32)};case"bool":return function(e){return e?DC:IC};case"bytes":return function(e){return lr(e)};case"string":return function(e){return qE(e)}}return null}function c1(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Fr{constructor(e){Ye(this,"types",Object.freeze(Xo(e))),Ye(this,"_encoderCache",{}),Ye(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(const a in e){const u={};e[a].forEach(l=>{u[l.name]&&Tt.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),u[l.name]=!0;const c=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&Tt.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!jh(c)&&(n[c]||Tt.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),n[c].push(a),r[a][c]=!0)})}const o=Object.keys(n).filter(a=>n[a].length===0);o.length===0?Tt.throwArgumentError("missing primary type","types",e):o.length>1&&Tt.throwArgumentError(`ambiguous primary types or unused types: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Ye(this,"primaryType",o[0]);function s(a,u){u[a]&&Tt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),u[a]=!0,Object.keys(r[a]).forEach(l=>{n[l]&&(s(l,u),Object.keys(u).forEach(c=>{i[c][l]=!0}))}),delete u[a]}s(this.primaryType,{});for(const a in i){const u=Object.keys(i[a]);u.sort(),this._types[a]=c1(a,e[a])+u.map(l=>c1(l,e[l])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=jh(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],o=this.getEncoder(i),s=parseInt(r[3]);return a=>{s>=0&&a.length!==s&&Tt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let u=a.map(o);return this._types[i]&&(u=u.map(lr)),lr(qr(u))}}const n=this.types[e];if(n){const i=qE(this._types[e]);return o=>{const s=n.map(({name:a,type:u})=>{const l=this.getEncoder(u)(o[a]);return this._types[u]?lr(l):l});return s.unshift(i),qr(s)}}return Tt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Tt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return lr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(jh(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const s=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&Tt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(u=>this._visit(s,u,n))}const o=this.types[e];return o?o.reduce((s,{name:a,type:u})=>(s[a]=this._visit(u,r[a],n),s),{}):Tt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Fr(e)}static getPrimaryType(e){return Fr.from(e).primaryType}static hashStruct(e,r,n){return Fr.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=a1[n];i||Tt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Fh.indexOf(n.name)-Fh.indexOf(i.name)),Fr.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return qr(["0x1901",Fr.hashDomain(e),Fr.from(r).hash(n)])}static hash(e,r,n){return lr(Fr.encode(e,r,n))}static resolveNames(e,r,n,i){return CC(this,void 0,void 0,function*(){e=Cr(e);const o={};e.verifyingContract&&!gt(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const s=Fr.from(r);s.visit(n,(a,u)=>(a==="address"&&!gt(u,20)&&(o[u]="0x"),u));for(const a in o)o[a]=yield i(a);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),n=s.visit(n,(a,u)=>a==="address"&&o[u]?o[u]:u),{domain:e,value:n}})}static getPayload(e,r,n){Fr.hashDomain(e);const i={},o=[];Fh.forEach(u=>{const l=e[u];l!=null&&(i[u]=LC[u](l),o.push({name:u,type:a1[u]}))});const s=Fr.from(r),a=Cr(r);return a.EIP712Domain?Tt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,(u,l)=>{if(u.match(/^bytes(\d*)/))return Be(Fe(l));if(u.match(/^u?int/))return be.from(l).toString();switch(u){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&Tt.throwArgumentError("invalid string","value",l),l}return Tt.throwArgumentError("unsupported type","type",u)})}}}const BC="abstract-provider/5.7.0";var FC=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const jC=new te(BC);class $C extends qT{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class vv{constructor(){jC.checkAbstract(new.target,vv),Ye(this,"_isProvider",!0)}getFeeData(){return FC(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield sr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)});let n=null,i=null,o=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,o=be.from("1500000000"),i=e.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const UC="abstract-signer/5.7.0";var mn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const gn=new te(UC),qC=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],zC=[te.errors.INSUFFICIENT_FUNDS,te.errors.NONCE_EXPIRED,te.errors.REPLACEMENT_UNDERPRICED];class yv{constructor(){gn.checkAbstract(new.target,yv),Ye(this,"_isSigner",!0)}getBalance(e){return mn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return mn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return mn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield sr(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return mn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield sr(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return mn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return mn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return mn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return mn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return mn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)qC.indexOf(n)===-1&&gn.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Cr(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&gn.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return mn(this,void 0,void 0,function*(){const r=yield sr(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>mn(this,void 0,void 0,function*(){if(i==null)return null;const o=yield this.resolveName(i);return o==null&&gn.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?gn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&gn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&gn.throwError("network does not support EIP-1559",te.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):gn.throwError("failed to get consistent fee data",te.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(zC.indexOf(i.code)>=0)throw i;return gn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",te.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&gn.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield sr(r)})}_checkProvider(e){this.provider||gn.throwError("missing provider",te.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}var tR={},Ge={},nc=rR;function rR(t,e){if(!t)throw new Error(e||"Assertion failed")}rR.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Mm={},u1={get exports(){return Mm},set exports(t){Mm=t}};typeof Object.create=="function"?u1.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:u1.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var HC=nc,VC=Mm;Ge.inherits=VC;function KC(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function WC(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):KC(t,i)?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Ge.toArray=WC;function GC(t){for(var e="",r=0;r<t.length;r++)e+=iR(t[r].toString(16));return e}Ge.toHex=GC;function nR(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ge.htonl=nR;function QC(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=nR(i)),r+=oR(i.toString(16))}return r}Ge.toHex32=QC;function iR(t){return t.length===1?"0"+t:t}Ge.zero2=iR;function oR(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ge.zero8=oR;function JC(t,e,r,n){var i=r-e;HC(i%4===0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var u;n==="big"?u=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:u=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=u>>>0}return o}Ge.join32=JC;function YC(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];e==="big"?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=o&255):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=o&255)}return r}Ge.split32=YC;function XC(t,e){return t>>>e|t<<32-e}Ge.rotr32=XC;function ZC(t,e){return t<<e|t>>>32-e}Ge.rotl32=ZC;function eO(t,e){return t+e>>>0}Ge.sum32=eO;function tO(t,e,r){return t+e+r>>>0}Ge.sum32_3=tO;function rO(t,e,r,n){return t+e+r+n>>>0}Ge.sum32_4=rO;function nO(t,e,r,n,i){return t+e+r+n+i>>>0}Ge.sum32_5=nO;function iO(t,e,r,n){var i=t[e],o=t[e+1],s=n+o>>>0,a=(s<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=s}Ge.sum64=iO;function oO(t,e,r,n){var i=e+n>>>0,o=(i<e?1:0)+t+r;return o>>>0}Ge.sum64_hi=oO;function sO(t,e,r,n){var i=e+n;return i>>>0}Ge.sum64_lo=sO;function aO(t,e,r,n,i,o,s,a){var u=0,l=e;l=l+n>>>0,u+=l<e?1:0,l=l+o>>>0,u+=l<o?1:0,l=l+a>>>0,u+=l<a?1:0;var c=t+r+i+s+u;return c>>>0}Ge.sum64_4_hi=aO;function lO(t,e,r,n,i,o,s,a){var u=e+n+o+a;return u>>>0}Ge.sum64_4_lo=lO;function cO(t,e,r,n,i,o,s,a,u,l){var c=0,f=e;f=f+n>>>0,c+=f<e?1:0,f=f+o>>>0,c+=f<o?1:0,f=f+a>>>0,c+=f<a?1:0,f=f+l>>>0,c+=f<l?1:0;var d=t+r+i+s+u+c;return d>>>0}Ge.sum64_5_hi=cO;function uO(t,e,r,n,i,o,s,a,u,l){var c=e+n+o+a+l;return c>>>0}Ge.sum64_5_lo=uO;function fO(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ge.rotr64_hi=fO;function dO(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ge.rotr64_lo=dO;function hO(t,e,r){return t>>>r}Ge.shr64_hi=hO;function pO(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ge.shr64_lo=pO;var Ra={},f1=Ge,mO=nc;function Jf(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ra.BlockHash=Jf;Jf.prototype.update=function(e,r){if(e=f1.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=f1.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Jf.prototype.digest=function(e){return this.update(this._pad()),mO(this.pending===null),this._digest(e)};Jf.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,s=8;s<this.padLength;s++)i[o++]=0;return i};var xa={},ai={},gO=Ge,Zn=gO.rotr32;function vO(t,e,r,n){if(t===0)return sR(e,r,n);if(t===1||t===3)return lR(e,r,n);if(t===2)return aR(e,r,n)}ai.ft_1=vO;function sR(t,e,r){return t&e^~t&r}ai.ch32=sR;function aR(t,e,r){return t&e^t&r^e&r}ai.maj32=aR;function lR(t,e,r){return t^e^r}ai.p32=lR;function yO(t){return Zn(t,2)^Zn(t,13)^Zn(t,22)}ai.s0_256=yO;function wO(t){return Zn(t,6)^Zn(t,11)^Zn(t,25)}ai.s1_256=wO;function _O(t){return Zn(t,7)^Zn(t,18)^t>>>3}ai.g0_256=_O;function bO(t){return Zn(t,17)^Zn(t,19)^t>>>10}ai.g1_256=bO;var ca=Ge,SO=Ra,EO=ai,$h=ca.rotl32,qa=ca.sum32,RO=ca.sum32_5,xO=EO.ft_1,cR=SO.BlockHash,AO=[1518500249,1859775393,2400959708,3395469782];function ri(){if(!(this instanceof ri))return new ri;cR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ca.inherits(ri,cR);var PO=ri;ri.blockSize=512;ri.outSize=160;ri.hmacStrength=80;ri.padLength=64;ri.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=$h(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],s=this.h[1],a=this.h[2],u=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var c=~~(i/20),f=RO($h(o,5),xO(c,s,a,u),l,n[i],AO[c]);l=u,u=a,a=$h(s,30),s=o,o=f}this.h[0]=qa(this.h[0],o),this.h[1]=qa(this.h[1],s),this.h[2]=qa(this.h[2],a),this.h[3]=qa(this.h[3],u),this.h[4]=qa(this.h[4],l)};ri.prototype._digest=function(e){return e==="hex"?ca.toHex32(this.h,"big"):ca.split32(this.h,"big")};var ua=Ge,kO=Ra,Aa=ai,TO=nc,vn=ua.sum32,CO=ua.sum32_4,OO=ua.sum32_5,MO=Aa.ch32,NO=Aa.maj32,DO=Aa.s0_256,IO=Aa.s1_256,LO=Aa.g0_256,BO=Aa.g1_256,uR=kO.BlockHash,FO=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ni(){if(!(this instanceof ni))return new ni;uR.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=FO,this.W=new Array(64)}ua.inherits(ni,uR);var fR=ni;ni.blockSize=512;ni.outSize=256;ni.hmacStrength=192;ni.padLength=64;ni.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=CO(BO(n[i-2]),n[i-7],LO(n[i-15]),n[i-16]);var o=this.h[0],s=this.h[1],a=this.h[2],u=this.h[3],l=this.h[4],c=this.h[5],f=this.h[6],d=this.h[7];for(TO(this.k.length===n.length),i=0;i<n.length;i++){var h=OO(d,IO(l),MO(l,c,f),this.k[i],n[i]),p=vn(DO(o),NO(o,s,a));d=f,f=c,c=l,l=vn(u,h),u=a,a=s,s=o,o=vn(h,p)}this.h[0]=vn(this.h[0],o),this.h[1]=vn(this.h[1],s),this.h[2]=vn(this.h[2],a),this.h[3]=vn(this.h[3],u),this.h[4]=vn(this.h[4],l),this.h[5]=vn(this.h[5],c),this.h[6]=vn(this.h[6],f),this.h[7]=vn(this.h[7],d)};ni.prototype._digest=function(e){return e==="hex"?ua.toHex32(this.h,"big"):ua.split32(this.h,"big")};var Nm=Ge,dR=fR;function Ci(){if(!(this instanceof Ci))return new Ci;dR.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Nm.inherits(Ci,dR);var jO=Ci;Ci.blockSize=512;Ci.outSize=224;Ci.hmacStrength=192;Ci.padLength=64;Ci.prototype._digest=function(e){return e==="hex"?Nm.toHex32(this.h.slice(0,7),"big"):Nm.split32(this.h.slice(0,7),"big")};var Dr=Ge,$O=Ra,UO=nc,ei=Dr.rotr64_hi,ti=Dr.rotr64_lo,hR=Dr.shr64_hi,pR=Dr.shr64_lo,zi=Dr.sum64,Uh=Dr.sum64_hi,qh=Dr.sum64_lo,qO=Dr.sum64_4_hi,zO=Dr.sum64_4_lo,HO=Dr.sum64_5_hi,VO=Dr.sum64_5_lo,mR=$O.BlockHash,KO=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Dn(){if(!(this instanceof Dn))return new Dn;mR.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=KO,this.W=new Array(160)}Dr.inherits(Dn,mR);var gR=Dn;Dn.blockSize=1024;Dn.outSize=512;Dn.hmacStrength=192;Dn.padLength=128;Dn.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var o=nM(n[i-4],n[i-3]),s=iM(n[i-4],n[i-3]),a=n[i-14],u=n[i-13],l=tM(n[i-30],n[i-29]),c=rM(n[i-30],n[i-29]),f=n[i-32],d=n[i-31];n[i]=qO(o,s,a,u,l,c,f,d),n[i+1]=zO(o,s,a,u,l,c,f,d)}};Dn.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],l=this.h[5],c=this.h[6],f=this.h[7],d=this.h[8],h=this.h[9],p=this.h[10],g=this.h[11],_=this.h[12],m=this.h[13],v=this.h[14],S=this.h[15];UO(this.k.length===n.length);for(var b=0;b<n.length;b+=2){var R=v,j=S,D=ZO(d,h),N=eM(d,h),U=WO(d,h,p,g,_),F=GO(d,h,p,g,_,m),O=this.k[b],$=this.k[b+1],P=n[b],y=n[b+1],E=HO(R,j,D,N,U,F,O,$,P,y),C=VO(R,j,D,N,U,F,O,$,P,y);R=YO(i,o),j=XO(i,o),D=QO(i,o,s,a,u),N=JO(i,o,s,a,u,l);var B=Uh(R,j,D,N),L=qh(R,j,D,N);v=_,S=m,_=p,m=g,p=d,g=h,d=Uh(c,f,E,C),h=qh(f,f,E,C),c=u,f=l,u=s,l=a,s=i,a=o,i=Uh(E,C,B,L),o=qh(E,C,B,L)}zi(this.h,0,i,o),zi(this.h,2,s,a),zi(this.h,4,u,l),zi(this.h,6,c,f),zi(this.h,8,d,h),zi(this.h,10,p,g),zi(this.h,12,_,m),zi(this.h,14,v,S)};Dn.prototype._digest=function(e){return e==="hex"?Dr.toHex32(this.h,"big"):Dr.split32(this.h,"big")};function WO(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function GO(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function QO(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function JO(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function YO(t,e){var r=ei(t,e,28),n=ei(e,t,2),i=ei(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function XO(t,e){var r=ti(t,e,28),n=ti(e,t,2),i=ti(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function ZO(t,e){var r=ei(t,e,14),n=ei(t,e,18),i=ei(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function eM(t,e){var r=ti(t,e,14),n=ti(t,e,18),i=ti(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function tM(t,e){var r=ei(t,e,1),n=ei(t,e,8),i=hR(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function rM(t,e){var r=ti(t,e,1),n=ti(t,e,8),i=pR(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function nM(t,e){var r=ei(t,e,19),n=ei(e,t,29),i=hR(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}function iM(t,e){var r=ti(t,e,19),n=ti(e,t,29),i=pR(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}var Dm=Ge,vR=gR;function Oi(){if(!(this instanceof Oi))return new Oi;vR.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Dm.inherits(Oi,vR);var oM=Oi;Oi.blockSize=1024;Oi.outSize=384;Oi.hmacStrength=192;Oi.padLength=128;Oi.prototype._digest=function(e){return e==="hex"?Dm.toHex32(this.h.slice(0,12),"big"):Dm.split32(this.h.slice(0,12),"big")};xa.sha1=PO;xa.sha224=jO;xa.sha256=fR;xa.sha384=oM;xa.sha512=gR;var yR={},Zo=Ge,sM=Ra,$c=Zo.rotl32,d1=Zo.sum32,za=Zo.sum32_3,h1=Zo.sum32_4,wR=sM.BlockHash;function ii(){if(!(this instanceof ii))return new ii;wR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Zo.inherits(ii,wR);yR.ripemd160=ii;ii.blockSize=512;ii.outSize=160;ii.hmacStrength=192;ii.padLength=64;ii.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],u=n,l=i,c=o,f=s,d=a,h=0;h<80;h++){var p=d1($c(h1(n,p1(h,i,o,s),e[cM[h]+r],aM(h)),fM[h]),a);n=a,a=s,s=$c(o,10),o=i,i=p,p=d1($c(h1(u,p1(79-h,l,c,f),e[uM[h]+r],lM(h)),dM[h]),d),u=d,d=f,f=$c(c,10),c=l,l=p}p=za(this.h[1],o,f),this.h[1]=za(this.h[2],s,d),this.h[2]=za(this.h[3],a,u),this.h[3]=za(this.h[4],n,l),this.h[4]=za(this.h[0],i,c),this.h[0]=p};ii.prototype._digest=function(e){return e==="hex"?Zo.toHex32(this.h,"little"):Zo.split32(this.h,"little")};function p1(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function aM(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function lM(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var cM=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],uM=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],fM=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],dM=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hM=Ge,pM=nc;function fa(t,e,r){if(!(this instanceof fa))return new fa(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(hM.toArray(e,r))}var mM=fa;fa.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),pM(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};fa.prototype.update=function(e,r){return this.inner.update(e,r),this};fa.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ge,e.common=Ra,e.sha=xa,e.ripemd=yR,e.hmac=mM,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(tR);const Kn=tR;function Pa(t,e,r){return r={path:e,exports:{},require:function(n,i){return gM(n,i??r.path)}},t(r,r.exports),r.exports}function gM(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var wv=_R;function _R(t,e){if(!t)throw new Error(e||"Assertion failed")}_R.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var kn=Pa(function(t,e){var r=e;function n(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var u=[];if(typeof s!="string"){for(var l=0;l<s.length;l++)u[l]=s[l]|0;return u}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var l=0;l<s.length;l+=2)u.push(parseInt(s[l]+s[l+1],16))}else for(var l=0;l<s.length;l++){var c=s.charCodeAt(l),f=c>>8,d=c&255;f?u.push(f,d):u.push(d)}return u}r.toArray=n;function i(s){return s.length===1?"0"+s:s}r.zero2=i;function o(s){for(var a="",u=0;u<s.length;u++)a+=i(s[u].toString(16));return a}r.toHex=o,r.encode=function(a,u){return u==="hex"?o(a):a}}),Gr=Pa(function(t,e){var r=e;r.assert=wv,r.toArray=kn.toArray,r.zero2=kn.zero2,r.toHex=kn.toHex,r.encode=kn.encode;function n(u,l,c){var f=new Array(Math.max(u.bitLength(),c)+1);f.fill(0);for(var d=1<<l+1,h=u.clone(),p=0;p<f.length;p++){var g,_=h.andln(d-1);h.isOdd()?(_>(d>>1)-1?g=(d>>1)-_:g=_,h.isubn(g)):g=0,f[p]=g,h.iushrn(1)}return f}r.getNAF=n;function i(u,l){var c=[[],[]];u=u.clone(),l=l.clone();for(var f=0,d=0,h;u.cmpn(-f)>0||l.cmpn(-d)>0;){var p=u.andln(3)+f&3,g=l.andln(3)+d&3;p===3&&(p=-1),g===3&&(g=-1);var _;p&1?(h=u.andln(7)+f&7,(h===3||h===5)&&g===2?_=-p:_=p):_=0,c[0].push(_);var m;g&1?(h=l.andln(7)+d&7,(h===3||h===5)&&p===2?m=-g:m=g):m=0,c[1].push(m),2*f===_+1&&(f=1-f),2*d===m+1&&(d=1-d),u.iushrn(1),l.iushrn(1)}return c}r.getJSF=i;function o(u,l,c){var f="_"+l;u.prototype[l]=function(){return this[f]!==void 0?this[f]:this[f]=c.call(this)}}r.cachedProperty=o;function s(u){return typeof u=="string"?r.toArray(u,"hex"):u}r.parseBytes=s;function a(u){return new De(u,"hex","le")}r.intFromLE=a}),pf=Gr.getNAF,vM=Gr.getJSF,mf=Gr.assert;function Ao(t,e){this.type=t,this.p=new De(e.p,16),this.red=e.prime?De.red(e.prime):De.mont(this.p),this.zero=new De(0).toRed(this.red),this.one=new De(1).toRed(this.red),this.two=new De(2).toRed(this.red),this.n=e.n&&new De(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var is=Ao;Ao.prototype.point=function(){throw new Error("Not implemented")};Ao.prototype.validate=function(){throw new Error("Not implemented")};Ao.prototype._fixedNafMul=function(e,r){mf(e.precomputed);var n=e._getDoubles(),i=pf(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+i[l];s.push(u)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=o;d>0;d--){for(a=0;a<s.length;a++)u=s[a],u===d?f=f.mixedAdd(n.points[a]):u===-d&&(f=f.mixedAdd(n.points[a].neg()));c=c.add(f)}return c.toP()};Ao.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=pf(r,n,this._bitLength),a=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var l=0;u>=0&&s[u]===0;u--)l++;if(u>=0&&l++,a=a.dblp(l),u<0)break;var c=s[u];mf(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(o[c-1>>1]):a=a.mixedAdd(o[-c-1>>1].neg()):c>0?a=a.add(o[c-1>>1]):a=a.add(o[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};Ao.prototype._wnafMulAdd=function(e,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,u=this._wnafT3,l=0,c,f,d;for(c=0;c<i;c++){d=r[c];var h=d._getNAFPoints(e);s[c]=h.wnd,a[c]=h.points}for(c=i-1;c>=1;c-=2){var p=c-1,g=c;if(s[p]!==1||s[g]!==1){u[p]=pf(n[p],s[p],this._bitLength),u[g]=pf(n[g],s[g],this._bitLength),l=Math.max(u[p].length,l),l=Math.max(u[g].length,l);continue}var _=[r[p],null,null,r[g]];r[p].y.cmp(r[g].y)===0?(_[1]=r[p].add(r[g]),_[2]=r[p].toJ().mixedAdd(r[g].neg())):r[p].y.cmp(r[g].y.redNeg())===0?(_[1]=r[p].toJ().mixedAdd(r[g]),_[2]=r[p].add(r[g].neg())):(_[1]=r[p].toJ().mixedAdd(r[g]),_[2]=r[p].toJ().mixedAdd(r[g].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=vM(n[p],n[g]);for(l=Math.max(v[0].length,l),u[p]=new Array(l),u[g]=new Array(l),f=0;f<l;f++){var S=v[0][f]|0,b=v[1][f]|0;u[p][f]=m[(S+1)*3+(b+1)],u[g][f]=0,a[p]=_}}var R=this.jpoint(null,null,null),j=this._wnafT4;for(c=l;c>=0;c--){for(var D=0;c>=0;){var N=!0;for(f=0;f<i;f++)j[f]=u[f][c]|0,j[f]!==0&&(N=!1);if(!N)break;D++,c--}if(c>=0&&D++,R=R.dblp(D),c<0)break;for(f=0;f<i;f++){var U=j[f];U!==0&&(U>0?d=a[f][U-1>>1]:U<0&&(d=a[f][-U-1>>1].neg()),d.type==="affine"?R=R.mixedAdd(d):R=R.add(d))}}for(c=0;c<i;c++)a[c]=null;return o?R:R.toP()};function ln(t,e){this.curve=t,this.type=e,this.precomputed=null}Ao.BasePoint=ln;ln.prototype.eq=function(){throw new Error("Not implemented")};ln.prototype.validate=function(){return this.curve.validate(this)};Ao.prototype.decodePoint=function(e,r){e=Gr.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?mf(e[e.length-1]%2===0):e[0]===7&&mf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ln.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ln.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};ln.prototype.encode=function(e,r){return Gr.encode(this._encode(r),e)};ln.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};ln.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};ln.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};ln.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:e,points:r}};ln.prototype._getBeta=function(){return null};ln.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var _v=Pa(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),yM=Gr.assert;function cn(t){is.call(this,"short",t),this.a=new De(t.a,16).toRed(this.red),this.b=new De(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_v(cn,is);var wM=cn;cn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new De(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new De(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],yM(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return e.basis?s=e.basis.map(function(a){return{a:new De(a.a,16),b:new De(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};cn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:De.mont(e),n=new De(2).toRed(r).redInvm(),i=n.redNeg(),o=new De(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};cn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new De(1),s=new De(0),a=new De(0),u=new De(1),l,c,f,d,h,p,g,_=0,m,v;n.cmpn(0)!==0;){var S=i.div(n);m=i.sub(S.mul(n)),v=a.sub(S.mul(o));var b=u.sub(S.mul(s));if(!f&&m.cmp(r)<0)l=g.neg(),c=o,f=m.neg(),d=v;else if(f&&++_===2)break;g=m,i=n,n=m,a=o,o=v,u=s,s=b}h=m.neg(),p=v;var R=f.sqr().add(d.sqr()),j=h.sqr().add(p.sqr());return j.cmp(R)>=0&&(h=l,p=c),f.negative&&(f=f.neg(),d=d.neg()),h.negative&&(h=h.neg(),p=p.neg()),[{a:f,b:d},{a:h,b:p}]};cn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),a=o.mul(n.a),u=s.mul(i.a),l=o.mul(n.b),c=s.mul(i.b),f=e.sub(a).sub(u),d=l.add(c).neg();return{k1:f,k2:d}};cn.prototype.pointFromX=function(e,r){e=new De(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(e,i)};cn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};cn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(r[s]),u=e[s],l=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[s*2]=u,i[s*2+1]=l,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,o,s*2,n),f=0;f<s*2;f++)i[f]=null,o[f]=null;return c};function er(t,e,r,n){is.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new De(e,16),this.y=new De(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_v(er,is.BasePoint);cn.prototype.point=function(e,r,n){return new er(this,e,r,n)};cn.prototype.pointFromJSON=function(e,r){return er.fromJSON(this,e,r)};er.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};er.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};er.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function o(a){return e.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};er.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};er.prototype.isInfinity=function(){return this.inf};er.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};er.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};er.prototype.getX=function(){return this.x.fromRed()};er.prototype.getY=function(){return this.y.fromRed()};er.prototype.mul=function(e){return e=new De(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};er.prototype.mulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};er.prototype.jmulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};er.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};er.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};er.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function fr(t,e,r,n){is.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new De(0)):(this.x=new De(e,16),this.y=new De(r,16),this.z=new De(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}_v(fr,is.BasePoint);cn.prototype.jpoint=function(e,r,n){return new fr(this,e,r,n)};fr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};fr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};fr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=e.x.redMul(n),s=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(o),l=s.redSub(a);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=u.redSqr(),f=c.redMul(u),d=i.redMul(c),h=l.redSqr().redIAdd(f).redISub(d).redISub(d),p=l.redMul(d.redISub(h)).redISub(s.redMul(f)),g=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(h,p,g)};fr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),o=this.y,s=e.y.redMul(r).redMul(this.z),a=n.redSub(i),u=o.redSub(s);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),c=l.redMul(a),f=n.redMul(l),d=u.redSqr().redIAdd(c).redISub(f).redISub(f),h=u.redMul(f.redISub(d)).redISub(o.redMul(c)),p=this.z.redMul(a);return this.curve.jpoint(d,h,p)};fr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,u=this.z,l=u.redSqr().redSqr(),c=a.redAdd(a);for(r=0;r<e;r++){var f=s.redSqr(),d=c.redSqr(),h=d.redSqr(),p=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(l)),g=s.redMul(d),_=p.redSqr().redISub(g.redAdd(g)),m=g.redISub(_),v=p.redMul(m);v=v.redIAdd(v).redISub(h);var S=c.redMul(u);r+1<e&&(l=l.redMul(h)),s=_,u=S,c=v}return this.curve.jpoint(s,c.redMul(o),u)};fr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};fr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),l=u.redSqr().redISub(a).redISub(a),c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),e=l,r=u.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(f).redISub(h);p=p.redIAdd(p);var g=f.redAdd(f).redIAdd(f),_=g.redSqr(),m=h.redIAdd(h);m=m.redIAdd(m),m=m.redIAdd(m),e=_.redISub(p).redISub(p),r=g.redMul(p.redISub(e)).redISub(m),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};fr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=u.redSqr().redISub(a).redISub(a);e=l;var c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),r=u.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(f).redMul(this.x.redAdd(f));p=p.redAdd(p).redIAdd(p);var g=h.redIAdd(h);g=g.redIAdd(g);var _=g.redAdd(g);e=p.redSqr().redISub(_),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var m=d.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),r=p.redMul(g.redISub(e)).redISub(m)}return this.curve.jpoint(e,r,n)};fr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),u=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),l=r.redAdd(r);l=l.redIAdd(l);var c=l.redMul(a),f=u.redSqr().redISub(c.redAdd(c)),d=c.redISub(f),h=a.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var p=u.redMul(d).redISub(h),g=n.redAdd(n).redMul(i);return this.curve.jpoint(f,p,g)};fr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var u=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var c=o.redIAdd(a).redSqr().redISub(s).redISub(u).redISub(l),f=r.redMul(c);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(u).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.y.redMul(c.redMul(l.redISub(c)).redISub(a.redMul(u)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var p=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(d,h,p)};fr.prototype.mul=function(e,r){return e=new De(e,r),this.curve._wnafMul(this,e)};fr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};fr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};fr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};fr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Eu=Pa(function(t,e){var r=e;r.base=is,r.short=wM,r.mont=null,r.edwards=null}),Ru=Pa(function(t,e){var r=e,n=Gr.assert;function i(a){a.type==="short"?this.curve=new Eu.short(a):a.type==="edwards"?this.curve=new Eu.edwards(a):this.curve=new Eu.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(a,u){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(u);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:l}),l}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Kn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Kn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Kn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Kn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Kn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Kn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Kn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Kn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function bo(t){if(!(this instanceof bo))return new bo(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=kn.toArray(t.entropy,t.entropyEnc||"hex"),r=kn.toArray(t.nonce,t.nonceEnc||"hex"),n=kn.toArray(t.pers,t.persEnc||"hex");wv(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var bR=bo;bo.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};bo.prototype._hmac=function(){return new Kn.hmac(this.hash,this.K)};bo.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};bo.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=kn.toArray(e,r),n=kn.toArray(n,i),wv(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};bo.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=kn.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,kn.encode(s,r)};var Im=Gr.assert;function vr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var bv=vr;vr.fromPublic=function(e,r,n){return r instanceof vr?r:new vr(e,{pub:r,pubEnc:n})};vr.fromPrivate=function(e,r,n){return r instanceof vr?r:new vr(e,{priv:r,privEnc:n})};vr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};vr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};vr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};vr.prototype._importPrivate=function(e,r){this.priv=new De(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};vr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Im(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Im(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};vr.prototype.derive=function(e){return e.validate()||Im(e.validate(),"public point not validated"),e.mul(this.priv).getX()};vr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};vr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};vr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var _M=Gr.assert;function Yf(t,e){if(t instanceof Yf)return t;this._importDER(t,e)||(_M(t.r&&t.s,"Signature without r or s"),this.r=new De(t.r,16),this.s=new De(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Xf=Yf;function bM(){this.place=0}function zh(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function m1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Yf.prototype._importDER=function(e,r){e=Gr.toArray(e,r);var n=new bM;if(e[n.place++]!==48)return!1;var i=zh(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=zh(e,n);if(o===!1)return!1;var s=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var a=zh(e,n);if(a===!1||e.length!==a+n.place)return!1;var u=e.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new De(s),this.s=new De(u),this.recoveryParam=null,!0};function Hh(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Yf.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=m1(r),n=m1(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Hh(i,r.length),i=i.concat(r),i.push(2),Hh(i,n.length);var o=i.concat(n),s=[48];return Hh(s,o.length),s=s.concat(o),Gr.encode(s,e)};var SM=function(){throw new Error("unsupported")},SR=Gr.assert;function sn(t){if(!(this instanceof sn))return new sn(t);typeof t=="string"&&(SR(Object.prototype.hasOwnProperty.call(Ru,t),"Unknown curve "+t),t=Ru[t]),t instanceof Ru.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var EM=sn;sn.prototype.keyPair=function(e){return new bv(this,e)};sn.prototype.keyFromPrivate=function(e,r){return bv.fromPrivate(this,e,r)};sn.prototype.keyFromPublic=function(e,r){return bv.fromPublic(this,e,r)};sn.prototype.genKeyPair=function(e){e||(e={});for(var r=new bR({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||SM(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new De(2));;){var o=new De(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};sn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};sn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new De(e,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=e.toArray("be",o),u=new bR({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new De(1)),c=0;;c++){var f=i.k?i.k(c):new De(u.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(l)>=0)){var d=this.g.mul(f);if(!d.isInfinity()){var h=d.getX(),p=h.umod(this.n);if(p.cmpn(0)!==0){var g=f.invm(this.n).mul(p.mul(r.getPrivate()).iadd(e));if(g=g.umod(this.n),g.cmpn(0)!==0){var _=(d.getY().isOdd()?1:0)|(h.cmp(p)!==0?2:0);return i.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),_^=1),new Xf({r:p,s:g,recoveryParam:_})}}}}}};sn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new De(e,16)),n=this.keyFromPublic(n,i),r=new Xf(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),u=a.mul(e).umod(this.n),l=a.mul(o).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(u,n.getPublic(),l),c.isInfinity()?!1:c.eqXToP(o)):(c=this.g.mulAdd(u,n.getPublic(),l),c.isInfinity()?!1:c.getX().umod(this.n).cmp(o)===0)};sn.prototype.recoverPubKey=function(t,e,r,n){SR((3&r)===r,"The recovery param is more than two bits"),e=new Xf(e,n);var i=this.n,o=new De(t),s=e.r,a=e.s,u=r&1,l=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?s=this.curve.pointFromX(s.add(this.curve.n),u):s=this.curve.pointFromX(s,u);var c=e.r.invm(i),f=i.sub(o).mul(c).umod(i),d=a.mul(c).umod(i);return this.g.mulAdd(f,s,d)};sn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Xf(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var RM=Pa(function(t,e){var r=e;r.version="6.5.4",r.utils=Gr,r.rand=function(){throw new Error("unsupported")},r.curve=Eu,r.curves=Ru,r.ec=EM,r.eddsa=null}),xM=RM.ec;const AM="signing-key/5.7.0",Lm=new te(AM);let Vh=null;function Gn(){return Vh||(Vh=new xM("secp256k1")),Vh}class PM{constructor(e){Ye(this,"curve","secp256k1"),Ye(this,"privateKey",Be(e)),Yo(this.privateKey)!==32&&Lm.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Gn().keyFromPrivate(Fe(this.privateKey));Ye(this,"publicKey","0x"+r.getPublic(!1,"hex")),Ye(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Ye(this,"_isSigningKey",!0)}_addPoint(e){const r=Gn().keyFromPublic(Fe(this.publicKey)),n=Gn().keyFromPublic(Fe(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Gn().keyFromPrivate(Fe(this.privateKey)),n=Fe(e);n.length!==32&&Lm.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Kf({recoveryParam:i.recoveryParam,r:It("0x"+i.r.toString(16),32),s:It("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Gn().keyFromPrivate(Fe(this.privateKey)),n=Gn().keyFromPublic(Fe(ER(e)));return It("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function kM(t,e){const r=Kf(e),n={r:Fe(r.r),s:Fe(r.s)};return"0x"+Gn().recoverPubKey(Fe(t),n,r.recoveryParam).encode("hex",!1)}function ER(t,e){const r=Fe(t);if(r.length===32){const n=new PM(r);return e?"0x"+Gn().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?Be(r):"0x"+Gn().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Gn().keyFromPublic(r).getPublic(!0,"hex"):Be(r)}return Lm.throwArgumentError("invalid public or private key","key","[REDACTED]")}const TM="transactions/5.7.0",Ii=new te(TM);var g1;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(g1||(g1={}));function Sv(t){return t==="0x"?null:Nn(t)}function gr(t){return t==="0x"?XT:be.from(t)}function CM(t){const e=ER(t);return Nn(br(lr(br(e,1)),12))}function RR(t,e){return CM(kM(Fe(t),e))}function Ur(t,e){const r=la(be.from(t).toHexString());return r.length>32&&Ii.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Kh(t,e){return{address:Nn(t),storageKeys:(e||[]).map((r,n)=>(Yo(r)!==32&&Ii.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function ic(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Ii.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Kh(r[0],r[1])):Kh(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,o)=>(i[o]=!0,i),{});return Kh(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function xR(t){return ic(t).map(e=>[e.address,e.storageKeys])}function OM(t,e){if(t.gasPrice!=null){const n=be.from(t.gasPrice),i=be.from(t.maxFeePerGas||0);n.eq(i)||Ii.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[Ur(t.chainId||0,"chainId"),Ur(t.nonce||0,"nonce"),Ur(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ur(t.maxFeePerGas||0,"maxFeePerGas"),Ur(t.gasLimit||0,"gasLimit"),t.to!=null?Nn(t.to):"0x",Ur(t.value||0,"value"),t.data||"0x",xR(t.accessList||[])];if(e){const n=Kf(e);r.push(Ur(n.recoveryParam,"recoveryParam")),r.push(la(n.r)),r.push(la(n.s))}return qr(["0x02",Wf(r)])}function MM(t,e){const r=[Ur(t.chainId||0,"chainId"),Ur(t.nonce||0,"nonce"),Ur(t.gasPrice||0,"gasPrice"),Ur(t.gasLimit||0,"gasLimit"),t.to!=null?Nn(t.to):"0x",Ur(t.value||0,"value"),t.data||"0x",xR(t.accessList||[])];if(e){const n=Kf(e);r.push(Ur(n.recoveryParam,"recoveryParam")),r.push(la(n.r)),r.push(la(n.s))}return qr(["0x01",Wf(r)])}function AR(t,e,r){try{const n=gr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Ii.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=It(e[1],32),t.s=It(e[2],32);try{const n=lr(r(t));t.from=RR(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function NM(t){const e=mv(t.slice(1));e.length!==9&&e.length!==12&&Ii.throwArgumentError("invalid component count for transaction type: 2","payload",Be(t));const r=gr(e[2]),n=gr(e[3]),i={type:2,chainId:gr(e[0]).toNumber(),nonce:gr(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:gr(e[4]),to:Sv(e[5]),value:gr(e[6]),data:e[7],accessList:ic(e[8])};return e.length===9||(i.hash=lr(t),AR(i,e.slice(9),OM)),i}function DM(t){const e=mv(t.slice(1));e.length!==8&&e.length!==11&&Ii.throwArgumentError("invalid component count for transaction type: 1","payload",Be(t));const r={type:1,chainId:gr(e[0]).toNumber(),nonce:gr(e[1]).toNumber(),gasPrice:gr(e[2]),gasLimit:gr(e[3]),to:Sv(e[4]),value:gr(e[5]),data:e[6],accessList:ic(e[7])};return e.length===8||(r.hash=lr(t),AR(r,e.slice(8),MM)),r}function IM(t){const e=mv(t);e.length!==9&&e.length!==6&&Ii.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:gr(e[0]).toNumber(),gasPrice:gr(e[1]),gasLimit:gr(e[2]),to:Sv(e[3]),value:gr(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=be.from(e[6]).toNumber()}catch{return r}if(r.r=It(e[7],32),r.s=It(e[8],32),be.from(r.r).isZero()&&be.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(Be(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const o=lr(Wf(i));try{r.from=RR(o,{r:Be(r.r),s:Be(r.s),recoveryParam:n})}catch{}r.hash=lr(t)}return r.type=null,r}function LM(t){const e=Fe(t);if(e[0]>127)return IM(e);switch(e[0]){case 1:return DM(e);case 2:return NM(e)}return Ii.throwError(`unsupported transaction type: ${e[0]}`,te.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}class PR{constructor(e){Ye(this,"alphabet",e),Ye(this,"base",e.length),Ye(this,"_alphabetMap",{}),Ye(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=Fe(e);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let s=r[o];for(let a=0;a<n.length;++a)s+=n[a]<<8,n[a]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let s=0;s<r.length;++s)o+=r[s]*this.base,r[s]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return Fe(new Uint8Array(r.reverse()))}}new PR("abcdefghijklmnopqrstuvwxyz234567");const Bm=new PR("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),BM="sha2/5.7.0";new te(BM);function v1(t){return"0x"+Kn.sha256().update(Fe(t)).digest("hex")}const FM="networks/5.7.1",y1=new te(FM);function jM(t){return t&&typeof t.renetwork=="function"}function yi(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const o=["goerli","ropsten","rinkeby","sepolia"];try{const s=new r.PocketProvider(t,n.pocket);s.network&&o.indexOf(s.network.name)===-1&&i.push(s)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const o=["ropsten"],s=new r.AnkrProvider(t,n.ankr);s.network&&o.indexOf(s.network.name)===-1&&i.push(s)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let o=1;return n.quorum!=null?o=n.quorum:t==="homestead"&&(o=2),new r.FallbackProvider(i,o)}return i[0]};return e.renetwork=function(r){return yi(r)},e}function gf(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return gf(t,n)},r}const w1={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:yi("homestead")},_1={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:yi("ropsten")},b1={chainId:63,name:"classicMordor",_defaultProvider:gf("https://www.ethercluster.com/mordor","classicMordor")},Uc={unspecified:{chainId:0,name:"unspecified"},homestead:w1,mainnet:w1,morden:{chainId:2,name:"morden"},ropsten:_1,testnet:_1,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:yi("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:yi("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:yi("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:yi("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:gf("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:b1,classicTestnet:b1,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:gf("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:yi("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:yi("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function $M(t){if(t==null)return null;if(typeof t=="number"){for(const n in Uc){const i=Uc[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=Uc[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Uc[t.name];if(!e)return typeof t.chainId!="number"&&y1.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&y1.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(jM(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const UM="web/5.7.1";var qM=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};function zM(t,e){return qM(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const s=e.fetchOptions;s.mode&&(r.mode=s.mode),s.cache&&(r.cache=s.cache),s.credentials&&(r.credentials=s.credentials),s.redirect&&(r.redirect=s.redirect),s.referrer&&(r.referrer=s.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach((s,a)=>{o[a.toLowerCase()]=s}):n.headers.keys().forEach(s=>{o[s.toLowerCase()]=n.headers.get(s)}),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:Fe(new Uint8Array(i))}})}var HM=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const bn=new te(UM);function S1(t){return new Promise(e=>{setTimeout(e,t)})}function Hi(t,e){if(t==null)return null;if(typeof t=="string")return t;if(dv(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Gf(t)}catch{}return Be(t)}return t}function VM(t){return Ti(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function KM(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;bn.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,o=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;bn.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s=typeof t=="object"?!!t.errorPassThrough:!1,a={};let u=null;const l={method:"GET"};let c=!1,f=2*60*1e3;if(typeof t=="string")u=t;else if(typeof t=="object"){if((t==null||t.url==null)&&bn.throwArgumentError("missing URL","connection.url",t),u=t.url,typeof t.timeout=="number"&&t.timeout>0&&(f=t.timeout),t.headers)for(const m in t.headers)a[m.toLowerCase()]={key:m,value:String(t.headers[m])},["if-none-match","if-modified-since"].indexOf(m.toLowerCase())>=0&&(c=!0);if(l.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){u.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&bn.throwError("basic authentication requires a secure https url",te.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:t.user,password:"[REDACTED]"});const m=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+VE(Ti(m))}}t.skipFetchSetup!=null&&(l.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(l.fetchOptions=Cr(t.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),h=u?u.match(d):null;if(h)try{const m={statusCode:200,statusMessage:"OK",headers:{"content-type":h[1]||"text/plain"},body:h[2]?HE(h[3]):VM(h[3])};let v=m.body;return r&&(v=r(m.body,m)),Promise.resolve(v)}catch(m){bn.throwError("processing response error",te.errors.SERVER_ERROR,{body:Hi(h[1],h[2]),error:m,requestBody:null,requestMethod:"GET",url:u})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const p={};Object.keys(a).forEach(m=>{const v=a[m];p[v.key]=v.value}),l.headers=p;const g=function(){let m=null;return{promise:new Promise(function(b,R){f&&(m=setTimeout(()=>{m!=null&&(m=null,R(bn.makeError("timeout",te.errors.TIMEOUT,{requestBody:Hi(l.body,p["content-type"]),requestMethod:l.method,timeout:f,url:u})))},f))}),cancel:function(){m!=null&&(clearTimeout(m),m=null)}}}(),_=function(){return HM(this,void 0,void 0,function*(){for(let m=0;m<n;m++){let v=null;try{if(v=yield zM(u,l),m<n){if(v.statusCode===301||v.statusCode===302){const b=v.headers.location||"";if(l.method==="GET"&&b.match(/^https:/)){u=v.headers.location;continue}}else if(v.statusCode===429){let b=!0;if(i&&(b=yield i(m,u)),b){let R=0;const j=v.headers["retry-after"];typeof j=="string"&&j.match(/^[1-9][0-9]*$/)?R=parseInt(j)*1e3:R=o*parseInt(String(Math.random()*Math.pow(2,m))),yield S1(R);continue}}}}catch(b){v=b.response,v==null&&(g.cancel(),bn.throwError("missing response",te.errors.SERVER_ERROR,{requestBody:Hi(l.body,p["content-type"]),requestMethod:l.method,serverError:b,url:u}))}let S=v.body;if(c&&v.statusCode===304?S=null:!s&&(v.statusCode<200||v.statusCode>=300)&&(g.cancel(),bn.throwError("bad response",te.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:Hi(S,v.headers?v.headers["content-type"]:null),requestBody:Hi(l.body,p["content-type"]),requestMethod:l.method,url:u})),r)try{const b=yield r(S,v);return g.cancel(),b}catch(b){if(b.throttleRetry&&m<n){let R=!0;if(i&&(R=yield i(m,u)),R){const j=o*parseInt(String(Math.random()*Math.pow(2,m)));yield S1(j);continue}}g.cancel(),bn.throwError("processing response error",te.errors.SERVER_ERROR,{body:Hi(S,v.headers?v.headers["content-type"]:null),error:b,requestBody:Hi(l.body,p["content-type"]),requestMethod:l.method,url:u})}return g.cancel(),S}return bn.throwError("failed response",te.errors.SERVER_ERROR,{requestBody:Hi(l.body,p["content-type"]),requestMethod:l.method,url:u})})}();return Promise.race([g.promise,_])}function Ev(t,e,r){let n=(o,s)=>{let a=null;if(o!=null)try{a=JSON.parse(Gf(o))}catch(u){bn.throwError("invalid JSON",te.errors.SERVER_ERROR,{body:o,error:u})}return r&&(a=r(a,s)),a},i=null;if(e!=null){i=Ti(e);const o=typeof t=="string"?{url:t}:Cr(t);o.headers?Object.keys(o.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(o.headers=Cr(o.headers),o.headers["content-type"]="application/json"):o.headers={"content-type":"application/json"},t=o}return KM(t,i,n)}function sl(t,e){return e||(e={}),e=Cr(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,o=!1;const s=()=>o?!1:(o=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{s()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let u=0;function l(){return t().then(function(c){if(c!==void 0)s()&&r(c);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!o){if(u++,u>a){s()&&n(new Error("retry limit reached"));return}let f=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));f<e.floor&&(f=e.floor),f>e.ceiling&&(f=e.ceiling),setTimeout(l,f)}return null},function(c){s()&&n(c)})}l()})}var vf="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Fm={};for(var qc=0;qc<vf.length;qc++){var Wh=vf.charAt(qc);if(Fm[Wh]!==void 0)throw new TypeError(Wh+" is ambiguous");Fm[Wh]=qc}function Zs(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function kR(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Zs(e)^n>>5}for(e=Zs(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Zs(e)^i&31}return e}function WM(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=kR(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",o=0;o<e.length;++o){var s=e[o];if(s>>5)throw new Error("Non 5-bit word");n=Zs(n)^s,i+=vf.charAt(s)}for(o=0;o<6;++o)n=Zs(n);for(n^=1,o=0;o<6;++o){var a=n>>(5-o)*5&31;i+=vf.charAt(a)}return i}function TR(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)return"Data too short";var a=kR(o);if(typeof a=="string")return a;for(var u=[],l=0;l<s.length;++l){var c=s.charAt(l),f=Fm[c];if(f===void 0)return"Unknown character "+c;a=Zs(a)^f,!(l+6>=s.length)&&u.push(f)}return a!==1?"Invalid checksum for "+t:{prefix:o,words:u}}function GM(){var t=TR.apply(null,arguments);if(typeof t=="object")return t}function QM(t){var e=TR.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Zf(t,e,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],u=0;u<t.length;++u)for(i=i<<e|t[u],o+=e;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=e)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function JM(t){var e=Zf(t,8,5,!0);if(Array.isArray(e))return e}function YM(t){var e=Zf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function XM(t){var e=Zf(t,5,8,!1);if(Array.isArray(e))return e}function ZM(t){var e=Zf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var E1={decodeUnsafe:GM,decode:QM,encode:WM,toWordsUnsafe:JM,toWords:YM,fromWordsUnsafe:XM,fromWords:ZM};const ed="providers/5.7.2",Ha=new te(ed);class Ee{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),o=this.data.bind(this),s=this.hash.bind(this),a=this.hex.bind(this),u=this.number.bind(this),l=this.type.bind(this),c=f=>this.data(f,!0);return e.transaction={hash:s,type:l,accessList:Ee.allowNull(this.accessList.bind(this),null),blockHash:Ee.allowNull(s,null),blockNumber:Ee.allowNull(u,null),transactionIndex:Ee.allowNull(u,null),confirmations:Ee.allowNull(u,null),from:r,gasPrice:Ee.allowNull(n),maxPriorityFeePerGas:Ee.allowNull(n),maxFeePerGas:Ee.allowNull(n),gasLimit:n,to:Ee.allowNull(r,null),value:n,nonce:u,data:o,r:Ee.allowNull(this.uint256),s:Ee.allowNull(this.uint256),v:Ee.allowNull(u),creates:Ee.allowNull(r,null),raw:Ee.allowNull(o)},e.transactionRequest={from:Ee.allowNull(r),nonce:Ee.allowNull(u),gasLimit:Ee.allowNull(n),gasPrice:Ee.allowNull(n),maxPriorityFeePerGas:Ee.allowNull(n),maxFeePerGas:Ee.allowNull(n),to:Ee.allowNull(r),value:Ee.allowNull(n),data:Ee.allowNull(c),type:Ee.allowNull(u),accessList:Ee.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:u,blockNumber:u,transactionHash:s,address:r,topics:Ee.arrayOf(s),data:o,logIndex:u,blockHash:s},e.receipt={to:Ee.allowNull(this.address,null),from:Ee.allowNull(this.address,null),contractAddress:Ee.allowNull(r,null),transactionIndex:u,root:Ee.allowNull(a),gasUsed:n,logsBloom:Ee.allowNull(o),blockHash:s,transactionHash:s,logs:Ee.arrayOf(this.receiptLog.bind(this)),blockNumber:u,confirmations:Ee.allowNull(u,null),cumulativeGasUsed:n,effectiveGasPrice:Ee.allowNull(n),status:Ee.allowNull(u),type:l},e.block={hash:Ee.allowNull(s),parentHash:s,number:u,timestamp:u,nonce:Ee.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Ee.allowNull(r),extraData:o,transactions:Ee.allowNull(Ee.arrayOf(s)),baseFeePerGas:Ee.allowNull(n)},e.blockWithTransactions=Cr(e.block),e.blockWithTransactions.transactions=Ee.allowNull(Ee.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Ee.allowNull(i,void 0),toBlock:Ee.allowNull(i,void 0),blockHash:Ee.allowNull(s,void 0),address:Ee.allowNull(r,void 0),topics:Ee.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Ee.allowNull(u),blockHash:Ee.allowNull(s),transactionIndex:u,removed:Ee.allowNull(this.boolean.bind(this)),address:r,data:Ee.allowFalsish(o,"0x"),topics:Ee.arrayOf(s),transactionHash:s,logIndex:u},e}accessList(e){return ic(e||[])}number(e){return e==="0x"?0:be.from(e).toNumber()}type(e){return e==="0x"||e==null?0:be.from(e).toNumber()}bigNumber(e){return be.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),gt(e))?e.toLowerCase():Ha.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Nn(e)}callAddress(e){if(!gt(e,32))return null;const r=Nn(br(e,12));return r===YT?null:r}contractAddress(e){return JT(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||gt(e))return hv(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Yo(n)!==32?Ha.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=be.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!gt(e))throw new Error("invalid uint256");return It(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Ee.check(r,e);return i._difficulty=n==null?null:be.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Ee.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&be.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=Ee.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;gt(n)&&(n=be.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),gt(n)&&(n=be.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return LM(e)}receiptLog(e){return Ee.check(this.formats.receiptLog,e)}receipt(e){const r=Ee.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=be.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Ha.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Ha.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Ha.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return Ee.check(this.formats.filter,e)}filterLog(e){return Ee.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const o=e[i](r[i]);o!==void 0&&(n[i]=o)}catch(o){throw o.checkKey=i,o.checkValue=r[i],o}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}var Ne=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const $e=new te(ed),eN=10;function R1(t){return t==null?"null":(Yo(t)!==32&&$e.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function x1(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[R1(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return R1(e)}).join("&")}function tN(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function cs(t){if(typeof t=="string"){if(t=t.toLowerCase(),Yo(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+x1(t);if($C.isForkEvent(t))throw $e.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+x1(t.topics||[])}throw new Error("invalid event - "+t)}function Va(){return new Date().getTime()}function A1(t){return new Promise(e=>{setTimeout(e,t)})}const rN=["block","network","pending","poll"];let nN=class{constructor(e,r,n){Ye(this,"tag",e),Ye(this,"listener",r),Ye(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=tN(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||rN.indexOf(this.tag)>=0}};const iN={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Gh(t){return It(be.from(t).toHexString(),32)}function P1(t){return Bm.encode($o([t,br(v1(v1(t)),0,4)]))}const CR=new RegExp("^(ipfs)://(.*)$","i"),k1=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),CR,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function xu(t,e){try{return Gf(Wl(t,e))}catch{}return null}function Wl(t,e){if(t==="0x")return null;const r=be.from(br(t,e,e+32)).toNumber(),n=be.from(br(t,r,r+32)).toNumber();return br(t,r+32,r+32+n)}function Qh(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):$e.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function T1(t){const e=Fe(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function oN(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function OR(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=Fe(t[n]);e[n]=T1(r),e.push(T1(i.length)),e.push(oN(i)),r+=32+Math.ceil(i.length/32)*32}return qr(e)}class C1{constructor(e,r,n,i){Ye(this,"provider",e),Ye(this,"name",n),Ye(this,"address",e.formatter.address(r)),Ye(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>be.from(e).eq(1)).catch(e=>{if(e.code===te.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return Ne(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:qr([e,Su(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=qr(["0x9061b923",OR([TC(this.name),n.data])]));try{let o=yield this.provider.call(n);return Fe(o).length%32===4&&$e.throwError("resolver threw error",te.errors.CALL_EXCEPTION,{transaction:n,data:o}),i&&(o=Wl(o,0)),o}catch(o){if(o.code===te.errors.CALL_EXCEPTION)return null;throw o}})}_fetchBytes(e,r){return Ne(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Wl(n,0):null})}_getAddress(e,r){const n=iN[String(e)];if(n==null&&$e.throwError(`unsupported coin type: ${e}`,te.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=Fe(r);if(n.p2pkh!=null){const o=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(o){const s=parseInt(o[1],16);if(o[2].length===s*2&&s>=1&&s<=75)return P1($o([[n.p2pkh],"0x"+o[2]]))}}if(n.p2sh!=null){const o=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(o){const s=parseInt(o[1],16);if(o[2].length===s*2&&s>=1&&s<=75)return P1($o([[n.p2sh],"0x"+o[2]]))}}if(n.prefix!=null){const o=i[1];let s=i[0];if(s===0?o!==20&&o!==32&&(s=-1):s=-1,s>=0&&i.length===2+o&&o>=1&&o<=75){const a=E1.toWords(i.slice(2));return a.unshift(s),E1.encode(n.prefix,a)}}return null}getAddress(e){return Ne(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===ZT?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===te.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",Gh(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&$e.throwError("invalid or unsupported coin data",te.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Ne(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<k1.length;n++){const i=r.match(k1[n]);if(i==null)continue;const o=i[1].toLowerCase();switch(o){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:Qh(r)};case"erc721":case"erc1155":{const s=o==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:o,content:r});const a=this._resolvedAddress||(yield this.getAddress()),u=(i[2]||"").split("/");if(u.length!==2)return null;const l=yield this.provider.formatter.address(u[0]),c=It(be.from(u[1]).toHexString(),32);if(o==="erc721"){const g=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:qr(["0x6352211e",c])}));if(a!==g)return null;e.push({type:"owner",content:g})}else if(o==="erc1155"){const g=be.from(yield this.provider.call({to:l,data:qr(["0x00fdd58e",It(a,32),c])}));if(g.isZero())return null;e.push({type:"balance",content:g.toString()})}const f={to:this.provider.formatter.address(u[0]),data:qr([s,c])};let d=xu(yield this.provider.call(f),0);if(d==null)return null;e.push({type:"metadata-url-base",content:d}),o==="erc1155"&&(d=d.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=Qh(d)),e.push({type:"metadata-url",content:d});const h=yield Ev(d);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return null;if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(CR)==null)return null;e.push({type:"url-ipfs",content:p}),p=Qh(p)}return e.push({type:"url",content:p}),{linkage:e,url:p}}}}}catch{}return null})}getContentHash(){return Ne(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const s=parseInt(r[3],16);if(r[4].length===s*2)return"ipfs://"+Bm.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=parseInt(n[3],16);if(n[4].length===s*2)return"ipns://"+Bm.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const o=e.match(/^0x90b2c605([0-9a-f]*)$/);if(o&&o[1].length===34*2){const s={"=":"","+":"-","/":"_"};return"sia://"+VE("0x"+o[1]).replace(/[=+\/]/g,u=>s[u])}return $e.throwError("invalid or unsupported content hash data",te.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Ne(this,void 0,void 0,function*(){let r=Ti(e);r=$o([Gh(64),Gh(r.length),r]),r.length%32!==0&&(r=$o([r,It("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",Be(r));return n==null||n==="0x"?null:Gf(n)})}}let Jh=null,sN=1;class aN extends vv{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ye(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=ol(new.target,"getNetwork")(e);r?(Ye(this,"_network",r),this.emit("network",r,null)):$e.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Ne(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||$e.throwError("no network detected",te.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ye(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return sl(()=>this._ready().then(e=>e,e=>{if(!(e.code===te.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Jh==null&&(Jh=new Ee),Jh}static getNetwork(e){return $M(e??"homestead")}ccipReadFetch(e,r,n){return Ne(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),o=r.toLowerCase(),s=[];for(let a=0;a<n.length;a++){const u=n[a],l=u.replace("{sender}",i).replace("{data}",o),c=u.indexOf("{data}")>=0?null:JSON.stringify({data:o,sender:i}),f=yield Ev({url:l,errorPassThrough:!0},c,(h,p)=>(h.status=p.statusCode,h));if(f.data)return f.data;const d=f.message||"unknown error";if(f.status>=400&&f.status<500)return $e.throwError(`response not found during CCIP fetch: ${d}`,te.errors.SERVER_ERROR,{url:u,errorMessage:d});s.push(d)}return $e.throwError(`error encountered during CCIP fetch: ${s.map(a=>JSON.stringify(a)).join(", ")}`,te.errors.SERVER_ERROR,{urls:n,errorMessages:s})})}_getInternalBlockNumber(e){return Ne(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const o=yield i;if(Va()-o.respTime<=e)return o.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Va(),n=sr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:o})=>{if(o)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),o;const s=Va();return i=be.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:s}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Ne(this,void 0,void 0,function*(){const e=sN++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)$e.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",$e.makeError("network block skew detected",te.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const o=this._emitted[i];o!=="pending"&&n-o>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const o=i.hash;let s=this.getTransactionReceipt(o).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+o]=a.blockNumber,this.emit(o,a)),null)).catch(a=>{this.emit("error",a)});r.push(s);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const o=i.filter;o.fromBlock=i._lastBlockNumber+1,o.toBlock=n;const s=o.toBlock-this._maxFilterBlockRange;s>o.fromBlock&&(o.fromBlock=s),o.fromBlock<0&&(o.fromBlock=0);const a=this.getLogs(o).then(u=>{i._inflight=!1,u.length!==0&&u.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(o,l)})}).catch(u=>{this.emit("error",u),i._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Ne(this,void 0,void 0,function*(){return $e.throwError("provider does not support network detection",te.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Ne(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield A1(0),this._network;const n=$e.makeError("underlying network changed",te.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Va();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Va(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Ne(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return Ne(this,void 0,void 0,function*(){const o=yield this.getTransactionReceipt(e);return(o?o.confirmations:0)>=r?o:new Promise((s,a)=>{const u=[];let l=!1;const c=function(){return l?!0:(l=!0,u.forEach(d=>{d()}),!1)},f=d=>{d.confirmations<r||c()||s(d)};if(this.on(e,f),u.push(()=>{this.removeListener(e,f)}),i){let d=i.startBlock,h=null;const p=g=>Ne(this,void 0,void 0,function*(){l||(yield A1(1e3),this.getTransactionCount(i.from).then(_=>Ne(this,void 0,void 0,function*(){if(!l){if(_<=i.nonce)d=g;else{{const m=yield this.getTransaction(e);if(m&&m.blockNumber!=null)return}for(h==null&&(h=d-3,h<i.startBlock&&(h=i.startBlock));h<=g;){if(l)return;const m=yield this.getBlockWithTransactions(h);for(let v=0;v<m.transactions.length;v++){const S=m.transactions[v];if(S.hash===e)return;if(S.from===i.from&&S.nonce===i.nonce){if(l)return;const b=yield this.waitForTransaction(S.hash,r);if(c())return;let R="replaced";S.data===i.data&&S.to===i.to&&S.value.eq(i.value)?R="repriced":S.data==="0x"&&S.from===S.to&&S.value.isZero()&&(R="cancelled"),a($e.makeError("transaction was replaced",te.errors.TRANSACTION_REPLACED,{cancelled:R==="replaced"||R==="cancelled",reason:R,replacement:this._wrapTransaction(S),hash:e,receipt:b}));return}}h++}}l||this.once("block",p)}}),_=>{l||this.once("block",p)}))});if(l)return;this.once("block",p),u.push(()=>{this.removeListener("block",p)})}if(typeof n=="number"&&n>0){const d=setTimeout(()=>{c()||a($e.makeError("timeout exceeded",te.errors.TIMEOUT,{timeout:n}))},n);d.unref&&d.unref(),u.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return Ne(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return be.from(e)}catch(r){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return be.from(i)}catch(o){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:o})}})}getTransactionCount(e,r){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return be.from(i).toNumber()}catch(o){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:o})}})}getCode(e,r){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return Be(i)}catch(o){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:o})}})}getStorageAt(e,r,n){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield sr({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(s=>hv(s))}),o=yield this.perform("getStorageAt",i);try{return Be(o)}catch(s){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:o,error:s})}})}_wrapTransaction(e,r,n){if(r!=null&&Yo(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&$e.throwError("Transaction hash mismatch from Provider.sendTransaction.",te.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(o,s)=>Ne(this,void 0,void 0,function*(){o==null&&(o=1),s==null&&(s=0);let a;o!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const u=yield this._waitForTransaction(e.hash,o,s,a);return u==null&&o===0?null:(this._emitted["t:"+e.hash]=u.blockNumber,u.status===0&&$e.throwError("transaction failed",te.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:u}),u)}),i}sendTransaction(e){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(o=>Be(o)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const o=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,o,i)}catch(o){throw o.transaction=n,o.transactionHash=n.hash,o}})}_getTransactionRequest(e){return Ne(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o?this._getAddress(o):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o?be.from(o):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(o=>o?Be(o):null))}),this.formatter.transactionRequest(yield sr(n))})}_getFilter(e){return Ne(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield sr(r))})}_call(e,r,n){return Ne(this,void 0,void 0,function*(){n>=eN&&$e.throwError("CCIP read exceeded maximum redirections",te.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,o=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&o.substring(0,10)==="0x556f1830"&&Yo(o)%32===4)try{const s=br(o,4),a=br(s,0,32);be.from(a).eq(i)||$e.throwError("CCIP Read sender did not match",te.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});const u=[],l=be.from(br(s,32,64)).toNumber(),c=be.from(br(s,l,l+32)).toNumber(),f=br(s,l+32);for(let m=0;m<c;m++){const v=xu(f,m*32);v==null&&$e.throwError("CCIP Read contained corrupt URL string",te.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),u.push(v)}const d=Wl(s,64);be.from(br(s,100,128)).isZero()||$e.throwError("CCIP Read callback selector included junk",te.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});const h=br(s,96,100),p=Wl(s,128),g=yield this.ccipReadFetch(e,d,u);g==null&&$e.throwError("CCIP Read disabled or provided no URLs",te.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});const _={to:i,data:qr([h,OR([g,p])])};return this._call(_,r,n+1)}catch(s){if(s.code===te.errors.SERVER_ERROR)throw s}try{return Be(o)}catch(s){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:o,error:s})}})}call(e,r){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield sr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield sr({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return be.from(n)}catch(i){return $e.throwError("bad result from backend",te.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return Ne(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&$e.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&$e.throwError("ENS name not configured",te.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Ne(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(gt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),gt(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{$e.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return sl(()=>Ne(this,void 0,void 0,function*(){const o=yield this.perform("getBlock",i);if(o==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let s=null;for(let u=0;u<o.transactions.length;u++){const l=o.transactions[u];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){s==null&&(s=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=s-l.blockNumber+1;c<=0&&(c=1),l.confirmations=c}}const a=this.formatter.blockWithTransactions(o);return a.transactions=a.transactions.map(u=>this._wrapTransaction(u)),a}return this.formatter.block(o)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Ne(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return sl(()=>Ne(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;s<=0&&(s=1),i.confirmations=s}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Ne(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return sl(()=>Ne(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;s<=0&&(s=1),i.confirmations=s}return i}),{oncePoll:this})})}getLogs(e){return Ne(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield sr({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Ee.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Ne(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Ne(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&$e.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Ne(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new C1(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return Ne(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||$e.throwError("network does not support ENS",te.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Su(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return Ne(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(gt(e))throw n}typeof e!="string"&&$e.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Ne(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=xu(yield this.call({to:n,data:"0x691f3431"+Su(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return Ne(this,void 0,void 0,function*(){let r=null;if(gt(e)){const o=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",s=yield this._getResolver(o,"getAvatar");if(!s)return null;r=new C1(this,s,o);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==te.errors.CALL_EXCEPTION)throw a}try{const a=xu(yield this.call({to:s,data:"0x691f3431"+Su(o).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==te.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return $e.throwError(e+" not implemented",te.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new nN(cs(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],o=cs(e);return this._events=this._events.filter(s=>s.tag!==o?!0:(setTimeout(()=>{s.listener.apply(this,r)},0),n=!0,s.once?(i.push(s),!1):!0)),i.forEach(s=>{this._stopEvent(s)}),n}listenerCount(e){if(!e)return this._events.length;let r=cs(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=cs(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,o=cs(e);return this._events=this._events.filter(s=>s.tag!==o||s.listener!=r||i?!0:(i=!0,n.push(s),!1)),n.forEach(s=>{this._stopEvent(s)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=cs(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var gi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})};const jt=new te(ed),lN=["call","estimateGas"];function _l(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=gt(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=_l(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return _l(JSON.parse(t),e)}catch{}return null}function MR(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const o=_l(e,!0);if(o)return o.data;jt.throwError("missing revert data in call exception; Transaction reverted without a reason string",te.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let o=_l(e.body,!1);o==null&&(o=_l(e,!1)),o&&jt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",te.errors.UNPREDICTABLE_GAS_LIMIT,{reason:o.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===te.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&jt.throwError("insufficient funds for intrinsic transaction cost",te.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&jt.throwError("nonce has already been used",te.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&jt.throwError("replacement fee too low",te.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&jt.throwError("legacy pre-eip-155 transactions not supported",te.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),lN.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&jt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",te.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function O1(t){return new Promise(function(e){setTimeout(e,t)})}function cN(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Ka(t){return t&&t.toLowerCase()}const jm={};class NR extends yv{constructor(e,r,n){if(super(),e!==jm)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ye(this,"provider",r),n==null&&(n=0),typeof n=="string"?(Ye(this,"_address",this.provider.formatter.address(n)),Ye(this,"_index",null)):typeof n=="number"?(Ye(this,"_index",n),Ye(this,"_address",null)):jt.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return jt.throwError("cannot alter JSON-RPC Signer connection",te.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new uN(jm,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&jt.throwError("unknown account #"+this._index,te.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Cr(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Cr(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>gi(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&jt.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),sr({tx:sr(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&jt.throwArgumentError("from address mismatch","transaction",e):n.from=i;const o=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[o]).then(s=>s,s=>(typeof s.message=="string"&&s.message.match(/user denied/i)&&jt.throwError("user rejected transaction",te.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),MR("sendTransaction",s,o)))})}signTransaction(e){return jt.throwError("signing transactions is unsupported",te.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return gi(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield sl(()=>gi(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return gi(this,void 0,void 0,function*(){const r=typeof e=="string"?Ti(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Be(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jt.throwError("user rejected signing",te.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return gi(this,void 0,void 0,function*(){const r=typeof e=="string"?Ti(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),Be(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jt.throwError("user rejected signing",te.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return gi(this,void 0,void 0,function*(){const i=yield Fr.resolveNames(e,r,n,s=>this.provider.resolveName(s)),o=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(Fr.getPayload(i.domain,r,i.value))])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&jt.throwError("user rejected signing",te.errors.ACTION_REJECTED,{action:"_signTypedData",from:o,messageData:{domain:i.domain,types:r,value:i.value}}),s}})}unlock(e){return gi(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class uN extends NR{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const fN={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class dN extends aN{constructor(e,r){let n=r;n==null&&(n=new Promise((i,o)=>{setTimeout(()=>{this.detectNetwork().then(s=>{i(s)},s=>{o(s)})},0)})),super(n),e||(e=ol(this.constructor,"defaultUrl")()),typeof e=="string"?Ye(this,"connection",Object.freeze({url:e})):Ye(this,"connection",Object.freeze(Cr(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return gi(this,void 0,void 0,function*(){yield O1(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=ol(this.constructor,"getNetwork");try{return r(be.from(e).toNumber())}catch(n){return jt.throwError("could not detect network",te.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return jt.throwError("could not detect network",te.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new NR(jm,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Xo(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const o=Ev(this.connection,JSON.stringify(n),cN).then(s=>(this.emit("debug",{action:"response",request:n,response:s,provider:this}),s),s=>{throw this.emit("debug",{action:"response",error:s,request:n,provider:this}),s});return i&&(this._cache[e]=o,setTimeout(()=>{this._cache[e]=null},0)),o}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Ka(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Ka(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Ka(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Ka(r.address),It(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[ol(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[ol(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Ka(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return gi(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&be.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const o=yield this.getFeeData();o.maxFeePerGas==null&&o.maxPriorityFeePerGas==null&&(r=Cr(r),r.transaction=Cr(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&jt.throwError(e+" not implemented",te.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return MR(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(o){if(e._pendingFilter!=r)return null;let s=Promise.resolve();return o.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",s=s.then(function(){return e.getTransaction(a).then(function(u){return e.emit("pending",u),null})})}),s.then(function(){return O1(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(o=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Cr(fN);if(r)for(const o in r)r[o]&&(n[o]=!0);jT(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(o){if(e[o]==null)return;const s=hv(be.from(e[o]));o==="gasLimit"&&(o="gas"),i[o]=s}),["from","to","data"].forEach(function(o){e[o]!=null&&(i[o]=Be(e[o]))}),e.accessList&&(i.accessList=ic(e.accessList)),i}}const M1=new te(ed);let hN=1;function N1(t,e){const r="Web3LegacyFetcher";return function(n,i){const o={method:n,params:i,id:hN++,jsonrpc:"2.0"};return new Promise((s,a)=>{this.emit("debug",{action:"request",fetcher:r,request:Xo(o),provider:this}),e(o,(u,l)=>{if(u)return this.emit("debug",{action:"response",fetcher:r,error:u,request:o,provider:this}),a(u);if(this.emit("debug",{action:"response",fetcher:r,request:o,response:l,provider:this}),l.error){const c=new Error(l.error.message);return c.code=l.error.code,c.data=l.error.data,a(c)}s(l.result)})})}}function pN(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Xo(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class mN extends dN{constructor(e,r){e==null&&M1.throwArgumentError("missing provider","provider",e);let n=null,i=null,o=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),o=e,e.request?(n===""&&(n="eip-1193:"),i=pN(e)):e.sendAsync?i=N1(e,e.sendAsync.bind(e)):e.send?i=N1(e,e.send.bind(e)):M1.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),Ye(this,"jsonRpcFetchFunc",i),Ye(this,"provider",o)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const gN="units/5.7.0";new te(gN);const vN=["wei","kwei","mwei","gwei","szabo","finney","ether"];function yN(t,e){if(typeof e=="string"){const r=vN.indexOf(e);r!==-1&&(e=3*r)}return bu(t,e??18)}function wN(t){return yN(t,18)}function _N(){const t=fv(),e=()=>{t("/join")},r=()=>{t("/create")},[n,i]=ge.useState(null),[o,s]=ge.useState(null),[a,u]=ge.useState(null),[l,c]=ge.useState("Connect Wallet"),[f,d]=ge.useState(null),h=()=>{window.ethereum&&o==null?(d(new mN(window.ethereum)),window.ethereum.request({method:"eth_requestAccounts"}).then(p=>{c("Wallet Connected"),s(p[0]),localStorage.setItem("defaultAccount",JSON.stringify(p[0])),localStorage.setItem("userBalance",JSON.stringify(p[0]))}).catch(p=>{i(p.message)})):window.ethereum||(console.log("Need to install MetaMask"),i("Please install MetaMask browser extension to interact"))};return ge.useEffect(()=>{o&&f.getBalance(o).then(p=>{u(wN(p))})},[o]),vt("div",{children:[vt("div",{className:"card card-compact w-96 bg-base-100 shadow-xl",children:[_e("figure",{children:_e("img",{src:"/connectwallet.png",alt:"Connect Wallet"})}),vt("div",{className:"card-body",children:[vt("h2",{className:"card-title",children:["defaultAccount : ",o]}),vt("h2",{className:"card-title",children:["userBalance : ",a]}),_e("h2",{className:"card-title",children:n}),_e("div",{className:"card-actions justify-end",children:_e("button",{className:"btn btn-primary",onClick:h,children:l})})]})]}),_e("button",{className:"btn btn-active landinpagebutton",onClick:e,children:"Join Meeting"}),_e("button",{className:"btn btn-outline btn-primary landinpagebutton",onClick:r,children:"Create Meeting"})]})}let zc;const bN=new Uint8Array(16);function SN(){if(!zc&&(zc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zc(bN)}const rr=[];for(let t=0;t<256;++t)rr.push((t+256).toString(16).slice(1));function EN(t,e=0){return(rr[t[e+0]]+rr[t[e+1]]+rr[t[e+2]]+rr[t[e+3]]+"-"+rr[t[e+4]]+rr[t[e+5]]+"-"+rr[t[e+6]]+rr[t[e+7]]+"-"+rr[t[e+8]]+rr[t[e+9]]+"-"+rr[t[e+10]]+rr[t[e+11]]+rr[t[e+12]]+rr[t[e+13]]+rr[t[e+14]]+rr[t[e+15]]).toLowerCase()}const RN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D1={randomUUID:RN};function xN(t,e,r){if(D1.randomUUID&&!e&&!t)return D1.randomUUID();t=t||{};const n=t.random||(t.rng||SN)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return EN(n)}function AN(){const t=fv(),e=()=>{t(`/meeting/${xN()}`)};return vt("div",{children:[_e(CE,{}),vt("div",{className:"flex flex-col items-center justify-center h-screen",children:[_e("h1",{className:"text-3xl",children:"Create a Meeting"}),_e("button",{onClick:e,className:"bg-purple-600 text-white p-3 rounded mt-5",children:"Create"}),vt("div",{className:"flex flex-col items-center justify-center h-screen",children:[_e("h1",{className:"text-3xl",children:"Join a Meeting"}),_e("input",{type:"text",placeholder:"Enter Meeting ID",className:"border-2 border-purple-600 p-2 rounded mt-5"}),_e("button",{onClick:e,className:"bg-purple-600 text-white p-3 rounded mt-5",children:"Join"})]})]})]})}function I1(){const t=fv();return _e("div",{children:_e("button",{className:"btn btn-accent",onClick:()=>{t("/meeting/1")},children:"Create a new Meeting & Join"})})}var L1=globalThis&&globalThis.__assign||function(){return L1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L1.apply(this,arguments)},B1=globalThis&&globalThis.__assign||function(){return B1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},B1.apply(this,arguments)},F1=globalThis&&globalThis.__assign||function(){return F1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},F1.apply(this,arguments)},j1=globalThis&&globalThis.__assign||function(){return j1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},j1.apply(this,arguments)},$1=globalThis&&globalThis.__assign||function(){return $1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$1.apply(this,arguments)},U1=globalThis&&globalThis.__assign||function(){return U1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},U1.apply(this,arguments)},q1=globalThis&&globalThis.__assign||function(){return q1=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},q1.apply(this,arguments)},yf={},PN={get exports(){return yf},set exports(t){yf=t}},ut={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=Symbol.for("react.element"),xv=Symbol.for("react.portal"),td=Symbol.for("react.fragment"),rd=Symbol.for("react.strict_mode"),nd=Symbol.for("react.profiler"),id=Symbol.for("react.provider"),od=Symbol.for("react.context"),kN=Symbol.for("react.server_context"),sd=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),ld=Symbol.for("react.suspense_list"),cd=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),TN=Symbol.for("react.offscreen"),DR;DR=Symbol.for("react.module.reference");function un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rv:switch(t=t.type,t){case td:case nd:case rd:case ad:case ld:return t;default:switch(t=t&&t.$$typeof,t){case kN:case od:case sd:case ud:case cd:case id:return t;default:return e}}case xv:return e}}}ut.ContextConsumer=od;ut.ContextProvider=id;ut.Element=Rv;ut.ForwardRef=sd;ut.Fragment=td;ut.Lazy=ud;ut.Memo=cd;ut.Portal=xv;ut.Profiler=nd;ut.StrictMode=rd;ut.Suspense=ad;ut.SuspenseList=ld;ut.isAsyncMode=function(){return!1};ut.isConcurrentMode=function(){return!1};ut.isContextConsumer=function(t){return un(t)===od};ut.isContextProvider=function(t){return un(t)===id};ut.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rv};ut.isForwardRef=function(t){return un(t)===sd};ut.isFragment=function(t){return un(t)===td};ut.isLazy=function(t){return un(t)===ud};ut.isMemo=function(t){return un(t)===cd};ut.isPortal=function(t){return un(t)===xv};ut.isProfiler=function(t){return un(t)===nd};ut.isStrictMode=function(t){return un(t)===rd};ut.isSuspense=function(t){return un(t)===ad};ut.isSuspenseList=function(t){return un(t)===ld};ut.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===td||t===nd||t===rd||t===ad||t===ld||t===TN||typeof t=="object"&&t!==null&&(t.$$typeof===ud||t.$$typeof===cd||t.$$typeof===id||t.$$typeof===od||t.$$typeof===sd||t.$$typeof===DR||t.getModuleId!==void 0)};ut.typeOf=un;(function(t){t.exports=ut})(PN);function CN(t){function e(w,T,H,A,k){for(var q=0,z=0,V=0,W=0,J,Y,pe=0,ie=0,le,Ie=le=J=0,ve=0,Q=0,ee=0,ne=0,ce=H.length,se=ce-1,ye,ae="",K="",X="",Z="",ue;ve<ce;){if(Y=H.charCodeAt(ve),ve===se&&z+W+V+q!==0&&(z!==0&&(Y=z===47?10:47),W=V=q=0,ce++,se++),z+W+V+q===0){if(ve===se&&(0<Q&&(ae=ae.replace(d,"")),0<ae.trim().length)){switch(Y){case 32:case 9:case 59:case 13:case 10:break;default:ae+=H.charAt(ve)}Y=59}switch(Y){case 123:for(ae=ae.trim(),J=ae.charCodeAt(0),le=1,ne=++ve;ve<ce;){switch(Y=H.charCodeAt(ve)){case 123:le++;break;case 125:le--;break;case 47:switch(Y=H.charCodeAt(ve+1)){case 42:case 47:e:{for(Ie=ve+1;Ie<se;++Ie)switch(H.charCodeAt(Ie)){case 47:if(Y===42&&H.charCodeAt(Ie-1)===42&&ve+2!==Ie){ve=Ie+1;break e}break;case 10:if(Y===47){ve=Ie+1;break e}}ve=Ie}}break;case 91:Y++;case 40:Y++;case 34:case 39:for(;ve++<se&&H.charCodeAt(ve)!==Y;);}if(le===0)break;ve++}switch(le=H.substring(ne,ve),J===0&&(J=(ae=ae.replace(f,"").trim()).charCodeAt(0)),J){case 64:switch(0<Q&&(ae=ae.replace(d,"")),Y=ae.charCodeAt(1),Y){case 100:case 109:case 115:case 45:Q=T;break;default:Q=C}if(le=e(T,Q,le,Y,k+1),ne=le.length,0<L&&(Q=r(C,ae,ee),ue=a(3,le,Q,T,P,$,ne,Y,k,A),ae=Q.join(""),ue!==void 0&&(ne=(le=ue.trim()).length)===0&&(Y=0,le="")),0<ne)switch(Y){case 115:ae=ae.replace(j,s);case 100:case 109:case 45:le=ae+"{"+le+"}";break;case 107:ae=ae.replace(v,"$1 $2"),le=ae+"{"+le+"}",le=E===1||E===2&&o("@"+le,3)?"@-webkit-"+le+"@"+le:"@"+le;break;default:le=ae+le,A===112&&(le=(K+=le,""))}else le="";break;default:le=e(T,r(T,ae,ee),le,A,k+1)}X+=le,le=ee=Q=Ie=J=0,ae="",Y=H.charCodeAt(++ve);break;case 125:case 59:if(ae=(0<Q?ae.replace(d,""):ae).trim(),1<(ne=ae.length))switch(Ie===0&&(J=ae.charCodeAt(0),J===45||96<J&&123>J)&&(ne=(ae=ae.replace(" ",":")).length),0<L&&(ue=a(1,ae,T,w,P,$,K.length,A,k,A))!==void 0&&(ne=(ae=ue.trim()).length)===0&&(ae="\0\0"),J=ae.charCodeAt(0),Y=ae.charCodeAt(1),J){case 0:break;case 64:if(Y===105||Y===99){Z+=ae+H.charAt(ve);break}default:ae.charCodeAt(ne-1)!==58&&(K+=i(ae,J,Y,ae.charCodeAt(2)))}ee=Q=Ie=J=0,ae="",Y=H.charCodeAt(++ve)}}switch(Y){case 13:case 10:z===47?z=0:1+J===0&&A!==107&&0<ae.length&&(Q=1,ae+="\0"),0<L*I&&a(0,ae,T,w,P,$,K.length,A,k,A),$=1,P++;break;case 59:case 125:if(z+W+V+q===0){$++;break}default:switch($++,ye=H.charAt(ve),Y){case 9:case 32:if(W+q+z===0)switch(pe){case 44:case 58:case 9:case 32:ye="";break;default:Y!==32&&(ye=" ")}break;case 0:ye="\\0";break;case 12:ye="\\f";break;case 11:ye="\\v";break;case 38:W+z+q===0&&(Q=ee=1,ye="\f"+ye);break;case 108:if(W+z+q+y===0&&0<Ie)switch(ve-Ie){case 2:pe===112&&H.charCodeAt(ve-3)===58&&(y=pe);case 8:ie===111&&(y=ie)}break;case 58:W+z+q===0&&(Ie=ve);break;case 44:z+V+W+q===0&&(Q=1,ye+="\r");break;case 34:case 39:z===0&&(W=W===Y?0:W===0?Y:W);break;case 91:W+z+V===0&&q++;break;case 93:W+z+V===0&&q--;break;case 41:W+z+q===0&&V--;break;case 40:if(W+z+q===0){if(J===0)switch(2*pe+3*ie){case 533:break;default:J=1}V++}break;case 64:z+V+W+q+Ie+le===0&&(le=1);break;case 42:case 47:if(!(0<W+q+V))switch(z){case 0:switch(2*Y+3*H.charCodeAt(ve+1)){case 235:z=47;break;case 220:ne=ve,z=42}break;case 42:Y===47&&pe===42&&ne+2!==ve&&(H.charCodeAt(ne+2)===33&&(K+=H.substring(ne,ve+1)),ye="",z=0)}}z===0&&(ae+=ye)}ie=pe,pe=Y,ve++}if(ne=K.length,0<ne){if(Q=T,0<L&&(ue=a(2,K,Q,w,P,$,ne,A,k,A),ue!==void 0&&(K=ue).length===0))return Z+K+X;if(K=Q.join(",")+"{"+K+"}",E*y!==0){switch(E!==2||o(K,2)||(y=0),y){case 111:K=K.replace(b,":-moz-$1")+K;break;case 112:K=K.replace(S,"::-webkit-input-$1")+K.replace(S,"::-moz-$1")+K.replace(S,":-ms-input-$1")+K}y=0}}return Z+K+X}function r(w,T,H){var A=T.trim().split(_);T=A;var k=A.length,q=w.length;switch(q){case 0:case 1:var z=0;for(w=q===0?"":w[0]+" ";z<k;++z)T[z]=n(w,T[z],H).trim();break;default:var V=z=0;for(T=[];z<k;++z)for(var W=0;W<q;++W)T[V++]=n(w[W]+" ",A[z],H).trim()}return T}function n(w,T,H){var A=T.charCodeAt(0);switch(33>A&&(A=(T=T.trim()).charCodeAt(0)),A){case 38:return T.replace(m,"$1"+w.trim());case 58:return w.trim()+T.replace(m,"$1"+w.trim());default:if(0<1*H&&0<T.indexOf("\f"))return T.replace(m,(w.charCodeAt(0)===58?"":"$1")+w.trim())}return w+T}function i(w,T,H,A){var k=w+";",q=2*T+3*H+4*A;if(q===944){w=k.indexOf(":",9)+1;var z=k.substring(w,k.length-1).trim();return z=k.substring(0,w).trim()+z+";",E===1||E===2&&o(z,1)?"-webkit-"+z+z:z}if(E===0||E===2&&!o(k,1))return k;switch(q){case 1015:return k.charCodeAt(10)===97?"-webkit-"+k+k:k;case 951:return k.charCodeAt(3)===116?"-webkit-"+k+k:k;case 963:return k.charCodeAt(5)===110?"-webkit-"+k+k:k;case 1009:if(k.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+k+k;case 978:return"-webkit-"+k+"-moz-"+k+k;case 1019:case 983:return"-webkit-"+k+"-moz-"+k+"-ms-"+k+k;case 883:if(k.charCodeAt(8)===45)return"-webkit-"+k+k;if(0<k.indexOf("image-set(",11))return k.replace(O,"$1-webkit-$2")+k;break;case 932:if(k.charCodeAt(4)===45)switch(k.charCodeAt(5)){case 103:return"-webkit-box-"+k.replace("-grow","")+"-webkit-"+k+"-ms-"+k.replace("grow","positive")+k;case 115:return"-webkit-"+k+"-ms-"+k.replace("shrink","negative")+k;case 98:return"-webkit-"+k+"-ms-"+k.replace("basis","preferred-size")+k}return"-webkit-"+k+"-ms-"+k+k;case 964:return"-webkit-"+k+"-ms-flex-"+k+k;case 1023:if(k.charCodeAt(8)!==99)break;return z=k.substring(k.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+z+"-webkit-"+k+"-ms-flex-pack"+z+k;case 1005:return p.test(k)?k.replace(h,":-webkit-")+k.replace(h,":-moz-")+k:k;case 1e3:switch(z=k.substring(13).trim(),T=z.indexOf("-")+1,z.charCodeAt(0)+z.charCodeAt(T)){case 226:z=k.replace(R,"tb");break;case 232:z=k.replace(R,"tb-rl");break;case 220:z=k.replace(R,"lr");break;default:return k}return"-webkit-"+k+"-ms-"+z+k;case 1017:if(k.indexOf("sticky",9)===-1)break;case 975:switch(T=(k=w).length-10,z=(k.charCodeAt(T)===33?k.substring(0,T):k).substring(w.indexOf(":",7)+1).trim(),q=z.charCodeAt(0)+(z.charCodeAt(7)|0)){case 203:if(111>z.charCodeAt(8))break;case 115:k=k.replace(z,"-webkit-"+z)+";"+k;break;case 207:case 102:k=k.replace(z,"-webkit-"+(102<q?"inline-":"")+"box")+";"+k.replace(z,"-webkit-"+z)+";"+k.replace(z,"-ms-"+z+"box")+";"+k}return k+";";case 938:if(k.charCodeAt(5)===45)switch(k.charCodeAt(6)){case 105:return z=k.replace("-items",""),"-webkit-"+k+"-webkit-box-"+z+"-ms-flex-"+z+k;case 115:return"-webkit-"+k+"-ms-flex-item-"+k.replace(N,"")+k;default:return"-webkit-"+k+"-ms-flex-line-pack"+k.replace("align-content","").replace(N,"")+k}break;case 973:case 989:if(k.charCodeAt(3)!==45||k.charCodeAt(4)===122)break;case 931:case 953:if(F.test(w)===!0)return(z=w.substring(w.indexOf(":")+1)).charCodeAt(0)===115?i(w.replace("stretch","fill-available"),T,H,A).replace(":fill-available",":stretch"):k.replace(z,"-webkit-"+z)+k.replace(z,"-moz-"+z.replace("fill-",""))+k;break;case 962:if(k="-webkit-"+k+(k.charCodeAt(5)===102?"-ms-"+k:"")+k,H+A===211&&k.charCodeAt(13)===105&&0<k.indexOf("transform",10))return k.substring(0,k.indexOf(";",27)+1).replace(g,"$1-webkit-$2")+k}return k}function o(w,T){var H=w.indexOf(T===1?":":"{"),A=w.substring(0,T!==3?H:10);return H=w.substring(H+1,w.length-1),M(T!==2?A:A.replace(U,"$1"),H,T)}function s(w,T){var H=i(T,T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2));return H!==T+";"?H.replace(D," or ($1)").substring(4):"("+T+")"}function a(w,T,H,A,k,q,z,V,W,J){for(var Y=0,pe=T,ie;Y<L;++Y)switch(ie=B[Y].call(c,w,pe,H,A,k,q,z,V,W,J)){case void 0:case!1:case!0:case null:break;default:pe=ie}if(pe!==T)return pe}function u(w){switch(w){case void 0:case null:L=B.length=0;break;default:if(typeof w=="function")B[L++]=w;else if(typeof w=="object")for(var T=0,H=w.length;T<H;++T)u(w[T]);else I=!!w|0}return u}function l(w){return w=w.prefix,w!==void 0&&(M=null,w?typeof w!="function"?E=1:(E=2,M=w):E=0),l}function c(w,T){var H=w;if(33>H.charCodeAt(0)&&(H=H.trim()),x=H,H=[x],0<L){var A=a(-1,T,H,H,P,$,0,0,0,0);A!==void 0&&typeof A=="string"&&(T=A)}var k=e(C,H,T,0,0);return 0<L&&(A=a(-2,k,H,H,P,$,k.length,0,0,0),A!==void 0&&(k=A)),x="",y=0,$=P=1,k}var f=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,p=/zoo|gra/,g=/([,: ])(transform)/g,_=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,S=/::(place)/g,b=/:(read-only)/g,R=/[svh]\w+-[tblr]{2}/,j=/\(\s*(.*)\s*\)/g,D=/([\s\S]*?);/g,N=/-self|flex-/g,U=/[^]*?(:[rp][el]a[\w-]+)[^]*/,F=/stretch|:\s*\w+\-(?:conte|avail)/,O=/([^-])(image-set\()/,$=1,P=1,y=0,E=1,C=[],B=[],L=0,M=null,I=0,x="";return c.use=u,c.set=l,t!==void 0&&l(t),c}var ON={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function MN(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var NN=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,z1=MN(function(t){return NN.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),$m={},DN={get exports(){return $m},set exports(t){$m=t}},ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tr=typeof Symbol=="function"&&Symbol.for,Av=tr?Symbol.for("react.element"):60103,Pv=tr?Symbol.for("react.portal"):60106,fd=tr?Symbol.for("react.fragment"):60107,dd=tr?Symbol.for("react.strict_mode"):60108,hd=tr?Symbol.for("react.profiler"):60114,pd=tr?Symbol.for("react.provider"):60109,md=tr?Symbol.for("react.context"):60110,kv=tr?Symbol.for("react.async_mode"):60111,gd=tr?Symbol.for("react.concurrent_mode"):60111,vd=tr?Symbol.for("react.forward_ref"):60112,yd=tr?Symbol.for("react.suspense"):60113,IN=tr?Symbol.for("react.suspense_list"):60120,wd=tr?Symbol.for("react.memo"):60115,_d=tr?Symbol.for("react.lazy"):60116,LN=tr?Symbol.for("react.block"):60121,BN=tr?Symbol.for("react.fundamental"):60117,FN=tr?Symbol.for("react.responder"):60118,jN=tr?Symbol.for("react.scope"):60119;function Qr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Av:switch(t=t.type,t){case kv:case gd:case fd:case hd:case dd:case yd:return t;default:switch(t=t&&t.$$typeof,t){case md:case vd:case _d:case wd:case pd:return t;default:return e}}case Pv:return e}}}function IR(t){return Qr(t)===gd}ft.AsyncMode=kv;ft.ConcurrentMode=gd;ft.ContextConsumer=md;ft.ContextProvider=pd;ft.Element=Av;ft.ForwardRef=vd;ft.Fragment=fd;ft.Lazy=_d;ft.Memo=wd;ft.Portal=Pv;ft.Profiler=hd;ft.StrictMode=dd;ft.Suspense=yd;ft.isAsyncMode=function(t){return IR(t)||Qr(t)===kv};ft.isConcurrentMode=IR;ft.isContextConsumer=function(t){return Qr(t)===md};ft.isContextProvider=function(t){return Qr(t)===pd};ft.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Av};ft.isForwardRef=function(t){return Qr(t)===vd};ft.isFragment=function(t){return Qr(t)===fd};ft.isLazy=function(t){return Qr(t)===_d};ft.isMemo=function(t){return Qr(t)===wd};ft.isPortal=function(t){return Qr(t)===Pv};ft.isProfiler=function(t){return Qr(t)===hd};ft.isStrictMode=function(t){return Qr(t)===dd};ft.isSuspense=function(t){return Qr(t)===yd};ft.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===fd||t===gd||t===hd||t===dd||t===yd||t===IN||typeof t=="object"&&t!==null&&(t.$$typeof===_d||t.$$typeof===wd||t.$$typeof===pd||t.$$typeof===md||t.$$typeof===vd||t.$$typeof===BN||t.$$typeof===FN||t.$$typeof===jN||t.$$typeof===LN)};ft.typeOf=Qr;(function(t){t.exports=ft})(DN);var Tv=$m,$N={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},UN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},qN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},LR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Cv={};Cv[Tv.ForwardRef]=qN;Cv[Tv.Memo]=LR;function H1(t){return Tv.isMemo(t)?LR:Cv[t.$$typeof]||$N}var zN=Object.defineProperty,HN=Object.getOwnPropertyNames,V1=Object.getOwnPropertySymbols,VN=Object.getOwnPropertyDescriptor,KN=Object.getPrototypeOf,K1=Object.prototype;function BR(t,e,r){if(typeof e!="string"){if(K1){var n=KN(e);n&&n!==K1&&BR(t,n,r)}var i=HN(e);V1&&(i=i.concat(V1(e)));for(var o=H1(t),s=H1(e),a=0;a<i.length;++a){var u=i[a];if(!UN[u]&&!(r&&r[u])&&!(s&&s[u])&&!(o&&o[u])){var l=VN(e,u);try{zN(t,u,l)}catch{}}}}return t}var WN=BR;function bi(){return(bi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var W1=function(t,e){for(var r=[t[0]],n=0,i=e.length;n<i;n+=1)r.push(e[n],t[n+1]);return r},Um=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!yf.typeOf(t)},wf=Object.freeze([]),go=Object.freeze({});function Gl(t){return typeof t=="function"}function G1(t){return t.displayName||t.name||"Component"}function Ov(t){return t&&typeof t.styledComponentId=="string"}var da=typeof process<"u"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Mv=typeof window<"u"&&"HTMLElement"in window,GN=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1);function oc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var QN=function(){function t(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var e=t.prototype;return e.indexOfGroup=function(r){for(var n=0,i=0;i<r;i++)n+=this.groupSizes[i];return n},e.insertRules=function(r,n){if(r>=this.groupSizes.length){for(var i=this.groupSizes,o=i.length,s=o;r>=s;)(s<<=1)<0&&oc(16,""+r);this.groupSizes=new Uint32Array(s),this.groupSizes.set(i),this.length=s;for(var a=o;a<s;a++)this.groupSizes[a]=0}for(var u=this.indexOfGroup(r+1),l=0,c=n.length;l<c;l++)this.tag.insertRule(u,n[l])&&(this.groupSizes[r]++,u++)},e.clearGroup=function(r){if(r<this.length){var n=this.groupSizes[r],i=this.indexOfGroup(r),o=i+n;this.groupSizes[r]=0;for(var s=i;s<o;s++)this.tag.deleteRule(i)}},e.getGroup=function(r){var n="";if(r>=this.length||this.groupSizes[r]===0)return n;for(var i=this.groupSizes[r],o=this.indexOfGroup(r),s=o+i,a=o;a<s;a++)n+=this.tag.getRule(a)+`/*!sc*/
`;return n},t}(),Au=new Map,_f=new Map,bl=1,Hc=function(t){if(Au.has(t))return Au.get(t);for(;_f.has(bl);)bl++;var e=bl++;return Au.set(t,e),_f.set(e,t),e},JN=function(t){return _f.get(t)},YN=function(t,e){e>=bl&&(bl=e+1),Au.set(t,e),_f.set(e,t)},XN="style["+da+'][data-styled-version="5.3.6"]',ZN=new RegExp("^"+da+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),e3=function(t,e,r){for(var n,i=r.split(","),o=0,s=i.length;o<s;o++)(n=i[o])&&t.registerName(e,n)},t3=function(t,e){for(var r=(e.textContent||"").split(`/*!sc*/
`),n=[],i=0,o=r.length;i<o;i++){var s=r[i].trim();if(s){var a=s.match(ZN);if(a){var u=0|parseInt(a[1],10),l=a[2];u!==0&&(YN(l,u),e3(t,l,a[3]),t.getTag().insertRules(u,n)),n.length=0}else n.push(s)}}},r3=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},FR=function(t){var e=document.head,r=t||e,n=document.createElement("style"),i=function(a){for(var u=a.childNodes,l=u.length;l>=0;l--){var c=u[l];if(c&&c.nodeType===1&&c.hasAttribute(da))return c}}(r),o=i!==void 0?i.nextSibling:null;n.setAttribute(da,"active"),n.setAttribute("data-styled-version","5.3.6");var s=r3();return s&&n.setAttribute("nonce",s),r.insertBefore(n,o),n},n3=function(){function t(r){var n=this.element=FR(r);n.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var o=document.styleSheets,s=0,a=o.length;s<a;s++){var u=o[s];if(u.ownerNode===i)return u}oc(17)}(n),this.length=0}var e=t.prototype;return e.insertRule=function(r,n){try{return this.sheet.insertRule(n,r),this.length++,!0}catch{return!1}},e.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},e.getRule=function(r){var n=this.sheet.cssRules[r];return n!==void 0&&typeof n.cssText=="string"?n.cssText:""},t}(),i3=function(){function t(r){var n=this.element=FR(r);this.nodes=n.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(r,n){if(r<=this.length&&r>=0){var i=document.createTextNode(n),o=this.nodes[r];return this.element.insertBefore(i,o||null),this.length++,!0}return!1},e.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},e.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},t}(),o3=function(){function t(r){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(r,n){return r<=this.length&&(this.rules.splice(r,0,n),this.length++,!0)},e.deleteRule=function(r){this.rules.splice(r,1),this.length--},e.getRule=function(r){return r<this.length?this.rules[r]:""},t}(),Q1=Mv,s3={isServer:!Mv,useCSSOMInjection:!GN},jR=function(){function t(r,n,i){r===void 0&&(r=go),n===void 0&&(n={}),this.options=bi({},s3,{},r),this.gs=n,this.names=new Map(i),this.server=!!r.isServer,!this.server&&Mv&&Q1&&(Q1=!1,function(o){for(var s=document.querySelectorAll(XN),a=0,u=s.length;a<u;a++){var l=s[a];l&&l.getAttribute(da)!=="active"&&(t3(o,l),l.parentNode&&l.parentNode.removeChild(l))}}(this))}t.registerId=function(r){return Hc(r)};var e=t.prototype;return e.reconstructWithOptions=function(r,n){return n===void 0&&(n=!0),new t(bi({},this.options,{},r),this.gs,n&&this.names||void 0)},e.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(n=this.options).isServer,o=n.useCSSOMInjection,s=n.target,r=i?new o3(s):o?new n3(s):new i3(s),new QN(r)));var r,n,i,o,s},e.hasNameForId=function(r,n){return this.names.has(r)&&this.names.get(r).has(n)},e.registerName=function(r,n){if(Hc(r),this.names.has(r))this.names.get(r).add(n);else{var i=new Set;i.add(n),this.names.set(r,i)}},e.insertRules=function(r,n,i){this.registerName(r,n),this.getTag().insertRules(Hc(r),i)},e.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},e.clearRules=function(r){this.getTag().clearGroup(Hc(r)),this.clearNames(r)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(r){for(var n=r.getTag(),i=n.length,o="",s=0;s<i;s++){var a=JN(s);if(a!==void 0){var u=r.names.get(a),l=n.getGroup(s);if(u&&l&&u.size){var c=da+".g"+s+'[id="'+a+'"]',f="";u!==void 0&&u.forEach(function(d){d.length>0&&(f+=d+",")}),o+=""+l+c+'{content:"'+f+`"}/*!sc*/
`}}}return o}(this)},t}(),a3=/(a)(d)/gi,J1=function(t){return String.fromCharCode(t+(t>25?39:97))};function qm(t){var e,r="";for(e=Math.abs(t);e>52;e=e/52|0)r=J1(e%52)+r;return(J1(e%52)+r).replace(a3,"$1-$2")}var zs=function(t,e){for(var r=e.length;r;)t=33*t^e.charCodeAt(--r);return t},$R=function(t){return zs(5381,t)};function l3(t){for(var e=0;e<t.length;e+=1){var r=t[e];if(Gl(r)&&!Ov(r))return!1}return!0}var c3=$R("5.3.6"),u3=function(){function t(e,r,n){this.rules=e,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&l3(e),this.componentId=r,this.baseHash=zs(c3,r),this.baseStyle=n,jR.registerId(r)}return t.prototype.generateAndInjectStyles=function(e,r,n){var i=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,r,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&r.hasNameForId(i,this.staticRulesId))o.push(this.staticRulesId);else{var s=ha(this.rules,e,r,n).join(""),a=qm(zs(this.baseHash,s)>>>0);if(!r.hasNameForId(i,a)){var u=n(s,"."+a,void 0,i);r.insertRules(i,a,u)}o.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=zs(this.baseHash,n.hash),f="",d=0;d<l;d++){var h=this.rules[d];if(typeof h=="string")f+=h;else if(h){var p=ha(h,e,r,n),g=Array.isArray(p)?p.join(""):p;c=zs(c,g+d),f+=g}}if(f){var _=qm(c>>>0);if(!r.hasNameForId(i,_)){var m=n(f,"."+_,void 0,i);r.insertRules(i,_,m)}o.push(_)}}return o.join(" ")},t}(),f3=/^\s*\/\/.*$/gm,d3=[":","[",".","#"];function h3(t){var e,r,n,i,o=t===void 0?go:t,s=o.options,a=s===void 0?go:s,u=o.plugins,l=u===void 0?wf:u,c=new CN(a),f=[],d=function(g){function _(m){if(m)try{g(m+"}")}catch{}}return function(m,v,S,b,R,j,D,N,U,F){switch(m){case 1:if(U===0&&v.charCodeAt(0)===64)return g(v+";"),"";break;case 2:if(N===0)return v+"/*|*/";break;case 3:switch(N){case 102:case 112:return g(S[0]+v),"";default:return v+(F===0?"/*|*/":"")}case-2:v.split("/*|*/}").forEach(_)}}}(function(g){f.push(g)}),h=function(g,_,m){return _===0&&d3.indexOf(m[r.length])!==-1||m.match(i)?g:"."+e};function p(g,_,m,v){v===void 0&&(v="&");var S=g.replace(f3,""),b=_&&m?m+" "+_+" { "+S+" }":S;return e=v,r=_,n=new RegExp("\\"+r+"\\b","g"),i=new RegExp("(\\"+r+"\\b){2,}"),c(m||!_?"":_,b)}return c.use([].concat(l,[function(g,_,m){g===2&&m.length&&m[0].lastIndexOf(r)>0&&(m[0]=m[0].replace(n,h))},d,function(g){if(g===-2){var _=f;return f=[],_}}])),p.hash=l.length?l.reduce(function(g,_){return _.name||oc(15),zs(g,_.name)},5381).toString():"",p}var UR=On.createContext();UR.Consumer;var qR=On.createContext(),p3=(qR.Consumer,new jR),zm=h3();function m3(){return ge.useContext(UR)||p3}function g3(){return ge.useContext(qR)||zm}var zR=function(){function t(e,r){var n=this;this.inject=function(i,o){o===void 0&&(o=zm);var s=n.name+o.hash;i.hasNameForId(n.id,s)||i.insertRules(n.id,s,o(n.rules,s,"@keyframes"))},this.toString=function(){return oc(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=r}return t.prototype.getName=function(e){return e===void 0&&(e=zm),this.name+e.hash},t}(),v3=/([A-Z])/,y3=/([A-Z])/g,w3=/^ms-/,_3=function(t){return"-"+t.toLowerCase()};function Y1(t){return v3.test(t)?t.replace(y3,_3).replace(w3,"-ms-"):t}var X1=function(t){return t==null||t===!1||t===""};function ha(t,e,r,n){if(Array.isArray(t)){for(var i,o=[],s=0,a=t.length;s<a;s+=1)(i=ha(t[s],e,r,n))!==""&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}if(X1(t))return"";if(Ov(t))return"."+t.styledComponentId;if(Gl(t)){if(typeof(l=t)!="function"||l.prototype&&l.prototype.isReactComponent||!e)return t;var u=t(e);return ha(u,e,r,n)}var l;return t instanceof zR?r?(t.inject(r,n),t.getName(n)):t:Um(t)?function c(f,d){var h,p,g=[];for(var _ in f)f.hasOwnProperty(_)&&!X1(f[_])&&(Array.isArray(f[_])&&f[_].isCss||Gl(f[_])?g.push(Y1(_)+":",f[_],";"):Um(f[_])?g.push.apply(g,c(f[_],_)):g.push(Y1(_)+": "+(h=_,(p=f[_])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||h in ON?String(p).trim():p+"px")+";"));return d?[d+" {"].concat(g,["}"]):g}(t):t.toString()}var Z1=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function HR(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Gl(t)||Um(t)?Z1(ha(W1(wf,[t].concat(r)))):r.length===0&&t.length===1&&typeof t[0]=="string"?t:Z1(ha(W1(t,r)))}var b3=function(t,e,r){return r===void 0&&(r=go),t.theme!==r.theme&&t.theme||e||r.theme},S3=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,E3=/(^-|-$)/g;function Yh(t){return t.replace(S3,"-").replace(E3,"")}var VR=function(t){return qm($R(t)>>>0)};function Vc(t){return typeof t=="string"&&!0}var Hm=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},R3=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function x3(t,e,r){var n=t[r];Hm(e)&&Hm(n)?KR(n,e):t[r]=e}function KR(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(Hm(s))for(var a in s)R3(a)&&x3(t,s[a],a)}return t}var WR=On.createContext();WR.Consumer;var Xh={};function GR(t,e,r){var n=Ov(t),i=!Vc(t),o=e.attrs,s=o===void 0?wf:o,a=e.componentId,u=a===void 0?function(v,S){var b=typeof v!="string"?"sc":Yh(v);Xh[b]=(Xh[b]||0)+1;var R=b+"-"+VR("5.3.6"+b+Xh[b]);return S?S+"-"+R:R}(e.displayName,e.parentComponentId):a,l=e.displayName,c=l===void 0?function(v){return Vc(v)?"styled."+v:"Styled("+G1(v)+")"}(t):l,f=e.displayName&&e.componentId?Yh(e.displayName)+"-"+e.componentId:e.componentId||u,d=n&&t.attrs?Array.prototype.concat(t.attrs,s).filter(Boolean):s,h=e.shouldForwardProp;n&&t.shouldForwardProp&&(h=e.shouldForwardProp?function(v,S,b){return t.shouldForwardProp(v,S,b)&&e.shouldForwardProp(v,S,b)}:t.shouldForwardProp);var p,g=new u3(r,f,n?t.componentStyle:void 0),_=g.isStatic&&s.length===0,m=function(v,S){return function(b,R,j,D){var N=b.attrs,U=b.componentStyle,F=b.defaultProps,O=b.foldedComponentIds,$=b.shouldForwardProp,P=b.styledComponentId,y=b.target,E=function(A,k,q){A===void 0&&(A=go);var z=bi({},k,{theme:A}),V={};return q.forEach(function(W){var J,Y,pe,ie=W;for(J in Gl(ie)&&(ie=ie(z)),ie)z[J]=V[J]=J==="className"?(Y=V[J],pe=ie[J],Y&&pe?Y+" "+pe:Y||pe):ie[J]}),[z,V]}(b3(R,ge.useContext(WR),F)||go,R,N),C=E[0],B=E[1],L=function(A,k,q,z){var V=m3(),W=g3(),J=k?A.generateAndInjectStyles(go,V,W):A.generateAndInjectStyles(q,V,W);return J}(U,D,C),M=j,I=B.$as||R.$as||B.as||R.as||y,x=Vc(I),w=B!==R?bi({},R,{},B):R,T={};for(var H in w)H[0]!=="$"&&H!=="as"&&(H==="forwardedAs"?T.as=w[H]:($?$(H,z1,I):!x||z1(H))&&(T[H]=w[H]));return R.style&&B.style!==R.style&&(T.style=bi({},R.style,{},B.style)),T.className=Array.prototype.concat(O,P,L!==P?L:null,R.className,B.className).filter(Boolean).join(" "),T.ref=M,ge.createElement(I,T)}(p,v,S,_)};return m.displayName=c,(p=On.forwardRef(m)).attrs=d,p.componentStyle=g,p.displayName=c,p.shouldForwardProp=h,p.foldedComponentIds=n?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):wf,p.styledComponentId=f,p.target=n?t.target:t,p.withComponent=function(v){var S=e.componentId,b=function(j,D){if(j==null)return{};var N,U,F={},O=Object.keys(j);for(U=0;U<O.length;U++)N=O[U],D.indexOf(N)>=0||(F[N]=j[N]);return F}(e,["componentId"]),R=S&&S+"-"+(Vc(v)?v:Yh(G1(v)));return GR(v,bi({},b,{attrs:d,componentId:R}),r)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(v){this._foldedDefaultProps=n?KR({},t.defaultProps,v):v}}),p.toString=function(){return"."+p.styledComponentId},i&&WN(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var Vm=function(t){return function e(r,n,i){if(i===void 0&&(i=go),!yf.isValidElementType(n))return oc(1,String(n));var o=function(){return r(n,i,HR.apply(void 0,arguments))};return o.withConfig=function(s){return e(r,n,bi({},i,{},s))},o.attrs=function(s){return e(r,n,bi({},i,{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},o}(GR,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){Vm[t]=Vm(t)});function Nv(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=HR.apply(void 0,[t].concat(r)).join(""),o=VR(i);return new zR(o,i)}const sc=Vm;var QR=globalThis&&globalThis.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Sn=242.776657104492,A3=1.6,P3=Nv(ew||(ew=QR([`
  12.5% {
    stroke-dasharray: `,"px, ",`px;
    stroke-dashoffset: -`,`px;
  }
  43.75% {
    stroke-dasharray: `,"px, ",`px;
    stroke-dashoffset: -`,`px;
  }
  100% {
    stroke-dasharray: `,"px, ",`px;
    stroke-dashoffset: -`,`px;
  }
`],[`
  12.5% {
    stroke-dasharray: `,"px, ",`px;
    stroke-dashoffset: -`,`px;
  }
  43.75% {
    stroke-dasharray: `,"px, ",`px;
    stroke-dashoffset: -`,`px;
  }
  100% {
    stroke-dasharray: `,"px, ",`px;
    stroke-dashoffset: -`,`px;
  }
`])),Sn*.14,Sn,Sn*.11,Sn*.35,Sn,Sn*.35,Sn*.01,Sn,Sn*.99);sc.path(tw||(tw=QR([`
  stroke-dasharray: `,"px, ",`;
  stroke-dashoffset: 0;
  animation: `," ",`s linear infinite;
`],[`
  stroke-dasharray: `,"px, ",`;
  stroke-dashoffset: 0;
  animation: `," ",`s linear infinite;
`])),Sn*.01,Sn,P3,A3);var ew,tw,rw=globalThis&&globalThis.__assign||function(){return rw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rw.apply(this,arguments)},nw=globalThis&&globalThis.__assign||function(){return nw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nw.apply(this,arguments)},iw=globalThis&&globalThis.__assign||function(){return iw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},iw.apply(this,arguments)},ow=globalThis&&globalThis.__assign||function(){return ow=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ow.apply(this,arguments)},sw=globalThis&&globalThis.__assign||function(){return sw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},sw.apply(this,arguments)},aw=globalThis&&globalThis.__assign||function(){return aw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},aw.apply(this,arguments)},lw=globalThis&&globalThis.__assign||function(){return lw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},lw.apply(this,arguments)},k3=function(e,r){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n[e]<"u")return n[e];if(e&&e.indexOf(".")>0){for(var i=e.split("."),o=i.length,s=n[i[0]],a=1;s!=null&&a<o;)s=s[i[a]],a+=1;if(typeof s<"u")return s}return r}},Dv=globalThis&&globalThis.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},cw.apply(this,arguments)},T3=Nv(uw||(uw=Dv([`
 to {
    transform: rotate(360deg);
  }
`],[`
 to {
    transform: rotate(360deg);
  }
`])));sc.svg(fw||(fw=Dv([`
  animation: `,` 0.75s steps(12, end) infinite;
  animation-duration: `,`s;
`],[`
  animation: `,` 0.75s steps(12, end) infinite;
  animation-duration: `,`s;
`])),T3,k3("speed","0.75"));sc.polyline(dw||(dw=Dv([`
  stroke-width: `,`px;
  stroke-linecap: round;

  &:nth-child(12n + 0) {
    stroke-opacity: 0.08;
  }

  &:nth-child(12n + 1) {
    stroke-opacity: 0.17;
  }

  &:nth-child(12n + 2) {
    stroke-opacity: 0.25;
  }

  &:nth-child(12n + 3) {
    stroke-opacity: 0.33;
  }

  &:nth-child(12n + 4) {
    stroke-opacity: 0.42;
  }

  &:nth-child(12n + 5) {
    stroke-opacity: 0.5;
  }

  &:nth-child(12n + 6) {
    stroke-opacity: 0.58;
  }

  &:nth-child(12n + 7) {
    stroke-opacity: 0.66;
  }

  &:nth-child(12n + 8) {
    stroke-opacity: 0.75;
  }

  &:nth-child(12n + 9) {
    stroke-opacity: 0.83;
  }

  &:nth-child(12n + 11) {
    stroke-opacity: 0.92;
  }
`],[`
  stroke-width: `,`px;
  stroke-linecap: round;

  &:nth-child(12n + 0) {
    stroke-opacity: 0.08;
  }

  &:nth-child(12n + 1) {
    stroke-opacity: 0.17;
  }

  &:nth-child(12n + 2) {
    stroke-opacity: 0.25;
  }

  &:nth-child(12n + 3) {
    stroke-opacity: 0.33;
  }

  &:nth-child(12n + 4) {
    stroke-opacity: 0.42;
  }

  &:nth-child(12n + 5) {
    stroke-opacity: 0.5;
  }

  &:nth-child(12n + 6) {
    stroke-opacity: 0.58;
  }

  &:nth-child(12n + 7) {
    stroke-opacity: 0.66;
  }

  &:nth-child(12n + 8) {
    stroke-opacity: 0.75;
  }

  &:nth-child(12n + 9) {
    stroke-opacity: 0.83;
  }

  &:nth-child(12n + 11) {
    stroke-opacity: 0.92;
  }
`])),function(t){return t.width});var uw,fw,dw,hw=globalThis&&globalThis.__assign||function(){return hw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hw.apply(this,arguments)},pw=globalThis&&globalThis.__assign||function(){return pw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pw.apply(this,arguments)},mw=globalThis&&globalThis.__assign||function(){return mw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},mw.apply(this,arguments)},Iv=globalThis&&globalThis.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},gw=globalThis&&globalThis.__assign||function(){return gw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gw.apply(this,arguments)},C3=Nv(vw||(vw=Iv([`
 to {
    stroke-dashoffset: 136;
  }
`],[`
 to {
    stroke-dashoffset: 136;
  }
`])));sc.polygon(yw||(yw=Iv([`
  stroke-dasharray: 17;
  animation: `,` 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;
`],[`
  stroke-dasharray: 17;
  animation: `,` 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;
`])),C3);sc.svg(ww||(ww=Iv([`
  transform-origin: 50% 65%;
`],[`
  transform-origin: 50% 65%;
`])));var vw,yw,ww,_w=globalThis&&globalThis.__assign||function(){return _w=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_w.apply(this,arguments)},bw=globalThis&&globalThis.__assign||function(){return bw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},bw.apply(this,arguments)},Sw=globalThis&&globalThis.__assign||function(){return Sw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sw.apply(this,arguments)},Ew=globalThis&&globalThis.__assign||function(){return Ew=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ew.apply(this,arguments)},Rw=globalThis&&globalThis.__assign||function(){return Rw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Rw.apply(this,arguments)},xw=globalThis&&globalThis.__assign||function(){return xw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xw.apply(this,arguments)},Aw=globalThis&&globalThis.__assign||function(){return Aw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Aw.apply(this,arguments)},Pw=globalThis&&globalThis.__assign||function(){return Pw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pw.apply(this,arguments)},kw=globalThis&&globalThis.__assign||function(){return kw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kw.apply(this,arguments)},Tw=globalThis&&globalThis.__assign||function(){return Tw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Tw.apply(this,arguments)},Cw=globalThis&&globalThis.__assign||function(){return Cw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Cw.apply(this,arguments)},Ow=globalThis&&globalThis.__assign||function(){return Ow=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ow.apply(this,arguments)},Mw=globalThis&&globalThis.__assign||function(){return Mw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mw.apply(this,arguments)},Km={},O3={get exports(){return Km},set exports(t){Km=t}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:re,function(){return function(r){var n={};function i(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return r[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=r,i.c=n,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),s=i(18),a=i(19),u=i(45),l=i(46),c=i(47),f=i(48),d=i(49),h=i(12),p=i(32),g=i(33),_=i(31),m=i(1),v={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:o.default,Format:s.default,Leaf:a.default,Embed:f.default,Scroll:u.default,Block:c.default,Inline:l.default,Text:d.default,Attributor:{Attribute:h.default,Class:p.default,Style:g.default,Store:_.default}};n.default=v},function(r,n,i){var o=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var S in v)v.hasOwnProperty(S)&&(m[S]=v[S])};return function(m,v){_(m,v);function S(){this.constructor=m}m.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(_){o(m,_);function m(v){var S=this;return v="[Parchment] "+v,S=_.call(this,v)||this,S.message=v,S.name=S.constructor.name,S}return m}(Error);n.ParchmentError=s;var a={},u={},l={},c={};n.DATA_KEY="__blot";var f;(function(_){_[_.TYPE=3]="TYPE",_[_.LEVEL=12]="LEVEL",_[_.ATTRIBUTE=13]="ATTRIBUTE",_[_.BLOT=14]="BLOT",_[_.INLINE=7]="INLINE",_[_.BLOCK=11]="BLOCK",_[_.BLOCK_BLOT=10]="BLOCK_BLOT",_[_.INLINE_BLOT=6]="INLINE_BLOT",_[_.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",_[_.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",_[_.ANY=15]="ANY"})(f=n.Scope||(n.Scope={}));function d(_,m){var v=p(_);if(v==null)throw new s("Unable to create "+_+" blot");var S=v,b=_ instanceof Node||_.nodeType===Node.TEXT_NODE?_:S.create(m);return new S(b,m)}n.create=d;function h(_,m){return m===void 0&&(m=!1),_==null?null:_[n.DATA_KEY]!=null?_[n.DATA_KEY].blot:m?h(_.parentNode,m):null}n.find=h;function p(_,m){m===void 0&&(m=f.ANY);var v;if(typeof _=="string")v=c[_]||a[_];else if(_ instanceof Text||_.nodeType===Node.TEXT_NODE)v=c.text;else if(typeof _=="number")_&f.LEVEL&f.BLOCK?v=c.block:_&f.LEVEL&f.INLINE&&(v=c.inline);else if(_ instanceof HTMLElement){var S=(_.getAttribute("class")||"").split(/\s+/);for(var b in S)if(v=u[S[b]],v)break;v=v||l[_.tagName]}return v==null?null:m&f.LEVEL&v.scope&&m&f.TYPE&v.scope?v:null}n.query=p;function g(){for(var _=[],m=0;m<arguments.length;m++)_[m]=arguments[m];if(_.length>1)return _.map(function(b){return g(b)});var v=_[0];if(typeof v.blotName!="string"&&typeof v.attrName!="string")throw new s("Invalid definition");if(v.blotName==="abstract")throw new s("Cannot register abstract class");if(c[v.blotName||v.attrName]=v,typeof v.keyName=="string")a[v.keyName]=v;else if(v.className!=null&&(u[v.className]=v),v.tagName!=null){Array.isArray(v.tagName)?v.tagName=v.tagName.map(function(b){return b.toUpperCase()}):v.tagName=v.tagName.toUpperCase();var S=Array.isArray(v.tagName)?v.tagName:[v.tagName];S.forEach(function(b){(l[b]==null||v.className==null)&&(l[b]=v)})}return v}n.register=g},function(r,n,i){var o=i(51),s=i(11),a=i(3),u=i(20),l=String.fromCharCode(0),c=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};c.prototype.insert=function(f,d){var h={};return f.length===0?this:(h.insert=f,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(h.attributes=d),this.push(h))},c.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},c.prototype.retain=function(f,d){if(f<=0)return this;var h={retain:f};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(h.attributes=d),this.push(h)},c.prototype.push=function(f){var d=this.ops.length,h=this.ops[d-1];if(f=a(!0,{},f),typeof h=="object"){if(typeof f.delete=="number"&&typeof h.delete=="number")return this.ops[d-1]={delete:h.delete+f.delete},this;if(typeof h.delete=="number"&&f.insert!=null&&(d-=1,h=this.ops[d-1],typeof h!="object"))return this.ops.unshift(f),this;if(s(f.attributes,h.attributes)){if(typeof f.insert=="string"&&typeof h.insert=="string")return this.ops[d-1]={insert:h.insert+f.insert},typeof f.attributes=="object"&&(this.ops[d-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof h.retain=="number")return this.ops[d-1]={retain:h.retain+f.retain},typeof f.attributes=="object"&&(this.ops[d-1].attributes=f.attributes),this}}return d===this.ops.length?this.ops.push(f):this.ops.splice(d,0,f),this},c.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},c.prototype.filter=function(f){return this.ops.filter(f)},c.prototype.forEach=function(f){this.ops.forEach(f)},c.prototype.map=function(f){return this.ops.map(f)},c.prototype.partition=function(f){var d=[],h=[];return this.forEach(function(p){var g=f(p)?d:h;g.push(p)}),[d,h]},c.prototype.reduce=function(f,d){return this.ops.reduce(f,d)},c.prototype.changeLength=function(){return this.reduce(function(f,d){return d.insert?f+u.length(d):d.delete?f-d.delete:f},0)},c.prototype.length=function(){return this.reduce(function(f,d){return f+u.length(d)},0)},c.prototype.slice=function(f,d){f=f||0,typeof d!="number"&&(d=1/0);for(var h=[],p=u.iterator(this.ops),g=0;g<d&&p.hasNext();){var _;g<f?_=p.next(f-g):(_=p.next(d-g),h.push(_)),g+=u.length(_)}return new c(h)},c.prototype.compose=function(f){var d=u.iterator(this.ops),h=u.iterator(f.ops),p=[],g=h.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var _=g.retain;d.peekType()==="insert"&&d.peekLength()<=_;)_-=d.peekLength(),p.push(d.next());g.retain-_>0&&h.next(g.retain-_)}for(var m=new c(p);d.hasNext()||h.hasNext();)if(h.peekType()==="insert")m.push(h.next());else if(d.peekType()==="delete")m.push(d.next());else{var v=Math.min(d.peekLength(),h.peekLength()),S=d.next(v),b=h.next(v);if(typeof b.retain=="number"){var R={};typeof S.retain=="number"?R.retain=v:R.insert=S.insert;var j=u.attributes.compose(S.attributes,b.attributes,typeof S.retain=="number");if(j&&(R.attributes=j),m.push(R),!h.hasNext()&&s(m.ops[m.ops.length-1],R)){var D=new c(d.rest());return m.concat(D).chop()}}else typeof b.delete=="number"&&typeof S.retain=="number"&&m.push(b)}return m.chop()},c.prototype.concat=function(f){var d=new c(this.ops.slice());return f.ops.length>0&&(d.push(f.ops[0]),d.ops=d.ops.concat(f.ops.slice(1))),d},c.prototype.diff=function(f,d){if(this.ops===f.ops)return new c;var h=[this,f].map(function(v){return v.map(function(S){if(S.insert!=null)return typeof S.insert=="string"?S.insert:l;var b=v===f?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),p=new c,g=o(h[0],h[1],d),_=u.iterator(this.ops),m=u.iterator(f.ops);return g.forEach(function(v){for(var S=v[1].length;S>0;){var b=0;switch(v[0]){case o.INSERT:b=Math.min(m.peekLength(),S),p.push(m.next(b));break;case o.DELETE:b=Math.min(S,_.peekLength()),_.next(b),p.delete(b);break;case o.EQUAL:b=Math.min(_.peekLength(),m.peekLength(),S);var R=_.next(b),j=m.next(b);s(R.insert,j.insert)?p.retain(b,u.attributes.diff(R.attributes,j.attributes)):p.push(j).delete(b);break}S-=b}}),p.chop()},c.prototype.eachLine=function(f,d){d=d||`
`;for(var h=u.iterator(this.ops),p=new c,g=0;h.hasNext();){if(h.peekType()!=="insert")return;var _=h.peek(),m=u.length(_)-h.peekLength(),v=typeof _.insert=="string"?_.insert.indexOf(d,m)-m:-1;if(v<0)p.push(h.next());else if(v>0)p.push(h.next(v));else{if(f(p,h.next(1).attributes||{},g)===!1)return;g+=1,p=new c}}p.length()>0&&f(p,{},g)},c.prototype.transform=function(f,d){if(d=!!d,typeof f=="number")return this.transformPosition(f,d);for(var h=u.iterator(this.ops),p=u.iterator(f.ops),g=new c;h.hasNext()||p.hasNext();)if(h.peekType()==="insert"&&(d||p.peekType()!=="insert"))g.retain(u.length(h.next()));else if(p.peekType()==="insert")g.push(p.next());else{var _=Math.min(h.peekLength(),p.peekLength()),m=h.next(_),v=p.next(_);if(m.delete)continue;v.delete?g.push(v):g.retain(_,u.attributes.transform(m.attributes,v.attributes,d))}return g.chop()},c.prototype.transformPosition=function(f,d){d=!!d;for(var h=u.iterator(this.ops),p=0;h.hasNext()&&p<=f;){var g=h.peekLength(),_=h.peekType();if(h.next(),_==="delete"){f-=Math.min(g,f-p);continue}else _==="insert"&&(p<f||!d)&&(f+=g);p+=g}return f},r.exports=c},function(r,n){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=function(h){return typeof Array.isArray=="function"?Array.isArray(h):o.call(h)==="[object Array]"},l=function(h){if(!h||o.call(h)!=="[object Object]")return!1;var p=i.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&i.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!g)return!1;var _;for(_ in h);return typeof _>"u"||i.call(h,_)},c=function(h,p){s&&p.name==="__proto__"?s(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},f=function(h,p){if(p==="__proto__")if(i.call(h,p)){if(a)return a(h,p).value}else return;return h[p]};r.exports=function d(){var h,p,g,_,m,v,S=arguments[0],b=1,R=arguments.length,j=!1;for(typeof S=="boolean"&&(j=S,S=arguments[1]||{},b=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});b<R;++b)if(h=arguments[b],h!=null)for(p in h)g=f(S,p),_=f(h,p),S!==_&&(j&&_&&(l(_)||(m=u(_)))?(m?(m=!1,v=g&&u(g)?g:[]):v=g&&l(g)?g:{},c(S,{name:p,newValue:d(j,v,_)})):typeof _<"u"&&c(S,{name:p,newValue:_}));return S}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var o=function(){function O($,P){for(var y=0;y<P.length;y++){var E=P[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty($,E.key,E)}}return function($,P,y){return P&&O($.prototype,P),y&&O($,y),$}}(),s=function O($,P,y){$===null&&($=Function.prototype);var E=Object.getOwnPropertyDescriptor($,P);if(E===void 0){var C=Object.getPrototypeOf($);return C===null?void 0:O(C,P,y)}else{if("value"in E)return E.value;var B=E.get;return B===void 0?void 0:B.call(y)}},a=i(3),u=S(a),l=i(2),c=S(l),f=i(0),d=S(f),h=i(16),p=S(h),g=i(6),_=S(g),m=i(7),v=S(m);function S(O){return O&&O.__esModule?O:{default:O}}function b(O,$){if(!(O instanceof $))throw new TypeError("Cannot call a class as a function")}function R(O,$){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:O}function j(O,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);O.prototype=Object.create($&&$.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(O,$):O.__proto__=$)}var D=1,N=function(O){j($,O);function $(){return b(this,$),R(this,($.__proto__||Object.getPrototypeOf($)).apply(this,arguments))}return o($,[{key:"attach",value:function(){s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(y,E){var C=d.default.query(y,d.default.Scope.BLOCK_ATTRIBUTE);C!=null&&this.attributes.attribute(C,E)}},{key:"formatAt",value:function(y,E,C,B){this.format(C,B)}},{key:"insertAt",value:function(y,E,C){if(typeof E=="string"&&E.endsWith(`
`)){var B=d.default.create(U.blotName);this.parent.insertBefore(B,y===0?this:this.next),B.insertAt(0,E.slice(0,-1))}else s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"insertAt",this).call(this,y,E,C)}}]),$}(d.default.Embed);N.scope=d.default.Scope.BLOCK_BLOT;var U=function(O){j($,O);function $(P){b(this,$);var y=R(this,($.__proto__||Object.getPrototypeOf($)).call(this,P));return y.cache={},y}return o($,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(y,E){return E.length()===0?y:y.insert(E.value(),F(E))},new c.default).insert(`
`,F(this))),this.cache.delta}},{key:"deleteAt",value:function(y,E){s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"deleteAt",this).call(this,y,E),this.cache={}}},{key:"formatAt",value:function(y,E,C,B){E<=0||(d.default.query(C,d.default.Scope.BLOCK)?y+E===this.length()&&this.format(C,B):s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"formatAt",this).call(this,y,Math.min(E,this.length()-y-1),C,B),this.cache={})}},{key:"insertAt",value:function(y,E,C){if(C!=null)return s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"insertAt",this).call(this,y,E,C);if(E.length!==0){var B=E.split(`
`),L=B.shift();L.length>0&&(y<this.length()-1||this.children.tail==null?s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"insertAt",this).call(this,Math.min(y,this.length()-1),L):this.children.tail.insertAt(this.children.tail.length(),L),this.cache={});var M=this;B.reduce(function(I,x){return M=M.split(I,!0),M.insertAt(0,x),x.length},y+L.length)}}},{key:"insertBefore",value:function(y,E){var C=this.children.head;s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"insertBefore",this).call(this,y,E),C instanceof p.default&&C.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"length",this).call(this)+D),this.cache.length}},{key:"moveChildren",value:function(y,E){s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"moveChildren",this).call(this,y,E),this.cache={}}},{key:"optimize",value:function(y){s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"optimize",this).call(this,y),this.cache={}}},{key:"path",value:function(y){return s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"path",this).call(this,y,!0)}},{key:"removeChild",value:function(y){s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"removeChild",this).call(this,y),this.cache={}}},{key:"split",value:function(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E&&(y===0||y>=this.length()-D)){var C=this.clone();return y===0?(this.parent.insertBefore(C,this),this):(this.parent.insertBefore(C,this.next),C)}else{var B=s($.prototype.__proto__||Object.getPrototypeOf($.prototype),"split",this).call(this,y,E);return this.cache={},B}}}]),$}(d.default.Block);U.blotName="block",U.tagName="P",U.defaultChild="break",U.allowedChildren=[_.default,d.default.Embed,v.default];function F(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O==null||(typeof O.formats=="function"&&($=(0,u.default)($,O.formats())),O.parent==null||O.parent.blotName=="scroll"||O.parent.statics.scope!==O.statics.scope)?$:F(O.parent,$)}n.bubbleFormats=F,n.BlockEmbed=N,n.default=U},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s=function(){function M(I,x){var w=[],T=!0,H=!1,A=void 0;try{for(var k=I[Symbol.iterator](),q;!(T=(q=k.next()).done)&&(w.push(q.value),!(x&&w.length===x));T=!0);}catch(z){H=!0,A=z}finally{try{!T&&k.return&&k.return()}finally{if(H)throw A}}return w}return function(I,x){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return M(I,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function M(I,x){for(var w=0;w<x.length;w++){var T=x[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(I,T.key,T)}}return function(I,x,w){return x&&M(I.prototype,x),w&&M(I,w),I}}();i(50);var u=i(2),l=F(u),c=i(14),f=F(c),d=i(8),h=F(d),p=i(9),g=F(p),_=i(0),m=F(_),v=i(15),S=F(v),b=i(3),R=F(b),j=i(10),D=F(j),N=i(34),U=F(N);function F(M){return M&&M.__esModule?M:{default:M}}function O(M,I,x){return I in M?Object.defineProperty(M,I,{value:x,enumerable:!0,configurable:!0,writable:!0}):M[I]=x,M}function $(M,I){if(!(M instanceof I))throw new TypeError("Cannot call a class as a function")}var P=(0,D.default)("quill"),y=function(){a(M,null,[{key:"debug",value:function(x){x===!0&&(x="log"),D.default.level(x)}},{key:"find",value:function(x){return x.__quill||m.default.find(x)}},{key:"import",value:function(x){return this.imports[x]==null&&P.error("Cannot import "+x+". Are you sure it was registered?"),this.imports[x]}},{key:"register",value:function(x,w){var T=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof x!="string"){var A=x.attrName||x.blotName;typeof A=="string"?this.register("formats/"+A,x,w):Object.keys(x).forEach(function(k){T.register(k,x[k],w)})}else this.imports[x]!=null&&!H&&P.warn("Overwriting "+x+" with",w),this.imports[x]=w,(x.startsWith("blots/")||x.startsWith("formats/"))&&w.blotName!=="abstract"?m.default.register(w):x.startsWith("modules")&&typeof w.register=="function"&&w.register()}}]);function M(I){var x=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($(this,M),this.options=E(I,w),this.container=this.options.container,this.container==null)return P.error("Invalid Quill container",I);this.options.debug&&M.debug(this.options.debug);var T=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new h.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new S.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(h.default.events.EDITOR_CHANGE,function(A){A===h.default.events.TEXT_CHANGE&&x.root.classList.toggle("ql-blank",x.editor.isBlank())}),this.emitter.on(h.default.events.SCROLL_UPDATE,function(A,k){var q=x.selection.lastRange,z=q&&q.length===0?q.index:void 0;C.call(x,function(){return x.editor.update(null,k,z)},A)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+T+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(M,[{key:"addContainer",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof x=="string"){var T=x;x=document.createElement("div"),x.classList.add(T)}return this.container.insertBefore(x,w),x}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(x,w,T){var H=this,A=B(x,w,T),k=s(A,4);return x=k[0],w=k[1],T=k[3],C.call(this,function(){return H.editor.deleteText(x,w)},T,x,-1*w)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(x),this.container.classList.toggle("ql-disabled",!x)}},{key:"focus",value:function(){var x=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=x,this.scrollIntoView()}},{key:"format",value:function(x,w){var T=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.default.sources.API;return C.call(this,function(){var A=T.getSelection(!0),k=new l.default;if(A==null)return k;if(m.default.query(x,m.default.Scope.BLOCK))k=T.editor.formatLine(A.index,A.length,O({},x,w));else{if(A.length===0)return T.selection.format(x,w),k;k=T.editor.formatText(A.index,A.length,O({},x,w))}return T.setSelection(A,h.default.sources.SILENT),k},H)}},{key:"formatLine",value:function(x,w,T,H,A){var k=this,q=void 0,z=B(x,w,T,H,A),V=s(z,4);return x=V[0],w=V[1],q=V[2],A=V[3],C.call(this,function(){return k.editor.formatLine(x,w,q)},A,x,0)}},{key:"formatText",value:function(x,w,T,H,A){var k=this,q=void 0,z=B(x,w,T,H,A),V=s(z,4);return x=V[0],w=V[1],q=V[2],A=V[3],C.call(this,function(){return k.editor.formatText(x,w,q)},A,x,0)}},{key:"getBounds",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=void 0;typeof x=="number"?T=this.selection.getBounds(x,w):T=this.selection.getBounds(x.index,x.length);var H=this.container.getBoundingClientRect();return{bottom:T.bottom-H.top,height:T.height,left:T.left-H.left,right:T.right-H.left,top:T.top-H.top,width:T.width}}},{key:"getContents",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-x,T=B(x,w),H=s(T,2);return x=H[0],w=H[1],this.editor.getContents(x,w)}},{key:"getFormat",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof x=="number"?this.editor.getFormat(x,w):this.editor.getFormat(x.index,x.length)}},{key:"getIndex",value:function(x){return x.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(x){return this.scroll.leaf(x)}},{key:"getLine",value:function(x){return this.scroll.line(x)}},{key:"getLines",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof x!="number"?this.scroll.lines(x.index,x.length):this.scroll.lines(x,w)}},{key:"getModule",value:function(x){return this.theme.modules[x]}},{key:"getSelection",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return x&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-x,T=B(x,w),H=s(T,2);return x=H[0],w=H[1],this.editor.getText(x,w)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(x,w,T){var H=this,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M.sources.API;return C.call(this,function(){return H.editor.insertEmbed(x,w,T)},A,x)}},{key:"insertText",value:function(x,w,T,H,A){var k=this,q=void 0,z=B(x,0,T,H,A),V=s(z,4);return x=V[0],q=V[2],A=V[3],C.call(this,function(){return k.editor.insertText(x,w,q)},A,x,w.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(x,w,T){this.clipboard.dangerouslyPasteHTML(x,w,T)}},{key:"removeFormat",value:function(x,w,T){var H=this,A=B(x,w,T),k=s(A,4);return x=k[0],w=k[1],T=k[3],C.call(this,function(){return H.editor.removeFormat(x,w)},T,x)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(x){var w=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return C.call(this,function(){x=new l.default(x);var H=w.getLength(),A=w.editor.deleteText(0,H),k=w.editor.applyDelta(x),q=k.ops[k.ops.length-1];q!=null&&typeof q.insert=="string"&&q.insert[q.insert.length-1]===`
`&&(w.editor.deleteText(w.getLength()-1,1),k.delete(1));var z=A.compose(k);return z},T)}},{key:"setSelection",value:function(x,w,T){if(x==null)this.selection.setRange(null,w||M.sources.API);else{var H=B(x,w,T),A=s(H,4);x=A[0],w=A[1],T=A[3],this.selection.setRange(new v.Range(x,w),T),T!==h.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API,T=new l.default().insert(x);return this.setContents(T,w)}},{key:"update",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.default.sources.USER,w=this.scroll.update(x);return this.selection.update(x),w}},{key:"updateContents",value:function(x){var w=this,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return C.call(this,function(){return x=new l.default(x),w.editor.applyDelta(x,T)},T,!0)}}]),M}();y.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},y.events=h.default.events,y.sources=h.default.sources,y.version="1.3.7",y.imports={delta:l.default,parchment:m.default,"core/module":g.default,"core/theme":U.default};function E(M,I){if(I=(0,R.default)(!0,{container:M,modules:{clipboard:!0,keyboard:!0,history:!0}},I),!I.theme||I.theme===y.DEFAULTS.theme)I.theme=U.default;else if(I.theme=y.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?");var x=(0,R.default)(!0,{},I.theme.DEFAULTS);[x,I].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(A){H.modules[A]===!0&&(H.modules[A]={})})});var w=Object.keys(x.modules).concat(Object.keys(I.modules)),T=w.reduce(function(H,A){var k=y.import("modules/"+A);return k==null?P.error("Cannot load "+A+" module. Are you sure you registered it?"):H[A]=k.DEFAULTS||{},H},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,R.default)(!0,{},y.DEFAULTS,{modules:T},x,I),["bounds","container","scrollingContainer"].forEach(function(H){typeof I[H]=="string"&&(I[H]=document.querySelector(I[H]))}),I.modules=Object.keys(I.modules).reduce(function(H,A){return I.modules[A]&&(H[A]=I.modules[A]),H},{}),I}function C(M,I,x,w){if(this.options.strict&&!this.isEnabled()&&I===h.default.sources.USER)return new l.default;var T=x==null?null:this.getSelection(),H=this.editor.delta,A=M();if(T!=null&&(x===!0&&(x=T.index),w==null?T=L(T,A,I):w!==0&&(T=L(T,x,w,I)),this.setSelection(T,h.default.sources.SILENT)),A.length()>0){var k,q=[h.default.events.TEXT_CHANGE,A,H,I];if((k=this.emitter).emit.apply(k,[h.default.events.EDITOR_CHANGE].concat(q)),I!==h.default.sources.SILENT){var z;(z=this.emitter).emit.apply(z,q)}}return A}function B(M,I,x,w,T){var H={};return typeof M.index=="number"&&typeof M.length=="number"?typeof I!="number"?(T=w,w=x,x=I,I=M.length,M=M.index):(I=M.length,M=M.index):typeof I!="number"&&(T=w,w=x,x=I,I=0),(typeof x>"u"?"undefined":o(x))==="object"?(H=x,T=w):typeof x=="string"&&(w!=null?H[x]=w:T=x),T=T||h.default.sources.API,[M,I,H,T]}function L(M,I,x,w){if(M==null)return null;var T=void 0,H=void 0;if(I instanceof l.default){var A=[M.index,M.index+M.length].map(function(V){return I.transformPosition(V,w!==h.default.sources.USER)}),k=s(A,2);T=k[0],H=k[1]}else{var q=[M.index,M.index+M.length].map(function(V){return V<I||V===I&&w===h.default.sources.USER?V:x>=0?V+x:Math.max(I,V+x)}),z=s(q,2);T=z[0],H=z[1]}return new v.Range(T,H-T)}n.expandConfig=E,n.overload=B,n.default=y},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function _(m,v){for(var S=0;S<v.length;S++){var b=v[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,S){return v&&_(m.prototype,v),S&&_(m,S),m}}(),s=function _(m,v,S){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,v);if(b===void 0){var R=Object.getPrototypeOf(m);return R===null?void 0:_(R,v,S)}else{if("value"in b)return b.value;var j=b.get;return j===void 0?void 0:j.call(S)}},a=i(7),u=f(a),l=i(0),c=f(l);function f(_){return _&&_.__esModule?_:{default:_}}function d(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}function h(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:_}function p(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}var g=function(_){p(m,_);function m(){return d(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"formatAt",value:function(S,b,R,j){if(m.compare(this.statics.blotName,R)<0&&c.default.query(R,c.default.Scope.BLOT)){var D=this.isolate(S,b);j&&D.wrap(R,j)}else s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,S,b,R,j)}},{key:"optimize",value:function(S){if(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,S),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(S,b){var R=m.order.indexOf(S),j=m.order.indexOf(b);return R>=0||j>=0?R-j:S===b?0:S<b?-1:1}}]),m}(c.default.Inline);g.allowedChildren=[g,c.default.Embed,u.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}function u(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function l(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function c(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var f=function(d){c(h,d);function h(){return u(this,h),l(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default.Text);n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function v(S,b){for(var R=0;R<b.length;R++){var j=b[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}return function(S,b,R){return b&&v(S.prototype,b),R&&v(S,R),S}}(),s=function v(S,b,R){S===null&&(S=Function.prototype);var j=Object.getOwnPropertyDescriptor(S,b);if(j===void 0){var D=Object.getPrototypeOf(S);return D===null?void 0:v(D,b,R)}else{if("value"in j)return j.value;var N=j.get;return N===void 0?void 0:N.call(R)}},a=i(54),u=f(a),l=i(10),c=f(l);function f(v){return v&&v.__esModule?v:{default:v}}function d(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")}function h(v,S){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:v}function p(v,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);v.prototype=Object.create(S&&S.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(v,S):v.__proto__=S)}var g=(0,c.default)("quill:events"),_=["selectionchange","mousedown","mouseup","click"];_.forEach(function(v){document.addEventListener(v,function(){for(var S=arguments.length,b=Array(S),R=0;R<S;R++)b[R]=arguments[R];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(j){if(j.__quill&&j.__quill.emitter){var D;(D=j.__quill.emitter).handleDOM.apply(D,b)}})})});var m=function(v){p(S,v);function S(){d(this,S);var b=h(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));return b.listeners={},b.on("error",g.error),b}return o(S,[{key:"emit",value:function(){g.log.apply(g,arguments),s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(R){for(var j=arguments.length,D=Array(j>1?j-1:0),N=1;N<j;N++)D[N-1]=arguments[N];(this.listeners[R.type]||[]).forEach(function(U){var F=U.node,O=U.handler;(R.target===F||F.contains(R.target))&&O.apply(void 0,[R].concat(D))})}},{key:"listenDOM",value:function(R,j,D){this.listeners[R]||(this.listeners[R]=[]),this.listeners[R].push({node:j,handler:D})}}]),S}(u.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function o(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function a(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,a),this.quill=u,this.options=l};s.DEFAULTS={},n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function a(l){if(o.indexOf(l)<=o.indexOf(s)){for(var c,f=arguments.length,d=Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];(c=console)[l].apply(c,d)}}function u(l){return o.reduce(function(c,f){return c[f]=a.bind(console,f,l),c},{})}a.level=u.level=function(l){s=l},n.default=u},function(r,n,i){var o=Array.prototype.slice,s=i(52),a=i(53),u=r.exports=function(d,h,p){return p||(p={}),d===h?!0:d instanceof Date&&h instanceof Date?d.getTime()===h.getTime():!d||!h||typeof d!="object"&&typeof h!="object"?p.strict?d===h:d==h:f(d,h,p)};function l(d){return d==null}function c(d){return!(!d||typeof d!="object"||typeof d.length!="number"||typeof d.copy!="function"||typeof d.slice!="function"||d.length>0&&typeof d[0]!="number")}function f(d,h,p){var g,_;if(l(d)||l(h)||d.prototype!==h.prototype)return!1;if(a(d))return a(h)?(d=o.call(d),h=o.call(h),u(d,h,p)):!1;if(c(d)){if(!c(h)||d.length!==h.length)return!1;for(g=0;g<d.length;g++)if(d[g]!==h[g])return!1;return!0}try{var m=s(d),v=s(h)}catch{return!1}if(m.length!=v.length)return!1;for(m.sort(),v.sort(),g=m.length-1;g>=0;g--)if(m[g]!=v[g])return!1;for(g=m.length-1;g>=0;g--)if(_=m[g],!u(d[_],h[_],p))return!1;return typeof d==typeof h}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),s=function(){function a(u,l,c){c===void 0&&(c={}),this.attrName=u,this.keyName=l;var f=o.Scope.TYPE&o.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&o.Scope.LEVEL|f:this.scope=o.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(u){return[].map.call(u.attributes,function(l){return l.name})},a.prototype.add=function(u,l){return this.canAdd(u,l)?(u.setAttribute(this.keyName,l),!0):!1},a.prototype.canAdd=function(u,l){var c=o.query(u,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof l=="string"?this.whitelist.indexOf(l.replace(/["']/g,""))>-1:this.whitelist.indexOf(l)>-1},a.prototype.remove=function(u){u.removeAttribute(this.keyName)},a.prototype.value=function(u){var l=u.getAttribute(this.keyName);return this.canAdd(u,l)&&l?l:""},a}();n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var o=function(){function N(U,F){var O=[],$=!0,P=!1,y=void 0;try{for(var E=U[Symbol.iterator](),C;!($=(C=E.next()).done)&&(O.push(C.value),!(F&&O.length===F));$=!0);}catch(B){P=!0,y=B}finally{try{!$&&E.return&&E.return()}finally{if(P)throw y}}return O}return function(U,F){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return N(U,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function N(U,F){for(var O=0;O<F.length;O++){var $=F[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(U,$.key,$)}}return function(U,F,O){return F&&N(U.prototype,F),O&&N(U,O),U}}(),a=function N(U,F,O){U===null&&(U=Function.prototype);var $=Object.getOwnPropertyDescriptor(U,F);if($===void 0){var P=Object.getPrototypeOf(U);return P===null?void 0:N(P,F,O)}else{if("value"in $)return $.value;var y=$.get;return y===void 0?void 0:y.call(O)}},u=i(2),l=v(u),c=i(0),f=v(c),d=i(4),h=v(d),p=i(6),g=v(p),_=i(7),m=v(_);function v(N){return N&&N.__esModule?N:{default:N}}function S(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function b(N,U){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:N}function R(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);N.prototype=Object.create(U&&U.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(N,U):N.__proto__=U)}var j=function(N){R(U,N);function U(){return S(this,U),b(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return U}(g.default);j.blotName="code",j.tagName="CODE";var D=function(N){R(U,N);function U(){return S(this,U),b(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return s(U,[{key:"delta",value:function(){var O=this,$=this.domNode.textContent;return $.endsWith(`
`)&&($=$.slice(0,-1)),$.split(`
`).reduce(function(P,y){return P.insert(y).insert(`
`,O.formats())},new l.default)}},{key:"format",value:function(O,$){if(!(O===this.statics.blotName&&$)){var P=this.descendant(m.default,this.length()-1),y=o(P,1),E=y[0];E!=null&&E.deleteAt(E.length()-1,1),a(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"format",this).call(this,O,$)}}},{key:"formatAt",value:function(O,$,P,y){if($!==0&&!(f.default.query(P,f.default.Scope.BLOCK)==null||P===this.statics.blotName&&y===this.statics.formats(this.domNode))){var E=this.newlineIndex(O);if(!(E<0||E>=O+$)){var C=this.newlineIndex(O,!0)+1,B=E-C+1,L=this.isolate(C,B),M=L.next;L.format(P,y),M instanceof U&&M.formatAt(0,O-C+$-B,P,y)}}}},{key:"insertAt",value:function(O,$,P){if(P==null){var y=this.descendant(m.default,O),E=o(y,2),C=E[0],B=E[1];C.insertAt(B,$)}}},{key:"length",value:function(){var O=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?O:O+1}},{key:"newlineIndex",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($)return this.domNode.textContent.slice(0,O).lastIndexOf(`
`);var P=this.domNode.textContent.slice(O).indexOf(`
`);return P>-1?O+P:-1}},{key:"optimize",value:function(O){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),a(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"optimize",this).call(this,O);var $=this.next;$!=null&&$.prev===this&&$.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===$.statics.formats($.domNode)&&($.optimize(O),$.moveChildren(this),$.remove())}},{key:"replace",value:function(O){a(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"replace",this).call(this,O),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function($){var P=f.default.find($);P==null?$.parentNode.removeChild($):P instanceof f.default.Embed?P.remove():P.unwrap()})}}],[{key:"create",value:function(O){var $=a(U.__proto__||Object.getPrototypeOf(U),"create",this).call(this,O);return $.setAttribute("spellcheck",!1),$}},{key:"formats",value:function(){return!0}}]),U}(h.default);D.blotName="code-block",D.tagName="PRE",D.TAB="  ",n.Code=j,n.default=D},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s=function(){function M(I,x){var w=[],T=!0,H=!1,A=void 0;try{for(var k=I[Symbol.iterator](),q;!(T=(q=k.next()).done)&&(w.push(q.value),!(x&&w.length===x));T=!0);}catch(z){H=!0,A=z}finally{try{!T&&k.return&&k.return()}finally{if(H)throw A}}return w}return function(I,x){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return M(I,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function M(I,x){for(var w=0;w<x.length;w++){var T=x[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(I,T.key,T)}}return function(I,x,w){return x&&M(I.prototype,x),w&&M(I,w),I}}(),u=i(2),l=$(u),c=i(20),f=$(c),d=i(0),h=$(d),p=i(13),g=$(p),_=i(24),m=$(_),v=i(4),S=$(v),b=i(16),R=$(b),j=i(21),D=$(j),N=i(11),U=$(N),F=i(3),O=$(F);function $(M){return M&&M.__esModule?M:{default:M}}function P(M,I,x){return I in M?Object.defineProperty(M,I,{value:x,enumerable:!0,configurable:!0,writable:!0}):M[I]=x,M}function y(M,I){if(!(M instanceof I))throw new TypeError("Cannot call a class as a function")}var E=/^[ -~]*$/,C=function(){function M(I){y(this,M),this.scroll=I,this.delta=this.getDelta()}return a(M,[{key:"applyDelta",value:function(x){var w=this,T=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),x=L(x),x.reduce(function(A,k){var q=k.retain||k.delete||k.insert.length||1,z=k.attributes||{};if(k.insert!=null){if(typeof k.insert=="string"){var V=k.insert;V.endsWith(`
`)&&T&&(T=!1,V=V.slice(0,-1)),A>=H&&!V.endsWith(`
`)&&(T=!0),w.scroll.insertAt(A,V);var W=w.scroll.line(A),J=s(W,2),Y=J[0],pe=J[1],ie=(0,O.default)({},(0,v.bubbleFormats)(Y));if(Y instanceof S.default){var le=Y.descendant(h.default.Leaf,pe),Ie=s(le,1),ve=Ie[0];ie=(0,O.default)(ie,(0,v.bubbleFormats)(ve))}z=f.default.attributes.diff(ie,z)||{}}else if(o(k.insert)==="object"){var Q=Object.keys(k.insert)[0];if(Q==null)return A;w.scroll.insertAt(A,Q,k.insert[Q])}H+=q}return Object.keys(z).forEach(function(ee){w.scroll.formatAt(A,q,ee,z[ee])}),A+q},0),x.reduce(function(A,k){return typeof k.delete=="number"?(w.scroll.deleteAt(A,k.delete),A):A+(k.retain||k.insert.length||1)},0),this.scroll.batchEnd(),this.update(x)}},{key:"deleteText",value:function(x,w){return this.scroll.deleteAt(x,w),this.update(new l.default().retain(x).delete(w))}},{key:"formatLine",value:function(x,w){var T=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(A){if(!(T.scroll.whitelist!=null&&!T.scroll.whitelist[A])){var k=T.scroll.lines(x,Math.max(w,1)),q=w;k.forEach(function(z){var V=z.length();if(!(z instanceof g.default))z.format(A,H[A]);else{var W=x-z.offset(T.scroll),J=z.newlineIndex(W+q)-W+1;z.formatAt(W,J,A,H[A])}q-=V})}}),this.scroll.optimize(),this.update(new l.default().retain(x).retain(w,(0,D.default)(H)))}},{key:"formatText",value:function(x,w){var T=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(A){T.scroll.formatAt(x,w,A,H[A])}),this.update(new l.default().retain(x).retain(w,(0,D.default)(H)))}},{key:"getContents",value:function(x,w){return this.delta.slice(x,x+w)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(x,w){return x.concat(w.delta())},new l.default)}},{key:"getFormat",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=[],H=[];w===0?this.scroll.path(x).forEach(function(k){var q=s(k,1),z=q[0];z instanceof S.default?T.push(z):z instanceof h.default.Leaf&&H.push(z)}):(T=this.scroll.lines(x,w),H=this.scroll.descendants(h.default.Leaf,x,w));var A=[T,H].map(function(k){if(k.length===0)return{};for(var q=(0,v.bubbleFormats)(k.shift());Object.keys(q).length>0;){var z=k.shift();if(z==null)return q;q=B((0,v.bubbleFormats)(z),q)}return q});return O.default.apply(O.default,A)}},{key:"getText",value:function(x,w){return this.getContents(x,w).filter(function(T){return typeof T.insert=="string"}).map(function(T){return T.insert}).join("")}},{key:"insertEmbed",value:function(x,w,T){return this.scroll.insertAt(x,w,T),this.update(new l.default().retain(x).insert(P({},w,T)))}},{key:"insertText",value:function(x,w){var T=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return w=w.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(x,w),Object.keys(H).forEach(function(A){T.scroll.formatAt(x,w.length,A,H[A])}),this.update(new l.default().retain(x).insert(w,(0,D.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var x=this.scroll.children.head;return x.statics.blotName!==S.default.blotName||x.children.length>1?!1:x.children.head instanceof R.default}},{key:"removeFormat",value:function(x,w){var T=this.getText(x,w),H=this.scroll.line(x+w),A=s(H,2),k=A[0],q=A[1],z=0,V=new l.default;k!=null&&(k instanceof g.default?z=k.newlineIndex(q)-q+1:z=k.length()-q,V=k.delta().slice(q,q+z-1).insert(`
`));var W=this.getContents(x,w+z),J=W.diff(new l.default().insert(T).concat(V)),Y=new l.default().retain(x).concat(J);return this.applyDelta(Y)}},{key:"update",value:function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(w.length===1&&w[0].type==="characterData"&&w[0].target.data.match(E)&&h.default.find(w[0].target)){var A=h.default.find(w[0].target),k=(0,v.bubbleFormats)(A),q=A.offset(this.scroll),z=w[0].oldValue.replace(m.default.CONTENTS,""),V=new l.default().insert(z),W=new l.default().insert(A.value()),J=new l.default().retain(q).concat(V.diff(W,T));x=J.reduce(function(Y,pe){return pe.insert?Y.insert(pe.insert,k):Y.push(pe)},new l.default),this.delta=H.compose(x)}else this.delta=this.getDelta(),(!x||!(0,U.default)(H.compose(x),this.delta))&&(x=H.diff(this.delta,T));return x}}]),M}();function B(M,I){return Object.keys(I).reduce(function(x,w){return M[w]==null||(I[w]===M[w]?x[w]=I[w]:Array.isArray(I[w])?I[w].indexOf(M[w])<0&&(x[w]=I[w].concat([M[w]])):x[w]=[I[w],M[w]]),x},{})}function L(M){return M.reduce(function(I,x){if(x.insert===1){var w=(0,D.default)(x.attributes);return delete w.image,I.insert({image:x.attributes.image},w)}if(x.attributes!=null&&(x.attributes.list===!0||x.attributes.bullet===!0)&&(x=(0,D.default)(x),x.attributes.list?x.attributes.list="ordered":(x.attributes.list="bullet",delete x.attributes.bullet)),typeof x.insert=="string"){var T=x.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(T,x.attributes)}return I.push(x)},new l.default)}n.default=C},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var o=function(){function N(U,F){var O=[],$=!0,P=!1,y=void 0;try{for(var E=U[Symbol.iterator](),C;!($=(C=E.next()).done)&&(O.push(C.value),!(F&&O.length===F));$=!0);}catch(B){P=!0,y=B}finally{try{!$&&E.return&&E.return()}finally{if(P)throw y}}return O}return function(U,F){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return N(U,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function N(U,F){for(var O=0;O<F.length;O++){var $=F[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(U,$.key,$)}}return function(U,F,O){return F&&N(U.prototype,F),O&&N(U,O),U}}(),a=i(0),u=m(a),l=i(21),c=m(l),f=i(11),d=m(f),h=i(8),p=m(h),g=i(10),_=m(g);function m(N){return N&&N.__esModule?N:{default:N}}function v(N){if(Array.isArray(N)){for(var U=0,F=Array(N.length);U<N.length;U++)F[U]=N[U];return F}else return Array.from(N)}function S(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}var b=(0,_.default)("quill:selection"),R=function N(U){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;S(this,N),this.index=U,this.length=F},j=function(){function N(U,F){var O=this;S(this,N),this.emitter=F,this.scroll=U,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new R(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){O.mouseDown||setTimeout(O.update.bind(O,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function($,P){$===p.default.events.TEXT_CHANGE&&P.length()>0&&O.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(O.hasFocus()){var $=O.getNativeRange();$!=null&&$.start.node!==O.cursor.textNode&&O.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{O.setNativeRange($.start.node,$.start.offset,$.end.node,$.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function($,P){if(P.range){var y=P.range,E=y.startNode,C=y.startOffset,B=y.endNode,L=y.endOffset;O.setNativeRange(E,C,B,L)}}),this.update(p.default.sources.SILENT)}return s(N,[{key:"handleComposition",value:function(){var F=this;this.root.addEventListener("compositionstart",function(){F.composing=!0}),this.root.addEventListener("compositionend",function(){if(F.composing=!1,F.cursor.parent){var O=F.cursor.restore();if(!O)return;setTimeout(function(){F.setNativeRange(O.startNode,O.startOffset,O.endNode,O.endOffset)},1)}})}},{key:"handleDragging",value:function(){var F=this;this.emitter.listenDOM("mousedown",document.body,function(){F.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){F.mouseDown=!1,F.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(F,O){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[F])){this.scroll.update();var $=this.getNativeRange();if(!($==null||!$.native.collapsed||u.default.query(F,u.default.Scope.BLOCK))){if($.start.node!==this.cursor.textNode){var P=u.default.find($.start.node,!1);if(P==null)return;if(P instanceof u.default.Leaf){var y=P.split($.start.offset);P.parent.insertBefore(this.cursor,y)}else P.insertBefore(this.cursor,$.start.node);this.cursor.attach()}this.cursor.format(F,O),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=this.scroll.length();F=Math.min(F,$-1),O=Math.min(F+O,$-1)-F;var P=void 0,y=this.scroll.leaf(F),E=o(y,2),C=E[0],B=E[1];if(C==null)return null;var L=C.position(B,!0),M=o(L,2);P=M[0],B=M[1];var I=document.createRange();if(O>0){I.setStart(P,B);var x=this.scroll.leaf(F+O),w=o(x,2);if(C=w[0],B=w[1],C==null)return null;var T=C.position(B,!0),H=o(T,2);return P=H[0],B=H[1],I.setEnd(P,B),I.getBoundingClientRect()}else{var A="left",k=void 0;return P instanceof Text?(B<P.data.length?(I.setStart(P,B),I.setEnd(P,B+1)):(I.setStart(P,B-1),I.setEnd(P,B),A="right"),k=I.getBoundingClientRect()):(k=C.domNode.getBoundingClientRect(),B>0&&(A="right")),{bottom:k.top+k.height,height:k.height,left:k[A],right:k[A],top:k.top,width:0}}}},{key:"getNativeRange",value:function(){var F=document.getSelection();if(F==null||F.rangeCount<=0)return null;var O=F.getRangeAt(0);if(O==null)return null;var $=this.normalizeNative(O);return b.info("getNativeRange",$),$}},{key:"getRange",value:function(){var F=this.getNativeRange();if(F==null)return[null,null];var O=this.normalizedToRange(F);return[O,F]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(F){var O=this,$=[[F.start.node,F.start.offset]];F.native.collapsed||$.push([F.end.node,F.end.offset]);var P=$.map(function(C){var B=o(C,2),L=B[0],M=B[1],I=u.default.find(L,!0),x=I.offset(O.scroll);return M===0?x:I instanceof u.default.Container?x+I.length():x+I.index(L,M)}),y=Math.min(Math.max.apply(Math,v(P)),this.scroll.length()-1),E=Math.min.apply(Math,[y].concat(v(P)));return new R(E,y-E)}},{key:"normalizeNative",value:function(F){if(!D(this.root,F.startContainer)||!F.collapsed&&!D(this.root,F.endContainer))return null;var O={start:{node:F.startContainer,offset:F.startOffset},end:{node:F.endContainer,offset:F.endOffset},native:F};return[O.start,O.end].forEach(function($){for(var P=$.node,y=$.offset;!(P instanceof Text)&&P.childNodes.length>0;)if(P.childNodes.length>y)P=P.childNodes[y],y=0;else if(P.childNodes.length===y)P=P.lastChild,y=P instanceof Text?P.data.length:P.childNodes.length+1;else break;$.node=P,$.offset=y}),O}},{key:"rangeToNative",value:function(F){var O=this,$=F.collapsed?[F.index]:[F.index,F.index+F.length],P=[],y=this.scroll.length();return $.forEach(function(E,C){E=Math.min(y-1,E);var B=void 0,L=O.scroll.leaf(E),M=o(L,2),I=M[0],x=M[1],w=I.position(x,C!==0),T=o(w,2);B=T[0],x=T[1],P.push(B,x)}),P.length<2&&(P=P.concat(P)),P}},{key:"scrollIntoView",value:function(F){var O=this.lastRange;if(O!=null){var $=this.getBounds(O.index,O.length);if($!=null){var P=this.scroll.length()-1,y=this.scroll.line(Math.min(O.index,P)),E=o(y,1),C=E[0],B=C;if(O.length>0){var L=this.scroll.line(Math.min(O.index+O.length,P)),M=o(L,1);B=M[0]}if(!(C==null||B==null)){var I=F.getBoundingClientRect();$.top<I.top?F.scrollTop-=I.top-$.top:$.bottom>I.bottom&&(F.scrollTop+=$.bottom-I.bottom)}}}}},{key:"setNativeRange",value:function(F,O){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",F,O,$,P),!(F!=null&&(this.root.parentNode==null||F.parentNode==null||$.parentNode==null))){var E=document.getSelection();if(E!=null)if(F!=null){this.hasFocus()||this.root.focus();var C=(this.getNativeRange()||{}).native;if(C==null||y||F!==C.startContainer||O!==C.startOffset||$!==C.endContainer||P!==C.endOffset){F.tagName=="BR"&&(O=[].indexOf.call(F.parentNode.childNodes,F),F=F.parentNode),$.tagName=="BR"&&(P=[].indexOf.call($.parentNode.childNodes,$),$=$.parentNode);var B=document.createRange();B.setStart(F,O),B.setEnd($,P),E.removeAllRanges(),E.addRange(B)}}else E.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof O=="string"&&($=O,O=!1),b.info("setRange",F),F!=null){var P=this.rangeToNative(F);this.setNativeRange.apply(this,v(P).concat([O]))}else this.setNativeRange(null);this.update($)}},{key:"update",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,O=this.lastRange,$=this.getRange(),P=o($,2),y=P[0],E=P[1];if(this.lastRange=y,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,d.default)(O,this.lastRange)){var C;!this.composing&&E!=null&&E.native.collapsed&&E.start.node!==this.cursor.textNode&&this.cursor.restore();var B=[p.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(O),F];if((C=this.emitter).emit.apply(C,[p.default.events.EDITOR_CHANGE].concat(B)),F!==p.default.sources.SILENT){var L;(L=this.emitter).emit.apply(L,B)}}}}]),N}();function D(N,U){try{U.parentNode}catch{return!1}return U instanceof Text&&(U=U.parentNode),N.contains(U)}n.Range=R,n.default=j},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(g,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,_,m){return _&&p(g.prototype,_),m&&p(g,m),g}}(),s=function p(g,_,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,_);if(v===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:p(S,_,m)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(m)}},a=i(0),u=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){d(g,p);function g(){return c(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"insertInto",value:function(m,v){m.children.length===0?s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,m,v):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(u.default.Embed);h.blotName="break",h.tagName="BR",n.default=h},function(r,n,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var p in h)h.hasOwnProperty(p)&&(d[p]=h[p])};return function(d,h){f(d,h);function p(){this.constructor=d}d.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(44),a=i(30),u=i(1),l=function(f){o(d,f);function d(h){var p=f.call(this,h)||this;return p.build(),p}return d.prototype.appendChild=function(h){this.insertBefore(h)},d.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(h){h.attach()})},d.prototype.build=function(){var h=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var g=c(p);h.insertBefore(g,h.children.head||void 0)}catch(_){if(_ instanceof u.ParchmentError)return;throw _}})},d.prototype.deleteAt=function(h,p){if(h===0&&p===this.length())return this.remove();this.children.forEachAt(h,p,function(g,_,m){g.deleteAt(_,m)})},d.prototype.descendant=function(h,p){var g=this.children.find(p),_=g[0],m=g[1];return h.blotName==null&&h(_)||h.blotName!=null&&_ instanceof h?[_,m]:_ instanceof d?_.descendant(h,m):[null,-1]},d.prototype.descendants=function(h,p,g){p===void 0&&(p=0),g===void 0&&(g=Number.MAX_VALUE);var _=[],m=g;return this.children.forEachAt(p,g,function(v,S,b){(h.blotName==null&&h(v)||h.blotName!=null&&v instanceof h)&&_.push(v),v instanceof d&&(_=_.concat(v.descendants(h,S,m))),m-=b}),_},d.prototype.detach=function(){this.children.forEach(function(h){h.detach()}),f.prototype.detach.call(this)},d.prototype.formatAt=function(h,p,g,_){this.children.forEachAt(h,p,function(m,v,S){m.formatAt(v,S,g,_)})},d.prototype.insertAt=function(h,p,g){var _=this.children.find(h),m=_[0],v=_[1];if(m)m.insertAt(v,p,g);else{var S=g==null?u.create("text",p):u.create(p,g);this.appendChild(S)}},d.prototype.insertBefore=function(h,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return h instanceof g}))throw new u.ParchmentError("Cannot insert "+h.statics.blotName+" into "+this.statics.blotName);h.insertInto(this,p)},d.prototype.length=function(){return this.children.reduce(function(h,p){return h+p.length()},0)},d.prototype.moveChildren=function(h,p){this.children.forEach(function(g){h.insertBefore(g,p)})},d.prototype.optimize=function(h){if(f.prototype.optimize.call(this,h),this.children.length===0)if(this.statics.defaultChild!=null){var p=u.create(this.statics.defaultChild);this.appendChild(p),p.optimize(h)}else this.remove()},d.prototype.path=function(h,p){p===void 0&&(p=!1);var g=this.children.find(h,p),_=g[0],m=g[1],v=[[this,h]];return _ instanceof d?v.concat(_.path(m,p)):(_!=null&&v.push([_,m]),v)},d.prototype.removeChild=function(h){this.children.remove(h)},d.prototype.replace=function(h){h instanceof d&&h.moveChildren(this),f.prototype.replace.call(this,h)},d.prototype.split=function(h,p){if(p===void 0&&(p=!1),!p){if(h===0)return this;if(h===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(h,this.length(),function(_,m,v){_=_.split(m,p),g.appendChild(_)}),g},d.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},d.prototype.update=function(h,p){var g=this,_=[],m=[];h.forEach(function(v){v.target===g.domNode&&v.type==="childList"&&(_.push.apply(_,v.addedNodes),m.push.apply(m,v.removedNodes))}),m.forEach(function(v){if(!(v.parentNode!=null&&v.tagName!=="IFRAME"&&document.body.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var S=u.find(v);S!=null&&(S.domNode.parentNode==null||S.domNode.parentNode===g.domNode)&&S.detach()}}),_.filter(function(v){return v.parentNode==g.domNode}).sort(function(v,S){return v===S?0:v.compareDocumentPosition(S)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(v){var S=null;v.nextSibling!=null&&(S=u.find(v.nextSibling));var b=c(v);(b.next!=S||b.next==null)&&(b.parent!=null&&b.parent.removeChild(g),g.insertBefore(b,S||void 0))})},d}(a.default);function c(f){var d=u.find(f);if(d==null)try{d=u.create(f)}catch{d=u.create(u.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(p){d.domNode.appendChild(p)}),f.parentNode&&f.parentNode.replaceChild(d.domNode,f),d.attach()}return d}n.default=l},function(r,n,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var p in h)h.hasOwnProperty(p)&&(d[p]=h[p])};return function(d,h){f(d,h);function p(){this.constructor=d}d.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(12),a=i(31),u=i(17),l=i(1),c=function(f){o(d,f);function d(h){var p=f.call(this,h)||this;return p.attributes=new a.default(p.domNode),p}return d.formats=function(h){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return h.tagName.toLowerCase()},d.prototype.format=function(h,p){var g=l.query(h);g instanceof s.default?this.attributes.attribute(g,p):p&&g!=null&&(h!==this.statics.blotName||this.formats()[h]!==p)&&this.replaceWith(h,p)},d.prototype.formats=function(){var h=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(h[this.statics.blotName]=p),h},d.prototype.replaceWith=function(h,p){var g=f.prototype.replaceWith.call(this,h,p);return this.attributes.copy(g),g},d.prototype.update=function(h,p){var g=this;f.prototype.update.call(this,h,p),h.some(function(_){return _.target===g.domNode&&_.type==="attributes"})&&this.attributes.build()},d.prototype.wrap=function(h,p){var g=f.prototype.wrap.call(this,h,p);return g instanceof d&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},d}(u.default);n.default=c},function(r,n,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){l(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(30),a=i(1),u=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.value=function(f){return!0},c.prototype.index=function(f,d){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(d,1):-1},c.prototype.position=function(f,d){var h=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(h+=1),[this.parent.domNode,h]},c.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},c.scope=a.Scope.INLINE_BLOT,c}(s.default);n.default=u},function(r,n,i){var o=i(11),s=i(3),a={attributes:{compose:function(l,c,f){typeof l!="object"&&(l={}),typeof c!="object"&&(c={});var d=s(!0,{},c);f||(d=Object.keys(d).reduce(function(p,g){return d[g]!=null&&(p[g]=d[g]),p},{}));for(var h in l)l[h]!==void 0&&c[h]===void 0&&(d[h]=l[h]);return Object.keys(d).length>0?d:void 0},diff:function(l,c){typeof l!="object"&&(l={}),typeof c!="object"&&(c={});var f=Object.keys(l).concat(Object.keys(c)).reduce(function(d,h){return o(l[h],c[h])||(d[h]=c[h]===void 0?null:c[h]),d},{});return Object.keys(f).length>0?f:void 0},transform:function(l,c,f){if(typeof l!="object")return c;if(typeof c=="object"){if(!f)return c;var d=Object.keys(c).reduce(function(h,p){return l[p]===void 0&&(h[p]=c[p]),h},{});return Object.keys(d).length>0?d:void 0}}},iterator:function(l){return new u(l)},length:function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}};function u(l){this.ops=l,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(l){l||(l=1/0);var c=this.ops[this.index];if(c){var f=this.offset,d=a.length(c);if(l>=d-f?(l=d-f,this.index+=1,this.offset=0):this.offset+=l,typeof c.delete=="number")return{delete:l};var h={};return c.attributes&&(h.attributes=c.attributes),typeof c.retain=="number"?h.retain=l:typeof c.insert=="string"?h.insert=c.insert.substr(f,l):h.insert=c.insert,h}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,c=this.index,f=this.next(),d=this.ops.slice(this.index);return this.offset=l,this.index=c,[f].concat(d)}else return[]},r.exports=a},function(r,n){var i=function(){function o(g,_){return _!=null&&g instanceof _}var s;try{s=Map}catch{s=function(){}}var a;try{a=Set}catch{a=function(){}}var u;try{u=Promise}catch{u=function(){}}function l(g,_,m,v,S){typeof _=="object"&&(m=_.depth,v=_.prototype,S=_.includeNonEnumerable,_=_.circular);var b=[],R=[],j=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof m>"u"&&(m=1/0);function D(N,U){if(N===null)return null;if(U===0)return N;var F,O;if(typeof N!="object")return N;if(o(N,s))F=new s;else if(o(N,a))F=new a;else if(o(N,u))F=new u(function(I,x){N.then(function(w){I(D(w,U-1))},function(w){x(D(w,U-1))})});else if(l.__isArray(N))F=[];else if(l.__isRegExp(N))F=new RegExp(N.source,p(N)),N.lastIndex&&(F.lastIndex=N.lastIndex);else if(l.__isDate(N))F=new Date(N.getTime());else{if(j&&Buffer.isBuffer(N))return Buffer.allocUnsafe?F=Buffer.allocUnsafe(N.length):F=new Buffer(N.length),N.copy(F),F;o(N,Error)?F=Object.create(N):typeof v>"u"?(O=Object.getPrototypeOf(N),F=Object.create(O)):(F=Object.create(v),O=v)}if(_){var $=b.indexOf(N);if($!=-1)return R[$];b.push(N),R.push(F)}o(N,s)&&N.forEach(function(I,x){var w=D(x,U-1),T=D(I,U-1);F.set(w,T)}),o(N,a)&&N.forEach(function(I){var x=D(I,U-1);F.add(x)});for(var P in N){var y;O&&(y=Object.getOwnPropertyDescriptor(O,P)),!(y&&y.set==null)&&(F[P]=D(N[P],U-1))}if(Object.getOwnPropertySymbols)for(var E=Object.getOwnPropertySymbols(N),P=0;P<E.length;P++){var C=E[P],B=Object.getOwnPropertyDescriptor(N,C);B&&!B.enumerable&&!S||(F[C]=D(N[C],U-1),B.enumerable||Object.defineProperty(F,C,{enumerable:!1}))}if(S)for(var L=Object.getOwnPropertyNames(N),P=0;P<L.length;P++){var M=L[P],B=Object.getOwnPropertyDescriptor(N,M);B&&B.enumerable||(F[M]=D(N[M],U-1),Object.defineProperty(F,M,{enumerable:!1}))}return F}return D(g,m)}l.clonePrototype=function(_){if(_===null)return null;var m=function(){};return m.prototype=_,new m};function c(g){return Object.prototype.toString.call(g)}l.__objToStr=c;function f(g){return typeof g=="object"&&c(g)==="[object Date]"}l.__isDate=f;function d(g){return typeof g=="object"&&c(g)==="[object Array]"}l.__isArray=d;function h(g){return typeof g=="object"&&c(g)==="[object RegExp]"}l.__isRegExp=h;function p(g){var _="";return g.global&&(_+="g"),g.ignoreCase&&(_+="i"),g.multiline&&(_+="m"),_}return l.__getRegExpFlags=p,l}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function F(O,$){var P=[],y=!0,E=!1,C=void 0;try{for(var B=O[Symbol.iterator](),L;!(y=(L=B.next()).done)&&(P.push(L.value),!($&&P.length===$));y=!0);}catch(M){E=!0,C=M}finally{try{!y&&B.return&&B.return()}finally{if(E)throw C}}return P}return function(O,$){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return F(O,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function F(O,$){for(var P=0;P<$.length;P++){var y=$[P];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(O,y.key,y)}}return function(O,$,P){return $&&F(O.prototype,$),P&&F(O,P),O}}(),a=function F(O,$,P){O===null&&(O=Function.prototype);var y=Object.getOwnPropertyDescriptor(O,$);if(y===void 0){var E=Object.getPrototypeOf(O);return E===null?void 0:F(E,$,P)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(P)}},u=i(0),l=b(u),c=i(8),f=b(c),d=i(4),h=b(d),p=i(16),g=b(p),_=i(13),m=b(_),v=i(25),S=b(v);function b(F){return F&&F.__esModule?F:{default:F}}function R(F,O){if(!(F instanceof O))throw new TypeError("Cannot call a class as a function")}function j(F,O){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:F}function D(F,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);F.prototype=Object.create(O&&O.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(F,O):F.__proto__=O)}function N(F){return F instanceof h.default||F instanceof d.BlockEmbed}var U=function(F){D(O,F);function O($,P){R(this,O);var y=j(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,$));return y.emitter=P.emitter,Array.isArray(P.whitelist)&&(y.whitelist=P.whitelist.reduce(function(E,C){return E[C]=!0,E},{})),y.domNode.addEventListener("DOMNodeInserted",function(){}),y.optimize(),y.enable(),y}return s(O,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(P,y){var E=this.line(P),C=o(E,2),B=C[0],L=C[1],M=this.line(P+y),I=o(M,1),x=I[0];if(a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,P,y),x!=null&&B!==x&&L>0){if(B instanceof d.BlockEmbed||x instanceof d.BlockEmbed){this.optimize();return}if(B instanceof m.default){var w=B.newlineIndex(B.length(),!0);if(w>-1&&(B=B.split(w+1),B===x)){this.optimize();return}}else if(x instanceof m.default){var T=x.newlineIndex(0);T>-1&&x.split(T+1)}var H=x.children.head instanceof g.default?null:x.children.head;B.moveChildren(x,H),B.remove()}this.optimize()}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",P)}},{key:"formatAt",value:function(P,y,E,C){this.whitelist!=null&&!this.whitelist[E]||(a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,P,y,E,C),this.optimize())}},{key:"insertAt",value:function(P,y,E){if(!(E!=null&&this.whitelist!=null&&!this.whitelist[y])){if(P>=this.length())if(E==null||l.default.query(y,l.default.Scope.BLOCK)==null){var C=l.default.create(this.statics.defaultChild);this.appendChild(C),E==null&&y.endsWith(`
`)&&(y=y.slice(0,-1)),C.insertAt(0,y,E)}else{var B=l.default.create(y,E);this.appendChild(B)}else a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,P,y,E);this.optimize()}}},{key:"insertBefore",value:function(P,y){if(P.statics.scope===l.default.Scope.INLINE_BLOT){var E=l.default.create(this.statics.defaultChild);E.appendChild(P),P=E}a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,P,y)}},{key:"leaf",value:function(P){return this.path(P).pop()||[null,-1]}},{key:"line",value:function(P){return P===this.length()?this.line(P-1):this.descendant(N,P)}},{key:"lines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,E=function C(B,L,M){var I=[],x=M;return B.children.forEachAt(L,M,function(w,T,H){N(w)?I.push(w):w instanceof l.default.Container&&(I=I.concat(C(w,T,x))),x-=H}),I};return E(this,P,y)}},{key:"optimize",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,P,y),P.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,P,y))}},{key:"path",value:function(P){return a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,P).slice(1)}},{key:"update",value:function(P){if(this.batch!==!0){var y=f.default.sources.USER;typeof P=="string"&&(y=P),Array.isArray(P)||(P=this.observer.takeRecords()),P.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,y,P),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"update",this).call(this,P.concat([])),P.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,y,P)}}}]),O}(l.default.Scroll);U.blotName="scroll",U.className="ql-editor",U.tagName="DIV",U.defaultChild="block",U.allowedChildren=[h.default,d.BlockEmbed,S.default],n.default=U},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},s=function(){function k(q,z){var V=[],W=!0,J=!1,Y=void 0;try{for(var pe=q[Symbol.iterator](),ie;!(W=(ie=pe.next()).done)&&(V.push(ie.value),!(z&&V.length===z));W=!0);}catch(le){J=!0,Y=le}finally{try{!W&&pe.return&&pe.return()}finally{if(J)throw Y}}return V}return function(q,z){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return k(q,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function k(q,z){for(var V=0;V<z.length;V++){var W=z[V];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(q,W.key,W)}}return function(q,z,V){return z&&k(q.prototype,z),V&&k(q,V),q}}(),u=i(21),l=F(u),c=i(11),f=F(c),d=i(3),h=F(d),p=i(2),g=F(p),_=i(20),m=F(_),v=i(0),S=F(v),b=i(5),R=F(b),j=i(10),D=F(j),N=i(9),U=F(N);function F(k){return k&&k.__esModule?k:{default:k}}function O(k,q,z){return q in k?Object.defineProperty(k,q,{value:z,enumerable:!0,configurable:!0,writable:!0}):k[q]=z,k}function $(k,q){if(!(k instanceof q))throw new TypeError("Cannot call a class as a function")}function P(k,q){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:k}function y(k,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);k.prototype=Object.create(q&&q.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(k,q):k.__proto__=q)}var E=(0,D.default)("quill:keyboard"),C=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",B=function(k){y(q,k),a(q,null,[{key:"match",value:function(V,W){return W=A(W),["altKey","ctrlKey","metaKey","shiftKey"].some(function(J){return!!W[J]!==V[J]&&W[J]!==null})?!1:W.key===(V.which||V.keyCode)}}]);function q(z,V){$(this,q);var W=P(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,z,V));return W.bindings={},Object.keys(W.options.bindings).forEach(function(J){J==="list autofill"&&z.scroll.whitelist!=null&&!z.scroll.whitelist.list||W.options.bindings[J]&&W.addBinding(W.options.bindings[J])}),W.addBinding({key:q.keys.ENTER,shiftKey:null},w),W.addBinding({key:q.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(W.addBinding({key:q.keys.BACKSPACE},{collapsed:!0},M),W.addBinding({key:q.keys.DELETE},{collapsed:!0},I)):(W.addBinding({key:q.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},M),W.addBinding({key:q.keys.DELETE},{collapsed:!0,suffix:/^.?$/},I)),W.addBinding({key:q.keys.BACKSPACE},{collapsed:!1},x),W.addBinding({key:q.keys.DELETE},{collapsed:!1},x),W.addBinding({key:q.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},M),W.listen(),W}return a(q,[{key:"addBinding",value:function(V){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Y=A(V);if(Y==null||Y.key==null)return E.warn("Attempted to add invalid keyboard binding",Y);typeof W=="function"&&(W={handler:W}),typeof J=="function"&&(J={handler:J}),Y=(0,h.default)(Y,W,J),this.bindings[Y.key]=this.bindings[Y.key]||[],this.bindings[Y.key].push(Y)}},{key:"listen",value:function(){var V=this;this.quill.root.addEventListener("keydown",function(W){if(!W.defaultPrevented){var J=W.which||W.keyCode,Y=(V.bindings[J]||[]).filter(function(he){return q.match(W,he)});if(Y.length!==0){var pe=V.quill.getSelection();if(!(pe==null||!V.quill.hasFocus())){var ie=V.quill.getLine(pe.index),le=s(ie,2),Ie=le[0],ve=le[1],Q=V.quill.getLeaf(pe.index),ee=s(Q,2),ne=ee[0],ce=ee[1],se=pe.length===0?[ne,ce]:V.quill.getLeaf(pe.index+pe.length),ye=s(se,2),ae=ye[0],K=ye[1],X=ne instanceof S.default.Text?ne.value().slice(0,ce):"",Z=ae instanceof S.default.Text?ae.value().slice(K):"",ue={collapsed:pe.length===0,empty:pe.length===0&&Ie.length()<=1,format:V.quill.getFormat(pe),offset:ve,prefix:X,suffix:Z},fe=Y.some(function(he){if(he.collapsed!=null&&he.collapsed!==ue.collapsed||he.empty!=null&&he.empty!==ue.empty||he.offset!=null&&he.offset!==ue.offset)return!1;if(Array.isArray(he.format)){if(he.format.every(function(Re){return ue.format[Re]==null}))return!1}else if(o(he.format)==="object"&&!Object.keys(he.format).every(function(Re){return he.format[Re]===!0?ue.format[Re]!=null:he.format[Re]===!1?ue.format[Re]==null:(0,f.default)(he.format[Re],ue.format[Re])}))return!1;return he.prefix!=null&&!he.prefix.test(ue.prefix)||he.suffix!=null&&!he.suffix.test(ue.suffix)?!1:he.handler.call(V,pe,ue)!==!0});fe&&W.preventDefault()}}}})}}]),q}(U.default);B.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},B.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:B.keys.TAB,format:["blockquote","indent","list"],handler:function(q,z){if(z.collapsed&&z.offset!==0)return!0;this.quill.format("indent","+1",R.default.sources.USER)}},outdent:{key:B.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(q,z){if(z.collapsed&&z.offset!==0)return!0;this.quill.format("indent","-1",R.default.sources.USER)}},"outdent backspace":{key:B.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(q,z){z.format.indent!=null?this.quill.format("indent","-1",R.default.sources.USER):z.format.list!=null&&this.quill.format("list",!1,R.default.sources.USER)}},"indent code-block":T(!0),"outdent code-block":T(!1),"remove tab":{key:B.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(q){this.quill.deleteText(q.index-1,1,R.default.sources.USER)}},tab:{key:B.keys.TAB,handler:function(q){this.quill.history.cutoff();var z=new g.default().retain(q.index).delete(q.length).insert("	");this.quill.updateContents(z,R.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(q.index+1,R.default.sources.SILENT)}},"list empty enter":{key:B.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(q,z){this.quill.format("list",!1,R.default.sources.USER),z.format.indent&&this.quill.format("indent",!1,R.default.sources.USER)}},"checklist enter":{key:B.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(q){var z=this.quill.getLine(q.index),V=s(z,2),W=V[0],J=V[1],Y=(0,h.default)({},W.formats(),{list:"checked"}),pe=new g.default().retain(q.index).insert(`
`,Y).retain(W.length()-J-1).retain(1,{list:"unchecked"});this.quill.updateContents(pe,R.default.sources.USER),this.quill.setSelection(q.index+1,R.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:B.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(q,z){var V=this.quill.getLine(q.index),W=s(V,2),J=W[0],Y=W[1],pe=new g.default().retain(q.index).insert(`
`,z.format).retain(J.length()-Y-1).retain(1,{header:null});this.quill.updateContents(pe,R.default.sources.USER),this.quill.setSelection(q.index+1,R.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(q,z){var V=z.prefix.length,W=this.quill.getLine(q.index),J=s(W,2),Y=J[0],pe=J[1];if(pe>V)return!0;var ie=void 0;switch(z.prefix.trim()){case"[]":case"[ ]":ie="unchecked";break;case"[x]":ie="checked";break;case"-":case"*":ie="bullet";break;default:ie="ordered"}this.quill.insertText(q.index," ",R.default.sources.USER),this.quill.history.cutoff();var le=new g.default().retain(q.index-pe).delete(V+1).retain(Y.length()-2-pe).retain(1,{list:ie});this.quill.updateContents(le,R.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(q.index-V,R.default.sources.SILENT)}},"code exit":{key:B.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(q){var z=this.quill.getLine(q.index),V=s(z,2),W=V[0],J=V[1],Y=new g.default().retain(q.index+W.length()-J-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Y,R.default.sources.USER)}},"embed left":L(B.keys.LEFT,!1),"embed left shift":L(B.keys.LEFT,!0),"embed right":L(B.keys.RIGHT,!1),"embed right shift":L(B.keys.RIGHT,!0)}};function L(k,q){var z,V=k===B.keys.LEFT?"prefix":"suffix";return z={key:k,shiftKey:q,altKey:null},O(z,V,/^$/),O(z,"handler",function(J){var Y=J.index;k===B.keys.RIGHT&&(Y+=J.length+1);var pe=this.quill.getLeaf(Y),ie=s(pe,1),le=ie[0];return le instanceof S.default.Embed?(k===B.keys.LEFT?q?this.quill.setSelection(J.index-1,J.length+1,R.default.sources.USER):this.quill.setSelection(J.index-1,R.default.sources.USER):q?this.quill.setSelection(J.index,J.length+1,R.default.sources.USER):this.quill.setSelection(J.index+J.length+1,R.default.sources.USER),!1):!0}),z}function M(k,q){if(!(k.index===0||this.quill.getLength()<=1)){var z=this.quill.getLine(k.index),V=s(z,1),W=V[0],J={};if(q.offset===0){var Y=this.quill.getLine(k.index-1),pe=s(Y,1),ie=pe[0];if(ie!=null&&ie.length()>1){var le=W.formats(),Ie=this.quill.getFormat(k.index-1,1);J=m.default.attributes.diff(le,Ie)||{}}}var ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(q.prefix)?2:1;this.quill.deleteText(k.index-ve,ve,R.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(k.index-ve,ve,J,R.default.sources.USER),this.quill.focus()}}function I(k,q){var z=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(q.suffix)?2:1;if(!(k.index>=this.quill.getLength()-z)){var V={},W=0,J=this.quill.getLine(k.index),Y=s(J,1),pe=Y[0];if(q.offset>=pe.length()-1){var ie=this.quill.getLine(k.index+1),le=s(ie,1),Ie=le[0];if(Ie){var ve=pe.formats(),Q=this.quill.getFormat(k.index,1);V=m.default.attributes.diff(ve,Q)||{},W=Ie.length()}}this.quill.deleteText(k.index,z,R.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(k.index+W-1,z,V,R.default.sources.USER)}}function x(k){var q=this.quill.getLines(k),z={};if(q.length>1){var V=q[0].formats(),W=q[q.length-1].formats();z=m.default.attributes.diff(W,V)||{}}this.quill.deleteText(k,R.default.sources.USER),Object.keys(z).length>0&&this.quill.formatLine(k.index,1,z,R.default.sources.USER),this.quill.setSelection(k.index,R.default.sources.SILENT),this.quill.focus()}function w(k,q){var z=this;k.length>0&&this.quill.scroll.deleteAt(k.index,k.length);var V=Object.keys(q.format).reduce(function(W,J){return S.default.query(J,S.default.Scope.BLOCK)&&!Array.isArray(q.format[J])&&(W[J]=q.format[J]),W},{});this.quill.insertText(k.index,`
`,V,R.default.sources.USER),this.quill.setSelection(k.index+1,R.default.sources.SILENT),this.quill.focus(),Object.keys(q.format).forEach(function(W){V[W]==null&&(Array.isArray(q.format[W])||W!=="link"&&z.quill.format(W,q.format[W],R.default.sources.USER))})}function T(k){return{key:B.keys.TAB,shiftKey:!k,format:{"code-block":!0},handler:function(z){var V=S.default.query("code-block"),W=z.index,J=z.length,Y=this.quill.scroll.descendant(V,W),pe=s(Y,2),ie=pe[0],le=pe[1];if(ie!=null){var Ie=this.quill.getIndex(ie),ve=ie.newlineIndex(le,!0)+1,Q=ie.newlineIndex(Ie+le+J),ee=ie.domNode.textContent.slice(ve,Q).split(`
`);le=0,ee.forEach(function(ne,ce){k?(ie.insertAt(ve+le,V.TAB),le+=V.TAB.length,ce===0?W+=V.TAB.length:J+=V.TAB.length):ne.startsWith(V.TAB)&&(ie.deleteAt(ve+le,V.TAB.length),le-=V.TAB.length,ce===0?W-=V.TAB.length:J-=V.TAB.length),le+=ne.length+1}),this.quill.update(R.default.sources.USER),this.quill.setSelection(W,J,R.default.sources.SILENT)}}}}function H(k){return{key:k[0].toUpperCase(),shortKey:!0,handler:function(z,V){this.quill.format(k,!V.format[k],R.default.sources.USER)}}}function A(k){if(typeof k=="string"||typeof k=="number")return A({key:k});if((typeof k>"u"?"undefined":o(k))==="object"&&(k=(0,l.default)(k,!1)),typeof k.key=="string")if(B.keys[k.key.toUpperCase()]!=null)k.key=B.keys[k.key.toUpperCase()];else if(k.key.length===1)k.key=k.key.toUpperCase().charCodeAt(0);else return null;return k.shortKey&&(k[C]=k.shortKey,delete k.shortKey),k}n.default=B,n.SHORTKEY=C},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(v,S){var b=[],R=!0,j=!1,D=void 0;try{for(var N=v[Symbol.iterator](),U;!(R=(U=N.next()).done)&&(b.push(U.value),!(S&&b.length===S));R=!0);}catch(F){j=!0,D=F}finally{try{!R&&N.return&&N.return()}finally{if(j)throw D}}return b}return function(v,S){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return m(v,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function m(v,S,b){v===null&&(v=Function.prototype);var R=Object.getOwnPropertyDescriptor(v,S);if(R===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:m(j,S,b)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(b)}},a=function(){function m(v,S){for(var b=0;b<S.length;b++){var R=S[b];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(v,R.key,R)}}return function(v,S,b){return S&&m(v.prototype,S),b&&m(v,b),v}}(),u=i(0),l=d(u),c=i(7),f=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function h(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function p(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function g(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var _=function(m){g(v,m),a(v,null,[{key:"value",value:function(){}}]);function v(S,b){h(this,v);var R=p(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,S));return R.selection=b,R.textNode=document.createTextNode(v.CONTENTS),R.domNode.appendChild(R.textNode),R._length=0,R}return a(v,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,R){if(this._length!==0)return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,R);for(var j=this,D=0;j!=null&&j.statics.scope!==l.default.Scope.BLOCK_BLOT;)D+=j.offset(j.parent),j=j.parent;j!=null&&(this._length=v.CONTENTS.length,j.optimize(),j.formatAt(D,v.CONTENTS.length,b,R),this._length=0)}},{key:"index",value:function(b,R){return b===this.textNode?0:s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,b,R)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,R=this.selection.getNativeRange(),j=void 0,D=void 0,N=void 0;if(R!=null&&R.start.node===b&&R.end.node===b){var U=[b,R.start.offset,R.end.offset];j=U[0],D=U[1],N=U[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==v.CONTENTS){var F=this.textNode.data.split(v.CONTENTS).join("");this.next instanceof f.default?(j=this.next.domNode,this.next.insertAt(0,F),this.textNode.data=v.CONTENTS):(this.textNode.data=F,this.parent.insertBefore(l.default.create(this.textNode),this),this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),D!=null){var O=[D,N].map(function(P){return Math.max(0,Math.min(j.data.length,P-1))}),$=o(O,2);return D=$[0],N=$[1],{startNode:j,startOffset:D,endNode:j,endOffset:N}}}}},{key:"update",value:function(b,R){var j=this;if(b.some(function(N){return N.type==="characterData"&&N.target===j.textNode})){var D=this.restore();D&&(R.range=D)}}},{key:"value",value:function(){return""}}]),v}(l.default.Embed);_.blotName="cursor",_.className="ql-cursor",_.tagName="span",_.CONTENTS="\uFEFF",n.default=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),s=l(o),a=i(4),u=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){d(g,p);function g(){return c(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(s.default.Container);h.allowedChildren=[u.default,a.BlockEmbed,h],n.default=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var o=function(){function _(m,v){for(var S=0;S<v.length;S++){var b=v[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,S){return v&&_(m.prototype,v),S&&_(m,S),m}}(),s=function _(m,v,S){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,v);if(b===void 0){var R=Object.getPrototypeOf(m);return R===null?void 0:_(R,v,S)}else{if("value"in b)return b.value;var j=b.get;return j===void 0?void 0:j.call(S)}},a=i(0),u=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function c(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}function f(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:_}function d(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}var h=function(_){d(m,_);function m(){return c(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"value",value:function(S){var b=s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,S);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(R){return("00"+parseInt(R).toString(16)).slice(-2)}).join("")):b}}]),m}(u.default.Attributor.Style),p=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),g=new h("color","color",{scope:u.default.Scope.INLINE});n.ColorAttributor=h,n.ColorClass=p,n.ColorStyle=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var o=function(){function g(_,m){for(var v=0;v<m.length;v++){var S=m[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,m,v){return m&&g(_.prototype,m),v&&g(_,v),_}}(),s=function g(_,m,v){_===null&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,m);if(S===void 0){var b=Object.getPrototypeOf(_);return b===null?void 0:g(b,m,v)}else{if("value"in S)return S.value;var R=S.get;return R===void 0?void 0:R.call(v)}},a=i(6),u=l(a);function l(g){return g&&g.__esModule?g:{default:g}}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function f(g,_){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:g}function d(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);g.prototype=Object.create(_&&_.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(g,_):g.__proto__=_)}var h=function(g){d(_,g);function _(){return c(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"format",value:function(v,S){if(v!==this.statics.blotName||!S)return s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,v,S);S=this.constructor.sanitize(S),this.domNode.setAttribute("href",S)}}],[{key:"create",value:function(v){var S=s(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,v);return v=this.sanitize(v),S.setAttribute("href",v),S.setAttribute("rel","noopener noreferrer"),S.setAttribute("target","_blank"),S}},{key:"formats",value:function(v){return v.getAttribute("href")}},{key:"sanitize",value:function(v){return p(v,this.PROTOCOL_WHITELIST)?v:this.SANITIZED_URL}}]),_}(u.default);h.blotName="link",h.tagName="A",h.SANITIZED_URL="about:blank",h.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(g,_){var m=document.createElement("a");m.href=g;var v=m.href.slice(0,m.href.indexOf(":"));return _.indexOf(v)>-1}n.default=h,n.sanitize=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},s=function(){function _(m,v){for(var S=0;S<v.length;S++){var b=v[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,S){return v&&_(m.prototype,v),S&&_(m,S),m}}(),a=i(23),u=f(a),l=i(107),c=f(l);function f(_){return _&&_.__esModule?_:{default:_}}function d(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}var h=0;function p(_,m){_.setAttribute(m,_.getAttribute(m)!=="true")}var g=function(){function _(m){var v=this;d(this,_),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){v.togglePicker()}),this.label.addEventListener("keydown",function(S){switch(S.keyCode){case u.default.keys.ENTER:v.togglePicker();break;case u.default.keys.ESCAPE:v.escape(),S.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(_,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var S=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),v.hasAttribute("value")&&b.setAttribute("data-value",v.getAttribute("value")),v.textContent&&b.setAttribute("data-label",v.textContent),b.addEventListener("click",function(){S.selectItem(b,!0)}),b.addEventListener("keydown",function(R){switch(R.keyCode){case u.default.keys.ENTER:S.selectItem(b,!0),R.preventDefault();break;case u.default.keys.ESCAPE:S.escape(),R.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=c.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,S=document.createElement("span");S.classList.add("ql-picker-options"),S.setAttribute("aria-hidden","true"),S.tabIndex="-1",S.id="ql-picker-options-"+h,h+=1,this.label.setAttribute("aria-controls",S.id),this.options=S,[].slice.call(this.select.options).forEach(function(b){var R=v.buildItem(b);S.appendChild(R),b.selected===!0&&v.selectItem(R)}),this.container.appendChild(S)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(S){v.container.setAttribute(S.name,S.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(v!==b&&(b!=null&&b.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),S))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var R=document.createEvent("Event");R.initEvent("change",!0,!0),this.select.dispatchEvent(R)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var S=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(S)}else this.selectItem(null);var b=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),_}();n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),s=E(o),a=i(5),u=E(a),l=i(4),c=E(l),f=i(16),d=E(f),h=i(25),p=E(h),g=i(24),_=E(g),m=i(35),v=E(m),S=i(6),b=E(S),R=i(22),j=E(R),D=i(7),N=E(D),U=i(55),F=E(U),O=i(42),$=E(O),P=i(23),y=E(P);function E(C){return C&&C.__esModule?C:{default:C}}u.default.register({"blots/block":c.default,"blots/block/embed":l.BlockEmbed,"blots/break":d.default,"blots/container":p.default,"blots/cursor":_.default,"blots/embed":v.default,"blots/inline":b.default,"blots/scroll":j.default,"blots/text":N.default,"modules/clipboard":F.default,"modules/history":$.default,"modules/keyboard":y.default}),s.default.register(c.default,d.default,_.default,b.default,j.default,N.default),n.default=u.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),s=function(){function a(u){this.domNode=u,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(u){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var l;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?l=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?l=document.createElement(u):l=document.createElement(this.tagName[0])):l=document.createElement(this.tagName),this.className&&l.classList.add(this.className),l},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return o.create(u)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},a.prototype.deleteAt=function(u,l){var c=this.isolate(u,l);c.remove()},a.prototype.formatAt=function(u,l,c,f){var d=this.isolate(u,l);if(o.query(c,o.Scope.BLOT)!=null&&f)d.wrap(c,f);else if(o.query(c,o.Scope.ATTRIBUTE)!=null){var h=o.create(this.statics.scope);d.wrap(h),h.format(c,f)}},a.prototype.insertAt=function(u,l,c){var f=c==null?o.create("text",l):o.create(l,c),d=this.split(u);this.parent.insertBefore(f,d)},a.prototype.insertInto=function(u,l){l===void 0&&(l=null),this.parent!=null&&this.parent.children.remove(this);var c=null;u.children.insertBefore(this,l),l!=null&&(c=l.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=c)&&u.domNode.insertBefore(this.domNode,c),this.parent=u,this.attach()},a.prototype.isolate=function(u,l){var c=this.split(u);return c.split(l),c},a.prototype.length=function(){return 1},a.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},a.prototype.optimize=function(u){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},a.prototype.replaceWith=function(u,l){var c=typeof u=="string"?o.create(u,l):u;return c.replace(this),c},a.prototype.split=function(u,l){return u===0?this:this.next},a.prototype.update=function(u,l){},a.prototype.wrap=function(u,l){var c=typeof u=="string"?o.create(u,l):u;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a}();n.default=s},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),s=i(32),a=i(33),u=i(1),l=function(){function c(f){this.attributes={},this.domNode=f,this.build()}return c.prototype.attribute=function(f,d){d?f.add(this.domNode,d)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},c.prototype.build=function(){var f=this;this.attributes={};var d=o.default.keys(this.domNode),h=s.default.keys(this.domNode),p=a.default.keys(this.domNode);d.concat(h).concat(p).forEach(function(g){var _=u.query(g,u.Scope.ATTRIBUTE);_ instanceof o.default&&(f.attributes[_.attrName]=_)})},c.prototype.copy=function(f){var d=this;Object.keys(this.attributes).forEach(function(h){var p=d.attributes[h].value(d.domNode);f.format(h,p)})},c.prototype.move=function(f){var d=this;this.copy(f),Object.keys(this.attributes).forEach(function(h){d.attributes[h].remove(d.domNode)}),this.attributes={}},c.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(d,h){return d[h]=f.attributes[h].value(f.domNode),d},{})},c}();n.default=l},function(r,n,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){l(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(12);function a(l,c){var f=l.getAttribute("class")||"";return f.split(/\s+/).filter(function(d){return d.indexOf(c+"-")===0})}var u=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(d){return d.split("-").slice(0,-1).join("-")})},c.prototype.add=function(f,d){return this.canAdd(f,d)?(this.remove(f),f.classList.add(this.keyName+"-"+d),!0):!1},c.prototype.remove=function(f){var d=a(f,this.keyName);d.forEach(function(h){f.classList.remove(h)}),f.classList.length===0&&f.removeAttribute("class")},c.prototype.value=function(f){var d=a(f,this.keyName)[0]||"",h=d.slice(this.keyName.length+1);return this.canAdd(f,h)?h:""},c}(s.default);n.default=u},function(r,n,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){l(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(12);function a(l){var c=l.split("-"),f=c.slice(1).map(function(d){return d[0].toUpperCase()+d.slice(1)}).join("");return c[0]+f}var u=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(d){var h=d.split(":");return h[0].trim()})},c.prototype.add=function(f,d){return this.canAdd(f,d)?(f.style[a(this.keyName)]=d,!0):!1},c.prototype.remove=function(f){f.style[a(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},c.prototype.value=function(f){var d=f.style[a(this.keyName)];return this.canAdd(f,d)?d:""},c}(s.default);n.default=u},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function u(l,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}}();function s(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(l,c){s(this,u),this.quill=l,this.options=c,this.modules={}}return o(u,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(f){c.modules[f]==null&&c.addModule(f)})}},{key:"addModule",value:function(c){var f=this.quill.constructor.import("modules/"+c);return this.modules[c]=new f(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),u}();a.DEFAULTS={modules:{}},a.themes={default:a},n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(v,S){for(var b=0;b<S.length;b++){var R=S[b];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(v,R.key,R)}}return function(v,S,b){return S&&m(v.prototype,S),b&&m(v,b),v}}(),s=function m(v,S,b){v===null&&(v=Function.prototype);var R=Object.getOwnPropertyDescriptor(v,S);if(R===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:m(j,S,b)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(b)}},a=i(0),u=f(a),l=i(7),c=f(l);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function h(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function p(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var g="\uFEFF",_=function(m){p(v,m);function v(S){d(this,v);var b=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,S));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(R){b.contentNode.appendChild(R)}),b.leftGuard=document.createTextNode(g),b.rightGuard=document.createTextNode(g),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return o(v,[{key:"index",value:function(b,R){return b===this.leftGuard?0:b===this.rightGuard?1:s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,b,R)}},{key:"restore",value:function(b){var R=void 0,j=void 0,D=b.data.split(g).join("");if(b===this.leftGuard)if(this.prev instanceof c.default){var N=this.prev.length();this.prev.insertAt(N,D),R={startNode:this.prev.domNode,startOffset:N+D.length}}else j=document.createTextNode(D),this.parent.insertBefore(u.default.create(j),this),R={startNode:j,startOffset:D.length};else b===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,D),R={startNode:this.next.domNode,startOffset:D.length}):(j=document.createTextNode(D),this.parent.insertBefore(u.default.create(j),this.next),R={startNode:j,startOffset:D.length}));return b.data=g,R}},{key:"update",value:function(b,R){var j=this;b.forEach(function(D){if(D.type==="characterData"&&(D.target===j.leftGuard||D.target===j.rightGuard)){var N=j.restore(D.target);N&&(R.range=N)}})}}]),v}(u.default.Embed);n.default=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var o=i(0),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}var u={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},l=new s.default.Attributor.Attribute("align","align",u),c=new s.default.Attributor.Class("align","ql-align",u),f=new s.default.Attributor.Style("align","text-align",u);n.AlignAttribute=l,n.AlignClass=c,n.AlignStyle=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var o=i(0),s=u(o),a=i(26);function u(f){return f&&f.__esModule?f:{default:f}}var l=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});n.BackgroundClass=l,n.BackgroundStyle=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var o=i(0),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}var u={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},l=new s.default.Attributor.Attribute("direction","dir",u),c=new s.default.Attributor.Class("direction","ql-direction",u),f=new s.default.Attributor.Style("direction","direction",u);n.DirectionAttribute=l,n.DirectionClass=c,n.DirectionStyle=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var o=function(){function m(v,S){for(var b=0;b<S.length;b++){var R=S[b];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(v,R.key,R)}}return function(v,S,b){return S&&m(v.prototype,S),b&&m(v,b),v}}(),s=function m(v,S,b){v===null&&(v=Function.prototype);var R=Object.getOwnPropertyDescriptor(v,S);if(R===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:m(j,S,b)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(b)}},a=i(0),u=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function d(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var h={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new u.default.Attributor.Class("font","ql-font",h),g=function(m){d(v,m);function v(){return c(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"value",value:function(b){return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),v}(u.default.Attributor.Style),_=new g("font","font-family",h);n.FontStyle=_,n.FontClass=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var o=i(0),s=a(o);function a(c){return c&&c.__esModule?c:{default:c}}var u=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),l=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=u,n.SizeStyle=l},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var o=function(){function S(b,R){for(var j=0;j<R.length;j++){var D=R[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}return function(b,R,j){return R&&S(b.prototype,R),j&&S(b,j),b}}(),s=i(0),a=d(s),u=i(5),l=d(u),c=i(9),f=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function h(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function p(S,b){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:S}function g(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(S,b):S.__proto__=b)}var _=function(S){g(b,S);function b(R,j){h(this,b);var D=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,R,j));return D.lastRecorded=0,D.ignoreChange=!1,D.clear(),D.quill.on(l.default.events.EDITOR_CHANGE,function(N,U,F,O){N!==l.default.events.TEXT_CHANGE||D.ignoreChange||(!D.options.userOnly||O===l.default.sources.USER?D.record(U,F):D.transform(U))}),D.quill.keyboard.addBinding({key:"Z",shortKey:!0},D.undo.bind(D)),D.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},D.redo.bind(D)),/Win/i.test(navigator.platform)&&D.quill.keyboard.addBinding({key:"Y",shortKey:!0},D.redo.bind(D)),D}return o(b,[{key:"change",value:function(j,D){if(this.stack[j].length!==0){var N=this.stack[j].pop();this.stack[D].push(N),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(N[j],l.default.sources.USER),this.ignoreChange=!1;var U=v(N[j]);this.quill.setSelection(U)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(j,D){if(j.ops.length!==0){this.stack.redo=[];var N=this.quill.getContents().diff(D),U=Date.now();if(this.lastRecorded+this.options.delay>U&&this.stack.undo.length>0){var F=this.stack.undo.pop();N=N.compose(F.undo),j=F.redo.compose(j)}else this.lastRecorded=U;this.stack.undo.push({redo:j,undo:N}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(j){this.stack.undo.forEach(function(D){D.undo=j.transform(D.undo,!0),D.redo=j.transform(D.redo,!0)}),this.stack.redo.forEach(function(D){D.undo=j.transform(D.undo,!0),D.redo=j.transform(D.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(f.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(S){var b=S.ops[S.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(R){return a.default.query(R,a.default.Scope.BLOCK)!=null}):!1}function v(S){var b=S.reduce(function(j,D){return j+=D.delete||0,j},0),R=S.length()-b;return m(S)&&(R-=1),R}n.default=_,n.getLastChangeIndex=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var o=function(){function w(T,H){for(var A=0;A<H.length;A++){var k=H[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(T,k.key,k)}}return function(T,H,A){return H&&w(T.prototype,H),A&&w(T,A),T}}(),s=function w(T,H,A){T===null&&(T=Function.prototype);var k=Object.getOwnPropertyDescriptor(T,H);if(k===void 0){var q=Object.getPrototypeOf(T);return q===null?void 0:w(q,H,A)}else{if("value"in k)return k.value;var z=k.get;return z===void 0?void 0:z.call(A)}},a=i(3),u=U(a),l=i(2),c=U(l),f=i(8),d=U(f),h=i(23),p=U(h),g=i(34),_=U(g),m=i(59),v=U(m),S=i(60),b=U(S),R=i(28),j=U(R),D=i(61),N=U(D);function U(w){return w&&w.__esModule?w:{default:w}}function F(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function O(w,T){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:w}function $(w,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);w.prototype=Object.create(T&&T.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(w,T):w.__proto__=T)}var P=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],E=[!1,"serif","monospace"],C=["1","2","3",!1],B=["small",!1,"large","huge"],L=function(w){$(T,w);function T(H,A){F(this,T);var k=O(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,H,A)),q=function z(V){if(!document.body.contains(H.root))return document.body.removeEventListener("click",z);k.tooltip!=null&&!k.tooltip.root.contains(V.target)&&document.activeElement!==k.tooltip.textbox&&!k.quill.hasFocus()&&k.tooltip.hide(),k.pickers!=null&&k.pickers.forEach(function(W){W.container.contains(V.target)||W.close()})};return H.emitter.listenDOM("click",document.body,q),k}return o(T,[{key:"addModule",value:function(A){var k=s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"addModule",this).call(this,A);return A==="toolbar"&&this.extendToolbar(k),k}},{key:"buildButtons",value:function(A,k){A.forEach(function(q){var z=q.getAttribute("class")||"";z.split(/\s+/).forEach(function(V){if(V.startsWith("ql-")&&(V=V.slice(3),k[V]!=null))if(V==="direction")q.innerHTML=k[V][""]+k[V].rtl;else if(typeof k[V]=="string")q.innerHTML=k[V];else{var W=q.value||"";W!=null&&k[V][W]&&(q.innerHTML=k[V][W])}})})}},{key:"buildPickers",value:function(A,k){var q=this;this.pickers=A.map(function(V){if(V.classList.contains("ql-align"))return V.querySelector("option")==null&&x(V,P),new b.default(V,k.align);if(V.classList.contains("ql-background")||V.classList.contains("ql-color")){var W=V.classList.contains("ql-background")?"background":"color";return V.querySelector("option")==null&&x(V,y,W==="background"?"#ffffff":"#000000"),new v.default(V,k[W])}else return V.querySelector("option")==null&&(V.classList.contains("ql-font")?x(V,E):V.classList.contains("ql-header")?x(V,C):V.classList.contains("ql-size")&&x(V,B)),new j.default(V)});var z=function(){q.pickers.forEach(function(W){W.update()})};this.quill.on(d.default.events.EDITOR_CHANGE,z)}}]),T}(_.default);L.DEFAULTS=(0,u.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var T=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var A=new FileReader;A.onload=function(k){var q=T.quill.getSelection(!0);T.quill.updateContents(new c.default().retain(q.index).delete(q.length).insert({image:k.target.result}),d.default.sources.USER),T.quill.setSelection(q.index+1,d.default.sources.SILENT),H.value=""},A.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var M=function(w){$(T,w);function T(H,A){F(this,T);var k=O(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,H,A));return k.textbox=k.root.querySelector('input[type="text"]'),k.listen(),k}return o(T,[{key:"listen",value:function(){var A=this;this.textbox.addEventListener("keydown",function(k){p.default.match(k,"enter")?(A.save(),k.preventDefault()):p.default.match(k,"escape")&&(A.cancel(),k.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),k!=null?this.textbox.value=k:A!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+A)||""),this.root.setAttribute("data-mode",A)}},{key:"restoreFocus",value:function(){var A=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=A}},{key:"save",value:function(){var A=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var k=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",A,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",A,d.default.sources.USER)),this.quill.root.scrollTop=k;break}case"video":A=I(A);case"formula":{if(!A)break;var q=this.quill.getSelection(!0);if(q!=null){var z=q.index+q.length;this.quill.insertEmbed(z,this.root.getAttribute("data-mode"),A,d.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(z+1," ",d.default.sources.USER),this.quill.setSelection(z+2,d.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),T}(N.default);function I(w){var T=w.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||w.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return T?(T[1]||"https")+"://www.youtube.com/embed/"+T[2]+"?showinfo=0":(T=w.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(T[1]||"https")+"://player.vimeo.com/video/"+T[2]+"/":w}function x(w,T){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;T.forEach(function(A){var k=document.createElement("option");A===H?k.setAttribute("selected","selected"):k.setAttribute("value",A),w.appendChild(k)})}n.BaseTooltip=M,n.default=L},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},s.prototype.contains=function(a){for(var u,l=this.iterator();u=l();)if(u===a)return!0;return!1},s.prototype.insertBefore=function(a,u){a&&(a.next=u,u!=null?(a.prev=u.prev,u.prev!=null&&(u.prev.next=a),u.prev=a,u===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},s.prototype.offset=function(a){for(var u=0,l=this.head;l!=null;){if(l===a)return u;u+=l.length(),l=l.next}return-1},s.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},s.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var u=a;return a!=null&&(a=a.next),u}},s.prototype.find=function(a,u){u===void 0&&(u=!1);for(var l,c=this.iterator();l=c();){var f=l.length();if(a<f||u&&a===f&&(l.next==null||l.next.length()!==0))return[l,a];a-=f}return[null,0]},s.prototype.forEach=function(a){for(var u,l=this.iterator();u=l();)a(u)},s.prototype.forEachAt=function(a,u,l){if(!(u<=0))for(var c=this.find(a),f=c[0],d=c[1],h,p=a-d,g=this.iterator(f);(h=g())&&p<a+u;){var _=h.length();a>p?l(h,a-p,Math.min(u,p+_-a)):l(h,0,Math.min(_,a+u-p)),p+=_}},s.prototype.map=function(a){return this.reduce(function(u,l){return u.push(a(l)),u},[])},s.prototype.reduce=function(a,u){for(var l,c=this.iterator();l=c();)u=a(u,l);return u},s}();n.default=o},function(r,n,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var p in h)h.hasOwnProperty(p)&&(d[p]=h[p])};return function(d,h){f(d,h);function p(){this.constructor=d}d.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(17),a=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=100,c=function(f){o(d,f);function d(h){var p=f.call(this,h)||this;return p.scroll=p,p.observer=new MutationObserver(function(g){p.update(g)}),p.observer.observe(p.domNode,u),p.attach(),p}return d.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(h,p){this.update(),h===0&&p===this.length()?this.children.forEach(function(g){g.remove()}):f.prototype.deleteAt.call(this,h,p)},d.prototype.formatAt=function(h,p,g,_){this.update(),f.prototype.formatAt.call(this,h,p,g,_)},d.prototype.insertAt=function(h,p,g){this.update(),f.prototype.insertAt.call(this,h,p,g)},d.prototype.optimize=function(h,p){var g=this;h===void 0&&(h=[]),p===void 0&&(p={}),f.prototype.optimize.call(this,p);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)h.push(_.pop());for(var m=function(R,j){j===void 0&&(j=!0),!(R==null||R===g)&&R.domNode.parentNode!=null&&(R.domNode[a.DATA_KEY].mutations==null&&(R.domNode[a.DATA_KEY].mutations=[]),j&&m(R.parent))},v=function(R){R.domNode[a.DATA_KEY]==null||R.domNode[a.DATA_KEY].mutations==null||(R instanceof s.default&&R.children.forEach(v),R.optimize(p))},S=h,b=0;S.length>0;b+=1){if(b>=l)throw new Error("[Parchment] Maximum optimize iterations reached");for(S.forEach(function(R){var j=a.find(R.target,!0);j!=null&&(j.domNode===R.target&&(R.type==="childList"?(m(a.find(R.previousSibling,!1)),[].forEach.call(R.addedNodes,function(D){var N=a.find(D,!1);m(N,!1),N instanceof s.default&&N.children.forEach(function(U){m(U,!1)})})):R.type==="attributes"&&m(j.prev)),m(j))}),this.children.forEach(v),S=[].slice.call(this.observer.takeRecords()),_=S.slice();_.length>0;)h.push(_.pop())}},d.prototype.update=function(h,p){var g=this;p===void 0&&(p={}),h=h||this.observer.takeRecords(),h.map(function(_){var m=a.find(_.target,!0);return m==null?null:m.domNode[a.DATA_KEY].mutations==null?(m.domNode[a.DATA_KEY].mutations=[_],m):(m.domNode[a.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_==null||_===g||_.domNode[a.DATA_KEY]==null||_.update(_.domNode[a.DATA_KEY].mutations||[],p)}),this.domNode[a.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,p),this.optimize(h,p)},d.blotName="scroll",d.defaultChild="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="DIV",d}(s.default);n.default=c},function(r,n,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var h in d)d.hasOwnProperty(h)&&(f[h]=d[h])};return function(f,d){c(f,d);function h(){this.constructor=f}f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(18),a=i(1);function u(c,f){if(Object.keys(c).length!==Object.keys(f).length)return!1;for(var d in c)if(c[d]!==f[d])return!1;return!0}var l=function(c){o(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.formats=function(d){if(d.tagName!==f.tagName)return c.formats.call(this,d)},f.prototype.format=function(d,h){var p=this;d===this.statics.blotName&&!h?(this.children.forEach(function(g){g instanceof s.default||(g=g.wrap(f.blotName,!0)),p.attributes.copy(g)}),this.unwrap()):c.prototype.format.call(this,d,h)},f.prototype.formatAt=function(d,h,p,g){if(this.formats()[p]!=null||a.query(p,a.Scope.ATTRIBUTE)){var _=this.isolate(d,h);_.format(p,g)}else c.prototype.formatAt.call(this,d,h,p,g)},f.prototype.optimize=function(d){c.prototype.optimize.call(this,d);var h=this.formats();if(Object.keys(h).length===0)return this.unwrap();var p=this.next;p instanceof f&&p.prev===this&&u(h,p.formats())&&(p.moveChildren(this),p.remove())},f.blotName="inline",f.scope=a.Scope.INLINE_BLOT,f.tagName="SPAN",f}(s.default);n.default=l},function(r,n,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){l(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(18),a=i(1),u=function(l){o(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.formats=function(f){var d=a.query(c.blotName).tagName;if(f.tagName!==d)return l.formats.call(this,f)},c.prototype.format=function(f,d){a.query(f,a.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!d?this.replaceWith(c.blotName):l.prototype.format.call(this,f,d))},c.prototype.formatAt=function(f,d,h,p){a.query(h,a.Scope.BLOCK)!=null?this.format(h,p):l.prototype.formatAt.call(this,f,d,h,p)},c.prototype.insertAt=function(f,d,h){if(h==null||a.query(d,a.Scope.INLINE)!=null)l.prototype.insertAt.call(this,f,d,h);else{var p=this.split(f),g=a.create(d,h);p.parent.insertBefore(g,p)}},c.prototype.update=function(f,d){navigator.userAgent.match(/Trident/)?this.build():l.prototype.update.call(this,f,d)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c}(s.default);n.default=u},function(r,n,i){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])};return function(l,c){u(l,c);function f(){this.constructor=l}l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(19),a=function(u){o(l,u);function l(){return u!==null&&u.apply(this,arguments)||this}return l.formats=function(c){},l.prototype.format=function(c,f){u.prototype.formatAt.call(this,0,this.length(),c,f)},l.prototype.formatAt=function(c,f,d,h){c===0&&f===this.length()?this.format(d,h):u.prototype.formatAt.call(this,c,f,d,h)},l.prototype.formats=function(){return this.statics.formats(this.domNode)},l}(s.default);n.default=a},function(r,n,i){var o=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){l(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=i(19),a=i(1),u=function(l){o(c,l);function c(f){var d=l.call(this,f)||this;return d.text=d.statics.value(d.domNode),d}return c.create=function(f){return document.createTextNode(f)},c.value=function(f){var d=f.data;return d.normalize&&(d=d.normalize()),d},c.prototype.deleteAt=function(f,d){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+d)},c.prototype.index=function(f,d){return this.domNode===f?d:-1},c.prototype.insertAt=function(f,d,h){h==null?(this.text=this.text.slice(0,f)+d+this.text.slice(f),this.domNode.data=this.text):l.prototype.insertAt.call(this,f,d,h)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(f){l.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(f,d){return[this.domNode,f]},c.prototype.split=function(f,d){if(d===void 0&&(d=!1),!d){if(f===0)return this;if(f===this.length())return this.next}var h=a.create(this.domNode.splitText(f));return this.parent.insertBefore(h,this.next),this.text=this.statics.value(this.domNode),h},c.prototype.update=function(f,d){var h=this;f.some(function(p){return p.type==="characterData"&&p.target===h.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c}(s.default);n.default=u},function(r,n,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,u){return arguments.length>1&&!this.contains(a)==!u?u:s.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,u){return u=u||0,this.substr(u,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,u){var l=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>l.length)&&(u=l.length),u-=a.length;var c=l.indexOf(a,u);return c!==-1&&c===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var l=Object(this),c=l.length>>>0,f=arguments[1],d,h=0;h<c;h++)if(d=l[h],u.call(f,d,h,l))return d}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,o=1,s=0;function a(b,R,j){if(b==R)return b?[[s,b]]:[];(j<0||b.length<j)&&(j=null);var D=f(b,R),N=b.substring(0,D);b=b.substring(D),R=R.substring(D),D=d(b,R);var U=b.substring(b.length-D);b=b.substring(0,b.length-D),R=R.substring(0,R.length-D);var F=u(b,R);return N&&F.unshift([s,N]),U&&F.push([s,U]),p(F),j!=null&&(F=m(F,j)),F=v(F),F}function u(b,R){var j;if(!b)return[[o,R]];if(!R)return[[i,b]];var D=b.length>R.length?b:R,N=b.length>R.length?R:b,U=D.indexOf(N);if(U!=-1)return j=[[o,D.substring(0,U)],[s,N],[o,D.substring(U+N.length)]],b.length>R.length&&(j[0][0]=j[2][0]=i),j;if(N.length==1)return[[i,b],[o,R]];var F=h(b,R);if(F){var O=F[0],$=F[1],P=F[2],y=F[3],E=F[4],C=a(O,P),B=a($,y);return C.concat([[s,E]],B)}return l(b,R)}function l(b,R){for(var j=b.length,D=R.length,N=Math.ceil((j+D)/2),U=N,F=2*N,O=new Array(F),$=new Array(F),P=0;P<F;P++)O[P]=-1,$[P]=-1;O[U+1]=0,$[U+1]=0;for(var y=j-D,E=y%2!=0,C=0,B=0,L=0,M=0,I=0;I<N;I++){for(var x=-I+C;x<=I-B;x+=2){var w=U+x,T;x==-I||x!=I&&O[w-1]<O[w+1]?T=O[w+1]:T=O[w-1]+1;for(var H=T-x;T<j&&H<D&&b.charAt(T)==R.charAt(H);)T++,H++;if(O[w]=T,T>j)B+=2;else if(H>D)C+=2;else if(E){var A=U+y-x;if(A>=0&&A<F&&$[A]!=-1){var k=j-$[A];if(T>=k)return c(b,R,T,H)}}}for(var q=-I+L;q<=I-M;q+=2){var A=U+q,k;q==-I||q!=I&&$[A-1]<$[A+1]?k=$[A+1]:k=$[A-1]+1;for(var z=k-q;k<j&&z<D&&b.charAt(j-k-1)==R.charAt(D-z-1);)k++,z++;if($[A]=k,k>j)M+=2;else if(z>D)L+=2;else if(!E){var w=U+y-q;if(w>=0&&w<F&&O[w]!=-1){var T=O[w],H=U+T-w;if(k=j-k,T>=k)return c(b,R,T,H)}}}}return[[i,b],[o,R]]}function c(b,R,j,D){var N=b.substring(0,j),U=R.substring(0,D),F=b.substring(j),O=R.substring(D),$=a(N,U),P=a(F,O);return $.concat(P)}function f(b,R){if(!b||!R||b.charAt(0)!=R.charAt(0))return 0;for(var j=0,D=Math.min(b.length,R.length),N=D,U=0;j<N;)b.substring(U,N)==R.substring(U,N)?(j=N,U=j):D=N,N=Math.floor((D-j)/2+j);return N}function d(b,R){if(!b||!R||b.charAt(b.length-1)!=R.charAt(R.length-1))return 0;for(var j=0,D=Math.min(b.length,R.length),N=D,U=0;j<N;)b.substring(b.length-N,b.length-U)==R.substring(R.length-N,R.length-U)?(j=N,U=j):D=N,N=Math.floor((D-j)/2+j);return N}function h(b,R){var j=b.length>R.length?b:R,D=b.length>R.length?R:b;if(j.length<4||D.length*2<j.length)return null;function N(B,L,M){for(var I=B.substring(M,M+Math.floor(B.length/4)),x=-1,w="",T,H,A,k;(x=L.indexOf(I,x+1))!=-1;){var q=f(B.substring(M),L.substring(x)),z=d(B.substring(0,M),L.substring(0,x));w.length<z+q&&(w=L.substring(x-z,x)+L.substring(x,x+q),T=B.substring(0,M-z),H=B.substring(M+q),A=L.substring(0,x-z),k=L.substring(x+q))}return w.length*2>=B.length?[T,H,A,k,w]:null}var U=N(j,D,Math.ceil(j.length/4)),F=N(j,D,Math.ceil(j.length/2)),O;if(!U&&!F)return null;F?U?O=U[4].length>F[4].length?U:F:O=F:O=U;var $,P,y,E;b.length>R.length?($=O[0],P=O[1],y=O[2],E=O[3]):(y=O[0],E=O[1],$=O[2],P=O[3]);var C=O[4];return[$,P,y,E,C]}function p(b){b.push([s,""]);for(var R=0,j=0,D=0,N="",U="",F;R<b.length;)switch(b[R][0]){case o:D++,U+=b[R][1],R++;break;case i:j++,N+=b[R][1],R++;break;case s:j+D>1?(j!==0&&D!==0&&(F=f(U,N),F!==0&&(R-j-D>0&&b[R-j-D-1][0]==s?b[R-j-D-1][1]+=U.substring(0,F):(b.splice(0,0,[s,U.substring(0,F)]),R++),U=U.substring(F),N=N.substring(F)),F=d(U,N),F!==0&&(b[R][1]=U.substring(U.length-F)+b[R][1],U=U.substring(0,U.length-F),N=N.substring(0,N.length-F))),j===0?b.splice(R-D,j+D,[o,U]):D===0?b.splice(R-j,j+D,[i,N]):b.splice(R-j-D,j+D,[i,N],[o,U]),R=R-j-D+(j?1:0)+(D?1:0)+1):R!==0&&b[R-1][0]==s?(b[R-1][1]+=b[R][1],b.splice(R,1)):R++,D=0,j=0,N="",U="";break}b[b.length-1][1]===""&&b.pop();var O=!1;for(R=1;R<b.length-1;)b[R-1][0]==s&&b[R+1][0]==s&&(b[R][1].substring(b[R][1].length-b[R-1][1].length)==b[R-1][1]?(b[R][1]=b[R-1][1]+b[R][1].substring(0,b[R][1].length-b[R-1][1].length),b[R+1][1]=b[R-1][1]+b[R+1][1],b.splice(R-1,1),O=!0):b[R][1].substring(0,b[R+1][1].length)==b[R+1][1]&&(b[R-1][1]+=b[R+1][1],b[R][1]=b[R][1].substring(b[R+1][1].length)+b[R+1][1],b.splice(R+1,1),O=!0)),R++;O&&p(b)}var g=a;g.INSERT=o,g.DELETE=i,g.EQUAL=s,r.exports=g;function _(b,R){if(R===0)return[s,b];for(var j=0,D=0;D<b.length;D++){var N=b[D];if(N[0]===i||N[0]===s){var U=j+N[1].length;if(R===U)return[D+1,b];if(R<U){b=b.slice();var F=R-j,O=[N[0],N[1].slice(0,F)],$=[N[0],N[1].slice(F)];return b.splice(D,1,O,$),[D+1,b]}else j=U}}throw new Error("cursor_pos is out of bounds!")}function m(b,R){var j=_(b,R),D=j[1],N=j[0],U=D[N],F=D[N+1];if(U==null)return b;if(U[0]!==s)return b;if(F!=null&&U[1]+F[1]===F[1]+U[1])return D.splice(N,2,F,U),S(D,N,2);if(F!=null&&F[1].indexOf(U[1])===0){D.splice(N,2,[F[0],U[1]],[0,U[1]]);var O=F[1].slice(U[1].length);return O.length>0&&D.splice(N+2,0,[F[0],O]),S(D,N,3)}else return b}function v(b){for(var R=!1,j=function(F){return F.charCodeAt(0)>=56320&&F.charCodeAt(0)<=57343},D=function(F){return F.charCodeAt(F.length-1)>=55296&&F.charCodeAt(F.length-1)<=56319},N=2;N<b.length;N+=1)b[N-2][0]===s&&D(b[N-2][1])&&b[N-1][0]===i&&j(b[N-1][1])&&b[N][0]===o&&j(b[N][1])&&(R=!0,b[N-1][1]=b[N-2][1].slice(-1)+b[N-1][1],b[N][1]=b[N-2][1].slice(-1)+b[N][1],b[N-2][1]=b[N-2][1].slice(0,-1));if(!R)return b;for(var U=[],N=0;N<b.length;N+=1)b[N][1].length>0&&U.push(b[N]);return U}function S(b,R,j){for(var D=R+j-1;D>=0&&D>=R-1;D--)if(D+1<b.length){var N=b[D],U=b[D+1];N[0]===U[1]&&b.splice(D,2,[N[0],N[1]+U[1]])}return b}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(o){var s=[];for(var a in o)s.push(a);return s}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?o:s,n.supported=o;function o(a){return Object.prototype.toString.call(a)=="[object Arguments]"}n.unsupported=s;function s(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function a(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)i.call(f,d)&&c.push(o?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},u.prototype.listeners=function(c,f){var d=o?o+c:c,h=this._events[d];if(f)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,_=new Array(g);p<g;p++)_[p]=h[p].fn;return _},u.prototype.emit=function(c,f,d,h,p,g){var _=o?o+c:c;if(!this._events[_])return!1;var m=this._events[_],v=arguments.length,S,b;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,d),!0;case 4:return m.fn.call(m.context,f,d,h),!0;case 5:return m.fn.call(m.context,f,d,h,p),!0;case 6:return m.fn.call(m.context,f,d,h,p,g),!0}for(b=1,S=new Array(v-1);b<v;b++)S[b-1]=arguments[b];m.fn.apply(m.context,S)}else{var R=m.length,j;for(b=0;b<R;b++)switch(m[b].once&&this.removeListener(c,m[b].fn,void 0,!0),v){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,f);break;case 3:m[b].fn.call(m[b].context,f,d);break;case 4:m[b].fn.call(m[b].context,f,d,h);break;default:if(!S)for(j=1,S=new Array(v-1);j<v;j++)S[j-1]=arguments[j];m[b].fn.apply(m[b].context,S)}}return!0},u.prototype.on=function(c,f,d){var h=new a(f,d||this),p=o?o+c:c;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],h]:this._events[p].push(h):(this._events[p]=h,this._eventsCount++),this},u.prototype.once=function(c,f,d){var h=new a(f,d||this,!0),p=o?o+c:c;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],h]:this._events[p].push(h):(this._events[p]=h,this._eventsCount++),this},u.prototype.removeListener=function(c,f,d,h){var p=o?o+c:c;if(!this._events[p])return this;if(!f)return--this._eventsCount===0?this._events=new s:delete this._events[p],this;var g=this._events[p];if(g.fn)g.fn===f&&(!h||g.once)&&(!d||g.context===d)&&(--this._eventsCount===0?this._events=new s:delete this._events[p]);else{for(var _=0,m=[],v=g.length;_<v;_++)(g[_].fn!==f||h&&!g[_].once||d&&g[_].context!==d)&&m.push(g[_]);m.length?this._events[p]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new s:delete this._events[p]}return this},u.prototype.removeAllListeners=function(c){var f;return c?(f=o?o+c:c,this._events[f]&&(--this._eventsCount===0?this._events=new s:delete this._events[f])):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=o,u.EventEmitter=u,typeof r<"u"&&(r.exports=u)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},s=function(){function Q(ee,ne){var ce=[],se=!0,ye=!1,ae=void 0;try{for(var K=ee[Symbol.iterator](),X;!(se=(X=K.next()).done)&&(ce.push(X.value),!(ne&&ce.length===ne));se=!0);}catch(Z){ye=!0,ae=Z}finally{try{!se&&K.return&&K.return()}finally{if(ye)throw ae}}return ce}return function(ee,ne){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return Q(ee,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function Q(ee,ne){for(var ce=0;ce<ne.length;ce++){var se=ne[ce];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ee,se.key,se)}}return function(ee,ne,ce){return ne&&Q(ee.prototype,ne),ce&&Q(ee,ce),ee}}(),u=i(3),l=$(u),c=i(2),f=$(c),d=i(0),h=$(d),p=i(5),g=$(p),_=i(10),m=$(_),v=i(9),S=$(v),b=i(36),R=i(37),j=i(13),D=$(j),N=i(26),U=i(38),F=i(39),O=i(40);function $(Q){return Q&&Q.__esModule?Q:{default:Q}}function P(Q,ee,ne){return ee in Q?Object.defineProperty(Q,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Q[ee]=ne,Q}function y(Q,ee){if(!(Q instanceof ee))throw new TypeError("Cannot call a class as a function")}function E(Q,ee){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:Q}function C(Q,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);Q.prototype=Object.create(ee&&ee.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,ee):Q.__proto__=ee)}var B=(0,m.default)("quill:clipboard"),L="__ql-matcher",M=[[Node.TEXT_NODE,ve],[Node.TEXT_NODE,ie],["br",J],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,V],[Node.ELEMENT_NODE,Ie],["li",pe],["b",z.bind(z,"bold")],["i",z.bind(z,"italic")],["style",Y]],I=[b.AlignAttribute,U.DirectionAttribute].reduce(function(Q,ee){return Q[ee.keyName]=ee,Q},{}),x=[b.AlignStyle,R.BackgroundStyle,N.ColorStyle,U.DirectionStyle,F.FontStyle,O.SizeStyle].reduce(function(Q,ee){return Q[ee.keyName]=ee,Q},{}),w=function(Q){C(ee,Q);function ee(ne,ce){y(this,ee);var se=E(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,ne,ce));return se.quill.root.addEventListener("paste",se.onPaste.bind(se)),se.container=se.quill.addContainer("ql-clipboard"),se.container.setAttribute("contenteditable",!0),se.container.setAttribute("tabindex",-1),se.matchers=[],M.concat(se.options.matchers).forEach(function(ye){var ae=s(ye,2),K=ae[0],X=ae[1];!ce.matchVisual&&X===le||se.addMatcher(K,X)}),se}return a(ee,[{key:"addMatcher",value:function(ce,se){this.matchers.push([ce,se])}},{key:"convert",value:function(ce){if(typeof ce=="string")return this.container.innerHTML=ce.replace(/\>\r?\n +\</g,"><"),this.convert();var se=this.quill.getFormat(this.quill.selection.savedRange.index);if(se[D.default.blotName]){var ye=this.container.innerText;return this.container.innerHTML="",new f.default().insert(ye,P({},D.default.blotName,se[D.default.blotName]))}var ae=this.prepareMatching(),K=s(ae,2),X=K[0],Z=K[1],ue=q(this.container,X,Z);return A(ue,`
`)&&ue.ops[ue.ops.length-1].attributes==null&&(ue=ue.compose(new f.default().retain(ue.length()-1).delete(1))),B.log("convert",this.container.innerHTML,ue),this.container.innerHTML="",ue}},{key:"dangerouslyPasteHTML",value:function(ce,se){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof ce=="string")this.quill.setContents(this.convert(ce),se),this.quill.setSelection(0,g.default.sources.SILENT);else{var ae=this.convert(se);this.quill.updateContents(new f.default().retain(ce).concat(ae),ye),this.quill.setSelection(ce+ae.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(ce){var se=this;if(!(ce.defaultPrevented||!this.quill.isEnabled())){var ye=this.quill.getSelection(),ae=new f.default().retain(ye.index),K=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){ae=ae.concat(se.convert()).delete(ye.length),se.quill.updateContents(ae,g.default.sources.USER),se.quill.setSelection(ae.length()-ye.length,g.default.sources.SILENT),se.quill.scrollingContainer.scrollTop=K,se.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ce=this,se=[],ye=[];return this.matchers.forEach(function(ae){var K=s(ae,2),X=K[0],Z=K[1];switch(X){case Node.TEXT_NODE:ye.push(Z);break;case Node.ELEMENT_NODE:se.push(Z);break;default:[].forEach.call(ce.container.querySelectorAll(X),function(ue){ue[L]=ue[L]||[],ue[L].push(Z)});break}}),[se,ye]}}]),ee}(S.default);w.DEFAULTS={matchers:[],matchVisual:!0};function T(Q,ee,ne){return(typeof ee>"u"?"undefined":o(ee))==="object"?Object.keys(ee).reduce(function(ce,se){return T(ce,se,ee[se])},Q):Q.reduce(function(ce,se){return se.attributes&&se.attributes[ee]?ce.push(se):ce.insert(se.insert,(0,l.default)({},P({},ee,ne),se.attributes))},new f.default)}function H(Q){if(Q.nodeType!==Node.ELEMENT_NODE)return{};var ee="__ql-computed-style";return Q[ee]||(Q[ee]=window.getComputedStyle(Q))}function A(Q,ee){for(var ne="",ce=Q.ops.length-1;ce>=0&&ne.length<ee.length;--ce){var se=Q.ops[ce];if(typeof se.insert!="string")break;ne=se.insert+ne}return ne.slice(-1*ee.length)===ee}function k(Q){if(Q.childNodes.length===0)return!1;var ee=H(Q);return["block","list-item"].indexOf(ee.display)>-1}function q(Q,ee,ne){return Q.nodeType===Q.TEXT_NODE?ne.reduce(function(ce,se){return se(Q,ce)},new f.default):Q.nodeType===Q.ELEMENT_NODE?[].reduce.call(Q.childNodes||[],function(ce,se){var ye=q(se,ee,ne);return se.nodeType===Q.ELEMENT_NODE&&(ye=ee.reduce(function(ae,K){return K(se,ae)},ye),ye=(se[L]||[]).reduce(function(ae,K){return K(se,ae)},ye)),ce.concat(ye)},new f.default):new f.default}function z(Q,ee,ne){return T(ne,Q,!0)}function V(Q,ee){var ne=h.default.Attributor.Attribute.keys(Q),ce=h.default.Attributor.Class.keys(Q),se=h.default.Attributor.Style.keys(Q),ye={};return ne.concat(ce).concat(se).forEach(function(ae){var K=h.default.query(ae,h.default.Scope.ATTRIBUTE);K!=null&&(ye[K.attrName]=K.value(Q),ye[K.attrName])||(K=I[ae],K!=null&&(K.attrName===ae||K.keyName===ae)&&(ye[K.attrName]=K.value(Q)||void 0),K=x[ae],K!=null&&(K.attrName===ae||K.keyName===ae)&&(K=x[ae],ye[K.attrName]=K.value(Q)||void 0))}),Object.keys(ye).length>0&&(ee=T(ee,ye)),ee}function W(Q,ee){var ne=h.default.query(Q);if(ne==null)return ee;if(ne.prototype instanceof h.default.Embed){var ce={},se=ne.value(Q);se!=null&&(ce[ne.blotName]=se,ee=new f.default().insert(ce,ne.formats(Q)))}else typeof ne.formats=="function"&&(ee=T(ee,ne.blotName,ne.formats(Q)));return ee}function J(Q,ee){return A(ee,`
`)||ee.insert(`
`),ee}function Y(){return new f.default}function pe(Q,ee){var ne=h.default.query(Q);if(ne==null||ne.blotName!=="list-item"||!A(ee,`
`))return ee;for(var ce=-1,se=Q.parentNode;!se.classList.contains("ql-clipboard");)(h.default.query(se)||{}).blotName==="list"&&(ce+=1),se=se.parentNode;return ce<=0?ee:ee.compose(new f.default().retain(ee.length()-1).retain(1,{indent:ce}))}function ie(Q,ee){return A(ee,`
`)||(k(Q)||ee.length()>0&&Q.nextSibling&&k(Q.nextSibling))&&ee.insert(`
`),ee}function le(Q,ee){if(k(Q)&&Q.nextElementSibling!=null&&!A(ee,`

`)){var ne=Q.offsetHeight+parseFloat(H(Q).marginTop)+parseFloat(H(Q).marginBottom);Q.nextElementSibling.offsetTop>Q.offsetTop+ne*1.5&&ee.insert(`
`)}return ee}function Ie(Q,ee){var ne={},ce=Q.style||{};return ce.fontStyle&&H(Q).fontStyle==="italic"&&(ne.italic=!0),ce.fontWeight&&(H(Q).fontWeight.startsWith("bold")||parseInt(H(Q).fontWeight)>=700)&&(ne.bold=!0),Object.keys(ne).length>0&&(ee=T(ee,ne)),parseFloat(ce.textIndent||0)>0&&(ee=new f.default().insert("	").concat(ee)),ee}function ve(Q,ee){var ne=Q.data;if(Q.parentNode.tagName==="O:P")return ee.insert(ne.trim());if(ne.trim().length===0&&Q.parentNode.classList.contains("ql-clipboard"))return ee;if(!H(Q.parentNode).whiteSpace.startsWith("pre")){var ce=function(ye,ae){return ae=ae.replace(/[^\u00a0]/g,""),ae.length<1&&ye?" ":ae};ne=ne.replace(/\r\n/g," ").replace(/\n/g," "),ne=ne.replace(/\s\s+/g,ce.bind(ce,!0)),(Q.previousSibling==null&&k(Q.parentNode)||Q.previousSibling!=null&&k(Q.previousSibling))&&(ne=ne.replace(/^\s+/,ce.bind(ce,!1))),(Q.nextSibling==null&&k(Q.parentNode)||Q.nextSibling!=null&&k(Q.nextSibling))&&(ne=ne.replace(/\s+$/,ce.bind(ce,!1)))}return ee.insert(ne)}n.default=w,n.matchAttributor=V,n.matchBlot=W,n.matchNewline=ie,n.matchSpacing=le,n.matchText=ve},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(g,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,_,m){return _&&p(g.prototype,_),m&&p(g,m),g}}(),s=function p(g,_,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,_);if(v===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:p(S,_,m)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(m)}},a=i(6),u=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){d(g,p);function g(){return c(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"optimize",value:function(m){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(u.default);h.blotName="bold",h.tagName=["STRONG","B"],n.default=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var o=function(){function O($,P){var y=[],E=!0,C=!1,B=void 0;try{for(var L=$[Symbol.iterator](),M;!(E=(M=L.next()).done)&&(y.push(M.value),!(P&&y.length===P));E=!0);}catch(I){C=!0,B=I}finally{try{!E&&L.return&&L.return()}finally{if(C)throw B}}return y}return function($,P){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return O($,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function O($,P){for(var y=0;y<P.length;y++){var E=P[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty($,E.key,E)}}return function($,P,y){return P&&O($.prototype,P),y&&O($,y),$}}(),a=i(2),u=m(a),l=i(0),c=m(l),f=i(5),d=m(f),h=i(10),p=m(h),g=i(9),_=m(g);function m(O){return O&&O.__esModule?O:{default:O}}function v(O,$,P){return $ in O?Object.defineProperty(O,$,{value:P,enumerable:!0,configurable:!0,writable:!0}):O[$]=P,O}function S(O,$){if(!(O instanceof $))throw new TypeError("Cannot call a class as a function")}function b(O,$){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:O}function R(O,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);O.prototype=Object.create($&&$.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(O,$):O.__proto__=$)}var j=(0,p.default)("quill:toolbar"),D=function(O){R($,O);function $(P,y){S(this,$);var E=b(this,($.__proto__||Object.getPrototypeOf($)).call(this,P,y));if(Array.isArray(E.options.container)){var C=document.createElement("div");U(C,E.options.container),P.container.parentNode.insertBefore(C,P.container),E.container=C}else typeof E.options.container=="string"?E.container=document.querySelector(E.options.container):E.container=E.options.container;if(!(E.container instanceof HTMLElement)){var B;return B=j.error("Container required for toolbar",E.options),b(E,B)}return E.container.classList.add("ql-toolbar"),E.controls=[],E.handlers={},Object.keys(E.options.handlers).forEach(function(L){E.addHandler(L,E.options.handlers[L])}),[].forEach.call(E.container.querySelectorAll("button, select"),function(L){E.attach(L)}),E.quill.on(d.default.events.EDITOR_CHANGE,function(L,M){L===d.default.events.SELECTION_CHANGE&&E.update(M)}),E.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var L=E.quill.selection.getRange(),M=o(L,1),I=M[0];E.update(I)}),E}return s($,[{key:"addHandler",value:function(y,E){this.handlers[y]=E}},{key:"attach",value:function(y){var E=this,C=[].find.call(y.classList,function(L){return L.indexOf("ql-")===0});if(C){if(C=C.slice(3),y.tagName==="BUTTON"&&y.setAttribute("type","button"),this.handlers[C]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[C]==null){j.warn("ignoring attaching to disabled format",C,y);return}if(c.default.query(C)==null){j.warn("ignoring attaching to nonexistent format",C,y);return}}var B=y.tagName==="SELECT"?"change":"click";y.addEventListener(B,function(L){var M=void 0;if(y.tagName==="SELECT"){if(y.selectedIndex<0)return;var I=y.options[y.selectedIndex];I.hasAttribute("selected")?M=!1:M=I.value||!1}else y.classList.contains("ql-active")?M=!1:M=y.value||!y.hasAttribute("value"),L.preventDefault();E.quill.focus();var x=E.quill.selection.getRange(),w=o(x,1),T=w[0];if(E.handlers[C]!=null)E.handlers[C].call(E,M);else if(c.default.query(C).prototype instanceof c.default.Embed){if(M=prompt("Enter "+C),!M)return;E.quill.updateContents(new u.default().retain(T.index).delete(T.length).insert(v({},C,M)),d.default.sources.USER)}else E.quill.format(C,M,d.default.sources.USER);E.update(T)}),this.controls.push([C,y])}}},{key:"update",value:function(y){var E=y==null?{}:this.quill.getFormat(y);this.controls.forEach(function(C){var B=o(C,2),L=B[0],M=B[1];if(M.tagName==="SELECT"){var I=void 0;if(y==null)I=null;else if(E[L]==null)I=M.querySelector("option[selected]");else if(!Array.isArray(E[L])){var x=E[L];typeof x=="string"&&(x=x.replace(/\"/g,'\\"')),I=M.querySelector('option[value="'+x+'"]')}I==null?(M.value="",M.selectedIndex=-1):I.selected=!0}else if(y==null)M.classList.remove("ql-active");else if(M.hasAttribute("value")){var w=E[L]===M.getAttribute("value")||E[L]!=null&&E[L].toString()===M.getAttribute("value")||E[L]==null&&!M.getAttribute("value");M.classList.toggle("ql-active",w)}else M.classList.toggle("ql-active",E[L]!=null)})}}]),$}(_.default);D.DEFAULTS={};function N(O,$,P){var y=document.createElement("button");y.setAttribute("type","button"),y.classList.add("ql-"+$),P!=null&&(y.value=P),O.appendChild(y)}function U(O,$){Array.isArray($[0])||($=[$]),$.forEach(function(P){var y=document.createElement("span");y.classList.add("ql-formats"),P.forEach(function(E){if(typeof E=="string")N(y,E);else{var C=Object.keys(E)[0],B=E[C];Array.isArray(B)?F(y,C,B):N(y,C,B)}}),O.appendChild(y)})}function F(O,$,P){var y=document.createElement("select");y.classList.add("ql-"+$),P.forEach(function(E){var C=document.createElement("option");E!==!1?C.setAttribute("value",E):C.setAttribute("selected","selected"),y.appendChild(C)}),O.appendChild(y)}D.DEFAULTS={container:null,handlers:{clean:function(){var $=this,P=this.quill.getSelection();if(P!=null)if(P.length==0){var y=this.quill.getFormat();Object.keys(y).forEach(function(E){c.default.query(E,c.default.Scope.INLINE)!=null&&$.quill.format(E,!1)})}else this.quill.removeFormat(P,d.default.sources.USER)},direction:function($){var P=this.quill.getFormat().align;$==="rtl"&&P==null?this.quill.format("align","right",d.default.sources.USER):!$&&P==="right"&&this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",$,d.default.sources.USER)},indent:function($){var P=this.quill.getSelection(),y=this.quill.getFormat(P),E=parseInt(y.indent||0);if($==="+1"||$==="-1"){var C=$==="+1"?1:-1;y.direction==="rtl"&&(C*=-1),this.quill.format("indent",E+C,d.default.sources.USER)}},link:function($){$===!0&&($=prompt("Enter link URL:")),this.quill.format("link",$,d.default.sources.USER)},list:function($){var P=this.quill.getSelection(),y=this.quill.getFormat(P);$==="check"?y.list==="checked"||y.list==="unchecked"?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",$,d.default.sources.USER)}}},n.default=D,n.addControls=U},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(g,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,_,m){return _&&p(g.prototype,_),m&&p(g,m),g}}(),s=function p(g,_,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,_);if(v===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:p(S,_,m)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(m)}},a=i(28),u=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){d(g,p);function g(_,m){c(this,g);var v=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,_));return v.label.innerHTML=m,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(S){S.classList.add("ql-primary")}),v}return o(g,[{key:"buildItem",value:function(m){var v=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,m);return v.style.backgroundColor=m.getAttribute("value")||"",v}},{key:"selectItem",value:function(m,v){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,m,v);var S=this.label.querySelector(".ql-color-label"),b=m&&m.getAttribute("data-value")||"";S&&(S.tagName==="line"?S.style.stroke=b:S.style.fill=b)}}]),g}(u.default);n.default=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(g,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,_,m){return _&&p(g.prototype,_),m&&p(g,m),g}}(),s=function p(g,_,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,_);if(v===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:p(S,_,m)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(m)}},a=i(28),u=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){d(g,p);function g(_,m){c(this,g);var v=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,_));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(S){S.innerHTML=m[S.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return o(g,[{key:"selectItem",value:function(m,v){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,m,v),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),g}(u.default);n.default=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function u(l,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}}();function s(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(l,c){var f=this;s(this,u),this.quill=l,this.boundsContainer=c||document.body,this.root=l.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return o(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var f=c.left+c.width/2-this.root.offsetWidth/2,d=c.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var h=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),g=0;if(p.right>h.right&&(g=h.right-p.right,this.root.style.left=f+g+"px"),p.left<h.left&&(g=h.left-p.left,this.root.style.left=f+g+"px"),p.bottom>h.bottom){var _=p.bottom-p.top,m=c.bottom-c.top+_;this.root.style.top=d-m+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u}();n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function F(O,$){var P=[],y=!0,E=!1,C=void 0;try{for(var B=O[Symbol.iterator](),L;!(y=(L=B.next()).done)&&(P.push(L.value),!($&&P.length===$));y=!0);}catch(M){E=!0,C=M}finally{try{!y&&B.return&&B.return()}finally{if(E)throw C}}return P}return function(O,$){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return F(O,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function F(O,$,P){O===null&&(O=Function.prototype);var y=Object.getOwnPropertyDescriptor(O,$);if(y===void 0){var E=Object.getPrototypeOf(O);return E===null?void 0:F(E,$,P)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(P)}},a=function(){function F(O,$){for(var P=0;P<$.length;P++){var y=$[P];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(O,y.key,y)}}return function(O,$,P){return $&&F(O.prototype,$),P&&F(O,P),O}}(),u=i(3),l=S(u),c=i(8),f=S(c),d=i(43),h=S(d),p=i(27),g=S(p),_=i(15),m=i(41),v=S(m);function S(F){return F&&F.__esModule?F:{default:F}}function b(F,O){if(!(F instanceof O))throw new TypeError("Cannot call a class as a function")}function R(F,O){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:F}function j(F,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);F.prototype=Object.create(O&&O.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(F,O):F.__proto__=O)}var D=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],N=function(F){j(O,F);function O($,P){b(this,O),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=D);var y=R(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,$,P));return y.quill.container.classList.add("ql-snow"),y}return a(O,[{key:"extendToolbar",value:function(P){P.container.classList.add("ql-snow"),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),v.default),this.tooltip=new U(this.quill,this.options.bounds),P.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(y,E){P.handlers.link.call(P,!E.format.link)})}}]),O}(h.default);N.DEFAULTS=(0,l.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){if(O){var $=this.quill.getSelection();if($==null||$.length==0)return;var P=this.quill.getText($);/^\S+@\S+\.\S+$/.test(P)&&P.indexOf("mailto:")!==0&&(P="mailto:"+P);var y=this.quill.theme.tooltip;y.edit("link",P)}else this.quill.format("link",!1)}}}}});var U=function(F){j(O,F);function O($,P){b(this,O);var y=R(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,$,P));return y.preview=y.root.querySelector("a.ql-preview"),y}return a(O,[{key:"listen",value:function(){var P=this;s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(y){P.root.classList.contains("ql-editing")?P.save():P.edit("link",P.preview.textContent),y.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(y){if(P.linkRange!=null){var E=P.linkRange;P.restoreFocus(),P.quill.formatText(E,"link",!1,f.default.sources.USER),delete P.linkRange}y.preventDefault(),P.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(y,E,C){if(y!=null){if(y.length===0&&C===f.default.sources.USER){var B=P.quill.scroll.descendant(g.default,y.index),L=o(B,2),M=L[0],I=L[1];if(M!=null){P.linkRange=new _.Range(y.index-I,M.length());var x=g.default.formats(M.domNode);P.preview.textContent=x,P.preview.setAttribute("href",x),P.show(),P.position(P.quill.getBounds(P.linkRange));return}}else delete P.linkRange;P.hide()}})}},{key:"show",value:function(){s(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),O}(d.BaseTooltip);U.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=N},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(29),s=se(o),a=i(36),u=i(38),l=i(64),c=i(65),f=se(c),d=i(66),h=se(d),p=i(67),g=se(p),_=i(37),m=i(26),v=i(39),S=i(40),b=i(56),R=se(b),j=i(68),D=se(j),N=i(27),U=se(N),F=i(69),O=se(F),$=i(70),P=se($),y=i(71),E=se(y),C=i(72),B=se(C),L=i(73),M=se(L),I=i(13),x=se(I),w=i(74),T=se(w),H=i(75),A=se(H),k=i(57),q=se(k),z=i(41),V=se(z),W=i(28),J=se(W),Y=i(59),pe=se(Y),ie=i(60),le=se(ie),Ie=i(61),ve=se(Ie),Q=i(108),ee=se(Q),ne=i(62),ce=se(ne);function se(ye){return ye&&ye.__esModule?ye:{default:ye}}s.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":_.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":v.FontClass,"attributors/class/size":S.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":_.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":v.FontStyle,"attributors/style/size":S.SizeStyle},!0),s.default.register({"formats/align":a.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":l.IndentClass,"formats/background":_.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":v.FontClass,"formats/size":S.SizeClass,"formats/blockquote":f.default,"formats/code-block":x.default,"formats/header":h.default,"formats/list":g.default,"formats/bold":R.default,"formats/code":I.Code,"formats/italic":D.default,"formats/link":U.default,"formats/script":O.default,"formats/strike":P.default,"formats/underline":E.default,"formats/image":B.default,"formats/video":M.default,"formats/list/item":p.ListItem,"modules/formula":T.default,"modules/syntax":A.default,"modules/toolbar":q.default,"themes/bubble":ee.default,"themes/snow":ce.default,"ui/icons":V.default,"ui/picker":J.default,"ui/icon-picker":le.default,"ui/color-picker":pe.default,"ui/tooltip":ve.default},!0),n.default=s.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var o=function(){function g(_,m){for(var v=0;v<m.length;v++){var S=m[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,m,v){return m&&g(_.prototype,m),v&&g(_,v),_}}(),s=function g(_,m,v){_===null&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,m);if(S===void 0){var b=Object.getPrototypeOf(_);return b===null?void 0:g(b,m,v)}else{if("value"in S)return S.value;var R=S.get;return R===void 0?void 0:R.call(v)}},a=i(0),u=l(a);function l(g){return g&&g.__esModule?g:{default:g}}function c(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function f(g,_){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:g}function d(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);g.prototype=Object.create(_&&_.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(g,_):g.__proto__=_)}var h=function(g){d(_,g);function _(){return c(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"add",value:function(v,S){if(S==="+1"||S==="-1"){var b=this.value(v)||0;S=S==="+1"?b+1:b-1}return S===0?(this.remove(v),!0):s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,v,S)}},{key:"canAdd",value:function(v,S){return s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,v,S)||s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,v,parseInt(S))}},{key:"value",value:function(v){return parseInt(s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,v))||void 0}}]),_}(u.default.Attributor.Class),p=new h("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(4),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}function u(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function l(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function c(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var f=function(d){c(h,d);function h(){return u(this,h),l(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="blockquote",f.tagName="blockquote",n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function h(p,g){for(var _=0;_<g.length;_++){var m=g[_];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}return function(p,g,_){return g&&h(p.prototype,g),_&&h(p,_),p}}(),s=i(4),a=u(s);function u(h){return h&&h.__esModule?h:{default:h}}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function c(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function f(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var d=function(h){f(p,h);function p(){return l(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),p}(a.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],n.default=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var o=function(){function b(R,j){for(var D=0;D<j.length;D++){var N=j[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(R,N.key,N)}}return function(R,j,D){return j&&b(R.prototype,j),D&&b(R,D),R}}(),s=function b(R,j,D){R===null&&(R=Function.prototype);var N=Object.getOwnPropertyDescriptor(R,j);if(N===void 0){var U=Object.getPrototypeOf(R);return U===null?void 0:b(U,j,D)}else{if("value"in N)return N.value;var F=N.get;return F===void 0?void 0:F.call(D)}},a=i(0),u=h(a),l=i(4),c=h(l),f=i(25),d=h(f);function h(b){return b&&b.__esModule?b:{default:b}}function p(b,R,j){return R in b?Object.defineProperty(b,R,{value:j,enumerable:!0,configurable:!0,writable:!0}):b[R]=j,b}function g(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")}function _(b,R){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:b}function m(b,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);b.prototype=Object.create(R&&R.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(b,R):b.__proto__=R)}var v=function(b){m(R,b);function R(){return g(this,R),_(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"format",value:function(D,N){D===S.blotName&&!N?this.replaceWith(u.default.create(this.statics.scope)):s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,D,N)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(D,N){return this.parent.isolate(this.offset(this.parent),this.length()),D===this.parent.statics.blotName?(this.parent.replaceWith(D,N),this):(this.parent.unwrap(),s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replaceWith",this).call(this,D,N))}}],[{key:"formats",value:function(D){return D.tagName===this.tagName?void 0:s(R.__proto__||Object.getPrototypeOf(R),"formats",this).call(this,D)}}]),R}(c.default);v.blotName="list-item",v.tagName="LI";var S=function(b){m(R,b),o(R,null,[{key:"create",value:function(D){var N=D==="ordered"?"OL":"UL",U=s(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,N);return(D==="checked"||D==="unchecked")&&U.setAttribute("data-checked",D==="checked"),U}},{key:"formats",value:function(D){if(D.tagName==="OL")return"ordered";if(D.tagName==="UL")return D.hasAttribute("data-checked")?D.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function R(j){g(this,R);var D=_(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,j)),N=function(F){if(F.target.parentNode===j){var O=D.statics.formats(j),$=u.default.find(F.target);O==="checked"?$.format("list","unchecked"):O==="unchecked"&&$.format("list","checked")}};return j.addEventListener("touchstart",N),j.addEventListener("mousedown",N),D}return o(R,[{key:"format",value:function(D,N){this.children.length>0&&this.children.tail.format(D,N)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(D,N){if(D instanceof v)s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,D,N);else{var U=N==null?this.length():N.offset(this),F=this.split(U);F.parent.insertBefore(D,F)}}},{key:"optimize",value:function(D){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,D);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&N.domNode.tagName===this.domNode.tagName&&N.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(N.moveChildren(this),N.remove())}},{key:"replace",value:function(D){if(D.statics.blotName!==this.statics.blotName){var N=u.default.create(this.statics.defaultChild);D.moveChildren(N),this.appendChild(N)}s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replace",this).call(this,D)}}]),R}(d.default);S.blotName="list",S.scope=u.default.Scope.BLOCK_BLOT,S.tagName=["OL","UL"],S.defaultChild="list-item",S.allowedChildren=[v],n.ListItem=v,n.default=S},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(56),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}function u(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function l(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function c(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var f=function(d){c(h,d);function h(){return u(this,h),l(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="italic",f.tagName=["EM","I"],n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function p(g,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,_,m){return _&&p(g.prototype,_),m&&p(g,m),g}}(),s=function p(g,_,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,_);if(v===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:p(S,_,m)}else{if("value"in v)return v.value;var b=v.get;return b===void 0?void 0:b.call(m)}},a=i(6),u=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function f(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){d(g,p);function g(){return c(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),g}(u.default);h.blotName="script",h.tagName=["SUB","SUP"],n.default=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(6),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}function u(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function l(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function c(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var f=function(d){c(h,d);function h(){return u(this,h),l(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="strike",f.tagName="S",n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(6),s=a(o);function a(d){return d&&d.__esModule?d:{default:d}}function u(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function l(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function c(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var f=function(d){c(h,d);function h(){return u(this,h),l(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(s.default);f.blotName="underline",f.tagName="U",n.default=f},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function _(m,v){for(var S=0;S<v.length;S++){var b=v[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,S){return v&&_(m.prototype,v),S&&_(m,S),m}}(),s=function _(m,v,S){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,v);if(b===void 0){var R=Object.getPrototypeOf(m);return R===null?void 0:_(R,v,S)}else{if("value"in b)return b.value;var j=b.get;return j===void 0?void 0:j.call(S)}},a=i(0),u=c(a),l=i(27);function c(_){return _&&_.__esModule?_:{default:_}}function f(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}function d(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:_}function h(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}var p=["alt","height","width"],g=function(_){h(m,_);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(S,b){p.indexOf(S)>-1?b?this.domNode.setAttribute(S,b):this.domNode.removeAttribute(S):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,S,b)}}],[{key:"create",value:function(S){var b=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,S);return typeof S=="string"&&b.setAttribute("src",this.sanitize(S)),b}},{key:"formats",value:function(S){return p.reduce(function(b,R){return S.hasAttribute(R)&&(b[R]=S.getAttribute(R)),b},{})}},{key:"match",value:function(S){return/\.(jpe?g|gif|png)$/.test(S)||/^data:image\/.+;base64/.test(S)}},{key:"sanitize",value:function(S){return(0,l.sanitize)(S,["http","https","data"])?S:"//:0"}},{key:"value",value:function(S){return S.getAttribute("src")}}]),m}(u.default.Embed);g.blotName="image",g.tagName="IMG",n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function _(m,v){for(var S=0;S<v.length;S++){var b=v[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,S){return v&&_(m.prototype,v),S&&_(m,S),m}}(),s=function _(m,v,S){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,v);if(b===void 0){var R=Object.getPrototypeOf(m);return R===null?void 0:_(R,v,S)}else{if("value"in b)return b.value;var j=b.get;return j===void 0?void 0:j.call(S)}},a=i(4),u=i(27),l=c(u);function c(_){return _&&_.__esModule?_:{default:_}}function f(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}function d(_,m){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:_}function h(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);_.prototype=Object.create(m&&m.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(_,m):_.__proto__=m)}var p=["height","width"],g=function(_){h(m,_);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,[{key:"format",value:function(S,b){p.indexOf(S)>-1?b?this.domNode.setAttribute(S,b):this.domNode.removeAttribute(S):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,S,b)}}],[{key:"create",value:function(S){var b=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,S);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(S)),b}},{key:"formats",value:function(S){return p.reduce(function(b,R){return S.hasAttribute(R)&&(b[R]=S.getAttribute(R)),b},{})}},{key:"sanitize",value:function(S){return l.default.sanitize(S)}},{key:"value",value:function(S){return S.getAttribute("src")}}]),m}(a.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",n.default=g},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var o=function(){function S(b,R){for(var j=0;j<R.length;j++){var D=R[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}return function(b,R,j){return R&&S(b.prototype,R),j&&S(b,j),b}}(),s=function S(b,R,j){b===null&&(b=Function.prototype);var D=Object.getOwnPropertyDescriptor(b,R);if(D===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:S(N,R,j)}else{if("value"in D)return D.value;var U=D.get;return U===void 0?void 0:U.call(j)}},a=i(35),u=h(a),l=i(5),c=h(l),f=i(9),d=h(f);function h(S){return S&&S.__esModule?S:{default:S}}function p(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function g(S,b){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:S}function _(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(S,b):S.__proto__=b)}var m=function(S){_(b,S);function b(){return p(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"create",value:function(j){var D=s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return typeof j=="string"&&(window.katex.render(j,D,{throwOnError:!1,errorColor:"#f00"}),D.setAttribute("data-value",j)),D}},{key:"value",value:function(j){return j.getAttribute("data-value")}}]),b}(u.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var v=function(S){_(b,S),o(b,null,[{key:"register",value:function(){c.default.register(m,!0)}}]);function b(){p(this,b);var R=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return R}return b}(d.default);n.FormulaBlot=m,n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var o=function(){function j(D,N){for(var U=0;U<N.length;U++){var F=N[U];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(D,F.key,F)}}return function(D,N,U){return N&&j(D.prototype,N),U&&j(D,U),D}}(),s=function j(D,N,U){D===null&&(D=Function.prototype);var F=Object.getOwnPropertyDescriptor(D,N);if(F===void 0){var O=Object.getPrototypeOf(D);return O===null?void 0:j(O,N,U)}else{if("value"in F)return F.value;var $=F.get;return $===void 0?void 0:$.call(U)}},a=i(0),u=g(a),l=i(5),c=g(l),f=i(9),d=g(f),h=i(13),p=g(h);function g(j){return j&&j.__esModule?j:{default:j}}function _(j,D){if(!(j instanceof D))throw new TypeError("Cannot call a class as a function")}function m(j,D){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:j}function v(j,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);j.prototype=Object.create(D&&D.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(j,D):j.__proto__=D)}var S=function(j){v(D,j);function D(){return _(this,D),m(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return o(D,[{key:"replaceWith",value:function(U){this.domNode.textContent=this.domNode.textContent,this.attach(),s(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replaceWith",this).call(this,U)}},{key:"highlight",value:function(U){var F=this.domNode.textContent;this.cachedText!==F&&((F.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=U(F),this.domNode.normalize(),this.attach()),this.cachedText=F)}}]),D}(p.default);S.className="ql-syntax";var b=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),R=function(j){v(D,j),o(D,null,[{key:"register",value:function(){c.default.register(b,!0),c.default.register(S,!0)}}]);function D(N,U){_(this,D);var F=m(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N,U));if(typeof F.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var O=null;return F.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(O),O=setTimeout(function(){F.highlight(),O=null},F.options.interval)}),F.highlight(),F}return o(D,[{key:"highlight",value:function(){var U=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var F=this.quill.getSelection();this.quill.scroll.descendants(S).forEach(function(O){O.highlight(U.options.highlight)}),this.quill.update(c.default.sources.SILENT),F!=null&&this.quill.setSelection(F,c.default.sources.SILENT)}}}]),D}(d.default);R.DEFAULTS={highlight:function(){return window.hljs==null?null:function(j){var D=window.hljs.highlightAuto(j);return D.value}}(),interval:1e3},n.CodeBlock=S,n.CodeToken=b,n.default=R},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var o=function D(N,U,F){N===null&&(N=Function.prototype);var O=Object.getOwnPropertyDescriptor(N,U);if(O===void 0){var $=Object.getPrototypeOf(N);return $===null?void 0:D($,U,F)}else{if("value"in O)return O.value;var P=O.get;return P===void 0?void 0:P.call(F)}},s=function(){function D(N,U){for(var F=0;F<U.length;F++){var O=U[F];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(N,O.key,O)}}return function(N,U,F){return U&&D(N.prototype,U),F&&D(N,F),N}}(),a=i(3),u=_(a),l=i(8),c=_(l),f=i(43),d=_(f),h=i(15),p=i(41),g=_(p);function _(D){return D&&D.__esModule?D:{default:D}}function m(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function v(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:D}function S(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],R=function(D){S(N,D);function N(U,F){m(this,N),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=b);var O=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,U,F));return O.quill.container.classList.add("ql-bubble"),O}return s(N,[{key:"extendToolbar",value:function(F){this.tooltip=new j(this.quill,this.options.bounds),this.tooltip.root.appendChild(F.container),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),g.default)}}]),N}(d.default);R.DEFAULTS=(0,u.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){N?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var j=function(D){S(N,D);function N(U,F){m(this,N);var O=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,U,F));return O.quill.on(c.default.events.EDITOR_CHANGE,function($,P,y,E){if($===c.default.events.SELECTION_CHANGE)if(P!=null&&P.length>0&&E===c.default.sources.USER){O.show(),O.root.style.left="0px",O.root.style.width="",O.root.style.width=O.root.offsetWidth+"px";var C=O.quill.getLines(P.index,P.length);if(C.length===1)O.position(O.quill.getBounds(P));else{var B=C[C.length-1],L=O.quill.getIndex(B),M=Math.min(B.length()-1,P.index+P.length-L),I=O.quill.getBounds(new h.Range(L,M));O.position(I)}}else document.activeElement!==O.textbox&&O.quill.hasFocus()&&O.hide()}),O}return s(N,[{key:"listen",value:function(){var F=this;o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){F.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!F.root.classList.contains("ql-hidden")){var O=F.quill.getSelection();O!=null&&F.position(F.quill.getBounds(O))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(F){var O=o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"position",this).call(this,F),$=this.root.querySelector(".ql-tooltip-arrow");if($.style.marginLeft="",O===0)return O;$.style.marginLeft=-1*O-$.offsetWidth/2+"px"}}]),N}(f.BaseTooltip);j.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=j,n.default=R},function(r,n,i){r.exports=i(63)}]).default})})(O3);const M3=Pf(Km);const oi=Object.create(null);oi.open="0";oi.close="1";oi.ping="2";oi.pong="3";oi.message="4";oi.upgrade="5";oi.noop="6";const Pu=Object.create(null);Object.keys(oi).forEach(t=>{Pu[oi[t]]=t});const N3={type:"error",data:"parser error"},D3=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",I3=typeof ArrayBuffer=="function",L3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,JR=({type:t,data:e},r,n)=>D3&&e instanceof Blob?r?n(e):Nw(e,n):I3&&(e instanceof ArrayBuffer||L3(e))?r?n(e):Nw(new Blob([e]),n):n(oi[t]+(e||"")),Nw=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)},Dw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",al=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Dw.length;t++)al[Dw.charCodeAt(t)]=t;const B3=t=>{let e=t.length*.75,r=t.length,n,i=0,o,s,a,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),c=new Uint8Array(l);for(n=0;n<r;n+=4)o=al[t.charCodeAt(n)],s=al[t.charCodeAt(n+1)],a=al[t.charCodeAt(n+2)],u=al[t.charCodeAt(n+3)],c[i++]=o<<2|s>>4,c[i++]=(s&15)<<4|a>>2,c[i++]=(a&3)<<6|u&63;return l},F3=typeof ArrayBuffer=="function",YR=(t,e)=>{if(typeof t!="string")return{type:"message",data:XR(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:j3(t.substring(1),e)}:Pu[r]?t.length>1?{type:Pu[r],data:t.substring(1)}:{type:Pu[r]}:N3},j3=(t,e)=>{if(F3){const r=B3(t);return XR(r,e)}else return{base64:!0,data:t}},XR=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},ZR=String.fromCharCode(30),$3=(t,e)=>{const r=t.length,n=new Array(r);let i=0;t.forEach((o,s)=>{JR(o,!1,a=>{n[s]=a,++i===r&&e(n.join(ZR))})})},U3=(t,e)=>{const r=t.split(ZR),n=[];for(let i=0;i<r.length;i++){const o=YR(r[i],e);if(n.push(o),o.type==="error")break}return n},ex=4;function Ut(t){if(t)return q3(t)}function q3(t){for(var e in Ut.prototype)t[e]=Ut.prototype[e];return t}Ut.prototype.on=Ut.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ut.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Ut.prototype.off=Ut.prototype.removeListener=Ut.prototype.removeAllListeners=Ut.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Ut.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};Ut.prototype.emitReserved=Ut.prototype.emit;Ut.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ut.prototype.hasListeners=function(t){return!!this.listeners(t).length};const oo=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function tx(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const z3=setTimeout,H3=clearTimeout;function bd(t,e){e.useNativeTimers?(t.setTimeoutFn=z3.bind(oo),t.clearTimeoutFn=H3.bind(oo)):(t.setTimeoutFn=setTimeout.bind(oo),t.clearTimeoutFn=clearTimeout.bind(oo))}const V3=1.33;function K3(t){return typeof t=="string"?W3(t):Math.ceil((t.byteLength||t.size)*V3)}function W3(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}class G3 extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}let rx=class extends Ut{constructor(e){super(),this.writable=!1,bd(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new G3(e,r,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=YR(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}};const nx="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Wm=64,Q3={};let Iw=0,Kc=0,Lw;function Bw(t){let e="";do e=nx[t%Wm]+e,t=Math.floor(t/Wm);while(t>0);return e}function ix(){const t=Bw(+new Date);return t!==Lw?(Iw=0,Lw=t):t+"."+Bw(Iw++)}for(;Kc<Wm;Kc++)Q3[nx[Kc]]=Kc;function ox(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function J3(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let o=r[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}let sx=!1;try{sx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Y3=sx;function ax(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Y3))return new XMLHttpRequest}catch{}if(!e)try{return new oo[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function X3(){}const Z3=function(){return new ax({xdomain:!1}).responseType!=null}();class eD extends rx{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port,this.xs=e.secure!==n}const r=e&&e.forceBase64;this.supportsBinary=Z3&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};U3(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,$3(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const r=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=ix()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const i=ox(e),o=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Ei(this.uri(),e)}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}let Ei=class extends Ut{constructor(e,r){super(),bd(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){const e=tx(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const r=this.xhr=new ax(e);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=Ei.requestsCount++,Ei.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=X3,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Ei.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Ei.requestsCount=0;Ei.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fw);else if(typeof addEventListener=="function"){const t="onpagehide"in oo?"pagehide":"unload";addEventListener(t,Fw,!1)}}function Fw(){for(let t in Ei.requests)Ei.requests.hasOwnProperty(t)&&Ei.requests[t].abort()}const lx=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))(),Wc=oo.WebSocket||oo.MozWebSocket,jw=!0,tD="arraybuffer",$w=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class rD extends rx{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),r=this.opts.protocols,n=$w?{}:tx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=jw&&!$w?r?new Wc(e,r):new Wc(e):new Wc(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||tD,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;JR(n,this.supportsBinary,o=>{const s={};try{jw&&this.ws.send(o)}catch{}i&&lx(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const r=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=ix()),this.supportsBinary||(e.b64=1);const i=ox(e),o=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}check(){return!!Wc}}const nD={websocket:rD,polling:eD},iD=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gm(t){const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=iD.exec(t||""),o={},s=14;for(;s--;)o[oD[s]]=i[s]||"";return r!=-1&&n!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=sD(o,o.path),o.queryKey=aD(o,o.query),o}function sD(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function aD(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,o){i&&(r[i]=o)}),r}let Do=class extends Ut{constructor(e,r={}){super(),e&&typeof e=="object"&&(r=e,e=null),e?(e=Gm(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=Gm(r.host).host),bd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=J3(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=ex,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new nD[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Do.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),n=!1;Do.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Do.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(c(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function o(){n||(n=!0,c(),r.close(),r=null)}const s=f=>{const d=new Error("probe error: "+f);d.transport=r.name,o(),this.emitReserved("upgradeError",d)};function a(){s("transport closed")}function u(){s("socket closed")}function l(f){r&&f.name!==r.name&&o()}const c=()=>{r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",a),this.off("close",u),this.off("upgrading",l)};r.once("open",i),r.once("error",s),r.once("close",a),this.once("close",u),this.once("upgrading",l),r.open()}onOpen(){if(this.readyState="open",Do.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=K3(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:e,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Do.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const r=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}};Do.protocol=ex;function lD(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=Gm(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(r&&r.port===n.port?"":":"+n.port),n}const cD=typeof ArrayBuffer=="function",uD=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,cx=Object.prototype.toString,fD=typeof Blob=="function"||typeof Blob<"u"&&cx.call(Blob)==="[object BlobConstructor]",dD=typeof File=="function"||typeof File<"u"&&cx.call(File)==="[object FileConstructor]";function Lv(t){return cD&&(t instanceof ArrayBuffer||uD(t))||fD&&t instanceof Blob||dD&&t instanceof File}function ku(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(ku(t[r]))return!0;return!1}if(Lv(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ku(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&ku(t[r]))return!0;return!1}function hD(t){const e=[],r=t.data,n=t;return n.data=Qm(r,e),n.attachments=e.length,{packet:n,buffers:e}}function Qm(t,e){if(!t)return t;if(Lv(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Qm(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Qm(t[n],e));return r}return t}function pD(t,e){return t.data=Jm(t.data,e),delete t.attachments,t}function Jm(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Jm(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Jm(t[r],e));return t}const mD=5;var Ke;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ke||(Ke={}));class gD{constructor(e){this.replacer=e}encode(e){return(e.type===Ke.EVENT||e.type===Ke.ACK)&&ku(e)?this.encodeAsBinary({type:e.type===Ke.EVENT?Ke.BINARY_EVENT:Ke.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===Ke.BINARY_EVENT||e.type===Ke.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=hD(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}class Bv extends Ut{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===Ke.BINARY_EVENT;n||r.type===Ke.BINARY_ACK?(r.type=n?Ke.EVENT:Ke.ACK,this.reconstructor=new vD(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Lv(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(Ke[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ke.BINARY_EVENT||n.type===Ke.BINARY_ACK){const o=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const s=e.substring(o,r);if(s!=Number(s)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(s)}if(e.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(o,r)}else n.nsp="/";const i=e.charAt(r+1);if(i!==""&&Number(i)==i){const o=r+1;for(;++r;){const s=e.charAt(r);if(s==null||Number(s)!=s){--r;break}if(r===e.length)break}n.id=Number(e.substring(o,r+1))}if(e.charAt(++r)){const o=this.tryParse(e.substr(r));if(Bv.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case Ke.CONNECT:return typeof r=="object";case Ke.DISCONNECT:return r===void 0;case Ke.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case Ke.EVENT:case Ke.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case Ke.ACK:case Ke.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vD{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=pD(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const yD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Bv,Encoder:gD,get PacketType(){return Ke},protocol:mD},Symbol.toStringTag,{value:"Module"}));function An(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const wD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ux extends Ut{constructor(e,r,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[An(e,"open",this.onopen.bind(this)),An(e,"packet",this.onpacket.bind(this)),An(e,"error",this.onerror.bind(this)),An(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(wD.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');r.unshift(e);const n={type:Ke.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const s=this.ids++,a=r.pop();this._registerAckCallback(s,a),n.id=s}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,r){const n=this.flags.timeout;if(n===void 0){this.acks[e]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,[null,...o])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:Ke.CONNECT,data:e})}):this.packet({type:Ke.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ke.CONNECT:if(e.data&&e.data.sid){const i=e.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ke.EVENT:case Ke.BINARY_EVENT:this.onevent(e);break;case Ke.ACK:case Ke.BINARY_ACK:this.onack(e);break;case Ke.DISCONNECT:this.ondisconnect();break;case Ke.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:Ke.ACK,id:e,data:i}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(r.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ke.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function ka(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ka.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};ka.prototype.reset=function(){this.attempts=0};ka.prototype.setMin=function(t){this.ms=t};ka.prototype.setMax=function(t){this.max=t};ka.prototype.setJitter=function(t){this.jitter=t};class Ym extends Ut{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,bd(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ka({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const i=r.parser||yD;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Do(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=An(r,"open",function(){n.onopen(),e&&e()}),o=An(r,"error",s=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",s),e?e(s):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const s=this._timeout;s===0&&i();const a=this.setTimeoutFn(()=>{i(),r.close(),r.emit("error",new Error("timeout"))},s);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(An(e,"ping",this.onping.bind(this)),An(e,"data",this.ondata.bind(this)),An(e,"error",this.onerror.bind(this)),An(e,"close",this.onclose.bind(this)),An(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){lx(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n||(n=new ux(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Wa={};function Sl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=lD(t,e.path||"/socket.io"),n=r.source,i=r.id,o=r.path,s=Wa[i]&&o in Wa[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let u;return a?u=new Ym(n,e):(Wa[i]||(Wa[i]=new Ym(n,e)),u=Wa[i]),r.query&&!e.query&&(e.query=r.queryKey),u.socket(r.path,e)}Object.assign(Sl,{Manager:Ym,Socket:ux,io:Sl,connect:Sl});function fx(t,e){return function(){return t.apply(e,arguments)}}const{toString:dx}=Object.prototype,{getPrototypeOf:Fv}=Object,jv=(t=>e=>{const r=dx.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Li=t=>(t=t.toLowerCase(),e=>jv(e)===t),Sd=t=>e=>typeof e===t,{isArray:Ta}=Array,Ql=Sd("undefined");function _D(t){return t!==null&&!Ql(t)&&t.constructor!==null&&!Ql(t.constructor)&&es(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hx=Li("ArrayBuffer");function bD(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hx(t.buffer),e}const SD=Sd("string"),es=Sd("function"),px=Sd("number"),$v=t=>t!==null&&typeof t=="object",ED=t=>t===!0||t===!1,Tu=t=>{if(jv(t)!=="object")return!1;const e=Fv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},RD=Li("Date"),xD=Li("File"),AD=Li("Blob"),PD=Li("FileList"),kD=t=>$v(t)&&es(t.pipe),TD=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||dx.call(t)===e||es(t.toString)&&t.toString()===e)},CD=Li("URLSearchParams"),OD=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ac(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Ta(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const o=r?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length;let a;for(n=0;n<s;n++)a=o[n],e.call(null,t[a],a,t)}}function mx(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const gx=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),vx=t=>!Ql(t)&&t!==gx;function Xm(){const{caseless:t}=vx(this)&&this||{},e={},r=(n,i)=>{const o=t&&mx(e,i)||i;Tu(e[o])&&Tu(n)?e[o]=Xm(e[o],n):Tu(n)?e[o]=Xm({},n):Ta(n)?e[o]=n.slice():e[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&ac(arguments[n],r);return e}const MD=(t,e,r,{allOwnKeys:n}={})=>(ac(e,(i,o)=>{r&&es(i)?t[o]=fx(i,r):t[o]=i},{allOwnKeys:n}),t),ND=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DD=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},ID=(t,e,r,n)=>{let i,o,s;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],(!n||n(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=r!==!1&&Fv(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},LD=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},BD=t=>{if(!t)return null;if(Ta(t))return t;let e=t.length;if(!px(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},FD=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Fv(Uint8Array)),jD=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},$D=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},UD=Li("HTMLFormElement"),qD=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Uw=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),zD=Li("RegExp"),yx=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ac(r,(i,o)=>{e(i,o,t)!==!1&&(n[o]=i)}),Object.defineProperties(t,n)},HD=t=>{yx(t,(e,r)=>{if(es(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(es(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},VD=(t,e)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return Ta(t)?n(t):n(String(t).split(e)),r},KD=()=>{},WD=(t,e)=>(t=+t,Number.isFinite(t)?t:e),GD=t=>{const e=new Array(10),r=(n,i)=>{if($v(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const o=Ta(n)?[]:{};return ac(n,(s,a)=>{const u=r(s,i+1);!Ql(u)&&(o[a]=u)}),e[i]=void 0,o}}return n};return r(t,0)},oe={isArray:Ta,isArrayBuffer:hx,isBuffer:_D,isFormData:TD,isArrayBufferView:bD,isString:SD,isNumber:px,isBoolean:ED,isObject:$v,isPlainObject:Tu,isUndefined:Ql,isDate:RD,isFile:xD,isBlob:AD,isRegExp:zD,isFunction:es,isStream:kD,isURLSearchParams:CD,isTypedArray:FD,isFileList:PD,forEach:ac,merge:Xm,extend:MD,trim:OD,stripBOM:ND,inherits:DD,toFlatObject:ID,kindOf:jv,kindOfTest:Li,endsWith:LD,toArray:BD,forEachEntry:jD,matchAll:$D,isHTMLForm:UD,hasOwnProperty:Uw,hasOwnProp:Uw,reduceDescriptors:yx,freezeMethods:HD,toObjectSet:VD,toCamelCase:qD,noop:KD,toFiniteNumber:WD,findKey:mx,global:gx,isContextDefined:vx,toJSONObject:GD};function Ze(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}oe.inherits(Ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const wx=Ze.prototype,_x={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_x[t]={value:t}});Object.defineProperties(Ze,_x);Object.defineProperty(wx,"isAxiosError",{value:!0});Ze.from=(t,e,r,n,i,o)=>{const s=Object.create(wx);return oe.toFlatObject(t,s,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),Ze.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};var QD=typeof self=="object"?self.FormData:window.FormData;const JD=QD;function Zm(t){return oe.isPlainObject(t)||oe.isArray(t)}function bx(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function qw(t,e,r){return t?t.concat(e).map(function(i,o){return i=bx(i),!r&&o?"["+i+"]":i}).join(r?".":""):e}function YD(t){return oe.isArray(t)&&!t.some(Zm)}const XD=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function ZD(t){return t&&oe.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function Ed(t,e,r){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new(JD||FormData),r=oe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,_){return!oe.isUndefined(_[g])});const n=r.metaTokens,i=r.visitor||c,o=r.dots,s=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&ZD(e);if(!oe.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(oe.isDate(p))return p.toISOString();if(!u&&oe.isBlob(p))throw new Ze("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(p)||oe.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,_){let m=p;if(p&&!_&&typeof p=="object"){if(oe.endsWith(g,"{}"))g=n?g:g.slice(0,-2),p=JSON.stringify(p);else if(oe.isArray(p)&&YD(p)||oe.isFileList(p)||oe.endsWith(g,"[]")&&(m=oe.toArray(p)))return g=bx(g),m.forEach(function(S,b){!(oe.isUndefined(S)||S===null)&&e.append(s===!0?qw([g],b,o):s===null?g:g+"[]",l(S))}),!1}return Zm(p)?!0:(e.append(qw(_,g,o),l(p)),!1)}const f=[],d=Object.assign(XD,{defaultVisitor:c,convertValue:l,isVisitable:Zm});function h(p,g){if(!oe.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(p),oe.forEach(p,function(m,v){(!(oe.isUndefined(m)||m===null)&&i.call(e,m,oe.isString(v)?v.trim():v,g,d))===!0&&h(m,g?g.concat(v):[v])}),f.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return h(t),e}function zw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Uv(t,e){this._pairs=[],t&&Ed(t,this,e)}const Sx=Uv.prototype;Sx.append=function(e,r){this._pairs.push([e,r])};Sx.toString=function(e){const r=e?function(n){return e.call(this,n,zw)}:zw;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function eI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ex(t,e,r){if(!e)return t;const n=r&&r.encode||eI,i=r&&r.serialize;let o;if(i?o=i(e,r):o=oe.isURLSearchParams(e)?e.toString():new Uv(e,r).toString(n),o){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}let tI=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(n){n!==null&&e(n)})}};const Hw=tI,Rx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rI=typeof URLSearchParams<"u"?URLSearchParams:Uv,nI=FormData,iI=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),oI=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Jn={isBrowser:!0,classes:{URLSearchParams:rI,FormData:nI,Blob},isStandardBrowserEnv:iI,isStandardBrowserWebWorkerEnv:oI,protocols:["http","https","file","blob","url","data"]};function sI(t,e){return Ed(t,new Jn.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return Jn.isNode&&oe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function aI(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lI(t){const e={},r=Object.keys(t);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}function xx(t){function e(r,n,i,o){let s=r[o++];const a=Number.isFinite(+s),u=o>=r.length;return s=!s&&oe.isArray(i)?i.length:s,u?(oe.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a):((!i[s]||!oe.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],o)&&oe.isArray(i[s])&&(i[s]=lI(i[s])),!a)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const r={};return oe.forEachEntry(t,(n,i)=>{e(aI(n),i,r,0)}),r}return null}const cI={"Content-Type":void 0};function uI(t,e,r){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Rd={transitional:Rx,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=oe.isObject(e);if(o&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return i&&i?JSON.stringify(xx(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return sI(e,this.formSerializer).toString();if((a=oe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Ed(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),uI(e)):e}],transformResponse:[function(e){const r=this.transitional||Rd.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&oe.isString(e)&&(n&&!this.responseType||i)){const s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?Ze.from(a,Ze.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jn.classes.FormData,Blob:Jn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};oe.forEach(["delete","get","head"],function(e){Rd.headers[e]={}});oe.forEach(["post","put","patch"],function(e){Rd.headers[e]=oe.merge(cI)});const qv=Rd,fI=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dI=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&fI[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},Vw=Symbol("internals");function Ga(t){return t&&String(t).trim().toLowerCase()}function Cu(t){return t===!1||t==null?t:oe.isArray(t)?t.map(Cu):String(t)}function hI(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}function pI(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function Kw(t,e,r,n){if(oe.isFunction(n))return n.call(this,e,r);if(oe.isString(e)){if(oe.isString(n))return e.indexOf(n)!==-1;if(oe.isRegExp(n))return n.test(e)}}function mI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function gI(t,e){const r=oe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,o,s){return this[n].call(this,e,i,o,s)},configurable:!0})})}class xd{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function o(a,u,l){const c=Ga(u);if(!c)throw new Error("header name must be a non-empty string");const f=oe.findKey(i,c);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||u]=Cu(a))}const s=(a,u)=>oe.forEach(a,(l,c)=>o(l,c,u));return oe.isPlainObject(e)||e instanceof this.constructor?s(e,r):oe.isString(e)&&(e=e.trim())&&!pI(e)?s(dI(e),r):e!=null&&o(r,e,n),this}get(e,r){if(e=Ga(e),e){const n=oe.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return hI(i);if(oe.isFunction(r))return r.call(this,i,n);if(oe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Ga(e),e){const n=oe.findKey(this,e);return!!(n&&(!r||Kw(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function o(s){if(s=Ga(s),s){const a=oe.findKey(n,s);a&&(!r||Kw(n,n[a],a,r))&&(delete n[a],i=!0)}}return oe.isArray(e)?e.forEach(o):o(e),i}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const r=this,n={};return oe.forEach(this,(i,o)=>{const s=oe.findKey(n,o);if(s){r[s]=Cu(i),delete r[o];return}const a=e?mI(o):String(o).trim();a!==o&&delete r[o],r[a]=Cu(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return oe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&oe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Vw]=this[Vw]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=Ga(s);n[a]||(gI(i,s),n[a]=!0)}return oe.isArray(e)?e.forEach(o):o(e),this}}xd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.freezeMethods(xd.prototype);oe.freezeMethods(xd);const Ri=xd;function Zh(t,e){const r=this||qv,n=e||r,i=Ri.from(n.headers);let o=n.data;return oe.forEach(t,function(a){o=a.call(r,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function Ax(t){return!!(t&&t.__CANCEL__)}function lc(t,e,r){Ze.call(this,t??"canceled",Ze.ERR_CANCELED,e,r),this.name="CanceledError"}oe.inherits(lc,Ze,{__CANCEL__:!0});const vI=null;function yI(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ze("Request failed with status code "+r.status,[Ze.ERR_BAD_REQUEST,Ze.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const wI=Jn.isStandardBrowserEnv?function(){return{write:function(r,n,i,o,s,a){const u=[];u.push(r+"="+encodeURIComponent(n)),oe.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),oe.isString(o)&&u.push("path="+o),oe.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _I(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bI(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Px(t,e){return t&&!_I(e)?bI(t,e):e}const SI=Jn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(o){let s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){const a=oe.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function EI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function RI(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,o=0,s;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),c=n[o];s||(s=l),r[i]=u,n[i]=l;let f=o,d=0;for(;f!==i;)d+=r[f++],f=f%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),l-s<e)return;const h=c&&l-c;return h?Math.round(d*1e3/h):void 0}}function Ww(t,e){let r=0;const n=RI(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-r,u=n(a),l=o<=s;r=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:u||void 0,estimated:u&&s&&l?(s-o)/u:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const xI=typeof XMLHttpRequest<"u",AI=xI&&function(t){return new Promise(function(r,n){let i=t.data;const o=Ri.from(t.headers).normalize(),s=t.responseType;let a;function u(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}oe.isFormData(i)&&(Jn.isStandardBrowserEnv||Jn.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let l=new XMLHttpRequest;if(t.auth){const h=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(h+":"+p))}const c=Px(t.baseURL,t.url);l.open(t.method.toUpperCase(),Ex(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function f(){if(!l)return;const h=Ri.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),g={data:!s||s==="text"||s==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:h,config:t,request:l};yI(function(m){r(m),u()},function(m){n(m),u()},g),l=null}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){l&&(n(new Ze("Request aborted",Ze.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new Ze("Network Error",Ze.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const g=t.transitional||Rx;t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),n(new Ze(p,g.clarifyTimeoutError?Ze.ETIMEDOUT:Ze.ECONNABORTED,t,l)),l=null},Jn.isStandardBrowserEnv){const h=(t.withCredentials||SI(c))&&t.xsrfCookieName&&wI.read(t.xsrfCookieName);h&&o.set(t.xsrfHeaderName,h)}i===void 0&&o.setContentType(null),"setRequestHeader"in l&&oe.forEach(o.toJSON(),function(p,g){l.setRequestHeader(g,p)}),oe.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),s&&s!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",Ww(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Ww(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=h=>{l&&(n(!h||h.type?new lc(null,t,l):h),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=EI(c);if(d&&Jn.protocols.indexOf(d)===-1){n(new Ze("Unsupported protocol "+d+":",Ze.ERR_BAD_REQUEST,t));return}l.send(i||null)})},Ou={http:vI,xhr:AI};oe.forEach(Ou,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const PI={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let i=0;i<e&&(r=t[i],!(n=oe.isString(r)?Ou[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new Ze(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(oe.hasOwnProp(Ou,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!oe.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Ou};function ep(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lc(null,t)}function Gw(t){return ep(t),t.headers=Ri.from(t.headers),t.data=Zh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),PI.getAdapter(t.adapter||qv.adapter)(t).then(function(n){return ep(t),n.data=Zh.call(t,t.transformResponse,n),n.headers=Ri.from(n.headers),n},function(n){return Ax(n)||(ep(t),n&&n.response&&(n.response.data=Zh.call(t,t.transformResponse,n.response),n.response.headers=Ri.from(n.response.headers))),Promise.reject(n)})}const Qw=t=>t instanceof Ri?t.toJSON():t;function pa(t,e){e=e||{};const r={};function n(l,c,f){return oe.isPlainObject(l)&&oe.isPlainObject(c)?oe.merge.call({caseless:f},l,c):oe.isPlainObject(c)?oe.merge({},c):oe.isArray(c)?c.slice():c}function i(l,c,f){if(oe.isUndefined(c)){if(!oe.isUndefined(l))return n(void 0,l,f)}else return n(l,c,f)}function o(l,c){if(!oe.isUndefined(c))return n(void 0,c)}function s(l,c){if(oe.isUndefined(c)){if(!oe.isUndefined(l))return n(void 0,l)}else return n(void 0,c)}function a(l,c,f){if(f in e)return n(l,c);if(f in t)return n(void 0,l)}const u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(l,c)=>i(Qw(l),Qw(c),!0)};return oe.forEach(Object.keys(t).concat(Object.keys(e)),function(c){const f=u[c]||i,d=f(t[c],e[c],c);oe.isUndefined(d)&&f!==a||(r[c]=d)}),r}const kx="1.2.6",zv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{zv[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Jw={};zv.transitional=function(e,r,n){function i(o,s){return"[Axios v"+kx+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,a)=>{if(e===!1)throw new Ze(i(s," has been removed"+(r?" in "+r:"")),Ze.ERR_DEPRECATED);return r&&!Jw[s]&&(Jw[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function kI(t,e,r){if(typeof t!="object")throw new Ze("options must be an object",Ze.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const o=n[i],s=e[o];if(s){const a=t[o],u=a===void 0||s(a,o,t);if(u!==!0)throw new Ze("option "+o+" must be "+u,Ze.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ze("Unknown option "+o,Ze.ERR_BAD_OPTION)}}const eg={assertOptions:kI,validators:zv},Vi=eg.validators;let bf=class{constructor(e){this.defaults=e,this.interceptors={request:new Hw,response:new Hw}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=pa(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&eg.assertOptions(n,{silentJSONParsing:Vi.transitional(Vi.boolean),forcedJSONParsing:Vi.transitional(Vi.boolean),clarifyTimeoutError:Vi.transitional(Vi.boolean)},!1),i!==void 0&&eg.assertOptions(i,{encode:Vi.function,serialize:Vi.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s;s=o&&oe.merge(o.common,o[r.method]),s&&oe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),r.headers=Ri.concat(s,o);const a=[];let u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(u=u&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let c,f=0,d;if(!u){const p=[Gw.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),d=p.length,c=Promise.resolve(r);f<d;)c=c.then(p[f++],p[f++]);return c}d=a.length;let h=r;for(f=0;f<d;){const p=a[f++],g=a[f++];try{h=p(h)}catch(_){g.call(this,_);break}}try{c=Gw.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=l.length;f<d;)c=c.then(l[f++],l[f++]);return c}getUri(e){e=pa(this.defaults,e);const r=Px(e.baseURL,e.url);return Ex(r,e.params,e.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(e){bf.prototype[e]=function(r,n){return this.request(pa(n||{},{method:e,url:r,data:(n||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function r(n){return function(o,s,a){return this.request(pa(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}bf.prototype[e]=r(),bf.prototype[e+"Form"]=r(!0)});const Mu=bf;class Hv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{n.subscribe(a),o=a}).then(i);return s.cancel=function(){n.unsubscribe(o)},s},e(function(o,s,a){n.reason||(n.reason=new lc(o,s,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Hv(function(i){e=i}),cancel:e}}}const TI=Hv;function CI(t){return function(r){return t.apply(null,r)}}function OI(t){return oe.isObject(t)&&t.isAxiosError===!0}const tg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tg).forEach(([t,e])=>{tg[e]=t});const MI=tg;function Tx(t){const e=new Mu(t),r=fx(Mu.prototype.request,e);return oe.extend(r,Mu.prototype,e,{allOwnKeys:!0}),oe.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Tx(pa(t,i))},r}const Gt=Tx(qv);Gt.Axios=Mu;Gt.CanceledError=lc;Gt.CancelToken=TI;Gt.isCancel=Ax;Gt.VERSION=kx;Gt.toFormData=Ed;Gt.AxiosError=Ze;Gt.Cancel=Gt.CanceledError;Gt.all=function(e){return Promise.all(e)};Gt.spread=CI;Gt.isAxiosError=OI;Gt.mergeConfig=pa;Gt.AxiosHeaders=Ri;Gt.formToJSON=t=>xx(oe.isHTMLForm(t)?new FormData(t):t);Gt.HttpStatusCode=MI;Gt.default=Gt;const NI=Gt;function DI(t){const{meetingId:e}=t,[r,n]=ge.useState(),[i,o]=ge.useState();ge.useEffect(()=>{const u=Sl("http://localhost:3000");return n(u),()=>{u.disconnect()}},[]),ge.useEffect(()=>{r==null||i==null||(r.emit("join-room",e),r.emit("get-document",e),r.once("load-document",u=>{i.setContents(u),i.enable()}))},[r,i,e]),ge.useEffect(()=>{if(r==null||i==null)return;const u=setInterval(()=>{r.emit("save-document",i.getContents())},{}.VITE_SAVE_INTERVAL_MS);return()=>{clearInterval(u)}},[r,i]),ge.useEffect(()=>{if(r==null||i==null)return;const u=l=>{i.updateContents(l)};return r.on("receive-changes",u),()=>{r.off("receive-changes",u)}},[r,i]),ge.useEffect(()=>{if(r==null||i==null)return;const u=(l,c,f)=>{f==="user"&&r.emit("send-changes",l)};return i.on("text-change",u),()=>{i.off("text-change",u)}},[r,i]);const s=ge.useCallback(u=>{if(u==null)return;u.innerHTML="";const l=document.createElement("div");u.append(l);const c=new M3(l,{modules:{syntax:!0,toolbar:[["code-block"]]},theme:"snow"});c.disable(),c.setText("Loading..."),o(c)},[]);return vt(hb,{children:[_e("div",{className:"container",ref:s}),_e("button",{className:"btn btn-secondary",onClick:async()=>{const u=i.getText(0,i.getLength());console.log(u);const l={code:u};await NI.post({}.VITE_COMPILER_PATH,l).then(c=>console.log(c))},children:"Compile"})]})}ge.createContext({});var II=console,G=II,LI=(t,e)=>({peers:new Set,addPeerPort:r=>{G.info({message:`Adding peer ${r} to port store`,meta:{peer:r}}),t(n=>({peers:n.peers.add(r)}))},removePeerPort:r=>{const n=e().peers;n.delete(r),G.info({message:`Removed peer ${r} from port store`,meta:{peerSet:n}}),t({peers:n})}}),BI=LI,FI=t=>({isTest:!0,toggleIsTest:()=>{t(e=>({isTest:!e.isTest}))}}),jI=FI,$I=(t,e)=>({isLastNActive:!1,activeViewPortIds:new Set,activeViewPortCount:0,maxViewPortCount:7,getSpaceLeftInViewport:()=>e().maxViewPortCount-e().activeViewPortCount,getActiveViewPortIds:()=>e().activeViewPortIds,activateLastN:()=>{e().getSpaceLeftInViewport()===0&&(G.info({type:"ViewPortStore",message:"activateLastN() | no space left in viewport"}),t({isLastNActive:!0}))},deactivateLastN:()=>{e().activeViewPortCount<=e().maxViewPortCount&&(G.info({type:"ViewPortStore",message:"deactivateLastN() | deactivating last n"}),t({isLastNActive:!1}))},setActiveViewPort:r=>{G.info({activeViewPortIds:r,message:"Setting active view port ids",meta:{activeViewPortIds:r}});const n=r.length;let i=e().isLastNActive;n<e().maxViewPortCount&&(G.info({message:"setActiveViewPort() | Setting lastNStatus to false as less peers joined",meta:{initViewPortCount:n,maxViewPortCount:e().maxViewPortCount}}),i=!1);const o=new Set(r);t({isLastNActive:i,activeViewPortIds:o,activeViewPortCount:n})},addPeerViewPort:r=>{G.info({peerId:r,message:"Adding peer view port",meta:{peerId:r}});const n=e().activeViewPortCount;if(n<e().maxViewPortCount){G.info({message:"addPeerViewPort() | Adding peer to active view port ids",meta:{peerId:r,activeViewPortCount:n,maxViewPortCount:e().maxViewPortCount}});const i=e().activeViewPortIds;i.add(r),t({activeViewPortIds:i,activeViewPortCount:n+1})}},removePeerViewPort(r){G.info({peerId:r,message:"Removing peer view port",meta:{peerId:r}});const n=e().activeViewPortCount,i=e().activeViewPortIds;i.has(r)&&n>0&&(G.info({message:"removePeerViewPort() | Removing peer from active view port ids",meta:{peerId:r,activeViewPortCount:n,maxViewPortCount:e().maxViewPortCount}}),i.delete(r),t({activeViewPortIds:i,activeViewPortCount:n-1}))}}),UI=$I;const Yw=t=>{let e;const r=new Set,n=(u,l)=>{const c=typeof u=="function"?u(e):u;if(!Object.is(c,e)){const f=e;e=l??typeof c!="object"?c:Object.assign({},e,c),r.forEach(d=>d(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The destroy method will be unsupported in the future version. You should use unsubscribe function returned by subscribe. Everything will be garbage collected if store is garbage collected."),r.clear()}};return e=t(n,i,a),a},Cx=t=>t?Yw(t):Yw;var qI=t=>(({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] default export is deprecated, instead import { createStore } ..."),Cx(t)),rg={},zI={get exports(){return rg},set exports(t){rg=t}},Ox={},ng={},HI={get exports(){return ng},set exports(t){ng=t}},Mx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=ge;function VI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var KI=typeof Object.is=="function"?Object.is:VI,WI=ma.useState,GI=ma.useEffect,QI=ma.useLayoutEffect,JI=ma.useDebugValue;function YI(t,e){var r=e(),n=WI({inst:{value:r,getSnapshot:e}}),i=n[0].inst,o=n[1];return QI(function(){i.value=r,i.getSnapshot=e,tp(i)&&o({inst:i})},[t,r,e]),GI(function(){return tp(i)&&o({inst:i}),t(function(){tp(i)&&o({inst:i})})},[t]),JI(r),r}function tp(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!KI(t,r)}catch{return!0}}function XI(t,e){return e()}var ZI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XI:YI;Mx.useSyncExternalStore=ma.useSyncExternalStore!==void 0?ma.useSyncExternalStore:ZI;(function(t){t.exports=Mx})(HI);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=ge,eL=ng;function tL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rL=typeof Object.is=="function"?Object.is:tL,nL=eL.useSyncExternalStore,iL=Ad.useRef,oL=Ad.useEffect,sL=Ad.useMemo,aL=Ad.useDebugValue;Ox.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var o=iL(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=sL(function(){function u(h){if(!l){if(l=!0,c=h,h=n(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,rL(c,h))return p;var g=n(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var l=!1,c,f,d=r===void 0?null:r;return[function(){return u(e())},d===null?void 0:function(){return u(d())}]},[e,r,n,i]);var a=nL(t,o[0],o[1]);return oL(function(){s.hasValue=!0,s.value=a},[a]),aL(a),a};(function(t){t.exports=Ox})(zI);const lL=Pf(rg),{useSyncExternalStoreWithSelector:cL}=lL;function uL(t,e=t.getState,r){const n=cL(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return ge.useDebugValue(n),n}const Xw=t=>{({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof t!="function"&&console.warn('[DEPRECATED] Passing a vanilla store will be unsupported in the future version. Please use `import { useStore } from "zustand"` to use the vanilla store in React.');const e=typeof t=="function"?Cx(t):t,r=(n,i)=>uL(e,n,i);return Object.assign(r,e),r},fL=t=>t?Xw(t):Xw;var Nx=t=>(({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] default export is deprecated, instead import { create } from'zustand'"),fL(t));const ig=new Map,Gc=t=>{const e=ig.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([r,n])=>[r,n.getState()])):{}},dL=(t,e,r)=>{if(t===void 0)return{type:"untracked",connection:e.connect(r)};const n=ig.get(r.name);if(n)return{type:"tracked",store:t,...n};const i={connection:e.connect(r),stores:{}};return ig.set(r.name,i),{type:"tracked",store:t,...i}},hL=(t,e={})=>(r,n,i)=>{const{enabled:o,anonymousActionType:s,store:a,...u}=e;let l;try{l=(o??({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!l)return({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(r,n,i);const{connection:c,...f}=dL(a,l,u);let d=!0;i.setState=(g,_,m)=>{const v=r(g,_);if(!d)return v;const S=m===void 0?{type:s||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(c==null||c.send(S,n()),v):(c==null||c.send({...S,type:`${a}/${S.type}`},{...Gc(u.name),[a]:i.getState()}),v)};const h=(...g)=>{const _=d;d=!1,r(...g),d=_},p=t(i.setState,n,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,_])=>[g,g===f.store?p:_.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const _=i.dispatch;i.dispatch=(...m)=>{({VITE_BACKEND_SERVER:"http://localhost:3000",VITE_HUDDLE_KEY:"2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&m[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),_(...m)}}return c.subscribe(g=>{var _;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return rp(g.payload,m=>{if(m.type==="__setState"){if(a===void 0){h(m.state);return}Object.keys(m.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=m.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(m)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(Gc(u.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(Gc(u.name));case"ROLLBACK":return rp(g.state,m=>{if(a===void 0){h(m),c==null||c.init(i.getState());return}h(m[a]),c==null||c.init(Gc(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return rp(g.state,m=>{if(a===void 0){h(m);return}JSON.stringify(i.getState())!==JSON.stringify(m[a])&&h(m[a])});case"IMPORT_STATE":{const{nextLiftedState:m}=g.payload,v=(_=m.computedStates.slice(-1)[0])==null?void 0:_.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,m);return}case"PAUSE_RECORDING":return d=!d}return}}),p},Dx=hL,rp=(t,e)=>{let r;try{r=JSON.parse(t)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&e(r)};var pL=(t,e)=>({...jI(t),...BI(t,e),...UI(t,e)}),mL=Nx(Dx(pL,{name:"huddle01-PortStore",anonymousActionType:"action"})),{getState:yn,setState:dj}=mL,gL=t=>({isTest:!0,toggleIsTest:()=>{t(e=>({isTest:!e.isTest}))}}),vL=gL,Ix={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},yL={optional:[{googDscp:!0}]},wL=[{scaleResolutionDownBy:4,maxBitrate:3e5,rid:"r0",scalabilityMode:"S1T3"},{scaleResolutionDownBy:2,maxBitrate:6e5,rid:"r1",scalabilityMode:"S1T3"},{scaleResolutionDownBy:1,maxBitrate:9e6,rid:"r2",scalabilityMode:"S1T3"}],_L=(t,e)=>({mediaDevice:null,stream:null,streamError:null,deviceLoading:!0,streamsArry:[],enableStream:async()=>{var r;if(e().stream){G.error({type:"error",msg:"createMediaSlice.enableStream() | No stream"});return}const n={video:{...Ix.hd,deviceId:(r=e().mediaDevice)==null?void 0:r.deviceId}};if(await navigator.mediaDevices.getUserMedia(n).then(i=>{const o=[...e().streamsArry,i];t(()=>({stream:i,deviceLoading:!1,streamsArry:o}))}).catch(i=>{t(()=>({streamError:{type:i.name,blocked:!0},deviceLoading:!1}))}),!e().mediaDevice){const i=await e().getMediaDevices();G.info({mediaDevices:i}),e().setMediaDevice(i[0])}},getMediaDevices:async()=>{const{setStreamError:r}=e();try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:o})=>o==="videoinput")}catch(n){return r(n==null?void 0:n.name),[]}},setMediaDevice:r=>{t(()=>({mediaDevice:r})),G.info("set")},switchMediaStream:r=>{if(G.info({type:"info",msg:"switchMediaStream() | Switching media stream"}),!r){G.info({type:"info",msg:"switchMediaStream() | No stream Found using default Stream"});return}e().pauseTracks(),e().setMediaStream(r)},setMediaStream:r=>{G.info({type:"info",msg:"setMediaStream() | Setting media stream",stream:r}),t(()=>({stream:r}))},pauseTracks:()=>{const{stream:r}=e();r&&(e().streamsArry.forEach(n=>{n.getTracks().forEach(i=>{i.stop()})}),r.getTracks().forEach(n=>n.stop()),t(()=>({stream:null,streamsArry:[]})))},setDeviceLoading:r=>{t(()=>({deviceLoading:r}))},setStreamError:r=>{t(()=>({streamError:{type:r||"UnknownError",blocked:r==="NotAllowedError"}}))}}),bL=_L,SL=(t,e)=>({micState:{mediaDevice:null,stream:null,streamError:null,deviceLoading:!0},audioDevices:[],enableAudioStream:async()=>{var r;if(e().micState.stream){G.error({type:"error",msg:"createMediaSlice.enableStream() | No stream"});return}const n={audio:{deviceId:(r=e().micState.mediaDevice)==null?void 0:r.deviceId}};if(G.info("Enabling new Mic stream"),await navigator.mediaDevices.getUserMedia(n).then(i=>{t(()=>({micState:{...e().micState,stream:i,deviceLoading:!1}}))}).catch(i=>{t(()=>({micState:{...e().micState,streamError:{type:i.name,blocked:i.name==="NotAllowedError"},deviceLoading:!1}}))}),navigator.mediaDevices.ondevicechange=()=>{e().getAudioDevices()},!e().micState.mediaDevice){const i=await e().getAudioDevices();G.info({audioDevices:i}),e().setAudioDevice(i[0])}},getAudioDevices:async()=>{const{setAudioStreamError:r}=e();try{const i=(await navigator.mediaDevices.enumerateDevices()).filter(({kind:o})=>o==="audioinput");return t(()=>({audioDevices:i})),i}catch(n){return r(n==null?void 0:n.name),[]}},setAudioDevice:r=>{t(()=>({micState:{...e().micState,mediaDevice:r}}))},switchAudioStream:r=>{if(G.info({type:"info",msg:"switchAudioStream() | Switching A stream"}),!r){G.info({type:"info",msg:"switchAudioStream() | No stream Found using default Stream"});return}e().pauseAudioTracks(),e().setAudioStream(r)},setAudioStream:r=>{G.info({type:"info",msg:"setAudioStream() | Setting Audio stream",stream:r}),t(()=>({micState:{...e().micState,stream:r}}))},pauseAudioTracks:()=>{const{stream:r}=e().micState;r&&(G.info({type:"info",msg:"pauseAudioTracks() | Pausing Audio stream"}),r.getTracks().forEach(n=>n.stop()),t(()=>({micState:{...e().micState,stream:null}})))},setAudioDeviceLoading:r=>{t(()=>({micState:{...e().micState,deviceLoading:r}}))},setAudioStreamError:r=>{t(()=>({micState:{...e().micState,streamError:{type:r||"UnknownError",blocked:r==="NotAllowedError"}}}))}}),EL=SL,RL=(t,e)=>({networkStats:{last_updated:Date.now(),data:{}},bandwidthSaver:!1,setBandwidthSaver:r=>{t(()=>({bandwidthSaver:r}))},setNetworkStats:r=>{const n=e().networkStats;n.last_updated>r.last_updated||n.data!==r.data&&t(()=>({networkStats:r}))}}),xL=RL,AL=t=>({peerDisplayName:"",setPeerDisplayName:e=>{t(()=>({peerDisplayName:e}))}}),PL=AL,Qc={cam:"isCamPaused",mic:"isMicPaused",share:"isSharePaused",shareAudio:"isShareAudioPaused"},kL=(t,e)=>({peerCount:0,peers:{},increasePeerCount:(r=1)=>{t(n=>({peerCount:n.peerCount+r})),G.info({message:"increasePeerCount",peerCount:e().peerCount})},decreasePeerCount:(r=1)=>{if(e().peerCount<r){G.error({message:"decreacePeerCount | peerCount is not sufficient",peerCount:e().peerCount});return}t(n=>({peerCount:n.peerCount-r})),G.info({message:"decreacePeerCount",peerCount:e().peerCount})},addPeer:(r,n)=>{const i=e().peers;t(()=>({peers:{...i,[r]:n}}))},removePeer:r=>{const n=e().peers;delete n[r],t(()=>({peers:{...n}}))},addConsumerMedia:(r,n,i)=>{const o=e().peers[r];t(()=>{var s,a,u,l;return{peers:{...e().peers,[r]:{...o,consumers:{mic:(s=o.consumers)==null?void 0:s.mic,cam:(a=o.consumers)==null?void 0:a.cam,share:(u=o.consumers)==null?void 0:u.share,shareAudio:(l=o.consumers)==null?void 0:l.shareAudio,[n]:i},[Qc[n]]:!1,isSharePaused:n==="share"}}}})},removeConsumerMedia:(r,n)=>{var i,o;const s=e().peers;s[r]&&((o=(i=s[r])==null?void 0:i.consumers)==null||delete o[n],t(()=>({peers:{...s,[r]:{...s[r],[Qc[n]]:!0}}})))},pauseConsumerMedia:(r,n)=>{const i=e().peers;i[r]&&t(()=>({peers:{...i,[r]:{...i[r],[Qc[n]]:!0}}}))},resumeConsumerMedia(r,n){const i=e().peers;i[r]&&t(()=>({peers:{...i,[r]:{...i[r],[Qc[n]]:!1}}}))},togglePeerHandRaise(r,n){const i=e().peers;i[r]&&t(()=>({peers:{...i,[r]:{...i[r],isHandRaised:n}}}))},updatePeers:(r,n,i)=>{const o=e().peers,s={...o,[r]:{...o[r],[n]:i}};t(()=>({peers:{...s}}))},addReaction:(r,n)=>{const i=e().peers,o=i[r];delete i[r],t(()=>({peers:{...i,[r]:{...o,reaction:n}}})),setTimeout(()=>{e().removeReaction(r)},5e3)},removeReaction:r=>{const n=e().peers,i=n[r];delete n[r],t(()=>({peers:{...n,[r]:{...i,reaction:""}}}))},setPeerAvatarUrl(r,n){const i=e().peers,o=i[r];delete i[r],t(()=>({peers:{...i,[r]:{...o,avatarUrl:n}}}))}}),TL=kL,CL=t=>({recordingState:{inProgress:!1,processing:!1,started:!1},uploadToIpfs:!1,recordings:[],newRecording:null,notifyRecording:{started:!1,finished:!1},startRecording:()=>{t(e=>({recordingState:{...e.recordingState,inProgress:!0}}))},toggleRecording:e=>{t(r=>({recordingState:{...r.recordingState,started:e}}))},stopRecording:()=>{t(e=>({recordingState:{...e.recordingState,inProgress:!1,processing:!0}}))},updateRecordings:e=>{t(r=>({recordings:[...r.recordings,e],newRecording:e,recordingState:{...r.recordingState,processing:!1},uploadToIpfs:e.uploadToIpfs}))},setRecordings:e=>{t(r=>({...r,recordings:e}))},endRecording:()=>{t(e=>({recordingState:{...e.recordingState,inProgress:!1,processing:!1}}))},removeNewrecording:()=>{t(()=>({newRecording:null}))},setNotifyRecording:(e,r)=>{t(n=>({notifyRecording:{...n.notifyRecording,[e]:r}}))}}),OL=CL,ML=(t,e)=>({roomState:{roomId:"",joined:!1,droppedState:{type:"not-joined",isDropped:!1},createdAt:0,isRoomLocked:!1},setRoomLockState:r=>{const n=e().roomState;t(()=>({roomState:{...n,isRoomLocked:r}}))},setRoomId:r=>{const n=e().roomState;t(()=>({roomState:{...n,roomId:r}}))},setJoined:()=>{const r=e().roomState;t(()=>({roomState:{...r,joined:!0}}))},setCreatedAt:r=>{const n=e().roomState;t(()=>({roomState:{...n,createdAt:r}}))},setDropState:r=>{const n=e().roomState;t(()=>({roomState:{roomId:n.roomId,joined:!1,droppedState:{type:r,isDropped:!0},createdAt:n.createdAt,isRoomLocked:n.isRoomLocked}}))}}),NL=ML,DL=(t,e)=>({activeSpeaker:null,setActiveSpeaker(r){t(()=>({activeSpeaker:r}))}}),IL=DL,Uo,LL=async t=>{if(Uo&&Uo.isActive())return G.info({type:"error",msg:"initFigment() | Figment is already active"}),t;Uo=new window.FigmentApp({customerKey:"d41d8cd98f00b204e9800998ecf8427e"});const e=await Uo.activate({activeApp:"VB",vbQuality:"performance",inputMediaStream:{mediaStream:t,stopTracksOnDestruction:!0}});return G.info({type:"info",msg:"initFigment() | Figment is activated"}),e},og=async()=>{try{Uo&&Uo.isActive()&&await Uo.deactivate()}catch(t){G.error(t)}},BL=(t,e)=>({isFigmentEnabled:!1,figment:{figmentType:"enable",figmentStream:null,figmentstreamError:null,figmentLoading:!1},enableFigmentCamStream:async r=>{if(e().isFigmentEnabled){G.info({type:"info",msg:"Figment stream already enabled"});return}const n={video:{...Ix.hd,deviceId:r==null?void 0:r.deviceId}};G.info("Enabling new figment stream");const i=e().figment;await navigator.mediaDevices.getUserMedia(n).then(o=>{t(()=>({figment:{...i,figmentStream:o,figmentLoading:!1},isFigmentEnabled:!0}))}).catch(o=>{t(()=>({figment:{...i,figmentstreamError:{type:o.name,blocked:o.name==="NotAllowedError"},figmentLoading:!1},isFigmentEnabled:!1}))})},disableFigmentStream:()=>{const{figment:{figmentStream:r}}=e();if(!r){G.info({type:"error",message:"figmentStream is null"});return}r.getTracks().forEach(n=>n.stop()),t(()=>({figment:{...e().figment,figmentStream:null,figmentLoading:!1},isFigmentEnabled:!1}))},setFigmentStream:r=>{t(()=>({figment:{...e().figment,figmentStream:r}}))},setFigmentStreamError:r=>{t(()=>({figment:{...e().figment,figmentstreamError:{type:r||"UnknownError",blocked:r==="NotAllowedError"}}}))},setFigmentEnabled:r=>{t(()=>({isFigmentEnabled:r}))},toggleFigmentType:r=>{G.info("toggleFigmentType",{figmentType:r}),t(()=>({figment:{...e().figment,figmentType:r}}))},toggleFigmentStream:async r=>{if(r==="enable"&&!e().figment.figmentStream){G.info({type:"info",msg:"Figment Stream Init, Cam Stream Returned"}),await e().enableFigmentCamStream();return}if(r==="switch"){G.info({type:"info",msg:"Toggling figment stream"}),e().disableFigmentStream(),G.info({type:"info",msg:"Disable figment stream",figment:e().figment.figmentStream}),await e().enableFigmentCamStream(),G.info({type:"info",msg:"Enable figment stream",figment:e().figment.figmentStream});return}r==="disable"?e().disableFigmentStream():G.error({type:"error",message:"toggleFigmentStream: invalid streamState",streamState:r})},initFigmentStream:async()=>{const r=e().figment.figmentStream;if(r&&e().isFigmentEnabled){const n=await LL(r);G.info({figTrack:n,stream:r,isSame:n===r}),e().setFigmentStream(n),G.info({type:"info",msg:"Figment Stream Initialised finally",figment:n})}r||G.error({type:"error",message:"Figment Stream is null",stream:r})}}),FL=BL,jL=(t,e)=>({gridView:"grid",screenSharePeerId:null,setGridView:(r,n)=>{if(r==="share"&&!n){G.error({type:"error",message:"GridViewTypes.share requires peerId",gridView:r});return}if(r==="share"&&n){t(()=>({gridView:r,screenSharePeerId:n}));return}t(()=>({gridView:r,screenSharePeerId:null}))},enableScreenShare:r=>{if(!r){G.error({type:"error",message:"GridViewTypes.share requires peerId",peerId:r});return}t(()=>({gridView:"share",screenSharePeerId:r}))},disableScreenShare:(r="grid")=>{e().gridView==="share"&&t(()=>({gridView:r,screenSharePeerId:null}))}}),$L=jL,UL=(t,e)=>({hostId:null,hostState:"host-true",meId:"",coHosts:[],hostControl:{allowVideo:!0,allowAudio:!0,allowScreenShare:!0,allowChat:!0},setHost:r=>{t(()=>({hostId:r}))},setCoHosts:r=>{t(()=>({coHosts:r}))},setHostState:r=>{t(()=>({hostState:r}))},setHostControl:r=>{t(()=>({hostControl:r}))},setSingleHostControl:(r,n)=>{t(()=>({hostControl:{...e().hostControl,[r]:n}}))},initHostControls:(r,n,i,o)=>{t(()=>({hostId:r,meId:n,coHosts:o,hostControl:i}))}}),qL=UL,zL=(t,e)=>({maxViewPortCount:7,activeViewPort:0,isLastNActive:!1,lastNPeerIds:[],getTotalNumberOfSwaps:r=>{let n=0;const i=e().lastNPeerIds,o=new Set(i);return r.map(s=>{o.has(s)||(n+=1)}),n},setLastNPeerIds:r=>{const n=e().lastNPeerIds,i=e().getTotalNumberOfSwaps(r);G.info({type:"info",message:`totalNumberOfSwaps: ${i}`,meta:{lastNPeerIds:r,prevLastN:n,totalNumberOfSwaps:i}}),t(()=>({lastNPeerIds:r})),G.info({type:"info",message:"setLastNPeerIds() | Added a new LastNPeerId",meta:{prevLastN:n,lastN:e().lastNPeerIds}})},addPeerToLastN:r=>{const n=e().lastNPeerIds;if(n.length>e().maxViewPortCount){G.error({type:"error",message:"addPeerToLastN() | lastNPeerIds.length > get().maxViewPortCount",meta:{lastNPeerIds:n,maxViewPortCount:e().maxViewPortCount}});return}if(n.length===e().maxViewPortCount){G.error({type:"error",message:"addPeerToLastN() | lastNPeerIds.length === get().maxViewPortCount",meta:{lastNPeerIds:n,maxViewPortCount:e().maxViewPortCount}});return}n.length<e().maxViewPortCount&&(n.push(r),t(()=>({lastNPeerIds:n})),G.info({type:"info",message:"addPeerToLastN() | Peer Added to lastN",meta:{lastN:e().lastNPeerIds}}))},removePeerFromLastN:r=>{const n=e().lastNPeerIds,i=n.indexOf(r);if(i>-1){n.splice(i,1),t(()=>({lastNPeerIds:n})),G.info({type:"info",message:"removePeerFromLastN() | Peer Removed from lastN",meta:{lastN:e().lastNPeerIds}});return}G.error({type:"error",message:"removePeerFromLastN() | Peer not found in lastN",meta:{peerId:r,lastN:e().lastNPeerIds}})},activateLastN:()=>{G.info({type:"info",message:"activateLastN",meta:{lastN:e().lastNPeerIds}});const r=!0;t(()=>({isLastNActive:r}))},deactivateLastN:()=>{G.info({type:"info",message:"deactivateLastN",meta:{lastN:e().lastNPeerIds}});const r=!1;t(()=>({isLastNActive:r}))},addActiveViewPort:(r=1)=>{const n=e().activeViewPort;if(n+r>e().maxViewPortCount){G.error({type:"error",message:"activeViewPort() | Cannot render these many viewports check calculation",meta:{activeViewPort:n}});return}t(()=>({activeViewPort:n+r}))},removeActiveViewPort:(r=1)=>{const n=e().activeViewPort;if(n<r){G.error({type:"error",message:"removeActiveViewPort() | No Active ViewPort",meta:{activeViewPort:n,value:r}});return}t(()=>({activeViewPort:n-r}))}}),HL=zL,VL=(t,e)=>({layout:{type:"sideBarView"},setLayoutView:r=>{if(e().layout.type===r){G.warn("Layout type is already set to: ",r);return}t(()=>({layout:{type:r}}))}}),KL=VL,WL=(t,e)=>({streamData:{},isLiveStreaming:!1,livePlatform:"livepeer",setPlatform:r=>{t({livePlatform:r})},startStreaming:r=>{if(e().streamData[r]){G.info({message:`Live streaming already started for platform ${r}`,platform:r});return}const i={isLive:!1,isLoading:!0,url:""};t({streamData:{...e().streamData,[r]:i},livePlatform:r})},stopStreaming:r=>{const n=e().streamData[r];if(!n){G.info({message:`Tried to set stream loading for platform ${r} but it was not found in the store`,meta:{platform:r}});return}if(!n.isLive){G.info({message:`Tried to set stream loading for platform ${r} but it was NOT live`,meta:{platform:r}});return}const i=e().streamData;e().removeStreamData(r),t({streamData:i})},setStreamData:(r,n)=>{G.info({message:`Setting stream data for platform ${r}`,meta:{platform:r,streamData:n}}),t({streamData:{...e().streamData,[r]:n}})},removeStreamData:r=>{const n=e().streamData;if(!n){G.info({message:`Tried to remove stream data for platform ${r} but it was not found in the store`,meta:{platform:r}});return}G.info({message:`Removing stream data for platform ${r}`,meta:{platform:r}}),delete n[r],t({streamData:n})}}),GL=WL,QL=t=>({lobbyPeers:[],addLobbyPeer:e=>{t(r=>({lobbyPeers:[...r.lobbyPeers,e]}))},setLobbyPeers:e=>{t(()=>({lobbyPeers:e}))}}),JL=QL,Nu={cam:"isCamPaused",mic:"isMicPaused",share:"isShared",shareAudio:"isAudioShared"},YL=(t,e)=>({peerId:"",geo:"",displayName:"",avatarUrl:"",isSharePaused:!0,isCamPaused:!1,isMicPaused:!1,isHandRaised:!1,reaction:"",producers:{cam:void 0,mic:void 0,share:void 0,shareAudio:void 0},initMe:r=>{t(r)},setMe:(r,n)=>{t(()=>({[r]:n}))},setGeo:r=>{t(()=>({geo:r}))},setAvatarUrl:r=>{t(()=>({avatarUrl:r}))},addProducerMedia:(r,n)=>{const i=e().producers;t(()=>({producers:{...i,[r]:n},[Nu[r]]:!1}))},removeProducerMedia:r=>{const n=e().producers;delete n[r],t(()=>({producers:{...n},[Nu[r]]:!0}))},toggleProducerMedia:(r,n)=>{t(()=>({[Nu[r]]:n==="off"}))},updateProducerMedia(r,n){const i=e().producers;t(()=>({producers:{...i,[r]:n}}))},toggleMeHandRaise:r=>{t(()=>({isHandRaised:r}))},addMeReaction:r=>{t(()=>({reaction:r})),setTimeout(()=>{e().rmMeReaction()},5e3)},rmMeReaction:()=>{t(()=>({reaction:""}))}}),XL=YL,ZL=new Map,np=ZL,e4=Sf;function Sf(){}Sf.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(r,n,i){this.callbacks=this.callbacks||{};var o=arguments.length===3,s=o?arguments[1]:void 0,a=o?arguments[2]:arguments[1];return a._groupName=s,(this.callbacks[r]=this.callbacks[r]||[]).push(a),this},e.once=function(r,n,i){var o=this,s=arguments.length===3,a=s?arguments[1]:void 0,u=s?arguments[2]:arguments[1];function l(){o.off(r,l),u.apply(this,arguments)}return this.on(r,a,l),this},e.releaseGroup=function(r){this.callbacks=this.callbacks||{};var n,i,o,s;for(n in this.callbacks)for(s=this.callbacks[n],i=0,o=s.length;i<o;i++)s[i]._groupName===r&&(s.splice(i,1),i--,o--);return this},e.off=function(r,n){this.callbacks=this.callbacks||{};var i=this.callbacks[r],o;return i?arguments.length===1?(delete this.callbacks[r],this):(o=i.indexOf(n),o!==-1&&(i.splice(o,1),i.length===0&&delete this.callbacks[r]),this):this},e.emit=function(r){this.callbacks=this.callbacks||{};var n=[].slice.call(arguments,1),i=this.callbacks[r],o=this.getWildcardCallbacks(r),s,a,u;if(i)for(u=i.slice(),s=0,a=u.length;s<a&&u[s];++s)u[s].apply(this,n);if(o)for(a=o.length,u=o.slice(),s=0,a=u.length;s<a&&u[s];++s)u[s].apply(this,[r].concat(n));return this},e.getWildcardCallbacks=function(r){this.callbacks=this.callbacks||{};var n,i,o=[];for(n in this.callbacks)i=n.split("*"),(n==="*"||i.length===2&&r.slice(0,i[0].length)===i[0])&&(o=o.concat(this.callbacks[n]));return o}};Sf.mixin(Sf);var t4=e4;function r4(t,e){var r=-1/0;t.getFloatFrequencyData(e);for(var n=4,i=e.length;n<i;n++)e[n]>r&&e[n]<0&&(r=e[n]);return r}var sg;typeof window<"u"&&(sg=window.AudioContext||window.webkitAudioContext);var wn=null,n4=function(t,n){var r=new t4;if(!sg)return r;var n=n||{},i=n.smoothing||.1,o=n.interval||50,s=n.threshold,a=n.play,u=n.history||10,l=!0;wn=n.audioContext||wn||new sg;var c,f,d;d=wn.createAnalyser(),d.fftSize=512,d.smoothingTimeConstant=i,f=new Float32Array(d.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(c=wn.createMediaElementSource(t),typeof a>"u"&&(a=!0),s=s||-50):(c=wn.createMediaStreamSource(t),s=s||-50),c.connect(d),a&&d.connect(wn.destination),r.speaking=!1,r.suspend=function(){return wn.suspend()},r.resume=function(){return wn.resume()},Object.defineProperty(r,"state",{get:function(){return wn.state}}),wn.onstatechange=function(){r.emit("state_change",wn.state)},r.setThreshold=function(g){s=g},r.setInterval=function(g){o=g},r.stop=function(){l=!1,r.emit("volume_change",-100,s),r.speaking&&(r.speaking=!1,r.emit("stopped_speaking")),d.disconnect(),c.disconnect()},r.speakingHistory=[];for(var h=0;h<u;h++)r.speakingHistory.push(0);var p=function(){setTimeout(function(){if(l){var g=r4(d,f);r.emit("volume_change",g,s);var _=0;if(g>s&&!r.speaking){for(var m=r.speakingHistory.length-3;m<r.speakingHistory.length;m++)_+=r.speakingHistory[m];_>=2&&(r.speaking=!0,r.emit("speaking"))}else if(g<s&&r.speaking){for(var m=0;m<r.speakingHistory.length;m++)_+=r.speakingHistory[m];_==0&&(r.speaking=!1,r.emit("stopped_speaking"))}r.speakingHistory.shift(),r.speakingHistory.push(0+(g>s)),p()}},o)};return p(),r},i4=(t,e)=>({dominantSpeaker:"",peerIdToVolume:{},addStreamToHark:(r,n)=>{const i=new MediaStream;if(i.addTrack(r),!i.getAudioTracks()[0])return;const o=e().removeStreamFromHark;e().peerIdToVolume[n]&&o(n);const s=n4(i,{interval:1e3,play:!1});t(()=>({peerIdToVolume:{...e().peerIdToVolume,[n]:0}})),np.set(n,s),s.on("volume_change",a=>{const u=Math.round(Math.pow(10,a/85)*10);t(()=>({peerIdToVolume:{...e().peerIdToVolume,[n]:u}}));const l=e().dominantSpeaker,c=e().peerIdToVolume[l];if(!l.length){t(()=>({dominantSpeaker:n}));return}if(u>(c||0)){if(n===l)return;t(()=>({dominantSpeaker:n}))}})},removeStreamFromHark:r=>{if(!e().peerIdToVolume[r])return;const n=np.get(r);if(!n)return;n.stop();const i=e().peerIdToVolume;np.delete(r),delete i[r],t(()=>({peerIdToVolume:i}))}}),o4=i4,Zw=0,e_=(t="id")=>(Zw+=1,`${t}${Zw}`),s4=(t,e)=>({unread:{mainRoom:0},chat:{mainRoom:[]},reactions:{},sharedFilesArr:[],notificationSounds:"",chatNotif:!0,peerJoinNotif:!0,peerLeaveNotif:!0,setchatNotif:r=>t(()=>({chatNotif:r})),setpeerJoinNotif:r=>t(()=>({peerJoinNotif:r})),setpeerLeaveNotif:r=>t(()=>({peerLeaveNotif:r})),setNotificationSounds:r=>{t(()=>({notificationSounds:r}))},setChat:(r,n,i)=>{const o=e().chat[n],s=o?[...o,{...r,id:e_(),error:i?i.error:{isError:!1}}]:[{...r,id:e_(),error:i?i.error:{isError:!1}}];t(()=>({chat:{...e().chat,[n]:s}}),!1)},removeChat:r=>{const n=e().chat;delete n[r],t(()=>({chat:n}))},increaseUnread:r=>{const n=e().unread[r]||0;t(()=>({unread:{...e().unread,[r]:n+1}}),!1)},removeUnread:r=>{const n=e().unread;delete n[r],t(()=>({unread:{...e().unread,[r]:0}}))},addSharedFile:r=>{t(n=>({sharedFilesArr:[...n.sharedFilesArr,r]}))},setSharedFiles:r=>{t(()=>({sharedFilesArr:r}))}}),a4=s4,l4=(t,e)=>({...$L(t,e),...XL(t,e),...TL(t,e),...vL(t),...HL(t,e),...bL(t,e),...FL(t,e),...OL(t),...a4(t,e),...JL(t),...NL(t,e),...xL(t,e),...qL(t,e),...GL(t,e),...IL(t),...EL(t,e),...o4(t,e),...KL(t,e),...PL(t)}),c4=qI(Dx(l4,{name:"huddle01-client",anonymousActionType:"action",enabled:!1})),Lx=Nx(c4),Ef=Lx,{getState:me,setState:hj}=Lx,u4=class{addPeerPort(t){const{addPeerPort:e}=yn();e(t)}removePeerPort(t){G.info(`Removing peer Audio port ${t}`);const{removePeerPort:e}=yn();e(t)}getProducerState(t){const e=Nu[t];return me()[e]}getAvatarUrl(){const{avatarUrl:t}=me();return t}getCamStream(){const{stream:t}=me();return t}getMicStream(){const{stream:t}=me().micState;return t}getUserGeoLocation(){const{geo:t}=me();return t}getDisplayName(){const{displayName:t}=me();return t}getPeerDisplayName(t){var e;const{peers:r}=me();return(e=r[t])==null?void 0:e.displayName}getParticipants(){const{peers:t}=me();return t}getJoinedState(){const{roomState:{joined:t}}=me();return t}async enableMicStream(){const{enableAudioStream:t}=me();await t()}async enableCamStream(){const{enableStream:t}=me();await t()}disableMicStream(){const{pauseAudioTracks:t}=me();t()}disableCamStream(){const{pauseTracks:t}=me();t()}toggleFigmentStream(t){const{toggleFigmentStream:e}=me();e(t)}changePeerAvatarUrl(t,e){const{setPeerAvatarUrl:r}=me();r(t,e)}setMeAvatarUrl(t){const{setAvatarUrl:e}=me();e(t)}initMe(t){const{initMe:e}=me();e(t)}addProducerMedia(t,e){const{addProducerMedia:r}=me();r(t,e)}removeProducerMedia(t){const{removeProducerMedia:e}=me();G.info("removed producer cam"),e(t)}updateProducerMedia(t,e){const{updateProducerMedia:r}=me();r(t,e)}toggleProducerMedia(t,e){const{toggleProducerMedia:r}=me();r(t,e)}addPeer(t,e){const{addPeer:r}=me();r(t,e)}removePeer(t){const{removePeer:e}=me();e(t)}peerExists(t){const{peers:e}=me();return!!e[t]}getPeerIds(){const{peers:t}=me();return Object.keys(t)}addConsumerMedia(t,e,r){const{addConsumerMedia:n}=me();n(t,e,r)}removeConsumerMedia(t,e){const{removeConsumerMedia:r}=me();r(t,e)}pauseConsumerMedia(t,e){const{pauseConsumerMedia:r}=me();r(t,e)}resumeConsumerMedia(t,e){const{resumeConsumerMedia:r}=me();r(t,e)}updateProducer(t,e){G.info({producerType:t,value:e})}enableScreenShare(t){const{enableScreenShare:e}=me();e(t)}disableScreenShare(t){const{disableScreenShare:e}=me();e(t)}setNetworkStats(t){const{setNetworkStats:e}=me();e(t)}setTest(){const{toggleIsTest:t}=me();t()}toggleRecording(t){const{toggleRecording:e}=me();e(t)}setNotifyRecording(t,e){const{setNotifyRecording:r}=me();r(t,e)}setChat(t,e,r,n){const{setChat:i}=me(),o={peerId:r,displayName:this.getPeerDisplayName(r)||this.getDisplayName(),type:"text",timestamp:n,message:t};i(o,e)}togglePeerHandRaise(t,e){const{togglePeerHandRaise:r}=me();r(t,e)}toggleMeHandRaise(t){const{toggleMeHandRaise:e}=me();e(t)}addReaction(t,e){const{addReaction:r}=me();r(t,e)}addMeReaction(t){const{addMeReaction:e}=me();e(t)}addLobbyPeer(t){const{setLobbyPeers:e}=me();e(t)}setDropState(t){const{setDropState:e}=me();e(t)}setJoined(){const{setJoined:t}=me();t()}setRoomId(t){const{setRoomId:e}=me();e(t)}setCreatedAt(t){const{setCreatedAt:e}=me();e(t)}removeChat(t){const{removeChat:e}=me();e(t)}increaseUnread(t){const{increaseUnread:e}=me();e(t)}removeUnread(t){const{removeUnread:e}=me();e(t)}addSharedFile(t){const{addSharedFile:e}=me();e(t)}setSharedFiles(t){const{setSharedFiles:e}=me();e(t)}isMicPaused(){const{isMicPaused:t}=me();return t}initHostControls(t,e,r,n){const{initHostControls:i}=me();i(t,e,r,n)}setSingleHostControl(t,e){const{setSingleHostControl:r}=me();r(t,e)}setHost(t){const{setHost:e}=me();e(t)}setCoHosts(t){const{setCoHosts:e}=me();e(t)}setHostState(t){G.info("Setting host state: ",t);const{setHostState:e}=me();e(t)}increasePeerCount(t=1){const{increasePeerCount:e}=me();e(t)}decreasePeerCount(t=1){const{decreasePeerCount:e}=me();e(t)}setStartRecording(){const{startRecording:t}=me();t()}setStopRecording(){const{stopRecording:t}=me();t()}setMediaDevice(t){const{setMediaDevice:e}=me();e(t)}setAudioDevice(t){const{setAudioDevice:e}=me();e(t)}recordingStatus(){const{inProgress:t}=me().recordingState;return t}updateRecording(t){const{updateRecordings:e}=me();e(t)}setRecordings(t){const{setRecordings:e}=me();e(t)}setRecordingEnded(){const{endRecording:t}=me();t()}getIsRoomJoined(){const{roomState:t}=me();return t.joined}getMaxViewPortCount(){const{maxViewPortCount:t}=yn();return t}getActiveViewPort(){const{activeViewPort:t}=me();return t}getLastNActive(){const{isLastNActive:t}=me();return t}getLastNPeerIds(){const{lastNPeerIds:t}=me();return t}getSpaceLeftInLastN(){const t=this.getLastNPeerIds();return this.getMaxViewPortCount()-t.length}setNotificationSounds(t){const{setNotificationSounds:e}=me();e(t)}setLastNPeerIds(t){const{setLastNPeerIds:e}=me();e(t)}setLastNForNewPeerJoined(){if(this.getIsRoomJoined()){G.error({type:"error",message:"setLastNForNewPeerJoined() | Already Joined Room cannot set again",meta:{isJoined:this.getIsRoomJoined()}});return}const t=this.getPeerIds().slice(0,this.getMaxViewPortCount());this.setLastNPeerIds(t),this.addActiveViewPort(t.length),G.info({logType:"setLastNForNewPeerJoined",message:"** Setting LastN for New Peer that Joined **",meta:{peerIds:t,lastN:this.getLastNPeerIds()}})}setRoomLockState(t){const{setRoomLockState:e}=me();e(t)}getRoomLockState(){const{isRoomLocked:t}=me().roomState;return t}addMissingPeerToLastN(){const{lastNPeerIds:t}=me(),e=this.getPeerIds().filter(r=>!t.includes(r))[0];e&&(G.info({logType:"addAllPeersToLastN",meta:{missingPeerToLastN:e},message:"This peer is not in lastNPeerIds, so we add it to lastNPeerIds"}),this.addPeerToLastN(e))}addPeerToLastN(t){const{addPeerToLastN:e}=me();e(t)}removePeerFromLastN(t){const{removePeerFromLastN:e}=me();e(t)}addActiveViewPort(t=1){const{addActiveViewPort:e}=me();e(t)}removeActiveViewPort(t=1){const{removeActiveViewPort:e}=me();e(t)}addStreamToHark(t,e){const{addStreamToHark:r}=me();r(t,e)}removeStreamFromHark(t){const{removeStreamFromHark:e}=me();e(t)}async disableAllCamStreams(){this.disableCamStream(),this.toggleFigmentStream("disable"),await og()}getActiveViewPortIds(){const{activeViewPortIds:t}=yn();return t}getSpaceLeftInViewport(){const{getSpaceLeftInViewport:t}=yn();return t()}setActiveViewPort(t){const{setActiveViewPort:e}=yn();e(t)}addPeerViewPort(t){const{addPeerViewPort:e}=yn();e(t)}removePeerViewPort(t){const{removePeerViewPort:e}=yn();e(t)}isLastNActive(){const{isLastNActive:t}=yn();return t}activateLastN(){const{activateLastN:t}=yn();t()}deactivateLastN(){const{deactivateLastN:t}=yn(),{peers:e}=me(),r=this.getActiveViewPortIds(),n=r.size;Array.from(r).forEach(i=>{e[i]||(G.warn({logType:"deactivateLastN",message:"Peer not found in peers | Removing from activeViewPorts",meta:{peerId:i}}),this.removePeerViewPort(i)),n===this.getMaxViewPortCount()-1&&!r.has(i)&&e[i]&&(G.warn({logType:"deactivateLastN",message:"Peer not found in activeViewPorts | Adding to activeViewPorts",meta:{peerId:i}}),this.addPeerViewPort(i))}),t()}setActiveViewPortForNewPeer(){if(this.getIsRoomJoined()){G.error({type:"error",message:"setLastNForNewPeerJoined() | Already Joined Room cannot set again",meta:{isJoined:this.getIsRoomJoined()}});return}const t=this.getPeerIds().length>this.getMaxViewPortCount(),e=this.getPeerIds().slice(0,this.getMaxViewPortCount());this.setActiveViewPort(e),t&&this.activateLastN()}startStreaming(t){const{startStreaming:e}=me();e(t)}setStreamPlatform(t){const{setPlatform:e}=me();e(t)}stopStreaming(t){const{stopStreaming:e}=me();e(t)}setStreamData(t,e){const{setStreamData:r}=me();r(t,e)}setLayoutView(t){const{setLayoutView:e}=me();e(t)}getLayout(){const{layout:t}=me();return t}setScreenShareLayout(t=!1,e){const r=t?3:2;this.getPeerIds().length===r&&this.setLayoutView(e)}getBandwidthSaver(){const{bandwidthSaver:t}=me();return t}},t_={"gamma.huddle01.com":"media-gamma.huddle01.com","messari.huddle01.com":"ms-us01.huddle01.com","beta.huddle01.com":"media-beta.huddle01.com","alpha.huddle01.com":"media-alpha.huddle01.com","koinx.huddle01.com":"ms03.huddle01.com","app.huddle01.com":"ms02.huddle01.com",default:"ms02.huddle01.com"};function r_({roomId:t,peerId:e,apiKey:r}){const n=window.location.hostname;let i=t_[n]||t_.default;G.info("getProtooUrl() | apikey)",{apiKey:r}),r&&(G.info("getProtooUrl() |got api key"),i="sdk.huddle01.com");let o=`${i}/?roomId=${t}&peerId=${e}`;return o=`wss://${o}`,G.info("getProtooUrl() | protoo url",{portooUrl:o}),r&&(o=`${o}&apiKey=${r}`),o}var qo={};const f4="protoo-client",d4="4.0.6",h4="protoo JavaScript client module",p4="Iaki Baz Castillo <ibc@aliax.net>",m4="https://protoo.versatica.com",g4="MIT",v4={type:"git",url:"https://github.com/ibc/protoo.git"},y4="lib/index.js",w4=["nodejs","browser","websocket"],_4={node:">=8.0.0"},b4={lint:"eslint -c .eslintrc.js lib"},S4={debug:"^4.3.1",events:"^3.2.0",retry:"^0.12.0"},E4={eslint:"^5.16.0"},R4={websocket:"^1.0.33"},x4={name:f4,version:d4,description:h4,author:p4,homepage:m4,license:g4,repository:v4,main:y4,keywords:w4,engines:_4,scripts:b4,dependencies:S4,devDependencies:E4,optionalDependencies:R4};var So={},A4={get exports(){return So},set exports(t){So=t}},ip,n_;function P4(){if(n_)return ip;n_=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,o=n*365.25;ip=function(c,f){f=f||{};var d=typeof c;if(d==="string"&&c.length>0)return s(c);if(d==="number"&&isFinite(c))return f.long?u(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function s(c){if(c=String(c),!(c.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(f){var d=parseFloat(f[1]),h=(f[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*o;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(c){var f=Math.abs(c);return f>=n?Math.round(c/n)+"d":f>=r?Math.round(c/r)+"h":f>=e?Math.round(c/e)+"m":f>=t?Math.round(c/t)+"s":c+"ms"}function u(c){var f=Math.abs(c);return f>=n?l(c,f,n,"day"):f>=r?l(c,f,r,"hour"):f>=e?l(c,f,e,"minute"):f>=t?l(c,f,t,"second"):c+" ms"}function l(c,f,d,h){var p=f>=d*1.5;return Math.round(c/d)+" "+h+(p?"s":"")}return ip}function k4(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=P4(),r.destroy=l,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let f=0;for(let d=0;d<c.length;d++)f=(f<<5)-f+c.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(c){let f,d=null,h,p;function g(..._){if(!g.enabled)return;const m=g,v=Number(new Date),S=v-(f||v);m.diff=S,m.prev=f,m.curr=v,f=v,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let b=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(j,D)=>{if(j==="%%")return"%";b++;const N=r.formatters[D];if(typeof N=="function"){const U=_[b];j=N.call(m,U),_.splice(b,1),b--}return j}),r.formatArgs.call(m,_),(m.log||r.log).apply(m,_)}return g.namespace=c,g.useColors=r.useColors(),g.color=r.selectColor(c),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,p=r.enabled(c)),p),set:_=>{d=_}}),typeof r.init=="function"&&r.init(g),g}function n(c,f){const d=r(this.namespace+(typeof f>"u"?":":f)+c);return d.log=this.log,d}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f;const d=(typeof c=="string"?c:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)d[f]&&(c=d[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function o(){const c=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),c}function s(c){if(c[c.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(c))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var T4=k4;(function(t,e){e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=s(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let c=0,f=0;u[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(c++,d==="%c"&&(f=c))}),u.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function i(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function o(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u={}.DEBUG),u}function s(){try{return localStorage}catch{}}t.exports=T4(e);const{formatters:a}=t.exports;a.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(A4,So);const us=So,fs="protoo-client";let C4=class{constructor(e){e?(this._debug=us(`${fs}:${e}`),this._warn=us(`${fs}:WARN:${e}`),this._error=us(`${fs}:ERROR:${e}`)):(this._debug=us(fs),this._warn=us(`${fs}:WARN`),this._error=us(`${fs}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};var Pd=C4,Jl={},O4={get exports(){return Jl},set exports(t){Jl=t}},ea=typeof Reflect=="object"?Reflect:null,i_=ea&&typeof ea.apply=="function"?ea.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Du;ea&&typeof ea.ownKeys=="function"?Du=ea.ownKeys:Object.getOwnPropertySymbols?Du=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Du=function(e){return Object.getOwnPropertyNames(e)};function M4(t){console&&console.warn&&console.warn(t)}var Bx=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}O4.exports=ht;Jl.once=L4;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var o_=10;function kd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return o_},set:function(t){if(typeof t!="number"||t<0||Bx(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o_=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Bx(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Fx(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return Fx(this)};ht.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")i_(u,this,r);else for(var l=u.length,c=zx(u,l),n=0;n<l;++n)i_(c[n],this,r);return!0};function jx(t,e,r,n){var i,o,s;if(kd(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=Fx(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,M4(a)}return t}ht.prototype.addListener=function(e,r){return jx(this,e,r,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,r){return jx(this,e,r,!0)};function N4(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $x(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=N4.bind(n);return i.listener=r,n.wrapFn=i,i}ht.prototype.once=function(e,r){return kd(r),this.on(e,$x(this,e,r)),this};ht.prototype.prependOnceListener=function(e,r){return kd(r),this.prependListener(e,$x(this,e,r)),this};ht.prototype.removeListener=function(e,r){var n,i,o,s,a;if(kd(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():D4(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Ux(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?I4(i):zx(i,i.length)}ht.prototype.listeners=function(e){return Ux(this,e,!0)};ht.prototype.rawListeners=function(e){return Ux(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):qx.call(t,e)};ht.prototype.listenerCount=qx;function qx(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?Du(this._events):[]};function zx(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function D4(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function I4(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function L4(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Hx(t,e,o,{once:!0}),e!=="error"&&B4(t,i,{once:!0})})}function B4(t,e,r){typeof t.on=="function"&&Hx(t,"error",e,r)}function Hx(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}const{EventEmitter:F4}=Jl,j4=Pd;let $4=class extends F4{constructor(e){super(),this.setMaxListeners(1/0),this._logger=e||new j4("EnhancedEventEmitter")}safeEmit(e,...r){try{this.emit(e,...r)}catch(n){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",e,n)}}async safeEmitAsPromise(e,...r){return new Promise((n,i)=>{this.safeEmit(e,...r,n,i)})}};var Vx=$4,Kx={};Kx.generateRandomNumber=function(){return Math.round(Math.random()*1e7)};const U4=Pd,{generateRandomNumber:q4}=Kx,Co=new U4("Message");let z4=class{static parse(e){let r;const n={};try{r=JSON.parse(e)}catch(i){Co.error("parse() | invalid JSON: %s",i);return}if(typeof r!="object"||Array.isArray(r)){Co.error("parse() | not an object");return}if(r.request){if(n.request=!0,typeof r.method!="string"){Co.error("parse() | missing/invalid method field");return}if(typeof r.id!="number"){Co.error("parse() | missing/invalid id field");return}n.id=r.id,n.method=r.method,n.data=r.data||{}}else if(r.response){if(n.response=!0,typeof r.id!="number"){Co.error("parse() | missing/invalid id field");return}n.id=r.id,r.ok?(n.ok=!0,n.data=r.data||{}):(n.ok=!1,n.errorCode=r.errorCode,n.errorReason=r.errorReason)}else if(r.notification){if(n.notification=!0,typeof r.method!="string"){Co.error("parse() | missing/invalid method field");return}n.method=r.method,n.data=r.data||{}}else{Co.error("parse() | missing request/response field");return}return n}static createRequest(e,r){return{request:!0,id:q4(),method:e,data:r||{}}}static createSuccessResponse(e,r){return{response:!0,id:e.id,ok:!0,data:r||{}}}static createErrorResponse(e,r,n){return{response:!0,id:e.id,ok:!1,errorCode:r,errorReason:n}}static createNotification(e,r){return{notification:!0,method:e,data:r||{}}}};var Wx=z4;const H4=Pd,V4=Vx,Qa=Wx,Ki=new H4("Peer");let K4=class extends V4{constructor(e){super(Ki),Ki.debug("constructor()"),this._closed=!1,this._transport=e,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(e){throw new Error("cannot override data object")}close(){if(!this._closed){Ki.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const e of this._sents.values())e.close();this.safeEmit("close")}}async request(e,r=void 0){const n=Qa.createRequest(e,r);return this._logger.debug("request() [method:%s, id:%s]",e,n.id),await this._transport.send(n),new Promise((i,o)=>{const s=1500*(15+.1*this._sents.size),a={id:n.id,method:n.method,resolve:u=>{this._sents.delete(n.id)&&(clearTimeout(a.timer),i(u))},reject:u=>{this._sents.delete(n.id)&&(clearTimeout(a.timer),o(u))},timer:setTimeout(()=>{this._sents.delete(n.id)&&o(new Error("request timeout"))},s),close:()=>{clearTimeout(a.timer),o(new Error("peer closed"))}};this._sents.set(n.id,a)})}async notify(e,r=void 0){const n=Qa.createNotification(e,r);this._logger.debug("notify() [method:%s]",e),await this._transport.send(n)}_handleTransport(){if(this._transport.closed){this._closed=!0,setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});return}this._transport.on("open",()=>{this._closed||(Ki.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(Ki.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",e=>{this._closed||(Ki.debug('emit "failed" [currentAttempt:%s]',e),this._connected=!1,this.safeEmit("failed",e))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,Ki.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",e=>{e.request?this._handleRequest(e):e.response?this._handleResponse(e):e.notification&&this._handleNotification(e)})}_handleRequest(e){try{this.emit("request",e,r=>{const n=Qa.createSuccessResponse(e,r);this._transport.send(n).catch(()=>{})},(r,n)=>{r instanceof Error?(n=r.message,r=500):typeof r=="number"&&n instanceof Error&&(n=n.message);const i=Qa.createErrorResponse(e,r,n);this._transport.send(i).catch(()=>{})})}catch(r){const n=Qa.createErrorResponse(e,500,String(r));this._transport.send(n).catch(()=>{})}}_handleResponse(e){const r=this._sents.get(e.id);if(!r){Ki.error("received response does not match any sent request [id:%s]",e.id);return}if(e.ok)r.resolve(e.data);else{const n=new Error(e.errorReason);n.code=e.errorCode,r.reject(n)}}_handleNotification(e){this.safeEmit("notification",e)}};var W4=K4,op,s_;function G4(){if(s_)return op;s_=1;var t=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return op=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}(),op}const Q4="websocket",J4="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Y4=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],X4="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Z4=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],e6="1.0.34",t6={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},r6="https://github.com/theturtle32/WebSocket-Node",n6={node:">=4.0.0"},i6={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},o6={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},s6={verbose:!1},a6={test:"tape test/unit/*.js",gulp:"gulp"},l6="index",c6={lib:"./lib"},u6="lib/browser.js",f6="Apache-2.0",d6={name:Q4,description:J4,keywords:Y4,author:X4,contributors:Z4,version:e6,repository:t6,homepage:r6,engines:n6,dependencies:i6,devDependencies:o6,config:s6,scripts:a6,main:l6,directories:c6,browser:u6,license:f6};var h6=d6.version,Io;if(typeof globalThis=="object")Io=globalThis;else try{Io=G4()}catch{}finally{if(!Io&&typeof window<"u"&&(Io=window),!Io)throw new Error("Could not determine global this")}var Yl=Io.WebSocket||Io.MozWebSocket,p6=h6;function Gx(t,e){var r;return e?r=new Yl(t,e):r=new Yl(t),r}Yl&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(Gx,t,{get:function(){return Yl[t]}})});var m6={w3cwebsocket:Yl?Gx:null,version:p6},ag={},g6={get exports(){return ag},set exports(t){ag=t}},Qx={};function an(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var v6=an;an.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts};an.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null};an.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift();else return!1;var n=this,i=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r);return this._options.unref&&i.unref(),!0};an.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};an.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};an.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};an.prototype.start=an.prototype.try;an.prototype.errors=function(){return this._errors};an.prototype.attempts=function(){return this._attempts};an.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=r&&(e=i,r=s)}return e};(function(t){var e=v6;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&r.forever,unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],s=0;s<n.retries;s++)o.push(this.createTimeout(s,n));return r&&r.forever&&!o.length&&o.push(this.createTimeout(s,n)),o.sort(function(a,u){return a-u}),o},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,o=Math.round(i*n.minTimeout*Math.pow(n.factor,r));return o=Math.min(o,n.maxTimeout),o},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var o in r)typeof r[o]=="function"&&i.push(o)}for(var s=0;s<i.length;s++){var a=i[s],u=r[a];r[a]=function(c){var f=t.operation(n),d=Array.prototype.slice.call(arguments,1),h=d.pop();d.push(function(p){f.retry(p)||(p&&(arguments[0]=f.mainError()),h.apply(this,arguments))}),f.attempt(function(){c.apply(r,d)})}.bind(r,u),r[a].options=n}}})(Qx);(function(t){t.exports=Qx})(g6);const y6=m6.w3cwebsocket,w6=ag,_6=Pd,b6=Vx,S6=Wx,E6="protoo",R6={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:8*1e3},fi=new _6("WebSocketTransport");let x6=class extends b6{constructor(e,r){super(fi),fi.debug("constructor() [url:%s, options:%o]",e,r),this._closed=!1,this._url=e,this._options=r||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){fi.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){fi.error("close() | error closing the WebSocket: %o",e)}}}async send(e){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(e))}catch(r){throw fi.warn("send() failed:%o",r),r}}_runWebSocket(){const e=w6.operation(this._options.retry||R6);let r=!1;e.attempt(n=>{if(this._closed){e.stop();return}fi.debug("_runWebSocket() [currentAttempt:%s]",n),this._ws=new y6(this._url,E6,this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(r=!0,this.safeEmit("open"))},this._ws.onclose=i=>{if(!this._closed){if(fi.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',i.wasClean,i.code,i.reason),i.code!==4e3){if(r){if(e.stop(),this.safeEmit("disconnected"),this._closed)return;this._runWebSocket();return}else if(this.safeEmit("failed",n),this._closed||e.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||fi.error('WebSocket "error" event')},this._ws.onmessage=i=>{if(this._closed)return;const o=S6.parse(i.data);if(o){if(this.listenerCount("message")===0){fi.error('no listeners for WebSocket "message" event, ignoring received message');return}this.safeEmit("message",o)}}})}};var A6=x6;const{version:P6}=x4,k6=W4,T6=A6;qo.version=P6;qo.Peer=k6;qo.WebSocketTransport=T6;var C6=class extends u4{constructor(t){super(),this.socket=null,this.apiKey=t}getSocket(t,e){const r=r_({roomId:t,peerId:e,apiKey:this.apiKey}),n=new qo.WebSocketTransport(r);return new qo.Peer(n)}setSocket(t,e){const r=r_({roomId:t,peerId:e,apiKey:this.apiKey}),n=new qo.WebSocketTransport(r);this.socket=new qo.Peer(n),G.info({type:"info",message:"setSocket",socket:this.socket})}async startRecording({address:t,sourceUrl:e}){if(this.socket&&!this.recordingStatus())try{this.setStartRecording(),await this.socket.request("startRecording",{address:t,sourceUrl:e})}catch(r){throw G.error({type:"error",message:"startRecording",error:r}),new Error("Error starting recording")}}async stopRecording({ipfs:t}){if(this.socket&&this.recordingStatus())try{await this.socket.request("stopRecording",{ipfs:t}),this.setStopRecording()}catch(e){G.error({type:"error",message:"stopRecording",error:e})}}async startLiveStreaming(t,e,r){if(this.socket)try{this.startStreaming(t),e?await this.socket.request("startStreaming",{platform:t,rtmpEndpoint:`${e.streamLink}/${e.streamKey}`,sourceUrl:r}):await this.socket.request("startStreaming",{platform:t}),G.info({streamObj:e})}catch(n){throw G.error({type:"error",message:"startStreaming",error:n}),new Error("Error while starting streamer")}}async stopLiveStreaming(t){if(this.socket)try{this.stopStreaming(t),await this.socket.request("stopStreaming")}catch(e){G.error({type:"error",message:"stopStreaming",error:e})}}async newSharedFile(t){if(this.socket)try{await this.socket.request("sendData",{type:"sharedFile",payload:t})}catch(e){G.error({type:"error",message:"stopStreaming",error:e})}}},Jx={},ts={},lg={},O6={get exports(){return lg},set exports(t){lg=t}};(function(t,e){(function(r,n){t.exports=n()})(re,function(){return function(r){var n={};function i(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return r[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=r,i.c=n,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:a})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,s){if(1&s&&(o=i(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var u in o)i.d(a,u,function(l){return o[l]}.bind(null,u));return a},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=90)}({17:function(r,n,i){n.__esModule=!0,n.default=void 0;var o=i(18),s=function(){function a(){}return a.getFirstMatch=function(u,l){var c=l.match(u);return c&&c.length>0&&c[1]||""},a.getSecondMatch=function(u,l){var c=l.match(u);return c&&c.length>1&&c[2]||""},a.matchAndReturnConst=function(u,l,c){if(u.test(l))return c},a.getWindowsVersionName=function(u){switch(u){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},a.getMacOSVersionName=function(u){var l=u.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(l.push(0),l[0]===10)switch(l[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},a.getAndroidVersionName=function(u){var l=u.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(l.push(0),!(l[0]===1&&l[1]<5))return l[0]===1&&l[1]<6?"Cupcake":l[0]===1&&l[1]>=6?"Donut":l[0]===2&&l[1]<2?"Eclair":l[0]===2&&l[1]===2?"Froyo":l[0]===2&&l[1]>2?"Gingerbread":l[0]===3?"Honeycomb":l[0]===4&&l[1]<1?"Ice Cream Sandwich":l[0]===4&&l[1]<4?"Jelly Bean":l[0]===4&&l[1]>=4?"KitKat":l[0]===5?"Lollipop":l[0]===6?"Marshmallow":l[0]===7?"Nougat":l[0]===8?"Oreo":l[0]===9?"Pie":void 0},a.getVersionPrecision=function(u){return u.split(".").length},a.compareVersions=function(u,l,c){c===void 0&&(c=!1);var f=a.getVersionPrecision(u),d=a.getVersionPrecision(l),h=Math.max(f,d),p=0,g=a.map([u,l],function(_){var m=h-a.getVersionPrecision(_),v=_+new Array(m+1).join(".0");return a.map(v.split("."),function(S){return new Array(20-S.length).join("0")+S}).reverse()});for(c&&(p=h-Math.min(f,d)),h-=1;h>=p;){if(g[0][h]>g[1][h])return 1;if(g[0][h]===g[1][h]){if(h===p)return 0;h-=1}else if(g[0][h]<g[1][h])return-1}},a.map=function(u,l){var c,f=[];if(Array.prototype.map)return Array.prototype.map.call(u,l);for(c=0;c<u.length;c+=1)f.push(l(u[c]));return f},a.find=function(u,l){var c,f;if(Array.prototype.find)return Array.prototype.find.call(u,l);for(c=0,f=u.length;c<f;c+=1){var d=u[c];if(l(d,c))return d}},a.assign=function(u){for(var l,c,f=u,d=arguments.length,h=new Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];if(Object.assign)return Object.assign.apply(Object,[u].concat(h));var g=function(){var _=h[l];typeof _=="object"&&_!==null&&Object.keys(_).forEach(function(m){f[m]=_[m]})};for(l=0,c=h.length;l<c;l+=1)g();return u},a.getBrowserAlias=function(u){return o.BROWSER_ALIASES_MAP[u]},a.getBrowserTypeByAlias=function(u){return o.BROWSER_MAP[u]||""},a}();n.default=s,r.exports=n.default},18:function(r,n,i){n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(r,n,i){n.__esModule=!0,n.default=void 0;var o,s=(o=i(91))&&o.__esModule?o:{default:o},a=i(18);function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}var l=function(){function c(){}var f,d,h;return c.getParser=function(p,g){if(g===void 0&&(g=!1),typeof p!="string")throw new Error("UserAgent should be a string");return new s.default(p,g)},c.parse=function(p){return new s.default(p).getResult()},f=c,h=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}],(d=null)&&u(f.prototype,d),h&&u(f,h),c}();n.default=l,r.exports=n.default},91:function(r,n,i){n.__esModule=!0,n.default=void 0;var o=c(i(92)),s=c(i(93)),a=c(i(94)),u=c(i(95)),l=c(i(17));function c(d){return d&&d.__esModule?d:{default:d}}var f=function(){function d(p,g){if(g===void 0&&(g=!1),p==null||p==="")throw new Error("UserAgent parameter can't be empty");this._ua=p,this.parsedResult={},g!==!0&&this.parse()}var h=d.prototype;return h.getUA=function(){return this._ua},h.test=function(p){return p.test(this._ua)},h.parseBrowser=function(){var p=this;this.parsedResult.browser={};var g=l.default.find(o.default,function(_){if(typeof _.test=="function")return _.test(p);if(_.test instanceof Array)return _.test.some(function(m){return p.test(m)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.browser=g.describe(this.getUA())),this.parsedResult.browser},h.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},h.getBrowserName=function(p){return p?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},h.getBrowserVersion=function(){return this.getBrowser().version},h.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},h.parseOS=function(){var p=this;this.parsedResult.os={};var g=l.default.find(s.default,function(_){if(typeof _.test=="function")return _.test(p);if(_.test instanceof Array)return _.test.some(function(m){return p.test(m)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.os=g.describe(this.getUA())),this.parsedResult.os},h.getOSName=function(p){var g=this.getOS().name;return p?String(g).toLowerCase()||"":g||""},h.getOSVersion=function(){return this.getOS().version},h.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},h.getPlatformType=function(p){p===void 0&&(p=!1);var g=this.getPlatform().type;return p?String(g).toLowerCase()||"":g||""},h.parsePlatform=function(){var p=this;this.parsedResult.platform={};var g=l.default.find(a.default,function(_){if(typeof _.test=="function")return _.test(p);if(_.test instanceof Array)return _.test.some(function(m){return p.test(m)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.platform=g.describe(this.getUA())),this.parsedResult.platform},h.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},h.getEngineName=function(p){return p?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},h.parseEngine=function(){var p=this;this.parsedResult.engine={};var g=l.default.find(u.default,function(_){if(typeof _.test=="function")return _.test(p);if(_.test instanceof Array)return _.test.some(function(m){return p.test(m)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.engine=g.describe(this.getUA())),this.parsedResult.engine},h.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},h.getResult=function(){return l.default.assign({},this.parsedResult)},h.satisfies=function(p){var g=this,_={},m=0,v={},S=0;if(Object.keys(p).forEach(function(O){var $=p[O];typeof $=="string"?(v[O]=$,S+=1):typeof $=="object"&&(_[O]=$,m+=1)}),m>0){var b=Object.keys(_),R=l.default.find(b,function(O){return g.isOS(O)});if(R){var j=this.satisfies(_[R]);if(j!==void 0)return j}var D=l.default.find(b,function(O){return g.isPlatform(O)});if(D){var N=this.satisfies(_[D]);if(N!==void 0)return N}}if(S>0){var U=Object.keys(v),F=l.default.find(U,function(O){return g.isBrowser(O,!0)});if(F!==void 0)return this.compareVersion(v[F])}},h.isBrowser=function(p,g){g===void 0&&(g=!1);var _=this.getBrowserName().toLowerCase(),m=p.toLowerCase(),v=l.default.getBrowserTypeByAlias(m);return g&&v&&(m=v.toLowerCase()),m===_},h.compareVersion=function(p){var g=[0],_=p,m=!1,v=this.getBrowserVersion();if(typeof v=="string")return p[0]===">"||p[0]==="<"?(_=p.substr(1),p[1]==="="?(m=!0,_=p.substr(2)):g=[],p[0]===">"?g.push(1):g.push(-1)):p[0]==="="?_=p.substr(1):p[0]==="~"&&(m=!0,_=p.substr(1)),g.indexOf(l.default.compareVersions(v,_,m))>-1},h.isOS=function(p){return this.getOSName(!0)===String(p).toLowerCase()},h.isPlatform=function(p){return this.getPlatformType(!0)===String(p).toLowerCase()},h.isEngine=function(p){return this.getEngineName(!0)===String(p).toLowerCase()},h.is=function(p,g){return g===void 0&&(g=!1),this.isBrowser(p,g)||this.isOS(p)||this.isPlatform(p)},h.some=function(p){var g=this;return p===void 0&&(p=[]),p.some(function(_){return g.is(_)})},d}();n.default=f,r.exports=n.default},92:function(r,n,i){n.__esModule=!0,n.default=void 0;var o,s=(o=i(17))&&o.__esModule?o:{default:o},a=/version\/(\d+(\.?_?\d+)+)/i,u=[{test:[/googlebot/i],describe:function(l){var c={name:"Googlebot"},f=s.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/opera/i],describe:function(l){var c={name:"Opera"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/opr\/|opios/i],describe:function(l){var c={name:"Opera"},f=s.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/SamsungBrowser/i],describe:function(l){var c={name:"Samsung Internet for Android"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/Whale/i],describe:function(l){var c={name:"NAVER Whale Browser"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/MZBrowser/i],describe:function(l){var c={name:"MZ Browser"},f=s.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/focus/i],describe:function(l){var c={name:"Focus"},f=s.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/swing/i],describe:function(l){var c={name:"Swing"},f=s.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/coast/i],describe:function(l){var c={name:"Opera Coast"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(l){var c={name:"Opera Touch"},f=s.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/yabrowser/i],describe:function(l){var c={name:"Yandex Browser"},f=s.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/ucbrowser/i],describe:function(l){var c={name:"UC Browser"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/Maxthon|mxios/i],describe:function(l){var c={name:"Maxthon"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/epiphany/i],describe:function(l){var c={name:"Epiphany"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/puffin/i],describe:function(l){var c={name:"Puffin"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/sleipnir/i],describe:function(l){var c={name:"Sleipnir"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/k-meleon/i],describe:function(l){var c={name:"K-Meleon"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/micromessenger/i],describe:function(l){var c={name:"WeChat"},f=s.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/qqbrowser/i],describe:function(l){var c={name:/qqbrowserlite/i.test(l)?"QQ Browser Lite":"QQ Browser"},f=s.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/msie|trident/i],describe:function(l){var c={name:"Internet Explorer"},f=s.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/\sedg\//i],describe:function(l){var c={name:"Microsoft Edge"},f=s.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/edg([ea]|ios)/i],describe:function(l){var c={name:"Microsoft Edge"},f=s.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/vivaldi/i],describe:function(l){var c={name:"Vivaldi"},f=s.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/seamonkey/i],describe:function(l){var c={name:"SeaMonkey"},f=s.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/sailfish/i],describe:function(l){var c={name:"Sailfish"},f=s.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,l);return f&&(c.version=f),c}},{test:[/silk/i],describe:function(l){var c={name:"Amazon Silk"},f=s.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/phantom/i],describe:function(l){var c={name:"PhantomJS"},f=s.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/slimerjs/i],describe:function(l){var c={name:"SlimerJS"},f=s.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var c={name:"BlackBerry"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var c={name:"WebOS Browser"},f=s.default.getFirstMatch(a,l)||s.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/bada/i],describe:function(l){var c={name:"Bada"},f=s.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/tizen/i],describe:function(l){var c={name:"Tizen"},f=s.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/qupzilla/i],describe:function(l){var c={name:"QupZilla"},f=s.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(l){var c={name:"Firefox"},f=s.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/electron/i],describe:function(l){var c={name:"Electron"},f=s.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/MiuiBrowser/i],describe:function(l){var c={name:"Miui"},f=s.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/chromium/i],describe:function(l){var c={name:"Chromium"},f=s.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,l)||s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/chrome|crios|crmo/i],describe:function(l){var c={name:"Chrome"},f=s.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/GSA/i],describe:function(l){var c={name:"Google Search"},f=s.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:function(l){var c=!l.test(/like android/i),f=l.test(/android/i);return c&&f},describe:function(l){var c={name:"Android Browser"},f=s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/playstation 4/i],describe:function(l){var c={name:"PlayStation 4"},f=s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/safari|applewebkit/i],describe:function(l){var c={name:"Safari"},f=s.default.getFirstMatch(a,l);return f&&(c.version=f),c}},{test:[/.*/i],describe:function(l){var c=l.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:s.default.getFirstMatch(c,l),version:s.default.getSecondMatch(c,l)}}}];n.default=u,r.exports=n.default},93:function(r,n,i){n.__esModule=!0,n.default=void 0;var o,s=(o=i(17))&&o.__esModule?o:{default:o},a=i(18),u=[{test:[/Roku\/DVP/],describe:function(l){var c=s.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,l);return{name:a.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(l){var c=s.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,l);return{name:a.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(l){var c=s.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,l),f=s.default.getWindowsVersionName(c);return{name:a.OS_MAP.Windows,version:c,versionName:f}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(l){var c={name:a.OS_MAP.iOS},f=s.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,l);return f&&(c.version=f),c}},{test:[/macintosh/i],describe:function(l){var c=s.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,l).replace(/[_\s]/g,"."),f=s.default.getMacOSVersionName(c),d={name:a.OS_MAP.MacOS,version:c};return f&&(d.versionName=f),d}},{test:[/(ipod|iphone|ipad)/i],describe:function(l){var c=s.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,l).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:c}}},{test:function(l){var c=!l.test(/like android/i),f=l.test(/android/i);return c&&f},describe:function(l){var c=s.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,l),f=s.default.getAndroidVersionName(c),d={name:a.OS_MAP.Android,version:c};return f&&(d.versionName=f),d}},{test:[/(web|hpw)[o0]s/i],describe:function(l){var c=s.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,l),f={name:a.OS_MAP.WebOS};return c&&c.length&&(f.version=c),f}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(l){var c=s.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,l)||s.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,l)||s.default.getFirstMatch(/\bbb(\d+)/i,l);return{name:a.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(l){var c=s.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,l);return{name:a.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(l){var c=s.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,l);return{name:a.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(l){var c=s.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,l);return{name:a.OS_MAP.PlayStation4,version:c}}}];n.default=u,r.exports=n.default},94:function(r,n,i){n.__esModule=!0,n.default=void 0;var o,s=(o=i(17))&&o.__esModule?o:{default:o},a=i(18),u=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(l){var c=s.default.getFirstMatch(/(can-l01)/i,l)&&"Nova",f={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(f.model=c),f}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(l){var c=l.test(/ipod|iphone/i),f=l.test(/like (ipod|iphone)/i);return c&&!f},describe:function(l){var c=s.default.getFirstMatch(/(ipod|iphone)/i,l);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName(!0)==="blackberry"},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(l){return l.getBrowserName(!0)==="bada"},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getBrowserName()==="windows phone"},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(l){var c=Number(String(l.getOSVersion()).split(".")[0]);return l.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(l){return l.getOSName(!0)==="android"},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(l){return l.getOSName(!0)==="macos"},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(l){return l.getOSName(!0)==="windows"},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="linux"},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(l){return l.getOSName(!0)==="playstation 4"},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(l){return l.getOSName(!0)==="roku"},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];n.default=u,r.exports=n.default},95:function(r,n,i){n.__esModule=!0,n.default=void 0;var o,s=(o=i(17))&&o.__esModule?o:{default:o},a=i(18),u=[{test:function(l){return l.getBrowserName(!0)==="microsoft edge"},describe:function(l){if(/\sedg\//i.test(l))return{name:a.ENGINE_MAP.Blink};var c=s.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,l);return{name:a.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(l){var c={name:a.ENGINE_MAP.Trident},f=s.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:function(l){return l.test(/presto/i)},describe:function(l){var c={name:a.ENGINE_MAP.Presto},f=s.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:function(l){var c=l.test(/gecko/i),f=l.test(/like gecko/i);return c&&!f},describe:function(l){var c={name:a.ENGINE_MAP.Gecko},f=s.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(l){var c={name:a.ENGINE_MAP.WebKit},f=s.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,l);return f&&(c.version=f),c}}];n.default=u,r.exports=n.default}})})})(O6);var Bt={},M6=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.Logger=void 0;const ds=M6(So),hs="mediasoup-client";let N6=class{constructor(e){e?(this._debug=(0,ds.default)(`${hs}:${e}`),this._warn=(0,ds.default)(`${hs}:WARN:${e}`),this._error=(0,ds.default)(`${hs}:ERROR:${e}`)):(this._debug=(0,ds.default)(hs),this._warn=(0,ds.default)(`${hs}:WARN`),this._error=(0,ds.default)(`${hs}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Bt.Logger=N6;var li={};Object.defineProperty(li,"__esModule",{value:!0});li.EnhancedEventEmitter=void 0;const D6=Jl,I6=Bt,L6=new I6.Logger("EnhancedEventEmitter");class B6 extends D6.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...r){return super.emit(e,...r)}safeEmit(e,...r){const n=super.listenerCount(e);try{return super.emit(e,...r)}catch(i){return L6.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,i),Boolean(n)}}on(e,r){return super.on(e,r),this}off(e,r){return super.off(e,r),this}addListener(e,r){return super.on(e,r),this}prependListener(e,r){return super.prependListener(e,r),this}once(e,r){return super.once(e,r),this}prependOnceListener(e,r){return super.prependOnceListener(e,r),this}removeListener(e,r){return super.off(e,r),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}}li.EnhancedEventEmitter=B6;var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.InvalidStateError=Rr.UnsupportedError=void 0;class Vv extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Vv):this.stack=new Error(e).stack}}Rr.UnsupportedError=Vv;class Kv extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Kv):this.stack=new Error(e).stack}}Rr.InvalidStateError=Kv;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.generateRandomNumber=qt.clone=void 0;function F6(t,e){return typeof t>"u"?e:JSON.parse(JSON.stringify(t))}qt.clone=F6;function j6(){return Math.round(Math.random()*1e7)}qt.generateRandomNumber=j6;var Pe={},Yx={};(function(t){const e=So("h264-profile-level-id");e.log=console.info.bind(console);const r=1,n=2,i=3,o=4,s=5;t.ProfileConstrainedBaseline=r,t.ProfileBaseline=n,t.ProfileMain=i,t.ProfileConstrainedHigh=o,t.ProfileHigh=s;const a=0,u=10,l=11,c=12,f=13,d=20,h=21,p=22,g=30,_=31,m=32,v=40,S=41,b=42,R=50,j=51,D=52;t.Level1_b=a,t.Level1=u,t.Level1_1=l,t.Level1_2=c,t.Level1_3=f,t.Level2=d,t.Level2_1=h,t.Level2_2=p,t.Level3=g,t.Level3_1=_,t.Level3_2=m,t.Level4=v,t.Level4_1=S,t.Level4_2=b,t.Level5=R,t.Level5_1=j,t.Level5_2=D;class N{constructor(M,I){this.profile=M,this.level=I}}t.ProfileLevelId=N;const U=new N(r,_),F=16;class O{constructor(M){this._mask=~y("x",M),this._maskedValue=y("1",M)}isMatch(M){return this._maskedValue===(M&this._mask)}}class ${constructor(M,I,x){this.profile_idc=M,this.profile_iop=I,this.profile=x}}const P=[new $(66,new O("x1xx0000"),r),new $(77,new O("1xxx0000"),r),new $(88,new O("11xx0000"),r),new $(66,new O("x0xx0000"),n),new $(88,new O("10xx0000"),n),new $(77,new O("0x0x0000"),i),new $(100,new O("00000000"),s),new $(100,new O("00001100"),o)];t.parseProfileLevelId=function(L){if(typeof L!="string"||L.length!==6)return null;const M=parseInt(L,16);if(M===0)return null;const I=M&255,x=M>>8&255,w=M>>16&255;let T;switch(I){case l:{T=x&F?a:l;break}case u:case c:case f:case d:case h:case p:case g:case _:case m:case v:case S:case b:case R:case j:case D:{T=I;break}default:return e("parseProfileLevelId() | unrecognized level_idc:%s",I),null}for(const H of P)if(w===H.profile_idc&&H.profile_iop.isMatch(x))return new N(H.profile,T);return e("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(L){if(L.level==a)switch(L.profile){case r:return"42f00b";case n:return"42100b";case i:return"4d100b";default:return e("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",L.profile),null}let M;switch(L.profile){case r:{M="42e0";break}case n:{M="4200";break}case i:{M="4d00";break}case o:{M="640c";break}case s:{M="6400";break}default:return e("profileLevelIdToString() | unrecognized profile:%s",L.profile),null}let I=L.level.toString(16);return I.length===1&&(I=`0${I}`),`${M}${I}`},t.parseSdpProfileLevelId=function(L={}){const M=L["profile-level-id"];return M?t.parseProfileLevelId(M):U},t.isSameProfile=function(L={},M={}){const I=t.parseSdpProfileLevelId(L),x=t.parseSdpProfileLevelId(M);return Boolean(I&&x&&I.profile===x.profile)},t.generateProfileLevelIdForAnswer=function(L={},M={}){if(!L["profile-level-id"]&&!M["profile-level-id"])return e("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const I=t.parseSdpProfileLevelId(L),x=t.parseSdpProfileLevelId(M);if(!I)throw new TypeError("invalid local_profile_level_id");if(!x)throw new TypeError("invalid remote_profile_level_id");if(I.profile!==x.profile)throw new TypeError("H264 Profile mismatch");const w=B(L)&&B(M),T=I.level,H=x.level,A=C(T,H),k=w?T:A;return e("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",I.profile,k),t.profileLevelIdToString(new N(I.profile,k))};function y(L,M){return(M[0]===L)<<7|(M[1]===L)<<6|(M[2]===L)<<5|(M[3]===L)<<4|(M[4]===L)<<3|(M[5]===L)<<2|(M[6]===L)<<1|(M[7]===L)<<0}function E(L,M){return L===a?M!==u&&M!==a:M===a?L!==u:L<M}function C(L,M){return E(L,M)?L:M}function B(L={}){const M=L["level-asymmetry-allowed"];return M===1||M==="1"}})(Yx);var $6=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),U6=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xx=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$6(e,t,r);return U6(e,t),e};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.canReceive=Pe.canSend=Pe.generateProbatorRtpParameters=Pe.reduceCodecs=Pe.getSendingRemoteRtpParameters=Pe.getSendingRtpParameters=Pe.getRecvRtpCapabilities=Pe.getExtendedRtpCapabilities=Pe.validateSctpStreamParameters=Pe.validateSctpParameters=Pe.validateNumSctpStreams=Pe.validateSctpCapabilities=Pe.validateRtcpParameters=Pe.validateRtpEncodingParameters=Pe.validateRtpHeaderExtensionParameters=Pe.validateRtpCodecParameters=Pe.validateRtpParameters=Pe.validateRtpHeaderExtension=Pe.validateRtcpFeedback=Pe.validateRtpCodecCapability=Pe.validateRtpCapabilities=void 0;const a_=Xx(Yx),q6=Xx(qt),z6="probator",H6=1234,V6=127;function K6(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(t.codecs&&!Array.isArray(t.codecs))throw new TypeError("caps.codecs is not an array");t.codecs||(t.codecs=[]);for(const e of t.codecs)Zx(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)eA(e)}Pe.validateRtpCapabilities=K6;function Zx(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const r=e.exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(t.kind=r[1].toLowerCase(),t.preferredPayloadType&&typeof t.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");t.kind==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const n of Object.keys(t.parameters)){let i=t.parameters[n];if(i===void 0&&(t.parameters[n]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError(`invalid codec parameter [key:${n}s, value:${i}]`);if(n==="apt"&&typeof i!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const n of t.rtcpFeedback)Wv(n)}Pe.validateRtpCodecCapability=Zx;function Wv(t){if(typeof t!="object")throw new TypeError("fb is not an object");if(!t.type||typeof t.type!="string")throw new TypeError("missing fb.type");(!t.parameter||typeof t.parameter!="string")&&(t.parameter="")}Pe.validateRtcpFeedback=Wv;function eA(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(t.kind!=="audio"&&t.kind!=="video")throw new TypeError("invalid ext.kind");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.preferredId!="number")throw new TypeError("missing ext.preferredId");if(t.preferredEncrypt&&typeof t.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(t.preferredEncrypt||(t.preferredEncrypt=!1),t.direction&&typeof t.direction!="string")throw new TypeError("invalid ext.direction");t.direction||(t.direction="sendrecv")}Pe.validateRtpHeaderExtension=eA;function Gv(t){if(typeof t!="object")throw new TypeError("params is not an object");if(t.mid&&typeof t.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(t.codecs))throw new TypeError("missing params.codecs");for(const e of t.codecs)tA(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("params.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)rA(e);if(t.encodings&&!Array.isArray(t.encodings))throw new TypeError("params.encodings is not an array");t.encodings||(t.encodings=[]);for(const e of t.encodings)nA(e);if(t.rtcp&&typeof t.rtcp!="object")throw new TypeError("params.rtcp is not an object");t.rtcp||(t.rtcp={}),iA(t.rtcp)}Pe.validateRtpParameters=Gv;function tA(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const r=e.exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(typeof t.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");r[1].toLowerCase()==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const i of Object.keys(t.parameters)){let o=t.parameters[i];if(o===void 0&&(t.parameters[i]="",o=""),typeof o!="string"&&typeof o!="number")throw new TypeError(`invalid codec parameter [key:${i}s, value:${o}]`);if(i==="apt"&&typeof o!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const i of t.rtcpFeedback)Wv(i)}Pe.validateRtpCodecParameters=tA;function rA(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.id!="number")throw new TypeError("missing ext.id");if(t.encrypt&&typeof t.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");t.encrypt||(t.encrypt=!1),(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const e of Object.keys(t.parameters)){let r=t.parameters[e];if(r===void 0&&(t.parameters[e]="",r=""),typeof r!="string"&&typeof r!="number")throw new TypeError("invalid header extension parameter")}}Pe.validateRtpHeaderExtensionParameters=rA;function nA(t){if(typeof t!="object")throw new TypeError("encoding is not an object");if(t.ssrc&&typeof t.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(t.rid&&typeof t.rid!="string")throw new TypeError("invalid encoding.rid");if(t.rtx&&typeof t.rtx!="object")throw new TypeError("invalid encoding.rtx");if(t.rtx&&typeof t.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!t.dtx||typeof t.dtx!="boolean")&&(t.dtx=!1),t.scalabilityMode&&typeof t.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}Pe.validateRtpEncodingParameters=nA;function iA(t){if(typeof t!="object")throw new TypeError("rtcp is not an object");if(t.cname&&typeof t.cname!="string")throw new TypeError("invalid rtcp.cname");(!t.reducedSize||typeof t.reducedSize!="boolean")&&(t.reducedSize=!0)}Pe.validateRtcpParameters=iA;function W6(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(!t.numStreams||typeof t.numStreams!="object")throw new TypeError("missing caps.numStreams");oA(t.numStreams)}Pe.validateSctpCapabilities=W6;function oA(t){if(typeof t!="object")throw new TypeError("numStreams is not an object");if(typeof t.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof t.MIS!="number")throw new TypeError("missing numStreams.MIS")}Pe.validateNumSctpStreams=oA;function G6(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.port!="number")throw new TypeError("missing params.port");if(typeof t.OS!="number")throw new TypeError("missing params.OS");if(typeof t.MIS!="number")throw new TypeError("missing params.MIS");if(typeof t.maxMessageSize!="number")throw new TypeError("missing params.maxMessageSize")}Pe.validateSctpParameters=G6;function Q6(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.streamId!="number")throw new TypeError("missing params.streamId");let e=!1;if(typeof t.ordered=="boolean"?e=!0:t.ordered=!0,t.maxPacketLifeTime&&typeof t.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(t.maxRetransmits&&typeof t.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(t.maxPacketLifeTime&&t.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(e&&t.ordered&&(t.maxPacketLifeTime||t.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!e&&(t.maxPacketLifeTime||t.maxRetransmits)&&(t.ordered=!1),t.label&&typeof t.label!="string")throw new TypeError("invalid params.label");if(t.protocol&&typeof t.protocol!="string")throw new TypeError("invalid params.protocol")}Pe.validateSctpStreamParameters=Q6;function J6(t,e){const r={codecs:[],headerExtensions:[]};for(const n of e.codecs||[]){if(El(n))continue;const i=(t.codecs||[]).find(s=>sA(s,n,{strict:!0,modify:!0}));if(!i)continue;const o={mimeType:i.mimeType,kind:i.kind,clockRate:i.clockRate,channels:i.channels,localPayloadType:i.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:i.parameters,remoteParameters:n.parameters,rtcpFeedback:o5(i,n)};r.codecs.push(o)}for(const n of r.codecs){const i=t.codecs.find(s=>El(s)&&s.parameters.apt===n.localPayloadType),o=e.codecs.find(s=>El(s)&&s.parameters.apt===n.remotePayloadType);i&&o&&(n.localRtxPayloadType=i.preferredPayloadType,n.remoteRtxPayloadType=o.preferredPayloadType)}for(const n of e.headerExtensions){const i=t.headerExtensions.find(s=>i5(s,n));if(!i)continue;const o={kind:n.kind,uri:n.uri,sendId:i.preferredId,recvId:n.preferredId,encrypt:i.preferredEncrypt,direction:"sendrecv"};switch(n.direction){case"sendrecv":o.direction="sendrecv";break;case"recvonly":o.direction="sendonly";break;case"sendonly":o.direction="recvonly";break;case"inactive":o.direction="inactive";break}r.headerExtensions.push(o)}return r}Pe.getExtendedRtpCapabilities=J6;function Y6(t){const e={codecs:[],headerExtensions:[]};for(const r of t.codecs){const n={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(e.codecs.push(n),!r.remoteRtxPayloadType)continue;const i={mimeType:`${r.kind}/rtx`,kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};e.codecs.push(i)}for(const r of t.headerExtensions){if(r.direction!=="sendrecv"&&r.direction!=="recvonly")continue;const n={kind:r.kind,uri:r.uri,preferredId:r.recvId,preferredEncrypt:r.encrypt,direction:r.direction};e.headerExtensions.push(n)}return e}Pe.getRecvRtpCapabilities=Y6;function X6(t,e){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of e.codecs){if(n.kind!==t)continue;const i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){const o={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(o)}}for(const n of e.headerExtensions){if(n.kind&&n.kind!==t||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const i={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(i)}return r}Pe.getSendingRtpParameters=X6;function Z6(t,e){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of e.codecs){if(n.kind!==t)continue;const i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){const o={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(o)}}for(const n of e.headerExtensions){if(n.kind&&n.kind!==t||n.direction!=="sendrecv"&&n.direction!=="sendonly")continue;const i={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(i)}if(r.headerExtensions.some(n=>n.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="goog-remb");else if(r.headerExtensions.some(n=>n.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="transport-cc");else for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(i=>i.type!=="transport-cc"&&i.type!=="goog-remb");return r}Pe.getSendingRemoteRtpParameters=Z6;function e5(t,e){const r=[];if(!e)r.push(t[0]),El(t[1])&&r.push(t[1]);else{for(let n=0;n<t.length;++n)if(sA(t[n],e)){r.push(t[n]),El(t[n+1])&&r.push(t[n+1]);break}if(r.length===0)throw new TypeError("no matching codec found")}return r}Pe.reduceCodecs=e5;function t5(t){t=q6.clone(t,{}),Gv(t);const e={mid:z6,codecs:[],headerExtensions:[],encodings:[{ssrc:H6}],rtcp:{cname:"probator"}};return e.codecs.push(t.codecs[0]),e.codecs[0].payloadType=V6,e.headerExtensions=t.headerExtensions,e}Pe.generateProbatorRtpParameters=t5;function r5(t,e){return e.codecs.some(r=>r.kind===t)}Pe.canSend=r5;function n5(t,e){if(Gv(t),t.codecs.length===0)return!1;const r=t.codecs[0];return e.codecs.some(n=>n.remotePayloadType===r.payloadType)}Pe.canReceive=n5;function El(t){return t?/.+\/rtx$/i.test(t.mimeType):!1}function sA(t,e,{strict:r=!1,modify:n=!1}={}){const i=t.mimeType.toLowerCase(),o=e.mimeType.toLowerCase();if(i!==o||t.clockRate!==e.clockRate||t.channels!==e.channels)return!1;switch(i){case"video/h264":{if(r){const s=t.parameters["packetization-mode"]||0,a=e.parameters["packetization-mode"]||0;if(s!==a||!a_.isSameProfile(t.parameters,e.parameters))return!1;let u;try{u=a_.generateProfileLevelIdForAnswer(t.parameters,e.parameters)}catch{return!1}n&&(u?(t.parameters["profile-level-id"]=u,e.parameters["profile-level-id"]=u):(delete t.parameters["profile-level-id"],delete e.parameters["profile-level-id"]))}break}case"video/vp9":{if(r){const s=t.parameters["profile-id"]||0,a=e.parameters["profile-id"]||0;if(s!==a)return!1}break}}return!0}function i5(t,e){return!(t.kind&&e.kind&&t.kind!==e.kind||t.uri!==e.uri)}function o5(t,e){const r=[];for(const n of t.rtcpFeedback||[]){const i=(e.rtcpFeedback||[]).find(o=>o.type===n.type&&(o.parameter===n.parameter||!o.parameter&&!n.parameter));i&&r.push(i)}return r}var cc={},vo={},Td={},s5=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Td,"__esModule",{value:!0});Td.Logger=void 0;const ps=s5(So),ms="awaitqueue";class a5{constructor(e){e?(this._debug=(0,ps.default)(`${ms}:${e}`),this._warn=(0,ps.default)(`${ms}:WARN:${e}`),this._error=(0,ps.default)(`${ms}:ERROR:${e}`)):(this._debug=(0,ps.default)(ms),this._warn=(0,ps.default)(`${ms}:WARN`),this._error=(0,ps.default)(`${ms}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Td.Logger=a5;Object.defineProperty(vo,"__esModule",{value:!0});vo.AwaitQueue=vo.AwaitQueueRemovedTaskError=vo.AwaitQueueStoppedError=void 0;const l5=Td,Wi=new l5.Logger;class Cd extends Error{constructor(e){super(e??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Cd)}}vo.AwaitQueueStoppedError=Cd;class Od extends Error{constructor(e){super(e??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Od)}}vo.AwaitQueueRemovedTaskError=Od;class c5{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,r){if(r=r??e.name,Wi.debug(`push() [name:${r}]`),typeof e!="function")throw new TypeError("given task is not a function");if(r)try{Object.defineProperty(e,"name",{value:r})}catch{}return new Promise((n,i)=>{const o={id:this.nextTaskId++,task:e,name:r,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:s=>{if(o.completed)return;o.completed=!0,this.pendingTasks.delete(o.id),Wi.debug(`resolving task [name:${o.name}]`),n(s);const[a]=this.pendingTasks.values();a&&!a.executedAt&&this.execute(a)},reject:s=>{if(!o.completed&&(o.completed=!0,this.pendingTasks.delete(o.id),Wi.debug(`rejecting task [name:${o.name}]: %s`,String(s)),i(s),!this.stopping)){const[a]=this.pendingTasks.values();a&&!a.executedAt&&this.execute(a)}}};this.pendingTasks.set(o.id,o),this.pendingTasks.size===1&&this.execute(o)})}stop(){Wi.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())Wi.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new Cd);this.stopping=!1}remove(e){Wi.debug(`remove() [taskIdx:${e}]`);const r=Array.from(this.pendingTasks.values())[e];if(!r){Wi.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}r.reject(new Od)}dump(){const e=Date.now();let r=0;return Array.from(this.pendingTasks.values()).map(n=>({idx:r++,task:n.task,name:n.name,enqueuedTime:n.executedAt?n.executedAt-n.enqueuedAt:e-n.enqueuedAt,executionTime:n.executedAt?e-n.executedAt:0}))}async execute(e){if(Wi.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const r=await e.task();e.resolve(r)}catch(r){e.reject(r)}}}vo.AwaitQueue=c5;var uc={};Object.defineProperty(uc,"__esModule",{value:!0});uc.Producer=void 0;const u5=Bt,l_=li,gs=Rr,Ln=new u5.Logger("Producer");class f5 extends l_.EnhancedEventEmitter{constructor({id:e,localId:r,rtpSender:n,track:i,rtpParameters:o,stopTracks:s,disableTrackOnPause:a,zeroRtpOnPause:u,appData:l}){super(),this._closed=!1,this._observer=new l_.EnhancedEventEmitter,Ln.debug("constructor()"),this._id=e,this._localId=r,this._rtpSender=n,this._track=i,this._kind=i.kind,this._rtpParameters=o,this._paused=a?!i.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=a,this._zeroRtpOnPause=u,this._appData=l||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Ln.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Ln.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new gs.InvalidStateError("closed");return new Promise((e,r)=>{this.safeEmit("@getstats",e,r)})}pause(){if(Ln.debug("pause()"),this._closed){Ln.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,r)=>{this.safeEmit("@pause",e,r)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(Ln.debug("resume()"),this._closed){Ln.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,r)=>{this.safeEmit("@resume",e,r)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(Ln.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch{}throw new gs.InvalidStateError("closed")}else if(e&&e.readyState==="ended")throw new gs.InvalidStateError("track ended");if(e===this._track){Ln.debug("replaceTrack() | same track, ignored");return}await new Promise((r,n)=>{this.safeEmit("@replacetrack",e,r,n)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new gs.InvalidStateError("closed");if(this._kind!=="video")throw new gs.UnsupportedError("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((r,n)=>{this.safeEmit("@setmaxspatiallayer",e,r,n)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new gs.InvalidStateError("closed");if(typeof e!="object")throw new TypeError("invalid params");await new Promise((r,n)=>{this.safeEmit("@setrtpencodingparameters",e,r,n)})}onTrackEnded(){Ln.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}uc.Producer=f5;var fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.Consumer=void 0;const d5=Bt,c_=li,h5=Rr,Bn=new d5.Logger("Consumer");class p5 extends c_.EnhancedEventEmitter{constructor({id:e,localId:r,producerId:n,rtpReceiver:i,track:o,rtpParameters:s,appData:a}){super(),this._closed=!1,this._observer=new c_.EnhancedEventEmitter,Bn.debug("constructor()"),this._id=e,this._localId=r,this._producerId=n,this._rtpReceiver=i,this._track=o,this._rtpParameters=s,this._paused=!o.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Bn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Bn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new h5.InvalidStateError("closed");return new Promise((e,r)=>{this.safeEmit("@getstats",e,r)})}pause(){if(Bn.debug("pause()"),this._closed){Bn.error("pause() | Consumer closed");return}if(this._paused){Bn.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Bn.debug("resume()"),this._closed){Bn.error("resume() | Consumer closed");return}if(!this._paused){Bn.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Bn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}fc.Consumer=p5;var dc={};Object.defineProperty(dc,"__esModule",{value:!0});dc.DataProducer=void 0;const m5=Bt,u_=li,g5=Rr,di=new m5.Logger("DataProducer");class v5 extends u_.EnhancedEventEmitter{constructor({id:e,dataChannel:r,sctpStreamParameters:n,appData:i}){super(),this._closed=!1,this._observer=new u_.EnhancedEventEmitter,di.debug("constructor()"),this._id=e,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=i||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(di.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(di.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(di.debug("send()"),this._closed)throw new g5.InvalidStateError("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(di.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:r}=e;r||(r=new Error("unknown DataChannel error")),r.errorDetail==="sctp-failure"?di.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):di.error('DataChannel "error" event: %o',r),this.safeEmit("error",r)}),this._dataChannel.addEventListener("close",()=>{this._closed||(di.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||di.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}dc.DataProducer=v5;var hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.DataConsumer=void 0;const y5=Bt,f_=li,Oo=new y5.Logger("DataConsumer");class w5 extends f_.EnhancedEventEmitter{constructor({id:e,dataProducerId:r,dataChannel:n,sctpStreamParameters:i,appData:o}){super(),this._closed=!1,this._observer=new f_.EnhancedEventEmitter,Oo.debug("constructor()"),this._id=e,this._dataProducerId=r,this._dataChannel=n,this._sctpStreamParameters=i,this._appData=o||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Oo.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Oo.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Oo.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:r}=e;r||(r=new Error("unknown DataChannel error")),r.errorDetail==="sctp-failure"?Oo.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):Oo.error('DataChannel "error" event: %o',r),this.safeEmit("error",r)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Oo.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}hc.DataConsumer=w5;var _5=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),b5=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aA=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_5(e,t,r);return b5(e,t),e};Object.defineProperty(cc,"__esModule",{value:!0});cc.Transport=void 0;const S5=vo,E5=Bt,d_=li,Ht=Rr,sp=aA(qt),Ja=aA(Pe),R5=uc,x5=fc,A5=dc,P5=hc,Vt=new E5.Logger("Transport");class k5{constructor(e){this.consumerOptions=e,this.promise=new Promise((r,n)=>{this.resolve=r,this.reject=n})}}class T5 extends d_.EnhancedEventEmitter{constructor({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:o,sctpParameters:s,iceServers:a,iceTransportPolicy:u,additionalSettings:l,proprietaryConstraints:c,appData:f,handlerFactory:d,extendedRtpCapabilities:h,canProduceByKind:p}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new S5.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new d_.EnhancedEventEmitter,Vt.debug("constructor() [id:%s, direction:%s]",r,e),this._id=r,this._direction=e,this._extendedRtpCapabilities=h,this._canProduceByKind=p,this._maxSctpMessageSize=s?s.maxMessageSize:null,l=sp.clone(l,{}),delete l.iceServers,delete l.iceTransportPolicy,delete l.bundlePolicy,delete l.rtcpMuxPolicy,delete l.sdpSemantics,this._handler=d(),this._handler.run({direction:e,iceParameters:n,iceCandidates:i,dtlsParameters:o,sctpParameters:s,iceServers:a,iceTransportPolicy:u,additionalSettings:l,proprietaryConstraints:c,extendedRtpCapabilities:h}),this._appData=f||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){Vt.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new Ht.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(Vt.debug("restartIce()"),this._closed)throw new Ht.InvalidStateError("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(Vt.debug("updateIceServers()"),this._closed)throw new Ht.InvalidStateError("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:r,codecOptions:n,codec:i,stopTracks:o=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:u={}}={}){if(Vt.debug("produce() [track:%o]",e),this._closed)throw new Ht.InvalidStateError("closed");if(e){if(this._direction!=="send")throw new Ht.UnsupportedError("not a sending Transport");if(this._canProduceByKind[e.kind]){if(e.readyState==="ended")throw new Ht.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(u&&typeof u!="object")throw new TypeError("if given, appData must be an object")}else throw new Ht.UnsupportedError(`cannot produce ${e.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let l;if(r&&!Array.isArray(r))throw TypeError("encodings must be an array");r&&r.length===0?l=void 0:r&&(l=r.map(h=>{const p={active:!0};return h.active===!1&&(p.active=!1),typeof h.dtx=="boolean"&&(p.dtx=h.dtx),typeof h.scalabilityMode=="string"&&(p.scalabilityMode=h.scalabilityMode),typeof h.scaleResolutionDownBy=="number"&&(p.scaleResolutionDownBy=h.scaleResolutionDownBy),typeof h.maxBitrate=="number"&&(p.maxBitrate=h.maxBitrate),typeof h.maxFramerate=="number"&&(p.maxFramerate=h.maxFramerate),typeof h.adaptivePtime=="boolean"&&(p.adaptivePtime=h.adaptivePtime),typeof h.priority=="string"&&(p.priority=h.priority),typeof h.networkPriority=="string"&&(p.networkPriority=h.networkPriority),p}));const{localId:c,rtpParameters:f,rtpSender:d}=await this._handler.send({track:e,encodings:l,codecOptions:n,codec:i});try{Ja.validateRtpParameters(f);const{id:h}=await new Promise((g,_)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:f,appData:u},g,_)}),p=new R5.Producer({id:h,localId:c,rtpSender:d,track:e,rtpParameters:f,stopTracks:o,disableTrackOnPause:s,zeroRtpOnPause:a,appData:u});return this._producers.set(p.id,p),this.handleProducer(p),this._observer.safeEmit("newproducer",p),p}catch(h){throw this._handler.stopSending(c).catch(()=>{}),h}},"transport.produce()").catch(l=>{if(o)try{e.stop()}catch{}throw l})}async consume({id:e,producerId:r,kind:n,rtpParameters:i,streamId:o,appData:s={}}){if(Vt.debug("consume()"),i=sp.clone(i,void 0),this._closed)throw new Ht.InvalidStateError("closed");if(this._direction!=="recv")throw new Ht.UnsupportedError("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing producerId");if(n!=="audio"&&n!=="video")throw new TypeError(`invalid kind '${n}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object");if(!Ja.canReceive(i,this._extendedRtpCapabilities))throw new Ht.UnsupportedError("cannot consume this Producer");const u=new k5({id:e,producerId:r,kind:n,rtpParameters:i,streamId:o,appData:s});return this._pendingConsumerTasks.push(u),this._consumerCreationInProgress===!1&&this.createPendingConsumers(),u.promise}async produceData({ordered:e=!0,maxPacketLifeTime:r,maxRetransmits:n,label:i="",protocol:o="",appData:s={}}={}){if(Vt.debug("produceData()"),this._closed)throw new Ht.InvalidStateError("closed");if(this._direction!=="send")throw new Ht.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new Ht.UnsupportedError("SCTP not enabled by remote Transport");return(r||n)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:u}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o});Ja.validateSctpStreamParameters(u);const{id:l}=await new Promise((f,d)=>{this.safeEmit("producedata",{sctpStreamParameters:u,label:i,protocol:o,appData:s},f,d)}),c=new A5.DataProducer({id:l,dataChannel:a,sctpStreamParameters:u,appData:s});return this._dataProducers.set(c.id,c),this.handleDataProducer(c),this._observer.safeEmit("newdataproducer",c),c},"transport.produceData()")}async consumeData({id:e,dataProducerId:r,sctpStreamParameters:n,label:i="",protocol:o="",appData:s={}}){if(Vt.debug("consumeData()"),n=sp.clone(n,void 0),this._closed)throw new Ht.InvalidStateError("closed");if(this._direction!=="recv")throw new Ht.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof e!="string")throw new TypeError("missing id");if(typeof r!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new Ht.UnsupportedError("SCTP not enabled by remote Transport");return Ja.validateSctpStreamParameters(n),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:n,label:i,protocol:o}),u=new P5.DataConsumer({id:e,dataProducerId:r,dataChannel:a,sctpStreamParameters:n,appData:s});return this._dataConsumers.set(u.id,u),this.handleDataConsumer(u),this._observer.safeEmit("newdataconsumer",u),u},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){Vt.debug("createPendingConsumers() | there is no Consumer to be created");return}const e=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let r;const n=[];for(const i of e){const{id:o,kind:s,rtpParameters:a,streamId:u}=i.consumerOptions;n.push({trackId:o,kind:s,rtpParameters:a,streamId:u})}try{const i=await this._handler.receive(n);for(let o=0;o<i.length;o++){const s=e[o],a=i[o],{id:u,producerId:l,kind:c,rtpParameters:f,appData:d}=s.consumerOptions,{localId:h,rtpReceiver:p,track:g}=a,_=new x5.Consumer({id:u,localId:h,producerId:l,rtpReceiver:p,track:g,rtpParameters:f,appData:d});this._consumers.set(_.id,_),this.handleConsumer(_),!this._probatorConsumerCreated&&!r&&c==="video"&&(r=_),this._observer.safeEmit("newconsumer",_),s.resolve(_)}}catch(i){for(const o of e)o.reject(i)}if(r)try{const i=Ja.generateProbatorRtpParameters(r.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:i}]),Vt.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(i){Vt.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",i)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){Vt.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const r=e.map(n=>n.localId);await this._handler.pauseReceiving(r)}catch(r){Vt.error("pausePendingConsumers() | failed to pause Consumers:",r)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){Vt.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const r=e.map(n=>n.localId);await this._handler.resumeReceiving(r)}catch(r){Vt.error("resumePendingConsumers() | failed to resume Consumers:",r)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){Vt.debug("closePendingConsumers() | there is no Consumer to be closed");return}const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(r=>r.localId))}catch(r){Vt.error("closePendingConsumers() | failed to close Consumers:",r)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:r},n,i)=>{if(this._closed){i(new Ht.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:r},n,i)}),e.on("@connectionstatechange",r=>{r!==this._connectionState&&(Vt.debug("connection state changed to %s",r),this._connectionState=r,this._closed||this.safeEmit("connectionstatechange",r))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(e.localId),"producer @close event").catch(r=>Vt.warn("producer.close() failed:%o",r))}),e.on("@pause",(r,n)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(e.localId),"producer @pause event").then(r).catch(n)}),e.on("@resume",(r,n)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(e.localId),"producer @resume event").then(r).catch(n)}),e.on("@replacetrack",(r,n,i)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(e.localId,r),"producer @replacetrack event").then(n).catch(i)}),e.on("@setmaxspatiallayer",(r,n,i)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(e.localId,r),"producer @setmaxspatiallayer event").then(n).catch(i)}),e.on("@setrtpencodingparameters",(r,n,i)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(e.localId,r),"producer @setrtpencodingparameters event").then(n).catch(i)}),e.on("@getstats",(r,n)=>{if(this._closed)return n(new Ht.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(r).catch(n)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),!this._closed&&(this._pendingCloseConsumers.set(e.id,e),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),this._consumerPauseInProgress===!1&&this.pausePendingConsumers()}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),this._consumerResumeInProgress===!1&&this.resumePendingConsumers()}),e.on("@getstats",(r,n)=>{if(this._closed)return n(new Ht.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(r).catch(n)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}}cc.Transport=T5;var Md={},Qt={},lA={},Rf={},C5={get exports(){return Rf},set exports(t){Rf=t}},h_=C5.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(h_).forEach(function(t){var e=h_[t];e.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})});(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},r=function(a,u,l,c){if(c&&!l)u[c]=e(a[1]);else for(var f=0;f<l.length;f+=1)a[f+1]!=null&&(u[l[f]]=e(a[f+1]))},n=function(a,u,l){var c=a.name&&a.names;a.push&&!u[a.push]?u[a.push]=[]:c&&!u[a.name]&&(u[a.name]={});var f=a.push?{}:c?u[a.name]:u;r(l.match(a.reg),f,a.names,a.name),a.push&&u[a.push].push(f)},i=Rf,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var u={},l=[],c=u;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(f){var d=f[0],h=f.slice(2);d==="m"&&(l.push({rtp:[],fmtp:[]}),c=l[l.length-1]);for(var p=0;p<(i[d]||[]).length;p+=1){var g=i[d][p];if(g.reg.test(h))return n(g,c,h)}}),u.media=l,u};var s=function(a,u){var l=u.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&u.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var u=[],l=a.split(" ").map(e),c=0;c<l.length;c+=3)u.push({component:l[c],ip:l[c+1],port:l[c+2]});return u},t.parseImageAttributes=function(a){return a.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(u){return u.split(",").map(function(l){var c,f=!1;return l[0]!=="~"?c=e(l):(c=e(l.substring(1,l.length)),f=!0),{scid:c,paused:f}})})}})(lA);var ap=Rf,O5=/%[sdv%]/g,M5=function(t){var e=1,r=arguments,n=r.length;return t.replace(O5,function(i){if(e>=n)return i;var o=r[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},Ya=function(t,e,r){var n=e.format instanceof Function?e.format(e.push?r:r[e.name]):e.format,i=[t+"="+n];if(e.names)for(var o=0;o<e.names.length;o+=1){var s=e.names[o];e.name?i.push(r[e.name][s]):i.push(r[e.names[o]])}else i.push(r[e.name]);return M5.apply(null,i)},N5=["v","o","s","i","u","e","p","c","b","t","r","z","a"],D5=["i","c","b","a"],I5=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var r=e.outerOrder||N5,n=e.innerOrder||D5,i=[];return r.forEach(function(o){ap[o].forEach(function(s){s.name in t&&t[s.name]!=null?i.push(Ya(o,s,t)):s.push in t&&t[s.push]!=null&&t[s.push].forEach(function(a){i.push(Ya(o,s,a))})})}),t.media.forEach(function(o){i.push(Ya("m",ap.m[0],o)),n.forEach(function(s){ap[s].forEach(function(a){a.name in o&&o[a.name]!=null?i.push(Ya(s,a,o)):a.push in o&&o[a.push]!=null&&o[a.push].forEach(function(u){i.push(Ya(s,a,u))})})})}),i.join(`\r
`)+`\r
`},os=lA,L5=I5;Qt.write=L5;Qt.parse=os.parse;Qt.parseParams=os.parseParams;Qt.parseFmtpConfig=os.parseFmtpConfig;Qt.parsePayloads=os.parsePayloads;Qt.parseRemoteCandidates=os.parseRemoteCandidates;Qt.parseImageAttributes=os.parseImageAttributes;Qt.parseSimulcastStreamList=os.parseSimulcastStreamList;var Xt={},B5=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),F5=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),j5=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&B5(e,t,r);return F5(e,t),e};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.applyCodecParameters=Xt.getCname=Xt.extractDtlsParameters=Xt.extractRtpCapabilities=void 0;const cA=j5(Qt);function $5({sdpObject:t}){const e=new Map,r=[];let n=!1,i=!1;for(const s of t.media){const a=s.type;switch(a){case"audio":{if(n)continue;n=!0;break}case"video":{if(i)continue;i=!0;break}default:continue}for(const u of s.rtp){const l={kind:a,mimeType:`${a}/${u.codec}`,preferredPayloadType:u.payload,clockRate:u.rate,channels:u.encoding,parameters:{},rtcpFeedback:[]};e.set(l.preferredPayloadType,l)}for(const u of s.fmtp||[]){const l=cA.parseParams(u.config),c=e.get(u.payload);c&&(l&&l.hasOwnProperty("profile-level-id")&&(l["profile-level-id"]=String(l["profile-level-id"])),c.parameters=l)}for(const u of s.rtcpFb||[]){const l={type:u.type,parameter:u.subtype};if(l.parameter||delete l.parameter,u.payload!=="*"){const c=e.get(u.payload);if(!c)continue;c.rtcpFeedback.push(l)}else for(const c of e.values())c.kind===a&&!/.+\/rtx$/i.test(c.mimeType)&&c.rtcpFeedback.push(l)}for(const u of s.ext||[]){if(u["encrypt-uri"])continue;const l={kind:a,uri:u.uri,preferredId:u.value};r.push(l)}}return{codecs:Array.from(e.values()),headerExtensions:r}}Xt.extractRtpCapabilities=$5;function U5({sdpObject:t}){const e=(t.media||[]).find(o=>o.iceUfrag&&o.port!==0);if(!e)throw new Error("no active media section found");const r=e.fingerprint||t.fingerprint;let n;switch(e.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto";break}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}}Xt.extractDtlsParameters=U5;function q5({offerMediaObject:t}){const e=(t.ssrcs||[]).find(r=>r.attribute==="cname");return e?e.value:""}Xt.getCname=q5;function z5({offerRtpParameters:t,answerMediaObject:e}){for(const r of t.codecs){const n=r.mimeType.toLowerCase();if(n!=="audio/opus"||!(e.rtp||[]).find(a=>a.payload===r.payloadType))continue;e.fmtp=e.fmtp||[];let o=e.fmtp.find(a=>a.payload===r.payloadType);o||(o={payload:r.payloadType,config:""},e.fmtp.push(o));const s=cA.parseParams(o.config);switch(n){case"audio/opus":{const a=r.parameters["sprop-stereo"];a!==void 0&&(s.stereo=a?1:0);break}}o.config="";for(const a of Object.keys(s))o.config&&(o.config+=";"),o.config+=`${a}=${s[a]}`}}Xt.applyCodecParameters=z5;var si={};Object.defineProperty(si,"__esModule",{value:!0});si.addLegacySimulcast=si.getRtpEncodings=void 0;function H5({offerMediaObject:t}){const e=new Set;for(const i of t.ssrcs||[]){const o=i.id;e.add(o)}if(e.size===0)throw new Error("no a=ssrc lines found");const r=new Map;for(const i of t.ssrcGroups||[]){if(i.semantics!=="FID")continue;let[o,s]=i.ssrcs.split(/\s+/);o=Number(o),s=Number(s),e.has(o)&&(e.delete(o),e.delete(s),r.set(o,s))}for(const i of e)r.set(i,null);const n=[];for(const[i,o]of r){const s={ssrc:i};o&&(s.rtx={ssrc:o}),n.push(s)}return n}si.getRtpEncodings=H5;function V5({offerMediaObject:t,numStreams:e}){if(e<=1)throw new TypeError("numStreams must be greater than 1");const r=(t.ssrcs||[]).find(f=>f.attribute==="msid");if(!r)throw new Error("a=ssrc line with msid information not found");const[n,i]=r.value.split(" "),o=r.id;let s;(t.ssrcGroups||[]).some(f=>{if(f.semantics!=="FID")return!1;const d=f.ssrcs.split(/\s+/);return Number(d[0])===o?(s=Number(d[1]),!0):!1});const a=t.ssrcs.find(f=>f.attribute==="cname");if(!a)throw new Error("a=ssrc line with cname information not found");const u=a.value,l=[],c=[];for(let f=0;f<e;++f)l.push(o+f),s&&c.push(s+f);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let f=0;f<l.length;++f){const d=l[f];t.ssrcs.push({id:d,attribute:"cname",value:u}),t.ssrcs.push({id:d,attribute:"msid",value:`${n} ${i}`})}for(let f=0;f<c.length;++f){const d=l[f],h=c[f];t.ssrcs.push({id:h,attribute:"cname",value:u}),t.ssrcs.push({id:h,attribute:"msid",value:`${n} ${i}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${d} ${h}`})}}si.addLegacySimulcast=V5;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.HandlerInterface=void 0;const K5=li;class W5 extends K5.EnhancedEventEmitter{constructor(){super()}}Lr.HandlerInterface=W5;var fn={},yo={},G5=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Q5=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),J5=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&G5(e,t,r);return Q5(e,t),e};Object.defineProperty(yo,"__esModule",{value:!0});yo.OfferMediaSection=yo.AnswerMediaSection=yo.MediaSection=void 0;const Y5=J5(qt);class Qv{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:i=!1}){if(this._mediaObject={},this._planB=i,e&&this.setIceParameters(e),r){this._mediaObject.candidates=[];for(const o of r){const s={};s.component=1,s.foundation=o.foundation,s.ip=o.ip,s.port=o.port,s.priority=o.priority,s.transport=o.protocol,s.type=o.type,o.tcpType&&(s.tcptype=o.tcpType),this._mediaObject.candidates.push(s)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}n&&this.setDtlsRole(n.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}yo.MediaSection=Qv;class X5 extends Qv{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:o,planB:s=!1,offerMediaObject:a,offerRtpParameters:u,answerRtpParameters:l,codecOptions:c,extmapAllowMixed:f=!1}){switch(super({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:s}),this._mediaObject.mid=String(a.mid),this._mediaObject.type=a.type,this._mediaObject.protocol=a.protocol,o?(this._mediaObject.connection={ip:o.ip,version:o.ipVersion},this._mediaObject.port=o.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),a.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const d of l.codecs){const h={payload:d.payloadType,codec:cg(d),rate:d.clockRate};d.channels>1&&(h.encoding=d.channels),this._mediaObject.rtp.push(h);const p=Y5.clone(d.parameters,{});if(c){const{opusStereo:_,opusFec:m,opusDtx:v,opusMaxPlaybackRate:S,opusMaxAverageBitrate:b,opusPtime:R,videoGoogleStartBitrate:j,videoGoogleMaxBitrate:D,videoGoogleMinBitrate:N}=c,U=u.codecs.find(F=>F.payloadType===d.payloadType);switch(d.mimeType.toLowerCase()){case"audio/opus":{_!==void 0&&(U.parameters["sprop-stereo"]=_?1:0,p.stereo=_?1:0),m!==void 0&&(U.parameters.useinbandfec=m?1:0,p.useinbandfec=m?1:0),v!==void 0&&(U.parameters.usedtx=v?1:0,p.usedtx=v?1:0),S!==void 0&&(p.maxplaybackrate=S),b!==void 0&&(p.maxaveragebitrate=b),R!==void 0&&(U.parameters.ptime=R,p.ptime=R);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{j!==void 0&&(p["x-google-start-bitrate"]=j),D!==void 0&&(p["x-google-max-bitrate"]=D),N!==void 0&&(p["x-google-min-bitrate"]=N);break}}}const g={payload:d.payloadType,config:""};for(const _ of Object.keys(p))g.config&&(g.config+=";"),g.config+=`${_}=${p[_]}`;g.config&&this._mediaObject.fmtp.push(g);for(const _ of d.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:d.payloadType,type:_.type,subtype:_.parameter})}this._mediaObject.payloads=l.codecs.map(d=>d.payloadType).join(" "),this._mediaObject.ext=[];for(const d of l.headerExtensions)(a.ext||[]).some(p=>p.uri===d.uri)&&this._mediaObject.ext.push({uri:d.uri,value:d.id});if(f&&a.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),a.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:a.simulcast.list1},this._mediaObject.rids=[];for(const d of a.rids||[])d.direction==="send"&&this._mediaObject.rids.push({id:d.id,direction:"recv"})}else if(a.simulcast_03){this._mediaObject.simulcast_03={value:a.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const d of a.rids||[])d.direction==="send"&&this._mediaObject.rids.push({id:d.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof a.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=i.port,this._mediaObject.maxMessageSize=i.maxMessageSize):a.sctpmap&&(this._mediaObject.payloads=i.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:i.port,maxMessageSize:i.maxMessageSize});break}}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}}yo.AnswerMediaSection=X5;class Z5 extends Qv{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:o,planB:s=!1,mid:a,kind:u,offerRtpParameters:l,streamId:c,trackId:f,oldDataChannelSpec:d=!1}){switch(super({iceParameters:e,iceCandidates:r,dtlsParameters:n,planB:s}),this._mediaObject.mid=String(a),this._mediaObject.type=u,o?(this._mediaObject.connection={ip:o.ip,version:o.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=o.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},i?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),u){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${c||"-"} ${f}`);for(const _ of l.codecs){const m={payload:_.payloadType,codec:cg(_),rate:_.clockRate};_.channels>1&&(m.encoding=_.channels),this._mediaObject.rtp.push(m);const v={payload:_.payloadType,config:""};for(const S of Object.keys(_.parameters))v.config&&(v.config+=";"),v.config+=`${S}=${_.parameters[S]}`;v.config&&this._mediaObject.fmtp.push(v);for(const S of _.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:_.payloadType,type:S.type,subtype:S.parameter})}this._mediaObject.payloads=l.codecs.map(_=>_.payloadType).join(" "),this._mediaObject.ext=[];for(const _ of l.headerExtensions)this._mediaObject.ext.push({uri:_.uri,value:_.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const h=l.encodings[0],p=h.ssrc,g=h.rtx&&h.rtx.ssrc?h.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],l.rtcp.cname&&this._mediaObject.ssrcs.push({id:p,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:p,attribute:"msid",value:`${c||"-"} ${f}`}),g&&(l.rtcp.cname&&this._mediaObject.ssrcs.push({id:g,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:g,attribute:"msid",value:`${c||"-"} ${f}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${p} ${g}`}));break}case"application":{d?(this._mediaObject.payloads=i.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:i.port,maxMessageSize:i.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=i.port,this._mediaObject.maxMessageSize=i.maxMessageSize);break}}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:r,trackId:n}){const i=e.encodings[0],o=i.ssrc,s=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0,a=this._mediaObject.payloads.split(" ");for(const u of e.codecs){if(a.includes(String(u.payloadType)))continue;const l={payload:u.payloadType,codec:cg(u),rate:u.clockRate};u.channels>1&&(l.encoding=u.channels),this._mediaObject.rtp.push(l);const c={payload:u.payloadType,config:""};for(const f of Object.keys(u.parameters))c.config&&(c.config+=";"),c.config+=`${f}=${u.parameters[f]}`;c.config&&this._mediaObject.fmtp.push(c);for(const f of u.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:u.payloadType,type:f.type,subtype:f.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(u=>!this._mediaObject.payloads.includes(u.payloadType)).map(u=>u.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:o,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:o,attribute:"msid",value:`${r||"-"} ${n}`}),s&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${r||"-"} ${n}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${o} ${s}`}))}planBStopReceiving({offerRtpParameters:e}){const r=e.encodings[0],n=r.ssrc,i=r.rtx&&r.rtx.ssrc?r.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(o=>o.id!==n&&o.id!==i),i&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(o=>o.ssrcs!==`${n} ${i}`))}}yo.OfferMediaSection=Z5;function cg(t){const r=new RegExp("^(audio|video)/(.+)","i").exec(t.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");return r[2]}var eB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rB=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eB(e,t,r);return tB(e,t),e};Object.defineProperty(fn,"__esModule",{value:!0});fn.RemoteSdp=void 0;const nB=rB(Qt),iB=Bt,Jc=yo,lp=new iB.Logger("RemoteSdp");class oB{constructor({iceParameters:e,iceCandidates:r,dtlsParameters:n,sctpParameters:i,plainRtpParameters:o,planB:s=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=r,this._dtlsParameters=n,this._sctpParameters=i,this._plainRtpParameters=o,this._planB=s,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),n){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const a=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:n.fingerprints[a-1].algorithm,hash:n.fingerprints[a-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}o&&(this._sdpObject.origin.address=o.ip,this._sdpObject.origin.ipVer=o.ipVersion)}updateIceParameters(e){lp.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const r of this._mediaSections)r.setIceParameters(e)}updateDtlsRole(e){lp.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const r of this._mediaSections)r.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const r=this._mediaSections[e];if(r.closed)return{idx:e,reuseMid:r.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:r,offerRtpParameters:n,answerRtpParameters:i,codecOptions:o,extmapAllowMixed:s=!1}){const a=new Jc.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:n,answerRtpParameters:i,codecOptions:o,extmapAllowMixed:s});r?this._replaceMediaSection(a,r):this._midToIndex.has(a.mid)?this._replaceMediaSection(a):this._addMediaSection(a)}receive({mid:e,kind:r,offerRtpParameters:n,streamId:i,trackId:o}){const s=this._midToIndex.get(e);let a;if(s!==void 0&&(a=this._mediaSections[s]),a)a.planBReceive({offerRtpParameters:n,streamId:i,trackId:o}),this._replaceMediaSection(a);else{a=new Jc.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:r,offerRtpParameters:n,streamId:i,trackId:o});const u=this._mediaSections.find(l=>l.closed);u?this._replaceMediaSection(a,u.mid):this._addMediaSection(a)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const r=this._findMediaSection(e);return e===this._firstMid?(lp.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(r.close(),this._regenerateBundleMids(),!0)}planBStopReceiving({mid:e,offerRtpParameters:r}){const n=this._midToIndex.get(e);if(n===void 0)throw new Error(`no media section found with mid '${e}'`);const i=this._mediaSections[n];i.planBStopReceiving({offerRtpParameters:r}),this._replaceMediaSection(i)}sendSctpAssociation({offerMediaObject:e}){const r=new Jc.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(r)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const r=new Jc.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(r)}getSdp(){return this._sdpObject.origin.sessionVersion++,nB.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,r){if(typeof r=="string"){const n=this._midToIndex.get(r);if(n===void 0)throw new Error(`no media section found for reuseMid '${r}'`);const i=this._mediaSections[n];this._mediaSections[n]=e,this._midToIndex.delete(i.mid),this._midToIndex.set(e.mid,n),this._sdpObject.media[n]=e.getObject(),this._regenerateBundleMids()}else{const n=this._midToIndex.get(e.mid);if(n===void 0)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[n]=e,this._sdpObject.media[n]=e.getObject()}}_findMediaSection(e){const r=this._midToIndex.get(e);if(r===void 0)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[r]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}fn.RemoteSdp=oB;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.parse=void 0;const sB=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function aB(t){const e=sB.exec(t||"");return e?{spatialLayers:Number(e[1]),temporalLayers:Number(e[2])}:{spatialLayers:1,temporalLayers:1}}ss.parse=aB;var lB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lB(e,t,r);return cB(e,t),e};Object.defineProperty(Md,"__esModule",{value:!0});Md.Chrome74=void 0;const Fn=pc(Qt),uB=Bt,p_=pc(qt),vs=pc(Pe),Yc=pc(Xt),cp=pc(si),fB=Lr,dB=fn,hB=ss,Te=new uB.Logger("Chrome74"),m_={OS:1024,MIS:1024};class Jv extends fB.HandlerInterface{static createFactory(){return()=>new Jv}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(Te.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Te.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Fn.parse(r.sdp);return Yc.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Te.debug("getNativeSctpCapabilities()"),{numStreams:m_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Te.debug("run()"),this._direction=e,this._remoteSdp=new dB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:vs.getSendingRtpParameters("audio",c),video:vs.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:vs.getSendingRemoteRtpParameters("audio",c),video:vs.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(Te.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){Te.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Te.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Te.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Te.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Te.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Te.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),Te.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((m,v)=>{m.rid=`r${v}`});const s=p_.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=vs.reduceCodecs(s.codecs,i);const a=p_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=vs.reduceCodecs(a.codecs,i);const u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let c=await this._pc.createOffer(),f=Fn.parse(c.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:f});let h=!1;const p=(0,hB.parse)((r||[{}])[0].scalabilityMode);r&&r.length===1&&p.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Te.debug("send() | enabling legacy simulcast for VP9 SVC"),h=!0,f=Fn.parse(c.sdp),d=f.media[u.idx],cp.addLegacySimulcast({offerMediaObject:d,numStreams:p.spatialLayers}),c={type:"offer",sdp:Fn.write(f)}),Te.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const g=l.mid;if(s.mid=g,f=Fn.parse(this._pc.localDescription.sdp),d=f.media[u.idx],s.rtcp.cname=Yc.getCname({offerMediaObject:d}),!r)s.encodings=cp.getRtpEncodings({offerMediaObject:d});else if(r.length===1){let m=cp.getRtpEncodings({offerMediaObject:d});Object.assign(m[0],r[0]),h&&(m=[m[0]]),s.encodings=m}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of s.encodings)m.scalabilityMode="S1T2";this._remoteSdp.send({offerMediaObject:d,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:a,codecOptions:n,extmapAllowMixed:!0});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return Te.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(g,l),{localId:g,rtpParameters:s,rtpSender:l.sender}}async stopSending(e){this.assertSendDirection(),Te.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();Te.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const o={type:"answer",sdp:this._remoteSdp.getSdp()};Te.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),Te.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();Te.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Te.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertSendDirection(),Te.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();Te.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Te.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertSendDirection(),r?Te.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Te.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Te.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.sender.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Te.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.sender.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:o};Te.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=Fn.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),Te.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Te.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[],i=new Map;for(const u of e){const{trackId:l,kind:c,rtpParameters:f,streamId:d}=u;Te.debug("receive() [trackId:%s, kind:%s]",l,c);const h=f.mid||String(this._mapMidTransceiver.size);i.set(l,h),this._remoteSdp.receive({mid:h,kind:c,offerRtpParameters:f,streamId:d||f.rtcp.cname,trackId:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};Te.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);let s=await this._pc.createAnswer();const a=Fn.parse(s.sdp);for(const u of e){const{trackId:l,rtpParameters:c}=u,f=i.get(l),d=a.media.find(h=>String(h.mid)===f);Yc.applyCodecParameters({offerRtpParameters:c,answerMediaObject:d})}s={type:"answer",sdp:Fn.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:a}),Te.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const u of e){const{trackId:l}=u,c=i.get(l),f=this._pc.getTransceivers().find(d=>d.mid===c);if(f)this._mapMidTransceiver.set(c,f),n.push({localId:c,track:f.receiver.track,rtpReceiver:f.receiver});else throw new Error("new RTCRtpTransceiver not found")}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Te.debug("stopReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(o.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Te.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Te.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertRecvDirection();for(const i of e){Te.debug("pauseReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Te.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Te.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertRecvDirection();for(const i of e){Te.debug("resumeReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Te.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Te.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u,protocol:n};Te.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};Te.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=Fn.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}Te.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Fn.parse(this._pc.localDescription.sdp));const n=Yc.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Md.Chrome74=Jv;var Nd={},pB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pB(e,t,r);return mB(e,t),e};Object.defineProperty(Nd,"__esModule",{value:!0});Nd.Chrome70=void 0;const Xr=mc(Qt),gB=Bt,g_=mc(qt),ys=mc(Pe),Xc=mc(Xt),up=mc(si),vB=Lr,yB=fn,wB=ss,He=new gB.Logger("Chrome70"),v_={OS:1024,MIS:1024};class Yv extends vB.HandlerInterface{static createFactory(){return()=>new Yv}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(He.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){He.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Xr.parse(r.sdp);return Xc.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return He.debug("getNativeSctpCapabilities()"),{numStreams:v_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){He.debug("run()"),this._direction=e,this._remoteSdp=new yB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:ys.getSendingRtpParameters("audio",c),video:ys.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:ys.getSendingRemoteRtpParameters("audio",c),video:ys.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(He.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){He.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(He.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});He.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};He.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};He.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();He.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),He.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const s=g_.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=ys.reduceCodecs(s.codecs,i);const a=g_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=ys.reduceCodecs(a.codecs,i);const u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let c=await this._pc.createOffer(),f=Xr.parse(c.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:f}),r&&r.length>1&&(He.debug("send() | enabling legacy simulcast"),f=Xr.parse(c.sdp),d=f.media[u.idx],up.addLegacySimulcast({offerMediaObject:d,numStreams:r.length}),c={type:"offer",sdp:Xr.write(f)});let h=!1;const p=(0,wB.parse)((r||[{}])[0].scalabilityMode);if(r&&r.length===1&&p.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(He.debug("send() | enabling legacy simulcast for VP9 SVC"),h=!0,f=Xr.parse(c.sdp),d=f.media[u.idx],up.addLegacySimulcast({offerMediaObject:d,numStreams:p.spatialLayers}),c={type:"offer",sdp:Xr.write(f)}),He.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),r){He.debug("send() | applying given encodings");const m=l.sender.getParameters();for(let v=0;v<(m.encodings||[]).length;++v){const S=m.encodings[v],b=r[v];if(!b)break;m.encodings[v]=Object.assign(S,b)}await l.sender.setParameters(m)}const g=l.mid;if(s.mid=g,f=Xr.parse(this._pc.localDescription.sdp),d=f.media[u.idx],s.rtcp.cname=Xc.getCname({offerMediaObject:d}),s.encodings=up.getRtpEncodings({offerMediaObject:d}),r)for(let m=0;m<s.encodings.length;++m)r[m]&&Object.assign(s.encodings[m],r[m]);if(h&&(s.encodings=[s.encodings[0]]),s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of s.encodings)m.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:a,codecOptions:n});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return He.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(g,l),{localId:g,rtpParameters:s,rtpSender:l.sender}}async stopSending(e){this.assertSendDirection(),He.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();He.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const o={type:"answer",sdp:this._remoteSdp.getSdp()};He.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?He.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):He.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),He.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.sender.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),He.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.sender.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:o};He.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=Xr.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),He.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};He.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[],i=new Map;for(const u of e){const{trackId:l,kind:c,rtpParameters:f,streamId:d}=u;He.debug("receive() [trackId:%s, kind:%s]",l,c);const h=f.mid||String(this._mapMidTransceiver.size);i.set(l,h),this._remoteSdp.receive({mid:h,kind:c,offerRtpParameters:f,streamId:d||f.rtcp.cname,trackId:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};He.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);let s=await this._pc.createAnswer();const a=Xr.parse(s.sdp);for(const u of e){const{trackId:l,rtpParameters:c}=u,f=i.get(l),d=a.media.find(h=>String(h.mid)===f);Xc.applyCodecParameters({offerRtpParameters:c,answerMediaObject:d})}s={type:"answer",sdp:Xr.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:a}),He.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const u of e){const{trackId:l}=u,c=i.get(l),f=this._pc.getTransceivers().find(d=>d.mid===c);if(!f)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(c,f),n.push({localId:c,track:f.receiver.track,rtpReceiver:f.receiver})}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){He.debug("stopReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(o.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};He.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();He.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:u,protocol:n};He.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};He.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=Xr.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}He.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Xr.parse(this._pc.localDescription.sdp));const n=Xc.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Nd.Chrome70=Yv;var Dd={},Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.addLegacySimulcast=Mi.getRtpEncodings=void 0;function _B({offerMediaObject:t,track:e}){const r=new Set;for(const o of t.ssrcs||[]){if(o.attribute!=="msid")continue;if(o.value.split(" ")[1]===e.id){const a=o.id;r.add(a)}}if(r.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${e.id}]`);const n=new Map;for(const o of t.ssrcGroups||[]){if(o.semantics!=="FID")continue;let[s,a]=o.ssrcs.split(/\s+/);s=Number(s),a=Number(a),r.has(s)&&(r.delete(s),r.delete(a),n.set(s,a))}for(const o of r)n.set(o,null);const i=[];for(const[o,s]of n){const a={ssrc:o};s&&(a.rtx={ssrc:s}),i.push(a)}return i}Mi.getRtpEncodings=_B;function bB({offerMediaObject:t,track:e,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let n,i,o;if(!(t.ssrcs||[]).find(f=>f.attribute!=="msid"?!1:f.value.split(" ")[1]===e.id?(n=f.id,o=f.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${e.id}]`);(t.ssrcGroups||[]).some(f=>{if(f.semantics!=="FID")return!1;const d=f.ssrcs.split(/\s+/);return Number(d[0])===n?(i=Number(d[1]),!0):!1});const a=t.ssrcs.find(f=>f.attribute==="cname"&&f.id===n);if(!a)throw new Error(`a=ssrc line with cname information not found [track.id:${e.id}]`);const u=a.value,l=[],c=[];for(let f=0;f<r;++f)l.push(n+f),i&&c.push(i+f);t.ssrcGroups=t.ssrcGroups||[],t.ssrcs=t.ssrcs||[],t.ssrcGroups.push({semantics:"SIM",ssrcs:l.join(" ")});for(let f=0;f<l.length;++f){const d=l[f];t.ssrcs.push({id:d,attribute:"cname",value:u}),t.ssrcs.push({id:d,attribute:"msid",value:`${o} ${e.id}`})}for(let f=0;f<c.length;++f){const d=l[f],h=c[f];t.ssrcs.push({id:h,attribute:"cname",value:u}),t.ssrcs.push({id:h,attribute:"msid",value:`${o} ${e.id}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${d} ${h}`})}}Mi.addLegacySimulcast=bB;var SB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SB(e,t,r);return EB(e,t),e};Object.defineProperty(Dd,"__esModule",{value:!0});Dd.Chrome67=void 0;const jn=gc(Qt),RB=Bt,y_=gc(qt),ws=gc(Pe),Zc=gc(Xt),w_=gc(Mi),xB=Lr,AB=fn,Ve=new RB.Logger("Chrome67"),__={OS:1024,MIS:1024};class Xv extends xB.HandlerInterface{static createFactory(){return()=>new Xv}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(Ve.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ve.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=jn.parse(r.sdp);return Zc.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Ve.debug("getNativeSctpCapabilities()"),{numStreams:__}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Ve.debug("run()"),this._direction=e,this._remoteSdp=new AB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:ws.getSendingRtpParameters("audio",c),video:ws.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:ws.getSendingRemoteRtpParameters("audio",c),video:ws.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ve.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Ve.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Ve.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Ve.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Ve.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ve.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ve.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),Ve.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&Ve.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),a=jn.parse(s.sdp),u;const l=y_.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=ws.reduceCodecs(l.codecs);const c=y_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(c.codecs=ws.reduceCodecs(c.codecs),this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:a}),e.kind==="video"&&r&&r.length>1&&(Ve.debug("send() | enabling simulcast"),a=jn.parse(s.sdp),u=a.media.find(p=>p.type==="video"),w_.addLegacySimulcast({offerMediaObject:u,track:e,numStreams:r.length}),s={type:"offer",sdp:jn.write(a)}),Ve.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=jn.parse(this._pc.localDescription.sdp),u=a.media.find(p=>p.type===e.kind),l.rtcp.cname=Zc.getCname({offerMediaObject:u}),l.encodings=w_.getRtpEncodings({offerMediaObject:u,track:e}),r)for(let p=0;p<l.encodings.length;++p)r[p]&&Object.assign(l.encodings[p],r[p]);if(l.encodings.length>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const p of l.encodings)p.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:c,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};Ve.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const d=String(this._nextSendLocalId);this._nextSendLocalId++;const h=this._pc.getSenders().find(p=>p.track===e);return this._mapSendLocalIdRtpSender.set(d,h),{localId:d,rtpParameters:l,rtpSender:h}}async stopSending(e){this.assertSendDirection(),Ve.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(r),r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(e);const n=await this._pc.createOffer();Ve.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(o){if(this._sendStream.getTracks().length===0){Ve.warn("stopSending() | ignoring expected error due no sending tracks: %s",o.toString());return}throw o}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};Ve.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?Ve.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Ve.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.track;await n.replaceTrack(r),i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Ve.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Ve.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");return r.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:o};Ve.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%__.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=jn.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),Ve.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Ve.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[];for(const a of e){const{trackId:u,kind:l,rtpParameters:c,streamId:f}=a;Ve.debug("receive() [trackId:%s, kind:%s]",u,l);const d=l;this._remoteSdp.receive({mid:d,kind:l,offerRtpParameters:c,streamId:f||c.rtcp.cname,trackId:u})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ve.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let o=await this._pc.createAnswer();const s=jn.parse(o.sdp);for(const a of e){const{kind:u,rtpParameters:l}=a,c=u,f=s.media.find(d=>String(d.mid)===c);Zc.applyCodecParameters({offerRtpParameters:l,answerMediaObject:f})}o={type:"answer",sdp:jn.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:s}),Ve.debug("receive() | calling pc.setLocalDescription() [answer:%o]",o),await this._pc.setLocalDescription(o);for(const a of e){const{kind:u,trackId:l,rtpParameters:c}=a,f=l,d=u,h=this._pc.getReceivers().find(p=>p.track&&p.track.id===f);if(!h)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(f,{mid:d,rtpParameters:c,rtpReceiver:h}),n.push({localId:f,track:h.track,rtpReceiver:h})}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Ve.debug("stopReceiving() [localId:%s]",i);const{mid:o,rtpParameters:s}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:o,offerRtpParameters:s})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ve.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ve.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:r}=this._mapRecvLocalIdInfo.get(e)||{};if(!r)throw new Error("associated RTCRtpReceiver not found");return r.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:u,protocol:n};Ve.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};Ve.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=jn.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}Ve.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=jn.parse(this._pc.localDescription.sdp));const n=Zc.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Dd.Chrome67=Xv;var Id={},PB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PB(e,t,r);return kB(e,t),e};Object.defineProperty(Id,"__esModule",{value:!0});Id.Chrome55=void 0;const $n=vc(Qt),TB=Bt,Xa=Rr,b_=vc(qt),_s=vc(Pe),eu=vc(Xt),S_=vc(Mi),CB=Lr,OB=fn,rt=new TB.Logger("Chrome55"),E_={OS:1024,MIS:1024};class Zv extends CB.HandlerInterface{static createFactory(){return()=>new Zv}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(rt.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){rt.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=$n.parse(r.sdp);return eu.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return rt.debug("getNativeSctpCapabilities()"),{numStreams:E_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){rt.debug("run()"),this._direction=e,this._remoteSdp=new OB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:_s.getSendingRtpParameters("audio",c),video:_s.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:_s.getSendingRemoteRtpParameters("audio",c),video:_s.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(rt.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){rt.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(rt.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});rt.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};rt.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};rt.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();rt.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),rt.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&rt.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),a=$n.parse(s.sdp),u;const l=b_.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=_s.reduceCodecs(l.codecs);const c=b_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(c.codecs=_s.reduceCodecs(c.codecs),this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:a}),e.kind==="video"&&r&&r.length>1&&(rt.debug("send() | enabling simulcast"),a=$n.parse(s.sdp),u=a.media.find(h=>h.type==="video"),S_.addLegacySimulcast({offerMediaObject:u,track:e,numStreams:r.length}),s={type:"offer",sdp:$n.write(a)}),rt.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=$n.parse(this._pc.localDescription.sdp),u=a.media.find(h=>h.type===e.kind),l.rtcp.cname=eu.getCname({offerMediaObject:u}),l.encodings=S_.getRtpEncodings({offerMediaObject:u,track:e}),r)for(let h=0;h<l.encodings.length;++h)r[h]&&Object.assign(l.encodings[h],r[h]);if(l.encodings.length>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const h of l.encodings)h.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:c,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};rt.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(d,e),{localId:d,rtpParameters:l}}async stopSending(e){this.assertSendDirection(),rt.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdTrack.get(e);if(!r)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream);const n=await this._pc.createOffer();rt.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(o){if(this._sendStream.getTracks().length===0){rt.warn("stopSending() | ignoring expected error due no sending tracks: %s",o.toString());return}throw o}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};rt.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){throw new Xa.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,r){throw new Xa.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,r){throw new Xa.UnsupportedError("not supported")}async getSenderStats(e){throw new Xa.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:o};rt.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%E_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=$n.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),rt.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};rt.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[];for(const a of e){const{trackId:u,kind:l,rtpParameters:c,streamId:f}=a;rt.debug("receive() [trackId:%s, kind:%s]",u,l);const d=l;this._remoteSdp.receive({mid:d,kind:l,offerRtpParameters:c,streamId:f||c.rtcp.cname,trackId:u})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};rt.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let o=await this._pc.createAnswer();const s=$n.parse(o.sdp);for(const a of e){const{kind:u,rtpParameters:l}=a,c=u,f=s.media.find(d=>String(d.mid)===c);eu.applyCodecParameters({offerRtpParameters:l,answerMediaObject:f})}o={type:"answer",sdp:$n.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:s}),rt.debug("receive() | calling pc.setLocalDescription() [answer:%o]",o),await this._pc.setLocalDescription(o);for(const a of e){const{kind:u,trackId:l,rtpParameters:c}=a,f=u,d=l,h=a.streamId||c.rtcp.cname,g=this._pc.getRemoteStreams().find(_=>_.id===h).getTrackById(d);if(!g)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(d,{mid:f,rtpParameters:c}),n.push({localId:d,track:g})}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){rt.debug("stopReceiving() [localId:%s]",i);const{mid:o,rtpParameters:s}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:o,offerRtpParameters:s})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};rt.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();rt.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new Xa.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:u,protocol:n};rt.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};rt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=$n.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}rt.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=$n.parse(this._pc.localDescription.sdp));const n=eu.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Id.Chrome55=Zv;var Ld={},MB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&MB(e,t,r);return NB(e,t),e};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.Firefox60=void 0;const Gi=yc(Qt),DB=Bt,IB=Rr,fp=yc(qt),bs=yc(Pe),tu=yc(Xt),R_=yc(si),LB=Lr,BB=fn,Me=new DB.Logger("Firefox60"),x_={OS:16,MIS:2048};class e0 extends LB.HandlerInterface{static createFactory(){return()=>new e0}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(Me.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Me.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),r=document.createElement("canvas");r.getContext("2d");const i=r.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const o=e.addTransceiver(i,{direction:"sendrecv"}),s=o.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];s.encodings=a,await o.sender.setParameters(s);const u=await e.createOffer();try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}const l=Gi.parse(u.sdp);return tu.extractRtpCapabilities({sdpObject:l})}catch(o){try{r.remove()}catch{}try{i.stop()}catch{}try{e.close()}catch{}throw o}}async getNativeSctpCapabilities(){return Me.debug("getNativeSctpCapabilities()"),{numStreams:x_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Me.debug("run()"),this._direction=e,this._remoteSdp=new BB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:bs.getSendingRtpParameters("audio",c),video:bs.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:bs.getSendingRemoteRtpParameters("audio",c),video:bs.getSendingRemoteRtpParameters("video",c)},this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Me.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){throw new IB.UnsupportedError("not supported")}async restartIce(e){if(Me.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Me.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Me.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Me.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Me.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){this.assertSendDirection(),Me.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&(r=fp.clone(r,[]),r.length>1&&(r.forEach((h,p)=>{h.rid=`r${p}`}),r.reverse()));const o=fp.clone(this._sendingRtpParametersByKind[e.kind],{});o.codecs=bs.reduceCodecs(o.codecs,i);const s=fp.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=bs.reduceCodecs(s.codecs,i);const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(r){const h=a.sender.getParameters();h.encodings=r,await a.sender.setParameters(h)}const u=await this._pc.createOffer();let l=Gi.parse(u.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l}),Me.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const c=a.mid;o.mid=c,l=Gi.parse(this._pc.localDescription.sdp);const f=l.media[l.media.length-1];if(o.rtcp.cname=tu.getCname({offerMediaObject:f}),!r)o.encodings=R_.getRtpEncodings({offerMediaObject:f});else if(r.length===1){const h=R_.getRtpEncodings({offerMediaObject:f});Object.assign(h[0],r[0]),o.encodings=h}else o.encodings=r.reverse();if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const h of o.encodings)h.scalabilityMode="S1T2";this._remoteSdp.send({offerMediaObject:f,offerRtpParameters:o,answerRtpParameters:s,codecOptions:n,extmapAllowMixed:!0});const d={type:"answer",sdp:this._remoteSdp.getSdp()};return Me.debug("send() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._mapMidTransceiver.set(c,a),{localId:c,rtpParameters:o,rtpSender:a.sender}}async stopSending(e){Me.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.disableMediaSection(r.mid);const n=await this._pc.createOffer();Me.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Me.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),Me.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();Me.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Me.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertSendDirection(),Me.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();Me.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Me.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertSendDirection(),r?Me.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Me.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Me.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated transceiver not found");const i=n.sender.getParameters();r=i.encodings.length-1-r,i.encodings.forEach((o,s)=>{s>=r?o.active=!0:o.active=!1}),await n.sender.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Me.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.sender.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){this.assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:o};Me.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(i,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x_.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),c=Gi.parse(l.sdp),f=c.media.find(h=>h.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:c}),Me.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const d={type:"answer",sdp:this._remoteSdp.getSdp()};Me.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}const u={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:u}}async receive(e){this.assertRecvDirection();const r=[],n=new Map;for(const a of e){const{trackId:u,kind:l,rtpParameters:c,streamId:f}=a;Me.debug("receive() [trackId:%s, kind:%s]",u,l);const d=c.mid||String(this._mapMidTransceiver.size);n.set(u,d),this._remoteSdp.receive({mid:d,kind:l,offerRtpParameters:c,streamId:f||c.rtcp.cname,trackId:u})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Me.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let o=await this._pc.createAnswer();const s=Gi.parse(o.sdp);for(const a of e){const{trackId:u,rtpParameters:l}=a,c=n.get(u),f=s.media.find(d=>String(d.mid)===c);tu.applyCodecParameters({offerRtpParameters:l,answerMediaObject:f}),o={type:"answer",sdp:Gi.write(s)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:s}),Me.debug("receive() | calling pc.setLocalDescription() [answer:%o]",o),await this._pc.setLocalDescription(o);for(const a of e){const{trackId:u}=a,l=n.get(u),c=this._pc.getTransceivers().find(f=>f.mid===l);if(!c)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,c),r.push({localId:l,track:c.receiver.track,rtpReceiver:c.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Me.debug("stopReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(o.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Me.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Me.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertRecvDirection();for(const i of e){Me.debug("pauseReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Me.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Me.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertRecvDirection();for(const i of e){Me.debug("resumeReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Me.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Me.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){this.assertRecvDirection();const{streamId:i,ordered:o,maxPacketLifeTime:s,maxRetransmits:a}=e,u={negotiated:!0,id:i,ordered:o,maxPacketLifeTime:s,maxRetransmits:a,protocol:n};Me.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(r,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const c={type:"offer",sdp:this._remoteSdp.getSdp()};Me.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();if(!this._transportReady){const d=Gi.parse(f.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:d})}Me.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Gi.parse(this._pc.localDescription.sdp));const n=tu.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Ld.Firefox60=e0;var Bd={},FB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FB(e,t,r);return jB(e,t),e};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.Safari12=void 0;const Un=wc(Qt),$B=Bt,A_=wc(qt),Ss=wc(Pe),ru=wc(Xt),P_=wc(si),UB=Lr,qB=fn,Ce=new $B.Logger("Safari12"),k_={OS:1024,MIS:1024};class t0 extends UB.HandlerInterface{static createFactory(){return()=>new t0}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(Ce.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ce.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=Un.parse(r.sdp);return ru.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Ce.debug("getNativeSctpCapabilities()"),{numStreams:k_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Ce.debug("run()"),this._direction=e,this._remoteSdp=new qB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:Ss.getSendingRtpParameters("audio",c),video:Ss.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:Ss.getSendingRemoteRtpParameters("audio",c),video:Ss.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ce.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Ce.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Ce.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Ce.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Ce.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ce.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ce.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),Ce.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const s=A_.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=Ss.reduceCodecs(s.codecs,i);const a=A_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=Ss.reduceCodecs(a.codecs,i);const u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let c=await this._pc.createOffer(),f=Un.parse(c.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:f}),r&&r.length>1&&(Ce.debug("send() | enabling legacy simulcast"),f=Un.parse(c.sdp),d=f.media[u.idx],P_.addLegacySimulcast({offerMediaObject:d,numStreams:r.length}),c={type:"offer",sdp:Un.write(f)}),Ce.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const h=l.mid;if(s.mid=h,f=Un.parse(this._pc.localDescription.sdp),d=f.media[u.idx],s.rtcp.cname=ru.getCname({offerMediaObject:d}),s.encodings=P_.getRtpEncodings({offerMediaObject:d}),r)for(let g=0;g<s.encodings.length;++g)r[g]&&Object.assign(s.encodings[g],r[g]);if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const g of s.encodings)g.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:a,codecOptions:n});const p={type:"answer",sdp:this._remoteSdp.getSdp()};return Ce.debug("send() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p),this._mapMidTransceiver.set(h,l),{localId:h,rtpParameters:s,rtpSender:l.sender}}async stopSending(e){this.assertSendDirection(),Ce.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();Ce.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const o={type:"answer",sdp:this._remoteSdp.getSdp()};Ce.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),Ce.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();Ce.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Ce.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertSendDirection(),Ce.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const n=await this._pc.createOffer();Ce.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Ce.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertSendDirection(),r?Ce.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Ce.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Ce.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.sender.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Ce.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.sender.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:o};Ce.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=Un.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),Ce.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Ce.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[],i=new Map;for(const u of e){const{trackId:l,kind:c,rtpParameters:f,streamId:d}=u;Ce.debug("receive() [trackId:%s, kind:%s]",l,c);const h=f.mid||String(this._mapMidTransceiver.size);i.set(l,h),this._remoteSdp.receive({mid:h,kind:c,offerRtpParameters:f,streamId:d||f.rtcp.cname,trackId:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};Ce.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);let s=await this._pc.createAnswer();const a=Un.parse(s.sdp);for(const u of e){const{trackId:l,rtpParameters:c}=u,f=i.get(l),d=a.media.find(h=>String(h.mid)===f);ru.applyCodecParameters({offerRtpParameters:c,answerMediaObject:d})}s={type:"answer",sdp:Un.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:a}),Ce.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const u of e){const{trackId:l}=u,c=i.get(l),f=this._pc.getTransceivers().find(d=>d.mid===c);if(!f)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(c,f),n.push({localId:c,track:f.receiver.track,rtpReceiver:f.receiver})}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Ce.debug("stopReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(o.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ce.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ce.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertRecvDirection();for(const i of e){Ce.debug("pauseReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ce.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ce.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertRecvDirection();for(const i of e){Ce.debug("resumeReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Ce.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Ce.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u,protocol:n};Ce.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};Ce.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=Un.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}Ce.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Un.parse(this._pc.localDescription.sdp));const n=ru.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Bd.Safari12=t0;var Fd={},zB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_c=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zB(e,t,r);return HB(e,t),e};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.Safari11=void 0;const qn=_c(Qt),VB=Bt,T_=_c(qt),Es=_c(Pe),nu=_c(Xt),C_=_c(Mi),KB=Lr,WB=fn,Je=new VB.Logger("Safari11"),O_={OS:1024,MIS:1024};class r0 extends KB.HandlerInterface{static createFactory(){return()=>new r0}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(Je.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Je.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=qn.parse(r.sdp);return nu.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Je.debug("getNativeSctpCapabilities()"),{numStreams:O_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Je.debug("run()"),this._direction=e,this._remoteSdp=new WB.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:Es.getSendingRtpParameters("audio",c),video:Es.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:Es.getSendingRemoteRtpParameters("audio",c),video:Es.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Je.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Je.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Je.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Je.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Je.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Je.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Je.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),Je.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&Je.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),a=qn.parse(s.sdp),u;const l=T_.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=Es.reduceCodecs(l.codecs);const c=T_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(c.codecs=Es.reduceCodecs(c.codecs),this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:a}),e.kind==="video"&&r&&r.length>1&&(Je.debug("send() | enabling simulcast"),a=qn.parse(s.sdp),u=a.media.find(p=>p.type==="video"),C_.addLegacySimulcast({offerMediaObject:u,track:e,numStreams:r.length}),s={type:"offer",sdp:qn.write(a)}),Je.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=qn.parse(this._pc.localDescription.sdp),u=a.media.find(p=>p.type===e.kind),l.rtcp.cname=nu.getCname({offerMediaObject:u}),l.encodings=C_.getRtpEncodings({offerMediaObject:u,track:e}),r)for(let p=0;p<l.encodings.length;++p)r[p]&&Object.assign(l.encodings[p],r[p]);if(l.encodings.length>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const p of l.encodings)p.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:c,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};Je.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const d=String(this._nextSendLocalId);this._nextSendLocalId++;const h=this._pc.getSenders().find(p=>p.track===e);return this._mapSendLocalIdRtpSender.set(d,h),{localId:d,rtpParameters:l,rtpSender:h}}async stopSending(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(e);const n=await this._pc.createOffer();Je.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(o){if(this._sendStream.getTracks().length===0){Je.warn("stopSending() | ignoring expected error due no sending tracks: %s",o.toString());return}throw o}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};Je.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){this.assertSendDirection(),r?Je.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Je.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.track;await n.replaceTrack(r),i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Je.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Je.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapSendLocalIdRtpSender.get(e);if(!n)throw new Error("associated RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");return r.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:o};Je.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=qn.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),Je.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Je.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[];for(const a of e){const{trackId:u,kind:l,rtpParameters:c,streamId:f}=a;Je.debug("receive() [trackId:%s, kind:%s]",u,l);const d=l;this._remoteSdp.receive({mid:d,kind:l,offerRtpParameters:c,streamId:f||c.rtcp.cname,trackId:u})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Je.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let o=await this._pc.createAnswer();const s=qn.parse(o.sdp);for(const a of e){const{kind:u,rtpParameters:l}=a,c=u,f=s.media.find(d=>String(d.mid)===c);nu.applyCodecParameters({offerRtpParameters:l,answerMediaObject:f})}o={type:"answer",sdp:qn.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:s}),Je.debug("receive() | calling pc.setLocalDescription() [answer:%o]",o),await this._pc.setLocalDescription(o);for(const a of e){const{kind:u,trackId:l,rtpParameters:c}=a,f=u,d=l,h=this._pc.getReceivers().find(p=>p.track&&p.track.id===d);if(!h)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(d,{mid:f,rtpParameters:c,rtpReceiver:h}),n.push({localId:d,track:h.track,rtpReceiver:h})}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Je.debug("stopReceiving() [localId:%s]",i);const{mid:o,rtpParameters:s}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:o,offerRtpParameters:s})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Je.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Je.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:r}=this._mapRecvLocalIdInfo.get(e)||{};if(!r)throw new Error("associated RTCRtpReceiver not found");return r.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u,protocol:n};Je.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};Je.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=qn.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}Je.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=qn.parse(this._pc.localDescription.sdp));const n=nu.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Fd.Safari11=r0;var jd={},ga={},GB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QB=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JB=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GB(e,t,r);return QB(e,t),e};Object.defineProperty(ga,"__esModule",{value:!0});ga.mangleRtpParameters=ga.getCapabilities=void 0;const uA=JB(qt);function YB(){const t=RTCRtpReceiver.getCapabilities(),e=uA.clone(t,{});for(const r of e.codecs){if(r.channels=r.numChannels,delete r.numChannels,r.mimeType=r.mimeType||`${r.kind}/${r.name}`,r.parameters){const n=r.parameters;n.apt&&(n.apt=Number(n.apt)),n["packetization-mode"]&&(n["packetization-mode"]=Number(n["packetization-mode"]))}for(const n of r.rtcpFeedback||[])n.parameter||(n.parameter="")}return e}ga.getCapabilities=YB;function XB(t){const e=uA.clone(t,{});e.mid&&(e.muxId=e.mid,delete e.mid);for(const r of e.codecs)r.channels&&(r.numChannels=r.channels,delete r.channels),r.mimeType&&!r.name&&(r.name=r.mimeType.split("/")[1]),delete r.mimeType;return e}ga.mangleRtpParameters=XB;var ZB=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),e8=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n0=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZB(e,t,r);return e8(e,t),e};Object.defineProperty(jd,"__esModule",{value:!0});jd.Edge11=void 0;const t8=Bt,dp=Rr,iu=n0(qt),hp=n0(Pe),pp=n0(ga),r8=Lr,at=new t8.Logger("Edge11");class i0 extends r8.HandlerInterface{static createFactory(){return()=>new i0}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){at.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const e of this._rtpSenders.values())try{e.stop()}catch{}for(const e of this._rtpReceivers.values())try{e.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return at.debug("getNativeRtpCapabilities()"),pp.getCapabilities()}async getNativeSctpCapabilities(){return at.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){at.debug("run()"),this._sendingRtpParametersByKind={audio:hp.getSendingRtpParameters("audio",c),video:hp.getSendingRtpParameters("video",c)},this._remoteIceParameters=r,this._remoteIceCandidates=n,this._remoteDtlsParameters=i,this._cname=`CNAME-${iu.generateRandomNumber()}`,this.setIceGatherer({iceServers:s,iceTransportPolicy:a}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new dp.UnsupportedError("not supported")}async restartIce(e){if(at.debug("restartIce()"),this._remoteIceParameters=e,!!this._transportReady){at.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){at.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),at.debug("send() | calling new RTCRtpSender()");const o=new RTCRtpSender(e,this._dtlsTransport),s=iu.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=hp.reduceCodecs(s.codecs,i);const a=s.codecs.some(c=>/.+\/rtx$/i.test(c.mimeType));r||(r=[{}]);for(const c of r)c.ssrc=iu.generateRandomNumber(),a&&(c.rtx={ssrc:iu.generateRandomNumber()});s.encodings=r,s.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const u=pp.mangleRtpParameters(s);at.debug("send() | calling rtpSender.send() [params:%o]",u),await o.send(u);const l=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(l,o),{localId:l,rtpParameters:s,rtpSender:o}}async stopSending(e){at.debug("stopSending() [localId:%s]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{at.debug("stopSending() | calling rtpSender.stop()"),r.stop()}catch(n){throw at.warn("stopSending() | rtpSender.stop() failed:%o",n),n}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){r?at.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):at.debug("replaceTrack() [localId:%s, no track]",e);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");n.setTrack(r)}async setMaxSpatialLayer(e,r){at.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.setParameters(i)}async setRtpEncodingParameters(e,r){at.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._rtpSenders.get(e);if(!n)throw new Error("RTCRtpSender not found");const i=n.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.setParameters(i)}async getSenderStats(e){const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");return r.getStats()}async sendDataChannel(e){throw new dp.UnsupportedError("not implemented")}async receive(e){const r=[];for(const n of e){const{trackId:i,kind:o}=n;at.debug("receive() [trackId:%s, kind:%s]",i,o)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const n of e){const{trackId:i,kind:o,rtpParameters:s}=n;at.debug("receive() | calling new RTCRtpReceiver()");const a=new RTCRtpReceiver(this._dtlsTransport,o);a.addEventListener("error",c=>{at.error('rtpReceiver "error" event [event:%o]',c)});const u=pp.mangleRtpParameters(s);at.debug("receive() | calling rtpReceiver.receive() [params:%o]",u),await a.receive(u);const l=i;this._rtpReceivers.set(l,a),r.push({localId:l,track:a.track,rtpReceiver:a})}return r}async stopReceiving(e){for(const r of e){at.debug("stopReceiving() [localId:%s]",r);const n=this._rtpReceivers.get(r);if(!n)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(r);try{at.debug("stopReceiving() | calling rtpReceiver.stop()"),n.stop()}catch(i){at.warn("stopReceiving() | rtpReceiver.stop() failed:%o",i)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const r=this._rtpReceivers.get(e);if(!r)throw new Error("RTCRtpReceiver not found");return r.getStats()}async receiveDataChannel(e){throw new dp.UnsupportedError("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:r}){const n=new RTCIceGatherer({iceServers:e||[],gatherPolicy:r||"all"});n.addEventListener("error",i=>{at.error('iceGatherer "error" event [event:%o]',i)});try{n.gather()}catch(i){at.debug("setIceGatherer() | iceGatherer.gather() failed: %s",i.toString())}this._iceGatherer=n}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("candidatepairchange",r=>{at.debug('iceTransport "candidatepairchange" event [pair:%o]',r.pair)}),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{at.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{at.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),e.state==="closed"&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",r=>{at.error('dtlsTransport "error" event [event:%o]',r)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){at.debug("setupTransport()");const r=this._dtlsTransport.getLocalParameters();r.role=e,await new Promise((n,i)=>{this.safeEmit("@connect",{dtlsParameters:r},n,i)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const n of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(n);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(n=>n.algorithm==="sha-256"||n.algorithm==="sha-384"||n.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}jd.Edge11=i0;var $d={},n8=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),i8=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&n8(e,t,r);return i8(e,t),e};Object.defineProperty($d,"__esModule",{value:!0});$d.ReactNativeUnifiedPlan=void 0;const zn=bc(Qt),o8=Bt,M_=bc(qt),Rs=bc(Pe),ou=bc(Xt),mp=bc(si),s8=Lr,a8=fn,l8=ss,Oe=new o8.Logger("ReactNativeUnifiedPlan"),N_={OS:1024,MIS:1024};class o0 extends s8.HandlerInterface{static createFactory(){return()=>new o0}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(Oe.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Oe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch{}const n=zn.parse(r.sdp);return ou.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Oe.debug("getNativeSctpCapabilities()"),{numStreams:N_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Oe.debug("run()"),this._direction=e,this._remoteSdp=new a8.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:Rs.getSendingRtpParameters("audio",c),video:Rs.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:Rs.getSendingRemoteRtpParameters("audio",c),video:Rs.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Oe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Oe.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Oe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Oe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Oe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Oe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Oe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),Oe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),r&&r.length>1&&r.forEach((m,v)=>{m.rid=`r${v}`});const s=M_.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=Rs.reduceCodecs(s.codecs,i);const a=M_.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=Rs.reduceCodecs(a.codecs,i);const u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r});let c=await this._pc.createOffer(),f=zn.parse(c.sdp),d;this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:f});let h=!1;const p=(0,l8.parse)((r||[{}])[0].scalabilityMode);r&&r.length===1&&p.spatialLayers>1&&s.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Oe.debug("send() | enabling legacy simulcast for VP9 SVC"),h=!0,f=zn.parse(c.sdp),d=f.media[u.idx],mp.addLegacySimulcast({offerMediaObject:d,numStreams:p.spatialLayers}),c={type:"offer",sdp:zn.write(f)}),Oe.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const g=l.mid;if(s.mid=g,f=zn.parse(this._pc.localDescription.sdp),d=f.media[u.idx],s.rtcp.cname=ou.getCname({offerMediaObject:d}),!r)s.encodings=mp.getRtpEncodings({offerMediaObject:d});else if(r.length===1){let m=mp.getRtpEncodings({offerMediaObject:d});Object.assign(m[0],r[0]),h&&(m=[m[0]]),s.encodings=m}else s.encodings=r;if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const m of s.encodings)m.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:d,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:a,codecOptions:n,extmapAllowMixed:!0});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return Oe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(g,l),{localId:g,rtpParameters:s,rtpSender:l.sender}}async stopSending(e){this.assertSendDirection(),Oe.debug("stopSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");if(r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid))try{r.stop()}catch{}const i=await this._pc.createOffer();Oe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const o={type:"answer",sdp:this._remoteSdp.getSdp()};Oe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),Oe.debug("pauseSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(e);const n=await this._pc.createOffer();Oe.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Oe.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async resumeSending(e){this.assertSendDirection(),Oe.debug("resumeSending() [localId:%s]",e);const r=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!r)throw new Error("associated RTCRtpTransceiver not found");r.direction="sendonly";const n=await this._pc.createOffer();Oe.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const i={type:"answer",sdp:this._remoteSdp.getSdp()};Oe.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async replaceTrack(e,r){this.assertSendDirection(),r?Oe.debug("replaceTrack() [localId:%s, track.id:%s]",e,r.id):Oe.debug("replaceTrack() [localId:%s, no track]",e);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");await n.sender.replaceTrack(r)}async setMaxSpatialLayer(e,r){this.assertSendDirection(),Oe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{s<=r?o.active=!0:o.active=!1}),await n.sender.setParameters(i)}async setRtpEncodingParameters(e,r){this.assertSendDirection(),Oe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,r);const n=this._mapMidTransceiver.get(e);if(!n)throw new Error("associated RTCRtpTransceiver not found");const i=n.sender.getParameters();i.encodings.forEach((o,s)=>{i.encodings[s]={...o,...r}}),await n.sender.setParameters(i)}async getSenderStats(e){this.assertSendDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmits:n,protocol:o};Oe.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%N_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=zn.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),Oe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Oe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[],i=new Map;for(const u of e){const{trackId:l,kind:c,rtpParameters:f,streamId:d}=u;Oe.debug("receive() [trackId:%s, kind:%s]",l,c);const h=f.mid||String(this._mapMidTransceiver.size);i.set(l,h),this._remoteSdp.receive({mid:h,kind:c,offerRtpParameters:f,streamId:d||f.rtcp.cname,trackId:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};Oe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);let s=await this._pc.createAnswer();const a=zn.parse(s.sdp);for(const u of e){const{trackId:l,rtpParameters:c}=u,f=i.get(l),d=a.media.find(h=>String(h.mid)===f);ou.applyCodecParameters({offerRtpParameters:c,answerMediaObject:d})}s={type:"answer",sdp:zn.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:a}),Oe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const u of e){const{trackId:l}=u,c=i.get(l),f=this._pc.getTransceivers().find(d=>d.mid===c);if(f)this._mapMidTransceiver.set(c,f),n.push({localId:c,track:f.receiver.track,rtpReceiver:f.receiver});else throw new Error("new RTCRtpTransceiver not found")}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Oe.debug("stopReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(o.mid)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Oe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Oe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e)this._mapMidTransceiver.delete(i)}async pauseReceiving(e){this.assertRecvDirection();for(const i of e){Oe.debug("pauseReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="inactive",this._remoteSdp.pauseMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Oe.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Oe.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this.assertRecvDirection();for(const i of e){Oe.debug("resumeReceiving() [localId:%s]",i);const o=this._mapMidTransceiver.get(i);if(!o)throw new Error("associated RTCRtpTransceiver not found");o.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(i)}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Oe.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Oe.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this.assertRecvDirection();const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");return r.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u,protocol:n};Oe.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const f={type:"offer",sdp:this._remoteSdp.getSdp()};Oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=zn.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}Oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=zn.parse(this._pc.localDescription.sdp));const n=ou.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}$d.ReactNativeUnifiedPlan=o0;var Ud={},c8=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),u8=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Sc=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&c8(e,t,r);return u8(e,t),e};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.ReactNative=void 0;const Hn=Sc(Qt),f8=Bt,Za=Rr,gp=Sc(qt),xs=Sc(Pe),su=Sc(Xt),D_=Sc(Mi),d8=Lr,h8=fn,Xe=new f8.Logger("ReactNative"),I_={OS:1024,MIS:1024};class s0 extends d8.HandlerInterface{static createFactory(){return()=>new s0}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(Xe.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Xe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch{}const n=Hn.parse(r.sdp);return su.extractRtpCapabilities({sdpObject:n})}catch(r){try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return Xe.debug("getNativeSctpCapabilities()"),{numStreams:I_}}run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:c}){Xe.debug("run()"),this._direction=e,this._remoteSdp=new h8.RemoteSdp({iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:xs.getSendingRtpParameters("audio",c),video:xs.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:xs.getSendingRemoteRtpParameters("audio",c),video:xs.getSendingRemoteRtpParameters("video",c)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...u},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Xe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Xe.debug("updateIceServers()");const r=this._pc.getConfiguration();r.iceServers=e,this._pc.setConfiguration(r)}async restartIce(e){if(Xe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const r=await this._pc.createOffer({iceRestart:!0});Xe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Xe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}else{const r={type:"offer",sdp:this._remoteSdp.getSdp()};Xe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Xe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:r,codecOptions:n,codec:i}){var o;this.assertSendDirection(),Xe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&Xe.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),a=Hn.parse(s.sdp),u;const l=gp.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=xs.reduceCodecs(l.codecs);const c=gp.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(c.codecs=xs.reduceCodecs(c.codecs),this._transportReady||await this.setupTransport({localDtlsRole:(o=this._forcedLocalDtlsRole)!==null&&o!==void 0?o:"client",localSdpObject:a}),e.kind==="video"&&r&&r.length>1&&(Xe.debug("send() | enabling simulcast"),a=Hn.parse(s.sdp),u=a.media.find(h=>h.type==="video"),D_.addLegacySimulcast({offerMediaObject:u,track:e,numStreams:r.length}),s={type:"offer",sdp:Hn.write(a)}),Xe.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=Hn.parse(this._pc.localDescription.sdp),u=a.media.find(h=>h.type===e.kind),l.rtcp.cname=su.getCname({offerMediaObject:u}),l.encodings=D_.getRtpEncodings({offerMediaObject:u,track:e}),r)for(let h=0;h<l.encodings.length;++h)r[h]&&Object.assign(l.encodings[h],r[h]);if(l.encodings.length>1&&(l.codecs[0].mimeType.toLowerCase()==="video/vp8"||l.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const h of l.encodings)h.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:c,codecOptions:n});const f={type:"answer",sdp:this._remoteSdp.getSdp()};Xe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(d,e),{localId:d,rtpParameters:l}}async stopSending(e){this.assertSendDirection(),Xe.debug("stopSending() [localId:%s]",e);const r=this._mapSendLocalIdTrack.get(e);if(!r)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream);const n=await this._pc.createOffer();Xe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",n);try{await this._pc.setLocalDescription(n)}catch(o){if(this._sendStream.getTracks().length===0){Xe.warn("stopSending() | ignoring expected error due no sending tracks: %s",o.toString());return}throw o}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};Xe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,r){throw new Za.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,r){throw new Za.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,r){throw new Za.UnsupportedError("not implemented")}async getSenderStats(e){throw new Za.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:r,maxRetransmits:n,label:i,protocol:o}){var s;this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:r,maxRetransmitTime:r,maxRetransmits:n,protocol:o};Xe.debug("sendDataChannel() [options:%o]",a);const u=this._pc.createDataChannel(i,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I_.MIS,!this._hasDataChannelMediaSection){const c=await this._pc.createOffer(),f=Hn.parse(c.sdp),d=f.media.find(p=>p.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f}),Xe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c),this._remoteSdp.sendSctpAssociation({offerMediaObject:d});const h={type:"answer",sdp:this._remoteSdp.getSdp()};Xe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h),this._hasDataChannelMediaSection=!0}const l={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:u,sctpStreamParameters:l}}async receive(e){var r;this.assertRecvDirection();const n=[],i=new Map;for(const u of e){const{trackId:l,kind:c,rtpParameters:f}=u;Xe.debug("receive() [trackId:%s, kind:%s]",l,c);const d=c;let h=u.streamId||f.rtcp.cname;Xe.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),h+=`-hack-${gp.generateRandomNumber()}`,i.set(l,h),this._remoteSdp.receive({mid:d,kind:c,offerRtpParameters:f,streamId:h,trackId:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};Xe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);let s=await this._pc.createAnswer();const a=Hn.parse(s.sdp);for(const u of e){const{kind:l,rtpParameters:c}=u,f=l,d=a.media.find(h=>String(h.mid)===f);su.applyCodecParameters({offerRtpParameters:c,answerMediaObject:d})}s={type:"answer",sdp:Hn.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:a}),Xe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const u of e){const{kind:l,trackId:c,rtpParameters:f}=u,d=c,h=l,p=i.get(c),_=this._pc.getRemoteStreams().find(m=>m.id===p).getTrackById(d);if(!_)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(d,{mid:h,rtpParameters:f}),n.push({localId:d,track:_})}return n}async stopReceiving(e){this.assertRecvDirection();for(const i of e){Xe.debug("stopReceiving() [localId:%s]",i);const{mid:o,rtpParameters:s}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:o,offerRtpParameters:s})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};Xe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();Xe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new Za.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:r,protocol:n}){var i;this.assertRecvDirection();const{streamId:o,ordered:s,maxPacketLifeTime:a,maxRetransmits:u}=e,l={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:u,protocol:n};Xe.debug("receiveDataChannel() [options:%o]",l);const c=this._pc.createDataChannel(r,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const f={type:"offer",sdp:this._remoteSdp.getSdp()};Xe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const d=await this._pc.createAnswer();if(!this._transportReady){const h=Hn.parse(d.sdp);await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:h})}Xe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:r}){r||(r=Hn.parse(this._pc.localDescription.sdp));const n=su.extractDtlsParameters({sdpObject:r});n.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((i,o)=>{this.safeEmit("@connect",{dtlsParameters:n},i,o)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Ud.ReactNative=s0;var p8=re&&re.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),m8=re&&re.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fA=re&&re.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&p8(e,t,r);return m8(e,t),e},g8=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0});ts.Device=ts.detectDevice=void 0;const v8=g8(lg),y8=Bt,w8=li,As=Rr,_8=fA(qt),Qi=fA(Pe),b8=cc,S8=Md,E8=Nd,R8=Dd,x8=Id,A8=Ld,P8=Bd,k8=Fd,T8=jd,C8=$d,O8=Ud,or=new y8.Logger("Device");function dA(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){or.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(or.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(or.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const t=navigator.userAgent,e=v8.default.getParser(t),r=e.getEngine();if(e.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(e.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(e.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(e.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(e.satisfies({firefox:">=60"}))return"Firefox60";if(e.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}}))return"Safari12";if(e.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(e.satisfies({safari:">=11"}))return"Safari11";if(e.satisfies({"microsoft edge":">=11"})&&e.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(r.name&&r.name.toLowerCase()==="blink"){const n=t.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(n){const i=Number(n[1]);return i>=74?"Chrome74":i>=70?"Chrome70":i>=67?"Chrome67":"Chrome55"}else return"Chrome74"}else{or.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",e.getBrowserName(),e.getBrowserVersion());return}}else{or.warn("this._detectDevice() | unknown device");return}}ts.detectDevice=dA;class M8{constructor({handlerName:e,handlerFactory:r,Handler:n}={}){if(this._loaded=!1,this._observer=new w8.EnhancedEventEmitter,or.debug("constructor()"),n)if(or.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof n=="string")e=n;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(e&&r)throw new TypeError("just one of handlerName or handlerInterface can be given");if(r)this._handlerFactory=r;else{if(e)or.debug("constructor() | handler given: %s",e);else if(e=dA(),e)or.debug("constructor() | detected handler: %s",e);else throw new As.UnsupportedError("device not supported");switch(e){case"Chrome74":this._handlerFactory=S8.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=E8.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=R8.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=x8.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=A8.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=P8.Safari12.createFactory();break;case"Safari11":this._handlerFactory=k8.Safari11.createFactory();break;case"Edge11":this._handlerFactory=T8.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=C8.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=O8.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const i=this._handlerFactory();this._handlerName=i.name,i.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new As.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new As.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){or.debug("load() [routerRtpCapabilities:%o]",e),e=_8.clone(e,void 0);let r;try{if(this._loaded)throw new As.InvalidStateError("already loaded");Qi.validateRtpCapabilities(e),r=this._handlerFactory();const n=await r.getNativeRtpCapabilities();or.debug("load() | got native RTP capabilities:%o",n),Qi.validateRtpCapabilities(n),this._extendedRtpCapabilities=Qi.getExtendedRtpCapabilities(n,e),or.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=Qi.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=Qi.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=Qi.getRecvRtpCapabilities(this._extendedRtpCapabilities),Qi.validateRtpCapabilities(this._recvRtpCapabilities),or.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await r.getNativeSctpCapabilities(),or.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Qi.validateSctpCapabilities(this._sctpCapabilities),or.debug("load() succeeded"),this._loaded=!0,r.close()}catch(n){throw r&&r.close(),n}}canProduce(e){if(this._loaded){if(e!=="audio"&&e!=="video")throw new TypeError(`invalid kind "${e}"`)}else throw new As.InvalidStateError("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,appData:c}){return or.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,appData:c})}createRecvTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,appData:c}){return or.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:a,additionalSettings:u,proprietaryConstraints:l,appData:c})}createTransport({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:o,sctpParameters:s,iceServers:a,iceTransportPolicy:u,additionalSettings:l,proprietaryConstraints:c,appData:f}){if(this._loaded){if(typeof r!="string")throw new TypeError("missing id");if(typeof n!="object")throw new TypeError("missing iceParameters");if(Array.isArray(i)){if(typeof o!="object")throw new TypeError("missing dtlsParameters");if(s&&typeof s!="object")throw new TypeError("wrong sctpParameters");if(f&&typeof f!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new As.InvalidStateError("not loaded");const d=new b8.Transport({direction:e,id:r,iceParameters:n,iceCandidates:i,dtlsParameters:o,sctpParameters:s,iceServers:a,iceTransportPolicy:u,additionalSettings:l,proprietaryConstraints:c,appData:f,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",d),d}}ts.Device=M8;var hA={},pA={};Object.defineProperty(pA,"__esModule",{value:!0});var mA={};Object.defineProperty(mA,"__esModule",{value:!0});(function(t){var e=re&&re.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(i,o);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,s,a)}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=re&&re.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(ts,t),r(cc,t),r(uc,t),r(fc,t),r(dc,t),r(hc,t),r(pA,t),r(mA,t),r(Lr,t),r(Rr,t)})(hA);(function(t){var e=re&&re.__createBinding||(Object.create?function(l,c,f,d){d===void 0&&(d=f);var h=Object.getOwnPropertyDescriptor(c,f);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,d,h)}:function(l,c,f,d){d===void 0&&(d=f),l[d]=c[f]}),r=re&&re.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),n=re&&re.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&e(c,l,f);return r(c,l),c},i=re&&re.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.parseScalabilityMode=t.detectDevice=t.Device=t.version=t.types=void 0;const o=i(So);t.debug=o.default;const s=ts;Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return s.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return s.detectDevice}});const a=n(hA);t.types=a,t.version="3.6.72";var u=ss;Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return u.parse}})})(Jx);var N8=class extends C6{constructor(t){super(t),this.consumers=new Map,this._turn=[],this.mediasoupDevice=null,this.sendTransport=null,this.recvTransport=null}async createMediasoupTransport(t,e){return!this.mediasoupDevice||!this.socket?void 0:await this.socket.request("createWebRtcTransport",{producing:t,consuming:e,sctpCapabilities:this.mediasoupDevice.sctpCapabilities})}async createSendTransport(){if(!this.mediasoupDevice||!this.socket)return;const t=await this.createMediasoupTransport(!0,!1),{id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}=t;this.sendTransport=this.mediasoupDevice.createSendTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:this._turn,proprietaryConstraints:yL}),this.sendTransport.on("connect",({dtlsParameters:s},a,u)=>{var l,c;(c=this.socket)==null||c.request("connectWebRtcTransport",{transportId:(l=this.sendTransport)==null?void 0:l.id,dtlsParameters:s}).then(a).catch(u)}),this.sendTransport.on("produce",async({kind:s,rtpParameters:a,appData:u},l,c)=>{var f,d;try{const{id:h}=await((d=this.socket)==null?void 0:d.request("produce",{transportId:(f=this.sendTransport)==null?void 0:f.id,kind:s,rtpParameters:a,appData:u,paused:u.type==="mic"?this.isMicPaused():!1}));l({id:h})}catch(h){c(h)}}),this.sendTransport.on("producedata",async({sctpStreamParameters:s,label:a,protocol:u,appData:l},c,f)=>{var d,h;try{const{id:p}=await((h=this.socket)==null?void 0:h.request("produceData",{transportId:(d=this.sendTransport)==null?void 0:d.id,sctpStreamParameters:s,label:a,protocol:u,appData:l}));c({id:p})}catch(p){f(p)}})}async createRecvTransport(){if(!this.mediasoupDevice||!this.socket)return;const t=await this.createMediasoupTransport(!1,!0),{id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o}=t;this.recvTransport=this.mediasoupDevice.createRecvTransport({id:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:o,iceServers:this._turn}),this.recvTransport.on("connect",({dtlsParameters:s},a,u)=>{var l,c;(c=this.socket)==null||c.request("connectWebRtcTransport",{transportId:(l=this.recvTransport)==null?void 0:l.id,dtlsParameters:s}).then(a).catch(u)})}async loadMediasoupDevice(){if(!this.socket)return;this.mediasoupDevice=new Jx.Device;const t=await this.socket.request("getRouterRtpCapabilities");await this.mediasoupDevice.load({routerRtpCapabilities:t}),G.info("mediasoupDevice loaded"),this.mediasoupDevice.canProduce("video")||G.warn("cannot produce video")}},D8=()=>{const t=navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?"safari":/(ipad)|(android(?!.*mobi))/i.test(t)?"ipad":/(tablet|playbook|silk)|(android(?!.*mobi))/i.test(t)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"mobile":"desktop"},au=(t,e)=>{window.parent.postMessage({type:"room-event",eventData:{event:t,...e}},"*")},ug={},I8={get exports(){return ug},set exports(t){ug=t}},xf={},L8={get exports(){return xf},set exports(t){xf=t}},gA=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}},B8=gA,a0=Object.prototype.toString,l0=function(t){return function(e){var r=a0.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function as(t){return t=t.toLowerCase(),function(r){return l0(r)===t}}function c0(t){return Array.isArray(t)}function Af(t){return typeof t>"u"}function F8(t){return t!==null&&!Af(t)&&t.constructor!==null&&!Af(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var vA=as("ArrayBuffer");function j8(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vA(t.buffer),e}function $8(t){return typeof t=="string"}function U8(t){return typeof t=="number"}function yA(t){return t!==null&&typeof t=="object"}function Iu(t){if(l0(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var q8=as("Date"),z8=as("File"),H8=as("Blob"),V8=as("FileList");function u0(t){return a0.call(t)==="[object Function]"}function K8(t){return yA(t)&&u0(t.pipe)}function W8(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||a0.call(t)===e||u0(t.toString)&&t.toString()===e)}var G8=as("URLSearchParams");function Q8(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function J8(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function f0(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),c0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function fg(){var t={};function e(i,o){Iu(t[o])&&Iu(i)?t[o]=fg(t[o],i):Iu(i)?t[o]=fg({},i):c0(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)f0(arguments[r],e);return t}function Y8(t,e,r){return f0(e,function(i,o){r&&typeof i=="function"?t[o]=B8(i,r):t[o]=i}),t}function X8(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Z8(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function eF(t,e,r){var n,i,o,s={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],s[o]||(e[o]=t[o],s[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function tF(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function rF(t){if(!t)return null;var e=t.length;if(Af(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var nF=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),dr={isArray:c0,isArrayBuffer:vA,isBuffer:F8,isFormData:W8,isArrayBufferView:j8,isString:$8,isNumber:U8,isObject:yA,isPlainObject:Iu,isUndefined:Af,isDate:q8,isFile:z8,isBlob:H8,isFunction:u0,isStream:K8,isURLSearchParams:G8,isStandardBrowserEnv:J8,forEach:f0,merge:fg,extend:Y8,trim:Q8,stripBOM:X8,inherits:Z8,toFlatObject:eF,kindOf:l0,kindOfTest:as,endsWith:tF,toArray:rF,isTypedArray:nF,isFileList:V8},Ps=dr;function L_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var wA=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Ps.isURLSearchParams(r))i=r.toString();else{var o=[];Ps.forEach(r,function(u,l){u===null||typeof u>"u"||(Ps.isArray(u)?l=l+"[]":u=[u],Ps.forEach(u,function(f){Ps.isDate(f)?f=f.toISOString():Ps.isObject(f)&&(f=JSON.stringify(f)),o.push(L_(l)+"="+L_(f))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},iF=dr;function qd(){this.handlers=[]}qd.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};qd.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};qd.prototype.forEach=function(e){iF.forEach(this.handlers,function(n){n!==null&&e(n)})};var oF=qd,sF=dr,aF=function(e,r){sF.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})},_A=dr;function va(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}_A.inherits(va,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var bA=va.prototype,SA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){SA[t]={value:t}});Object.defineProperties(va,SA);Object.defineProperty(bA,"isAxiosError",{value:!0});va.from=function(t,e,r,n,i,o){var s=Object.create(bA);return _A.toFlatObject(t,s,function(u){return u!==Error.prototype}),va.call(s,t.message,e,r,n,i),s.name=t.name,o&&Object.assign(s,o),s};var Ca=va,EA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_n=dr;function lF(t,e){e=e||new FormData;var r=[];function n(o){return o===null?"":_n.isDate(o)?o.toISOString():_n.isArrayBuffer(o)||_n.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function i(o,s){if(_n.isPlainObject(o)||_n.isArray(o)){if(r.indexOf(o)!==-1)throw Error("Circular reference detected in "+s);r.push(o),_n.forEach(o,function(u,l){if(!_n.isUndefined(u)){var c=s?s+"."+l:l,f;if(u&&!s&&typeof u=="object"){if(_n.endsWith(l,"{}"))u=JSON.stringify(u);else if(_n.endsWith(l,"[]")&&(f=_n.toArray(u))){f.forEach(function(d){!_n.isUndefined(d)&&e.append(c,n(d))});return}}i(u,c)}}),r.pop()}else e.append(s,n(o))}return i(t),e}var RA=lF,vp,B_;function cF(){if(B_)return vp;B_=1;var t=Ca;return vp=function(r,n,i){var o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},vp}var yp,F_;function uF(){if(F_)return yp;F_=1;var t=dr;return yp=t.isStandardBrowserEnv()?function(){return{write:function(n,i,o,s,a,u){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),t.isString(s)&&l.push("path="+s),t.isString(a)&&l.push("domain="+a),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),yp}var fF=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},dF=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},hF=fF,pF=dF,xA=function(e,r){return e&&!hF(r)?pF(e,r):r},wp,j_;function mF(){if(j_)return wp;j_=1;var t=dr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return wp=function(n){var i={},o,s,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),o=t.trim(l.substr(0,a)).toLowerCase(),s=t.trim(l.substr(a+1)),o){if(i[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([s]):i[o]=i[o]?i[o]+", "+s:s}}),i},wp}var _p,$_;function gF(){if($_)return _p;$_=1;var t=dr;return _p=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function o(s){var a=s;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(a){var u=t.isString(a)?o(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),_p}var bp,U_;function zd(){if(U_)return bp;U_=1;var t=Ca,e=dr;function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),bp=r,bp}var Sp,q_;function vF(){return q_||(q_=1,Sp=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Sp}var Ep,z_;function H_(){if(z_)return Ep;z_=1;var t=dr,e=cF(),r=uF(),n=wA,i=xA,o=mF(),s=gF(),a=EA,u=Ca,l=zd(),c=vF();return Ep=function(d){return new Promise(function(p,g){var _=d.data,m=d.headers,v=d.responseType,S;function b(){d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}t.isFormData(_)&&t.isStandardBrowserEnv()&&delete m["Content-Type"];var R=new XMLHttpRequest;if(d.auth){var j=d.auth.username||"",D=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";m.Authorization="Basic "+btoa(j+":"+D)}var N=i(d.baseURL,d.url);R.open(d.method.toUpperCase(),n(N,d.params,d.paramsSerializer),!0),R.timeout=d.timeout;function U(){if(R){var $="getAllResponseHeaders"in R?o(R.getAllResponseHeaders()):null,P=!v||v==="text"||v==="json"?R.responseText:R.response,y={data:P,status:R.status,statusText:R.statusText,headers:$,config:d,request:R};e(function(C){p(C),b()},function(C){g(C),b()},y),R=null}}if("onloadend"in R?R.onloadend=U:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(U)},R.onabort=function(){R&&(g(new u("Request aborted",u.ECONNABORTED,d,R)),R=null)},R.onerror=function(){g(new u("Network Error",u.ERR_NETWORK,d,R,R)),R=null},R.ontimeout=function(){var P=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",y=d.transitional||a;d.timeoutErrorMessage&&(P=d.timeoutErrorMessage),g(new u(P,y.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,d,R)),R=null},t.isStandardBrowserEnv()){var F=(d.withCredentials||s(N))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;F&&(m[d.xsrfHeaderName]=F)}"setRequestHeader"in R&&t.forEach(m,function(P,y){typeof _>"u"&&y.toLowerCase()==="content-type"?delete m[y]:R.setRequestHeader(y,P)}),t.isUndefined(d.withCredentials)||(R.withCredentials=!!d.withCredentials),v&&v!=="json"&&(R.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&R.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&R.upload&&R.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(S=function($){R&&(g(!$||$&&$.type?new l:$),R.abort(),R=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S))),_||(_=null);var O=c(N);if(O&&["http","https","file"].indexOf(O)===-1){g(new u("Unsupported protocol "+O+":",u.ERR_BAD_REQUEST,d));return}R.send(_)})},Ep}var Rp,V_;function yF(){return V_||(V_=1,Rp=null),Rp}var Jt=dr,K_=aF,W_=Ca,wF=EA,_F=RA,bF={"Content-Type":"application/x-www-form-urlencoded"};function G_(t,e){!Jt.isUndefined(t)&&Jt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function SF(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=H_()),t}function EF(t,e,r){if(Jt.isString(t))try{return(e||JSON.parse)(t),Jt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Hd={transitional:wF,adapter:SF(),transformRequest:[function(e,r){if(K_(r,"Accept"),K_(r,"Content-Type"),Jt.isFormData(e)||Jt.isArrayBuffer(e)||Jt.isBuffer(e)||Jt.isStream(e)||Jt.isFile(e)||Jt.isBlob(e))return e;if(Jt.isArrayBufferView(e))return e.buffer;if(Jt.isURLSearchParams(e))return G_(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=Jt.isObject(e),i=r&&r["Content-Type"],o;if((o=Jt.isFileList(e))||n&&i==="multipart/form-data"){var s=this.env&&this.env.FormData;return _F(o?{"files[]":e}:e,s&&new s)}else if(n||i==="application/json")return G_(r,"application/json"),EF(e);return e}],transformResponse:[function(e){var r=this.transitional||Hd.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Jt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?W_.from(s,W_.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yF()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Jt.forEach(["delete","get","head"],function(e){Hd.headers[e]={}});Jt.forEach(["post","put","patch"],function(e){Hd.headers[e]=Jt.merge(bF)});var d0=Hd,RF=dr,xF=d0,AF=function(e,r,n){var i=this||xF;return RF.forEach(n,function(s){e=s.call(i,e,r)}),e},xp,Q_;function AA(){return Q_||(Q_=1,xp=function(e){return!!(e&&e.__CANCEL__)}),xp}var J_=dr,Ap=AF,PF=AA(),kF=d0,TF=zd();function Pp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new TF}var CF=function(e){Pp(e),e.headers=e.headers||{},e.data=Ap.call(e,e.data,e.headers,e.transformRequest),e.headers=J_.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),J_.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||kF.adapter;return r(e).then(function(i){return Pp(e),i.data=Ap.call(e,i.data,i.headers,e.transformResponse),i},function(i){return PF(i)||(Pp(e),i&&i.response&&(i.response.data=Ap.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Br=dr,PA=function(e,r){r=r||{};var n={};function i(c,f){return Br.isPlainObject(c)&&Br.isPlainObject(f)?Br.merge(c,f):Br.isPlainObject(f)?Br.merge({},f):Br.isArray(f)?f.slice():f}function o(c){if(Br.isUndefined(r[c])){if(!Br.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function s(c){if(!Br.isUndefined(r[c]))return i(void 0,r[c])}function a(c){if(Br.isUndefined(r[c])){if(!Br.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function u(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return Br.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=l[f]||o,h=d(f);Br.isUndefined(h)&&d!==u||(n[f]=h)}),n},kp,Y_;function kA(){return Y_||(Y_=1,kp={version:"0.27.2"}),kp}var OF=kA().version,eo=Ca,h0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){h0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var X_={};h0.transitional=function(e,r,n){function i(o,s){return"[Axios v"+OF+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new eo(i(s," has been removed"+(r?" in "+r:"")),eo.ERR_DEPRECATED);return r&&!X_[s]&&(X_[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function MF(t,e,r){if(typeof t!="object")throw new eo("options must be an object",eo.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],u=a===void 0||s(a,o,t);if(u!==!0)throw new eo("option "+o+" must be "+u,eo.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new eo("Unknown option "+o,eo.ERR_BAD_OPTION)}}var NF={assertOptions:MF,validators:h0},TA=dr,DF=wA,Z_=oF,eb=CF,Vd=PA,IF=xA,CA=NF,ks=CA.validators;function ya(t){this.defaults=t,this.interceptors={request:new Z_,response:new Z_}}ya.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Vd(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&CA.assertOptions(n,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(o=o&&h.synchronous,i.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var a;if(!o){var u=[eb,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),a=Promise.resolve(r);u.length;)a=a.then(u.shift(),u.shift());return a}for(var l=r;i.length;){var c=i.shift(),f=i.shift();try{l=c(l)}catch(d){f(d);break}}try{a=eb(l)}catch(d){return Promise.reject(d)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};ya.prototype.getUri=function(e){e=Vd(this.defaults,e);var r=IF(e.baseURL,e.url);return DF(r,e.params,e.paramsSerializer)};TA.forEach(["delete","get","head","options"],function(e){ya.prototype[e]=function(r,n){return this.request(Vd(n||{},{method:e,url:r,data:(n||{}).data}))}});TA.forEach(["post","put","patch"],function(e){function r(n){return function(o,s,a){return this.request(Vd(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}ya.prototype[e]=r(),ya.prototype[e+"Form"]=r(!0)});var LF=ya,Tp,tb;function BF(){if(tb)return Tp;tb=1;var t=zd();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;this.promise.then(function(o){if(i._listeners){var s,a=i._listeners.length;for(s=0;s<a;s++)i._listeners[s](o);i._listeners=null}}),this.promise.then=function(o){var s,a=new Promise(function(u){i.subscribe(u),s=u}).then(o);return a.cancel=function(){i.unsubscribe(s)},a},r(function(s){i.reason||(i.reason=new t(s),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(s){n=s});return{token:i,cancel:n}},Tp=e,Tp}var Cp,rb;function FF(){return rb||(rb=1,Cp=function(e){return function(n){return e.apply(null,n)}}),Cp}var Op,nb;function jF(){if(nb)return Op;nb=1;var t=dr;return Op=function(r){return t.isObject(r)&&r.isAxiosError===!0},Op}var ib=dr,$F=gA,Lu=LF,UF=PA,qF=d0;function OA(t){var e=new Lu(t),r=$F(Lu.prototype.request,e);return ib.extend(r,Lu.prototype,e),ib.extend(r,e),r.create=function(i){return OA(UF(t,i))},r}var Ir=OA(qF);Ir.Axios=Lu;Ir.CanceledError=zd();Ir.CancelToken=BF();Ir.isCancel=AA();Ir.VERSION=kA().version;Ir.toFormData=RA;Ir.AxiosError=Ca;Ir.Cancel=Ir.CanceledError;Ir.all=function(e){return Promise.all(e)};Ir.spread=FF();Ir.isAxiosError=jF();L8.exports=Ir;xf.default=Ir;(function(t){t.exports=xf})(I8);const zF=Pf(ug);var HF=class extends N8{constructor(t,e,r){super(r),this.joining=!1,this.roomId=null,this.hostId=null,this.peerId=t,this.produce=!0,this._webcamProducer=null,this._shareVideoProducer=null,this._shareAudioProducer=null,this.micProducer=null,this._loading=!1,this._chatDataProducer=null,this._useDataChannel=!0,this._bot=e}get isBot(){return this._bot}async changeAvatarUrl(t){if(!this.socket)return G.error({type:"error",message:"changeAvatarUrl",error:"no socket"});try{this.setMeAvatarUrl(t),await this.socket.request("changeAvatarUrl",{avatarUrl:t})}catch(e){console.error(e)}}async sendDM(t,e,r){var n;const i=new Date;try{await((n=this.socket)==null?void 0:n.request("sendData",{type:"dm",payload:{message:t,toId:e,fromId:r,timestamp:i.toISOString()}}))}catch(o){console.error(o)}}async toggleRaiseHand(t){var e;try{await((e=this.socket)==null?void 0:e.request("sendData",{type:"raiseHand",payload:{isHandRaised:t}})),this.toggleMeHandRaise(t)}catch(r){console.error(r)}}async sendReaction(t){var e;try{await((e=this.socket)==null?void 0:e.request("sendData",{type:"reaction",payload:{reaction:t}})),this.addMeReaction(t)}catch(r){console.error(r)}}async allowLobbyPeerToJoinRoom(t){this.socket&&this.socket.request("allowRoomJoin",{peerIdToAdmit:t})}async allowAllLobbyPeersToJoinRoom(){this.socket&&this.socket.request("admitAll")}async disallowLobbyPeerFromJoiningRoom(t){this.socket&&this.socket.request("disallowRoomJoin",{peerIdToDisallow:t})}async disallowAllLobbyPeerFromJoiningRoom(){this.socket&&this.socket.request("denyAll")}async requestLobby(t,e,r){if(!this.socket)return G.error({type:"error",msg:"no socket"});const n=this.getUserGeoLocation(),i={displayName:t,avatarUrl:e,geoLocation:n},{host:o,hostState:s}=await this.socket.request("lobby",{userData:i,walletData:r});this.setHostState(s),G.info({type:"info",msg:"requestLobby()",data:{host:o,meId:this.peerId}}),this.hostId=o}async join(t,e){if(!this.joining){if(this.joining=!0,this.setSocket(t,this.peerId),!this.socket)return G.error({type:"error",msg:"join() no socket"});this.socket.on("open",async()=>{G.info({type:"info",msg:"socket open"});const r=this.getAvatarUrl();await this.requestLobby(this.getDisplayName(),r,e),this.initMe({peerId:this.peerId,displayName:this.getDisplayName(),avatarUrl:r}),this.roomId=t}),this.socket.on("failed",()=>{G.info({type:"error",text:"WebSocket connection failed/ Wrong API Key"})}),this.socket.on("disconnected",()=>{G.info({type:"error",text:"WebSocket  disconnected"})}),this.socket.on("close",()=>{var r,n;G.info({type:"error",text:"WebSocket  closed"}),(r=this.recvTransport)==null||r.close(),(n=this.sendTransport)==null||n.close(),this.disableCamStream()}),this.socket.on("request",async(r,n,i)=>{var o;const s=[],a={newConsumer:async()=>{G.info({type:"info",msg:"newConsumer",data:r.data});const{peerId:u,producerId:l,id:c,kind:f,rtpParameters:d,appData:h,producerPaused:p}=r.data;if(this.recvTransport)try{const g=await this.recvTransport.consume({id:c,producerId:l,kind:f,rtpParameters:d,appData:{...h,peerId:u}});this.consumers.set(g.id,g),g.on("transportclose",()=>{var m;G.info({type:"info",msg:"consumer transport closed",data:{consumerId:g.id,peerId:(m=g.appData)==null?void 0:m.peerId}}),this.consumers.delete(g.id),this.removeStreamFromHark(u)});const _={id:g.id,track:g.track,isPaused:p,peerId:u,appData:h};this.addConsumerMedia(u,h.type,_),h.type==="mic"&&(_.isPaused?this.pauseConsumerMedia(u,h.type):this.addStreamToHark(g.track,u)),h.type==="share"&&(G.info({type:"info",msg:"newConsumer | Screen Share Enabled",peerId:u}),this.enableScreenShare(u)),h.type==="shareAudio"&&G.info({type:"info",msg:"newConsumer | Screenshare Audio Share Enabled",peerId:u}),n(),h.type==="cam"&&this.getBandwidthSaver()&&s.push(this.pauseConsumer(c,u,"cam"))}catch(g){G.error({type:g,error:g}),s.splice(0,s.length)}}};await((o=a[r.method])==null?void 0:o.call(a)),await Promise.all(s)}),this.socket.on("notification",r=>{var n;const i={peerAvatarUrlChanged:()=>{G.info({type:"info",msg:"peerAvatarUrlChanged"});const{peerId:o,avatarUrl:s}=r.data;au("avatar-url-changed",{peerId:o,avatarUrl:s}),this.changePeerAvatarUrl(o,s)},joinRoomPermissionGranted:()=>{G.info({type:"info",msg:"joinRoomPermissionGranted"}),this.joinRoom()},joinRoomPermissionDenied:()=>{this.close("denied"),G.info({type:"info",msg:"joinRoomPermissionDenied"})},roomClosedByHost:()=>{this.close("closedByHost"),G.info({type:"info",msg:"roomClosedByHost"})},kickedByHost:()=>{this.close("kicked"),G.info({type:"info",msg:"kickedByHost"})},newLobbyPeer:()=>{const o=r.data;this.addLobbyPeer(o.lobbyPeers),G.info({type:"info",msg:"newLobbyPeer",data:r.data})},newPeer:()=>{const o=r.data;if(o.id==="recorder_bot"){G.info({type:"info",message:"Recorder Bot has entered the room...",meta:{peerId:o.id}});return}const s={peerId:o.id,displayName:o.displayName,avatarUrl:o.avatarUrl,isMicPaused:!0,isCamPaused:!0,isSharePaused:!0,isHandRaised:!1,reaction:o.reaction};au("peer-join",s),this.setScreenShareLayout(this.isBot,"sideBarGridView"),this.addPeer(o.id,s),this.addPeerPort(o.id),this.getSpaceLeftInViewport()>0&&this.addPeerViewPort(o.id),G.info({type:"info",msg:"newPeer",data:r.data}),this.setNotificationSounds("peerJoin")},peerClosed:()=>{const{peerId:o}=r.data;o!=="recorder_bot"&&(this.removeChat(o),this.removePeerViewPort(o),this.getSpaceLeftInViewport()>0&&this.isLastNActive()&&this.deactivateLastN(),this.removePeerPort(o),this.removePeer(o),this.setScreenShareLayout(this.isBot,"sideBarView"),au("peer-left",{peerId:o}),G.info({type:"info",msg:"peerClosed",data:r.data}),this.setNotificationSounds("peerLeave"),this.removeStreamFromHark(o))},updatedPeersArray:()=>{const o=r.data;this.addLobbyPeer(o.lobbyPeers),G.info({type:"info",msg:"updatedPeersArray",data:r.data})},consumerClosed:()=>{const{consumerId:o}=r.data,s=this.consumers.get(o);if(G.info({type:"info",msg:"consumerClosed",consumer:s}),!s)return;const{appData:{type:a,peerId:u}}=s;a==="share"&&(G.info({type:"info",msg:"newConsumer | Screen Share Disabled",peerId:u}),this.disableScreenShare("grid")),a==="mic"&&this.removeStreamFromHark(u),s.close(),this.consumers.delete(o),this.removeConsumerMedia(u,a)},consumerPaused:()=>{const{consumerId:o}=r.data,s=this.consumers.get(o);if(!s)return;const{appData:{type:a,peerId:u}}=s;G.info({type:"info",msg:"consumerPaused",consumer:s}),s.pause(),a==="mic"&&(this.pauseConsumerMedia(u,a),this.removeStreamFromHark(u))},consumerResumed:()=>{const{consumerId:o}=r.data,s=this.consumers.get(o);if(!s)return;const{appData:{type:a,peerId:u}}=s;G.info({type:"info",msg:"consumerResumed",consumer:s}),s.resume(),a==="mic"&&(this.resumeConsumerMedia(u,a),this.addStreamToHark(s.track,u))},"recording-started":()=>{this.setStartRecording(),this.toggleRecording(!0),this.setNotifyRecording("started",!0),G.info({type:"info",msg:"recording-started"})},"recording-stopped":()=>{this.setStopRecording(),this.toggleRecording(!1),this.setNotifyRecording("finished",!0),G.info({type:"info",msg:"recording-stopped"})},recordingUrl:()=>{const{s3URL:o,ipfsURL:s,size:a,duration:u,uploadToIpfs:l}=r.data;G.info({type:"info",msg:"recording-stopped",s3URL:o,ipfsURL:s,uploadToIpfs:l}),this.updateRecording({url:o,duration:u,size:a,uploadToIpfs:!!l})},getAllRecordings:()=>{const o=r.data;G.info("Got all recordings"),G.info({recordingURls:o}),this.setRecordings(o)},"disabled-last-N":()=>{const o=this.getPeerIds();G.info({type:"info",msg:"disabled-last-N",meta:{peerIds:o}}),this.isLastNActive()&&this.deactivateLastN()},"updated-last-N":()=>{const{lastNPeers:o,mostInactivePeerIdInLastN:s}=r.data,a=this.peerId,u=o.includes(a)?o.filter(l=>l!==a):o.filter(l=>s?l!==s:o[o.length-1]!==l);G.info({type:"info",msg:"updated-last-N | Updaing with new lastNPeers"}),this.isLastNActive()||this.activateLastN(),this.setActiveViewPort(u)},"updated-network-strength":()=>{const{networkStrength:o}=r.data;this.setNetworkStats(o)},receiveData:()=>{const{type:o,payload:s}=r.data;if(o==="dm"){const{toId:a,fromId:u,message:l,timestamp:c}=s;if(a==="mainRoom")this.setChat(l,"mainRoom",u,c),u!==this.peerId&&this.increaseUnread("mainRoom");else{const f=u;this.setChat(l,f,u,c),this.increaseUnread(u)}u!==this.peerId&&this.setNotificationSounds("chat")}if(o==="reaction"){const{peerId:a,reaction:u}=s;this.peerId!==a&&this.addReaction(a,u)}if(o==="raiseHand"){const{peerId:a,isHandRaised:u}=s;this.togglePeerHandRaise(a,u)}if(o==="sharedFile"){const a=new Date,{peerId:u,fileDetails:l}=s;this.addSharedFile(l),this.setChat("I've shared a file, please check it out from shared files tab.","mainRoom",u,a.toISOString()),this.increaseUnread("mainRoom")}},enabledHostControls:()=>{const{type:o}=r.data;({enableHostOnlyVideo:()=>{this.setSingleHostControl("allowVideo",!1)},enableHostOnlyAudio:()=>{this.setSingleHostControl("allowAudio",!1)},enableHostOnlyScreenShare:()=>{this.setSingleHostControl("allowScreenShare",!1)},enableHostOnlyChat:()=>{this.setSingleHostControl("allowChat",!1)}})[o]()},disabledHostControls:()=>{const{type:o}=r.data;({disableHostOnlyVideo:()=>{this.setSingleHostControl("allowVideo",!0)},disableHostOnlyAudio:()=>{this.setSingleHostControl("allowAudio",!0)},disableHostOnlyScreenShare:()=>{this.setSingleHostControl("allowScreenShare",!0)},disableHostOnlyChat:()=>{this.setSingleHostControl("allowChat",!0)}})[o]()},hostIs:()=>{const{hostId:o}=r.data;G.info({type:"info",msg:"hostIs"}),this.setHost(o)},updatedCoHosts:()=>{const{coHosts:o}=r.data;G.info({type:"info",msg:"updatedCoHosts"}),this.setCoHosts(o)},muteMe:()=>{this.muteMic()},disableMyCam:()=>{this.disableWebcam()},stopScreenShare:()=>{this.disableShare()},streamStarted:()=>{const{stream:o,platform:s}=r.data;if(G.info("stream started",{stream:o}),o.id){const a={isLive:!0,isLoading:!1,url:`https://livepeer.huddle01.com/livestream?streamId=${o.id}`};this.setStreamData(s,a),this.setStreamPlatform(s)}},streamStopped:()=>{const{platform:o}=r.data;G.info("stream started"),this.stopStreaming(o)},recordingOrStreamingError:()=>{const{type:o}=r.data;o=="record"&&this.setRecordingEnded(),o=="stream"&&this.stopStreaming("livepeer")},"room-lock-state":()=>{const{isRoomLocked:o}=r.data;this.setRoomLockState(o)},downlinkBwe:()=>{G.info("downlinkBwe event :",r.data)}};(n=i[r.method])==null||n.call(i)})}}async joinRoom(){if(this.socket)try{if(await this.loadMediasoupDevice(),!this.mediasoupDevice)return;try{const{data:g}=await zF.get("https://jbzp43rb25.execute-api.ap-south-1.amazonaws.com/turn"),m=g.servers.map(({url:v,...S})=>({...S,urls:v}));this._turn=m||[]}catch(g){G.error("error fetching turn servers",g)}this.isBot||await this.createSendTransport(),await this.createRecvTransport();const t=await this.socket.request("join",{displayName:this.getDisplayName(),rtpCapabilities:this.mediasoupDevice.rtpCapabilities,sctpCapabilities:this.mediasoupDevice.sctpCapabilities,avatarUrl:this.getAvatarUrl(),device:{device:D8(),name:this.mediasoupDevice.handlerName}}),{peers:e,roomId:r,hostId:n,coHostIds:i,createdAt:o,isRoomLocked:s,isRecordingOrStreaming:a,typeOfStreamingOrRecording:u,streamId:l,sharedFiles:c,hostControls:f,streamingPlatform:d}=t;e.forEach(g=>{if(g.id!=="recorder_bot"){const _={peerId:g.id,displayName:g.displayName,avatarUrl:g.avatarUrl,isMicPaused:!0,isCamPaused:!0,isSharePaused:!0,isHandRaised:!1,reaction:g.reaction};this.addPeer(g.id,_),this.addPeerPort(g.id)}}),f.allowVideo||(this.toggleProducerMedia("cam","off"),await this.disableAllCamStreams()),!this.getProducerState("cam")&&f.allowVideo&&await this.enableWebcam();const h=this.isMicPaused();if(await this.enableMic(),(!f.allowAudio||h)&&(this.toggleProducerMedia("mic","off"),await this.muteMic()),this.initHostControls(n,this.peerId,f,i),this.setRoomId(r),this.setRoomLockState(s),this.setActiveViewPortForNewPeer(),this.setCreatedAt(o),d){const g={isLive:!0,isLoading:!1,url:`https://livepeer.huddle01.com/livestream?streamId=${l}`};this.setStreamData(d,g),this.setStreamPlatform(d)}this.setSharedFiles(c),a&&(u=="record"&&this.toggleRecording(!0),n===this.peerId&&this.setStartRecording());const p=this.isBot?3:2;this.getPeerIds().length>p&&this.setLayoutView("sideBarGridView"),this.setJoined()}catch(t){G.error({type:"error",error:t,message:"Couldn't join room",loc:"RoomProvider.tsx -> joinRoom()"})}}async enableWebcam(t=!0){const e=this.getProducerState("cam"),n=/([da-z.-]+).huddle01.com$/.test(window.location.hostname);console.log({isHuddleApp:n});try{(e&&t||!n)&&(console.log("ldaaa"),this.disableCamStream(),await this.enableCamStream(),console.log("2ldaaa"));const i=this.getCamStream();if(!i){G.error({type:"error",msg:"enableWebcam() | No Stream Enabled"});return}if(!this.sendTransport)return;const o=i.getVideoTracks()[0];let s;const a={videoGoogleStartBitrate:1e3};!0&&(s=wL),this._webcamProducer=await this.sendTransport.produce({track:o,encodings:s,codecOptions:a,appData:{type:"cam",share:!1}});const l={id:this._webcamProducer.id,track:this._webcamProducer.track,isPaused:!1,peerId:this.peerId,appData:{type:"cam",peerId:this.peerId}};this.addProducerMedia("cam",l),G.info({type:"info",msg:"enableWebcam",webcamProducer:this._webcamProducer}),this._webcamProducer.on("transportclose",async()=>{G.info({type:"info",msg:"enableWebcam | transportclose",webcamProducer:this._webcamProducer}),this.removeProducerMedia("cam"),this.toggleFigmentStream("disable"),await og(),this._webcamProducer=null}),this._webcamProducer.on("trackended",async()=>{G.info({type:"info",msg:"enableWebcam | trackended",webcamProducer:this._webcamProducer}),G.info({type:"error",text:"Webcam disconnected!"}),this.disableWebcam().catch(()=>{})}),G.info({type:"info",msg:"Webcam enabled",webcamProducer:this._webcamProducer})}catch(i){G.error({type:"error",error:i})}}async disableWebcam(t=!0){var e;if(!this.socket){this.disableCamStream(),G.debug({type:"debug",msg:"disableWebcam() | No socket"});return}if(!this._webcamProducer){G.info({type:"info",msg:"disableWebcam | No Producer"});return}G.info("webcamProducer is on"),(e=this._webcamProducer.track)==null||e.stop(),this._webcamProducer.close(),this.removeProducerMedia("cam");try{await this.socket.request("closeProducer",{producerId:this._webcamProducer.id}),this._webcamProducer=null,t&&(this.toggleFigmentStream("disable"),await og(),G.info({type:"info",msg:"disableWebcam | figment disabled"})),this.disableCamStream();const r=this.getCamStream();r&&G.info({type:"info",msg:"disableWebcam | stream Still Enabled",stream:r}),G.info("server closed producer")}catch(r){G.error({type:"error",text:`Error closing server-side webcam Producer: ${r}`})}}async changeWebcam(t){if(!this._loading){this._loading=!0,t&&this.setMediaDevice(t);try{await this.disableWebcam(),await this.enableWebcam()}catch(e){G.error({type:"error",msg:"changeWebcam()",error:e})}this._loading=!1}}async pauseVideo(){if(G.info({msg:"pauseVideo()",_webcamProducer:this._webcamProducer,this:this}),!!this.socket&&(this.produce=!1,!!this._webcamProducer)){this._webcamProducer.pause();try{await this.socket.request("pauseProducer",{producerId:this._webcamProducer.id}),this._webcamProducer!==null&&this.removeProducerMedia("cam")}catch(t){G.error({type:"error",text:`Error pausing server-side webcam Producer: ${t}`})}}}async disableMic(){if(!(!this.micProducer||!this.socket)){this.micProducer.close(),G.info({type:"info",text:"disableMic()"}),this.removeStreamFromHark(this.peerId);try{await this.socket.request("closeProducer",{producerId:this.micProducer.id}),this.removeProducerMedia("mic")}catch(t){G.error({type:"error",text:`Error closing server-side mic Producer: ${t}`})}this.micProducer=null}}async enableMic(){if(!(!this.mediasoupDevice||!this.sendTransport))try{this.disableMicStream(),this.removeStreamFromHark(this.peerId),await this.enableMicStream();const t=this.getMicStream();if(G.info({micstream:t}),!t){G.error({type:"error",msg:"enableMic() | No Stream Enabled"});return}const e=t.getAudioTracks()[0];e.onended=async()=>{G.error({type:"error",msg:"enableMic() | track ended"}),await this.disableMic().catch(()=>{})},this.addStreamToHark(e,this.peerId),this.micProducer=await this.sendTransport.produce({track:e,appData:{type:"mic",share:!1}});const r={id:this.micProducer.id,track:this.micProducer.track,isPaused:!1,peerId:this.peerId,appData:{type:"mic",peerId:this.peerId}};this.micProducer!==null&&this.addProducerMedia("mic",r),this.micProducer.on("transportclose",()=>{this.micProducer=null}),this.micProducer.on("trackended",async()=>{G.info({type:"error",text:"Microphone disconnected!"});try{await this.disableMic(),await this.enableMic()}catch{alert("error in switching audio input sources, please refresh your tab")}})}catch(t){G.error({type:"error | enableMic() ",error:t})}}async changeMic(t){if(!this._loading){this._loading=!0,t&&this.setAudioDevice(t);try{await this.disableMic(),await this.enableMic(),await this.unmuteMic()}catch(e){G.error({type:"error",msg:"changeMic()",error:e})}finally{this._loading=!1}}}async muteMic(){if(G.info({msg:"muteMic()",this:this}),!!this.socket&&this.micProducer){this.micProducer.pause();try{await this.socket.request("pauseProducer",{producerId:this.micProducer.id}),this.micProducer!==null&&this.toggleProducerMedia("mic","off")}catch(t){G.info("muteMic() | failed: %o",t)}}}async unmuteMic(){if(G.info({msg:"unmuteMic()",this:this}),!this.socket){G.info("unmuteMic() | no socket");return}if(!this.micProducer){G.info({type:"info",msg:"unmuteMic() | micProducer is null enabling mic"}),await this.enableMic();return}this.micProducer.resume();try{await this.socket.request("resumeProducer",{producerId:this.micProducer.id}),this.micProducer!==null&&this.toggleProducerMedia("mic","on")}catch(t){G.info("unmuteMic() | failed: %o",t)}}async enableShare(){if(!this.mediasoupDevice||!this.sendTransport){G.error("enableShare() | cannot produce audio");return}if(!this.mediasoupDevice.canProduce("video")){G.error("enableShare() | cannot produce video");return}let t=null,e=null;try{let r={video:{displaySurface:"monitor",logicalSurface:!0,cursor:!0,width:{max:1920},height:{max:1080},frameRate:{max:30}},audio:{echoCancellation:!0,noiseSuppression:!0}};const n=await navigator.mediaDevices.getDisplayMedia(r);t=n.getVideoTracks()[0],e=n.getAudioTracks()[0],this._shareVideoProducer=await this.sendTransport.produce({track:t,appData:{type:"share",share:!0}}),e&&(this._shareAudioProducer=await this.sendTransport.produce({track:e,appData:{type:"shareAudio",share:!0}}));const i={id:this._shareVideoProducer.id,peerId:this.peerId,track:this._shareVideoProducer.track,isPaused:this._shareVideoProducer.paused,appData:{type:"share",peerId:this.peerId}};if(this._shareVideoProducer!==null&&this.addProducerMedia("share",i),this._shareAudioProducer!==null){const o={id:this._shareAudioProducer.id,peerId:this.peerId,track:this._shareAudioProducer.track,isPaused:this._shareAudioProducer.paused,appData:{type:"shareAudio",peerId:this.peerId}};this.addProducerMedia("shareAudio",o),G.info({type:"info",msg:"Share Audio enabled",shareVideoProducer:this._shareAudioProducer,shareAudioProd:o})}this._shareVideoProducer.on("transportclose",async()=>{await this.disableShare()}),this._shareVideoProducer.on("trackended",async()=>{G.info({type:"error",text:"shareScreen Disconnected!"});try{await this.disableShare()}catch{alert("error in switching audio input sources, please refresh your tab")}}),G.info({type:"info",msg:"Share enabled",shareProducer:this._shareVideoProducer}),this.enableScreenShare(this.peerId)}catch(r){t&&(t.stop(),this.disableScreenShare("grid")),G.error({type:"error",error:r})}}async disableShare(){if(!(!this._shareVideoProducer||!this.socket)){this._shareVideoProducer.close(),this.removeProducerMedia("share"),this._shareAudioProducer!==null&&(this._shareAudioProducer.close(),this.removeProducerMedia("shareAudio"));try{await this.socket.request("closeProducer",{producerId:this._shareVideoProducer.id}),G.info("closed server side share producer"),this._shareAudioProducer&&(await this.socket.request("closeProducer",{producerId:this._shareAudioProducer.id}),G.info("closed server side audio share producer")),G.info({type:"info",msg:"Share disabled",shareProducer:this._shareVideoProducer}),this.disableScreenShare("grid")}catch(t){G.error({type:"error",text:`Error closing server-side share Producer: ${t}`})}this._shareVideoProducer=null,this._shareAudioProducer=null}}async emailRecording(t,e){if(this.socket)try{await this.socket.request("emailRecordingUrl",{to:t,url:e})}catch(r){G.error({type:"error",text:`Error emailing recording url: ${r}`})}}async getClientNetworkStats(){var t,e,r,n;if(G.debug("getClientNetworkStats()"),!this.socket)return;const i=await this.socket.request("getClientNetworkStats",{audioProducerId:((t=this.micProducer)==null?void 0:t.id)||"",videoProducerId:((e=this._webcamProducer)==null?void 0:e.id)||"",sendTransportId:((r=this.sendTransport)==null?void 0:r.id)||"",recvTransportId:((n=this.recvTransport)==null?void 0:n.id)||""});return G.info({stats:i}),i}async handleEnableHostControl(t,e){if(this.socket)try{await this.socket.request("handleEnableHostControl",{control:t}),this.setSingleHostControl(e,!1)}catch(r){G.error({type:"error",text:`Error enabling host control: ${r}`})}}async handleDisableHostControl(t,e){if(this.socket)try{G.info("huddlecliend handledisable",{control:t}),await this.socket.request("handleDisableHostControl",{control:t}),this.setSingleHostControl(e,!0)}catch(r){G.error({type:"error",text:`Error disabling host control: ${r}`})}}async makeACohost(t){if(this.socket)try{await this.socket.request("makeACoHost",{coHostId:t})}catch(e){G.error({type:"error",text:`Error making a cohost: ${e}`})}}async removeACohost(t){if(this.socket)try{await this.socket.request("removeACoHost",{coHostId:t})}catch(e){G.error({type:"error",text:`Error making a cohost: ${e}`})}}async kickPeerFromRoom(t){if(this.socket)try{await this.socket.request("kickPeerFromRoom",{peerIdToKick:t})}catch(e){G.error({type:"error",text:`Error kicking peer from room: ${e}`})}}async closeRoomForEverybody(){if(this.socket)try{await this.socket.request("closeRoomForEverybody"),this.close()}catch(t){G.error({type:"error",text:`Error closeRoomForEverybody: ${t}`})}}async disablePeerMic(t){if(this.socket)try{await this.socket.request("mutePeer",{peerId:t})}catch(e){G.error({type:"error",text:`Error mutePeer: ${e}`})}}async disablePeerCam(t){if(this.socket)try{await this.socket.request("disablePeerCam",{peerId:t})}catch(e){G.error({type:"error",text:`Error disablePeerCam: ${e}`})}}async muteEveryone(){if(this.socket)try{await this.socket.request("muteEveryone")}catch(t){throw new Error(`Cant mute everyone ${t}`)}}async toggleRoomLock(){if(this.socket)try{await this.socket.request("toggleRoomLock",{state:!this.getRoomLockState()})}catch(t){throw new Error(`Cant toggle room lock ${t}`)}}async pauseConsumer(t,e,r){if(!(!this.consumers.has(t)||!this.socket))try{const n=this.consumers.get(t);if(!n)return;this.socket.request("pauseConsumer",{consumerId:t}),n.pause(),this.pauseConsumerMedia(e,r)}catch(n){G.error({type:"error",text:`Error pausing consumer ${n}`})}}async resumeConsumer(t,e,r){if(!(!this.consumers.has(t)||!this.socket))try{const n=this.consumers.get(t);if(!n)return;this.socket.request("resumeConsumer",{consumerId:t}),n.resume(),this.resumeConsumerMedia(e,r)}catch(n){G.error({type:"error",text:`Error pausing consumer ${n}`})}}async toggleBandwidthSaver(t){const e=[];Object.entries(this.getParticipants()).forEach(([r,n])=>{var i;n.consumers&&((i=n.consumers.cam)!=null&&i.id)&&e.push(t?this.pauseConsumer(n.consumers.cam.id,r,"cam"):this.resumeConsumer(n.consumers.cam.id,r,"cam"))}),await Promise.all(e)}close(t){this.socket&&(this.setDropState(t||"left"),this.socket.close(),au("me-left",{peerId:this.peerId}))}},VF="0123456789",KF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",WF="!$%^&*()_+|~-=`{}[]:;<>?,./";function GF(t){return t||(t={}),{length:t.length||8,numeric:typeof t.numeric=="boolean"?t.numeric:!0,letters:typeof t.letters=="boolean"?t.letters:!0,special:typeof t.special=="boolean"?t.special:!1,exclude:Array.isArray(t.exclude)?t.exclude:[]}}function QF(t){var e="";t.numeric&&(e+=VF),t.letters&&(e+=KF),t.special&&(e+=WF);for(var r=0;r<=t.exclude.length;r++)e=e.replace(t.exclude[r],"");return e}var JF=function(e){e=GF(e);var r,n,i="",o=e.length;e.exclude;var s=QF(e);for(r=1;r<=o;r++)i+=s.substring(n=Math.floor(Math.random()*s.length),n+1);return i},Rl,YF=(t,e=!1)=>{const r=e?"recorder_bot":JF({length:10});return Rl=new HF(r,e,t),console.log({hc:Rl}),Rl},XF=(t,e=!1)=>(Rl||YF(t,e),Rl);const ZF=({peerIdAtIndex:t})=>{var s,a;const e=ge.useRef(null),r=ge.useRef(null),n=(s=Ef(ge.useCallback(u=>{var l,c;return(c=(l=u.peers[t])==null?void 0:l.consumers)==null?void 0:c.cam},[t])))==null?void 0:s.track,i=(a=Ef(ge.useCallback(u=>{var l,c;return(c=(l=u.peers[t])==null?void 0:l.consumers)==null?void 0:c.mic},[t])))==null?void 0:a.track,o=u=>{const l=new MediaStream;return l.addTrack(u),l};return ge.useEffect(()=>{const u=e.current;return u&&n&&(u.load(),u.srcObject=o(n),u.play().catch(l=>{console.log({message:"Error playing video",meta:{err:l}})})),()=>{u&&(u==null||u.pause(),u.srcObject=null)}},[n]),ge.useEffect(()=>{i&&r.current&&(r.current.srcObject=o(i))},[i]),vt("div",{style:{width:"50%"},children:[_e("video",{ref:e,muted:!0,autoPlay:!0,playsInline:!0,style:{width:"100%"}}),_e("audio",{ref:r,autoPlay:!0,playsInline:!0,controls:!1})]})};On.memo(ZF);class ej extends On.Component{constructor(r){super(r);Oa(this,"timeout");Oa(this,"socket",Sl.connect("http://localhost:3000"));Oa(this,"ctx");Oa(this,"isDrawing",!1);this.socket.emit("join-room",this.props.meetingId),this.socket.emit("get-canvas",this.props.meetingId),this.socket.once("load-canvas",function(n){var i=this,o=setInterval(function(){if(!i.isDrawing){i.isDrawing=!0,clearInterval(o);var s=document.querySelector("#board"),a=s.getContext("2d"),u=new Image;u.onload=function(){a.drawImage(u,0,0),i.isDrawing=!1},u.src=n}},200)}),this.socket.on("canvas-data",function(n){var i=this,o=setInterval(function(){if(!i.isDrawing){i.isDrawing=!0,clearInterval(o);var s=new Image,a=document.querySelector("#board"),u=a.getContext("2d");s.onload=function(){u.drawImage(s,0,0),i.isDrawing=!1},s.src=n}},200)})}componentDidMount(){this.drawOnCanvas()}componentWillReceiveProps(r){this.ctx.strokeStyle=r.color,this.ctx.lineWidth=r.size}drawOnCanvas(){var r=document.querySelector("#board");this.ctx=r.getContext("2d");var n=this.ctx,i=document.querySelector("#sketch"),o=getComputedStyle(i);r.width=parseInt(o.getPropertyValue("width")),r.height=parseInt(o.getPropertyValue("height"));var s={x:0,y:0},a={x:0,y:0};r.addEventListener("mousemove",function(c){a.x=s.x,a.y=s.y,s.x=c.pageX-this.offsetLeft,s.y=c.pageY-this.offsetTop},!1),n.lineWidth=this.props.size,n.lineJoin="round",n.lineCap="round",n.strokeStyle=this.props.color,r.addEventListener("mousedown",function(c){r.addEventListener("mousemove",l,!1)},!1),r.addEventListener("mouseup",function(){r.removeEventListener("mousemove",l,!1)},!1);var u=this,l=function(){n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(s.x,s.y),n.closePath(),n.stroke(),u.timeout!=null&&clearTimeout(u.timeout),u.timeout=setTimeout(function(){var c=r.toDataURL("image/png");u.socket.emit("canvas-data",c)},1e3)}}render(){return _e("div",{class:"sketch",id:"sketch",children:_e("canvas",{className:"board",id:"board"})})}}class tj extends On.Component{constructor(e){super(e),console.log("Props",e),this.state={color:"#000000",size:"5"}}changeColor(e){this.setState({color:e.target.value})}changeSize(e){this.setState({size:e.target.value})}render(){return vt("div",{className:"container",children:[vt("div",{class:"tools-section",children:[vt("div",{className:"color-picker-container",children:["Select Brush Color : ",_e("input",{type:"color",value:this.state.color,onChange:this.changeColor.bind(this)})]}),vt("div",{className:"brushsize-container",children:["Select Brush Size : ",vt("select",{value:this.state.size,onChange:this.changeSize.bind(this),children:[_e("option",{children:" 5 "}),_e("option",{children:" 10 "}),_e("option",{children:" 15 "}),_e("option",{children:" 20 "}),_e("option",{children:" 25 "}),_e("option",{children:" 30 "})]})]})]}),_e("div",{class:"board-container",children:_e(ej,{color:this.state.color,size:this.state.size,documentId:this.props.documentId,meetingId:this.props.meetingId})})]})}}const rj=()=>{const{id:t}=lT(),[e,r]=ge.useState(!0),n=XF("2cb67b5aff41dc9a61409cb63d7414c64e2a070723e82b362a1dba20b93c0af7"),i=Ef(o=>o.roomState);return Ef(o=>Object.keys(o.peers)),ge.useEffect(()=>{setTimeout(async()=>{await n.join(t,{address:"0x15900c698ee356E6976e5645394F027F0704c8Eb",wallet:"",ens:"axit.eth"}),console.log("ROOM-STATE",i),r(!1)},3e3)},[]),_e(On.Fragment,{children:!e&&vt(On.Fragment,{children:[_e(DI,{documentId:"123",meetingId:t}),_e(tj,{documentId:"123",meetingId:t})]})})},nj=bT(uf(vt(Yi,{path:"/",children:[_e(Yi,{path:"join",element:_e(AN,{})}),_e(Yi,{path:"create",element:_e(I1,{})}),_e(Yi,{path:"meeting/:id",element:_e(rj,{}),errorElement:_e(qy,{})}),_e(Yi,{path:"my-meetings",element:_e(I1,{})}),_e(Yi,{path:"dashboard",element:_e(_N,{})}),_e(Yi,{path:"",element:_e(qy,{})})]})));Np.createRoot(document.getElementById("root")).render(_e(On.StrictMode,{children:_e(yT,{router:nj})}));
